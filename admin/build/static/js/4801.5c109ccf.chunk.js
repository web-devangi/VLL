"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4801],{89281:(e,t,s)=>{s.d(t,{h:()=>i});var n=s(47313),a=s(12279),l=s.n(a),r=s(74294),u=s(72652),o=s(46417);const i=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:a,refetchOptions:i=!1,...c}=e;const[d,m]=(0,n.useState)(!1),[p,h]=(0,n.useState)([]),v=(0,n.useMemo)((()=>l()((e=>{h([]),m(!0),t(e).then((e=>{h(e),m(!1)}))}),s)),[t,s]);return(0,o.jsx)(r.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:v,onClear:()=>{v(""),a&&a()},notFoundContent:d?(0,o.jsx)(u.Z,{size:"small"}):"no results",...c,options:p,onFocus:()=>{p.length&&!i||v("")}})}},24801:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});s(47313);var n=s(97890),a=s(23560),l=s(10976),r=s(77181),u=s(2717),o=s(90954),i=s(24511),c=s(96708),d=s(73346),m=s(77397),p=s(46417);const h=()=>{const{t:e}=(0,i.$)(),{activeMenu:t}=(0,u.v9)((e=>e.menu),u.wU),[s]=l.Z.useForm(),h=(0,u.I0)(),v=(0,n.s0)();return(0,p.jsx)(r.Z,{title:e("add.bonus"),className:"h-100",children:(0,p.jsx)(m.Z,{form:s,handleSubmit:s=>{const n="seller/bonus/product";return d.Z.create(s).then((()=>{a.Am.success(e("successfully.created")),(0,u.dC)((()=>{h((0,o.ph)({...t,nextUrl:n})),h((0,c.k)({}))})),v("/".concat(n))}))}})})}},77397:(e,t,s)=>{s.d(t,{Z:()=>Z});var n=s(47313),a=s(24511),l=s(2717),r=s(10976),u=s(68197),o=s(59624),i=s(16124),c=s(99096),d=s(86345),m=s(59491),p=s(89281),h=s(18333),v=s(90954),x=s(70816),b=s.n(x),j=s(46417);function Z(e){let{form:t,handleSubmit:s}=e;const{t:x}=(0,a.$)(),{activeMenu:Z}=(0,l.v9)((e=>e.menu),l.wU),k=(0,l.I0)(),[f,y]=(0,n.useState)(!1),q=e=>{const t={search:e,page:1,perPage:20};return h.Z.getStock(t).then((e=>{let{data:t}=e;return null===t||void 0===t?void 0:t.map((e=>{var t,s,n,a;return{label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(s=t.translation)||void 0===s?void 0:s.title)+"".concat((null===e||void 0===e||null===(n=e.extras)||void 0===n?void 0:n.length)>0?": ".concat(null===e||void 0===e||null===(a=e.extras)||void 0===a?void 0:a.map((e=>{var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.value})).join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))};(0,n.useEffect)((()=>()=>{const e=t.getFieldsValue(!0),s={...e,expired_at:null===e||void 0===e?void 0:e.expired_at};k((0,v.nc)({activeMenu:Z,data:s}))}),[]);return(0,j.jsxs)(r.Z,{form:t,name:"product_bonus_form",layout:"vertical",onFinish:e=>{var t,n;y(!0);const a={stock_id:null===(t=e.stock)||void 0===t?void 0:t.value,value:e.stock_quantity,bonus_stock_id:null===(n=e.bonus_stock)||void 0===n?void 0:n.value,bonus_quantity:e.bonus_stock_quantity,expired_at:b()(e.expired_at).format("YYYY-MM-DD"),status:e.status,type:"count"};s(a).finally((()=>y(!1)))},initialValues:{status:!0,...Z.data},children:[(0,j.jsxs)(u.Z,{gutter:12,children:[(0,j.jsx)(o.Z,{span:12,children:(0,j.jsx)(r.Z.Item,{label:x("products.stock"),name:"stock",rules:[{required:!0,message:x("required")}],children:(0,j.jsx)(p.h,{fetchOptions:q,placeholder:x("select.product.stock")})})}),(0,j.jsx)(o.Z,{span:12,children:(0,j.jsx)(r.Z.Item,{label:x("product.stock.quantity"),name:"stock_quantity",rules:[{required:!0,message:x("required")},{type:"number",min:0,message:x("must.be.greater.than.0")}],children:(0,j.jsx)(i.Z,{className:"w-100",placeholder:x("input.product.stock.quantity")})})}),(0,j.jsx)(o.Z,{span:12,children:(0,j.jsx)(r.Z.Item,{label:x("bonus.product.stock"),name:"bonus_stock",rules:[{required:!0,message:x("required")}],children:(0,j.jsx)(p.h,{fetchOptions:q,placeholder:x("select.product.stock")})})}),(0,j.jsx)(o.Z,{span:12,children:(0,j.jsx)(r.Z.Item,{label:x("bonus.product.stock.quantity"),name:"bonus_stock_quantity",rules:[{required:!0,message:x("required")},{type:"number",min:0,message:x("must.be.greater.than.0")}],children:(0,j.jsx)(i.Z,{className:"w-100",placeholder:x("input.bonus.product.stock.quantity")})})}),(0,j.jsx)(o.Z,{span:12,children:(0,j.jsx)(r.Z.Item,{label:x("expired.at"),name:"expired_at",rules:[{required:!0,message:x("required")}],children:(0,j.jsx)(c.Z,{className:"w-100",placeholder:x("select.expired.at"),disabledDate:e=>b()().add(-1,"days")>=e})})}),(0,j.jsx)(o.Z,{span:8,children:(0,j.jsx)(r.Z.Item,{label:x("active"),name:"status",valuePropName:"checked",children:(0,j.jsx)(d.Z,{})})})]}),(0,j.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,j.jsx)("div",{className:"pb-5",children:(0,j.jsx)(m.Z,{type:"primary",htmlType:"submit",loading:f,children:x("submit")})})})]})}}}]);