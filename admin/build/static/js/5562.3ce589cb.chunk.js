"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5562],{41481:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(1413),a=n(29439),i=n(45987),l=n(47313),o=n(66672),s=n(16031),c=n(40765),u=n(46417),d=["handleChange","defaultValue","resetSearch"];function f(e){var t=e.handleChange,n=e.defaultValue,f=e.resetSearch,m=(0,i.Z)(e,d),Z=(0,l.useState)(n),p=(0,a.Z)(Z,2),h=p[0],v=p[1],x=(0,l.useMemo)((function(){return(0,s.debounce)((function(e){t(e)}),800)}),[]);return(0,l.useEffect)((function(){v(n)}),[f]),(0,u.jsx)(o.Z,(0,r.Z)({value:h,onChange:function(e){v(e.target.value),x(e.target.value)},prefix:(0,u.jsx)(c.Z,{})},m))}},38702:function(e,t,n){var r=n(34344),a=n(81333),i={getAll:function(e){return r.Z.get("dashboard/admin/translations/paginate",{params:e})},delete:function(e){return r.Z.delete("https://api.uzmart.org/api/v1/dashboard/admin/translations/delete",{params:e})},getById:function(e,t){return r.Z.get("dashboard/admin/translations/".concat(e),{params:t})},create:function(e){return r.Z.post("dashboard/admin/translations",{},{params:e})},update:function(e,t){return r.Z.put("dashboard/admin/translations/".concat(e),{},{params:t})},export:function(e){return r.Z.get("dashboard/admin/translations/export",{params:e})},import:function(e){return a.Z.post("dashboard/admin/translations/import",e)}};t.Z=i},55562:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(93433),a=n(15861),i=n(4942),l=n(1413),o=n(29439),s=n(45987),c=n(87757),u=n.n(c),d=n(47313),f=n(10976),m=n(66672),Z=n(59491),p=n(77181),h=n(45705),v=n(74294),x=n(78508),j=n(38702),g=n(23560),b=n(12019),y=n(47515),w=n(55768),S=n(9274),k=n(68197),C=n(59624),I=n(24511),P=n(46417);function O(e){var t=e.visible,n=e.setVisible,r=e.languages,a=e.refetch,i=(0,I.$)().t,l=(0,d.useState)(!1),s=(0,o.Z)(l,2),c=s[0],u=s[1],p=f.Z.useForm(),h=(0,o.Z)(p,1)[0],x=function(){n(!1)};return(0,P.jsx)(S.Z,{visible:t,title:i("add.translation"),onCancel:x,footer:[(0,P.jsx)(Z.Z,{type:"primary",form:"translation-form",htmlType:"submit",loading:c,children:i("create")},"create-translation"),(0,P.jsx)(Z.Z,{type:"default",onClick:x,children:i("cancel")},"create-translation-cancel")],children:(0,P.jsx)(f.Z,{id:"translation-form",name:"translation",layout:"vertical",onFinish:function(e){u(!0),j.Z.create(e).then((function(){g.Am.success(i("successfully.created")),n(!1),a()})).finally((function(){return u(!1)}))},form:h,initialValues:{group:"web"},children:(0,P.jsxs)(k.Z,{gutter:12,children:[(0,P.jsx)(C.Z,{span:24,children:(0,P.jsx)(f.Z.Item,{label:i("name"),name:"key",rules:[{validator:function(e,t){return t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(i("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(i("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(i("required")))}}],children:(0,P.jsx)(m.Z,{})})}),(0,P.jsx)(C.Z,{span:24,children:(0,P.jsx)(f.Z.Item,{label:i("group"),name:"group",rules:[{required:!0,message:""}],children:(0,P.jsxs)(v.Z,{children:[(0,P.jsx)(v.Z.Option,{value:"web",children:i("web")}),(0,P.jsx)(v.Z.Option,{value:"mobile",children:i("mobile")}),(0,P.jsx)(v.Z.Option,{value:"errors",children:i("errors")})]})})}),r.map((function(e,t){return(0,P.jsx)(C.Z,{span:24,children:(0,P.jsx)(f.Z.Item,{label:"".concat(i("translation")," (").concat(e.locale,")"),name:"value[".concat(e.locale,"]"),rules:[{validator:function(e,t){return t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(i("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(i("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(i("required")))}}],children:(0,P.jsx)(m.Z,{})})},t)}))]})})})}var E=n(2717),V=n(41481),z=n(3925),A=n(90954),F=n(97890),M=n(97421),N=n(69658),q=n(74580),B=["index"],R=["title","editable","children","dataIndex","record","handleSave"],$=d.createContext(null),H=function(e){e.index;var t=(0,s.Z)(e,B),n=f.Z.useForm(),r=(0,o.Z)(n,1)[0];return(0,P.jsx)(f.Z,{form:r,component:!1,children:(0,P.jsx)($.Provider,{value:r,children:(0,P.jsx)("tr",(0,l.Z)({},t))})})},L=function(e){e.title;var t=e.editable,n=e.children,r=e.dataIndex,c=e.record,Z=e.handleSave,p=(0,s.Z)(e,R),h=(0,I.$)().t,v=(0,d.useState)(!1),x=(0,o.Z)(v,2),j=x[0],g=x[1],y=(0,d.useRef)(null),w=(0,d.useContext)($);(0,d.useEffect)((function(){j&&y.current.focus()}),[j]);var S=function(){g(!j),w.setFieldsValue((0,i.Z)({},r,c[r]))},k=function(){var e=(0,a.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.validateFields();case 3:t=e.sent,S(),Z((0,l.Z)((0,l.Z)((0,l.Z)({},c),t),{},{dataIndex:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=n;return t&&(C=j?(0,P.jsx)(f.Z.Item,{style:{margin:0},name:r,rules:[{validator:function(e,t){return t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(h("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(h("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(h("required")))}}],children:(0,P.jsx)(m.Z,{ref:y,onPressEnter:k,onBlur:k})}):(0,P.jsxs)("div",{className:"editable-cell-value-wrap cursor-pointer d-flex justify-content-between align-items-center",style:{paddingRight:24},onClick:S,children:[(0,P.jsx)("div",{className:"w-100",children:n}),(0,P.jsx)(b.Z,{})]})),(0,P.jsx)("td",(0,l.Z)((0,l.Z)({},p),{},{children:C}))};function W(){var e=(0,I.$)().t,t=(0,E.I0)(),n=(0,F.s0)(),a=(0,d.useContext)(q._).setIsModalVisible,s=(0,d.useState)([]),c=(0,o.Z)(s,2),u=c[0],f=c[1],m=(0,d.useState)(10),b=(0,o.Z)(m,2),S=b[0],k=b[1],C=(0,d.useState)(1),B=(0,o.Z)(C,2),R=B[0],$=B[1],W=(0,d.useState)(0),_=(0,o.Z)(W,2),K=_[0],T=_[1],U=(0,d.useState)(!1),D=(0,o.Z)(U,2),G=D[0],J=D[1],Q=(0,d.useState)(null),X=(0,o.Z)(Q,2),Y=X[0],ee=X[1],te=(0,d.useState)(null),ne=(0,o.Z)(te,2),re=ne[0],ae=ne[1],ie=(0,d.useState)(null),le=(0,o.Z)(ie,2),oe=le[0],se=le[1],ce=(0,d.useState)(!1),ue=(0,o.Z)(ce,2),de=ue[0],fe=ue[1],me=(0,d.useState)(0),Ze=(0,o.Z)(me,2),pe=Ze[0],he=Ze[1],ve=(0,E.v9)((function(e){return e.formLang}),E.wU).languages,xe=(0,d.useState)(""),je=(0,o.Z)(xe,2),ge=je[0],be=je[1],ye=(0,d.useState)(""),we=(0,o.Z)(ye,2),Se=we[0],ke=we[1],Ce=(0,d.useState)(!1),Ie=(0,o.Z)(Ce,2),Pe=Ie[0],Oe=Ie[1],Ee=(0,d.useState)(null),Ve=(0,o.Z)(Ee,2),ze=Ve[0],Ae=Ve[1],Fe=(0,d.useState)(!1),Me=(0,o.Z)(Fe,2),Ne=Me[0],qe=Me[1],Be=(0,d.useMemo)((function(){return[{title:e("name"),dataIndex:"key",sorter:function(e,t,n){return Re(n,"key")},width:250,fixed:"left"},{title:e("group"),dataIndex:"group",sorter:function(e,t,n){return Re(n,"group")},width:150,fixed:"left"},{title:e("options"),dataIndex:"key",width:100,fixed:"center",render:function(e){return(0,P.jsx)(Z.Z,{icon:(0,P.jsx)(y.Z,{}),onClick:function(){Ae([e]),a(!0)}})}}].concat((0,r.Z)(ve.filter((function(e){return!ge||e.locale===ge})).map((function(e){return{title:e.title,dataIndex:"value[".concat(e.locale,"]"),editable:!0,width:300}}))))}),[ve,ge]);function Re(e,t){var n;switch(e){case"ascend":n="asc";break;case"descend":n="desc"}ae(n),se(t)}function $e(){J(!0);var e={perPage:S,skip:pe,group:Y,sort:re,column:oe,search:Se};j.Z.getAll(e).then((function(e){var t=e.data,n=Object.entries(t.translations).map((function(e){return(0,l.Z)({key:e[0],group:e[1][0].group},Object.assign.apply(Object,[{}].concat((0,r.Z)(ve.map((function(t){var n;return(0,i.Z)({},"value[".concat(t.locale,"]"),null===(n=e[1].find((function(e){return e.locale===t.locale})))||void 0===n?void 0:n.value)}))))))}));f(n),T(t.total)})).finally((function(){return J(!1)}))}(0,d.useEffect)((function(){$e()}),[S,Y,re,oe,pe,Se]);var He=function(e){var t=e.dataIndex,n=e.key,a=(0,r.Z)(u),i=a.findIndex((function(t){return e.key===t.key})),o=a[i];o[t]!==e[t]&&(a.splice(i,1,(0,l.Z)((0,l.Z)({},o),e)),f(a),function(e,t){j.Z.update(e,t).then((function(e){return g.Am.success(e.message)}))}(n,(0,l.Z)((0,l.Z)({},e),{},{value:void 0,dataIndex:void 0,key:void 0})))};var Le={body:{row:H,cell:L}},We=Be.map((function(e){return e.editable?(0,l.Z)((0,l.Z)({},e),{},{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,fixed:e.fixed,handleSave:He}}}):e}));return(0,P.jsxs)(p.Z,{extra:(0,P.jsxs)(h.Z,{wrap:!0,children:[(0,P.jsx)(V.Z,{placeholder:e("search"),handleChange:function(e){return ke(e)}}),(0,P.jsxs)(v.Z,{style:{minWidth:150},value:ge,onChange:function(e){return be(e)},placeholder:e("select.language"),children:[(0,P.jsx)(v.Z.Option,{value:"",children:e("all")}),ve.map((function(e){return(0,P.jsx)(v.Z.Option,{value:e.locale,children:e.title},e.locale)}))]}),(0,P.jsxs)(v.Z,{style:{minWidth:150},value:Y,onChange:function(e){return ee(e)},placeholder:e("select.group"),children:[(0,P.jsx)(v.Z.Option,{value:"",children:e("all")}),(0,P.jsx)(v.Z.Option,{value:"web",children:e("web")}),(0,P.jsx)(v.Z.Option,{value:"mobile",children:e("mobile")}),(0,P.jsx)(v.Z.Option,{value:"errors",children:e("errors")})]}),(0,P.jsxs)(Z.Z,{onClick:function(){Oe(!0),j.Z.export().then((function(e){window.location.href=M.S0+e.data.file_name})).finally((function(){return Oe(!1)}))},loading:Pe,children:[(0,P.jsx)(z.o5r,{className:"mr-2"}),e("export")]}),(0,P.jsxs)(Z.Z,{onClick:function(){t((0,A.bL)({id:"translation-import",url:"settings/translations/import",name:e("translation.import")})),n("import")},children:[(0,P.jsx)(z.o5r,{className:"mr-2"}),e("import")]}),(0,P.jsx)(Z.Z,{icon:(0,P.jsx)(w.Z,{}),type:"primary",onClick:function(){return fe(!0)},children:e("add.translation")})]}),children:[(0,P.jsx)(x.Z,{components:Le,columns:We,dataSource:u,pagination:{pageSize:S,page:R,total:K},rowKey:function(e){return e.id},onChange:function(e){var t=e.pageSize,n=e.current,r=(n-1)*t;k(t),$(n),he(r)},loading:G,scroll:{x:1500}}),de&&(0,P.jsx)(O,{visible:de,setVisible:fe,languages:ve,refetch:$e}),(0,P.jsx)(N.Z,{click:function(){qe(!0);var t=(0,l.Z)({},Object.assign.apply(Object,[{}].concat((0,r.Z)(ze.map((function(e,t){return(0,i.Z)({},"ids[".concat(t,"]"),e)}))))));j.Z.delete(t).then((function(){$e(),g.Am.success(e("successfully.deleted")),a(!1),Ae(null)})).finally((function(){return qe(!1)}))},text:e("are.you.sure.you.want.to.delete.the.selected.translation"),loading:Ne})]})}},55768:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(1413),a=n(47313),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},l=n(17469),o=function(e,t){return a.createElement(l.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};o.displayName="PlusCircleOutlined";var s=a.forwardRef(o)}}]);