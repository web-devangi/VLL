"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3126],{55940:function(e,n,t){t.d(n,{Z:function(){return v}});var i=t(1413),l=t(45987),r=(t(47313),t(59491)),a=t(47515),o=t(23560),d=t(24511),s=t(79492),c=t(46417),u=["size","onClick","type"];function v(e){var n=e.size,t=void 0===n?"":n,v=e.onClick,f=e.type,x=void 0===f?"default":f,Z=(0,l.Z)(e,u),h=(0,d.$)().t,m=(0,s.Z)().isDemo;return(0,c.jsx)(r.Z,(0,i.Z)({size:t,icon:(0,c.jsx)(a.Z,{}),onClick:function(e){m?o.Am.warning(h("cannot.work.demo")):v(e)},type:x},Z))}},50402:function(e,n,t){t(47313);var i=t(68197),l=t(59624),r=t(2717),a=t(24511),o=t(14637),d=t(29242),s=t(46417);n.Z=function(e){var n=e.data,t=(0,a.$)().t,c=(0,r.v9)((function(e){return e.currency}),r.wU).defaultCurrency;return(0,s.jsxs)(i.Z,{gutter:16,className:"mt-3",children:[(0,s.jsx)(l.Z,{flex:"0 0 16.6%",children:(0,s.jsx)(o.Z,{title:t("all.orders"),value:null===n||void 0===n?void 0:n.orders_count})}),(0,s.jsx)(l.Z,{flex:"0 0 16.6%",children:(0,s.jsx)(o.Z,{title:t("ready.orders"),value:null===n||void 0===n?void 0:n.ready_orders_count})}),(0,s.jsx)(l.Z,{flex:"0 0 16.6%",children:(0,s.jsx)(o.Z,{title:t("on.a.way.orders"),value:null===n||void 0===n?void 0:n.on_a_way_orders_count})}),(0,s.jsx)(l.Z,{flex:"0 0 16.6%",children:(0,s.jsx)(o.Z,{title:t("cancelled.orders"),value:null===n||void 0===n?void 0:n.cancel_orders_count})}),(0,s.jsx)(l.Z,{flex:"0 0 16.6%",children:(0,s.jsx)(o.Z,{title:t("delivered.orders"),value:null===n||void 0===n?void 0:n.delivered_orders_count})}),(0,s.jsx)(l.Z,{flex:"0 0 16.6%",children:(0,s.jsx)(o.Z,{title:t("total.price"),value:(0,d.p)(null===n||void 0===n?void 0:n.total_price,null===c||void 0===c?void 0:c.symbol)})})]})}},53233:function(e,n,t){var i=t(1413),l=t(29439),r=t(47313),a=t(56140),o=t(67251),d=t(45705),s=t(86345),c=t(78267),u=t(37388),v=t(59491),f=t(99587),x=t(24511),Z=t(46417),h=a.Z.Text;n.Z=function(e){var n=e.columns,t=void 0===n?[]:n,a=e.setColumns,m=e.style,j=e.size,p=void 0===j?"":j,y=e.iconOnly,g=(0,x.$)().t,_=(0,r.useState)(!1),C=(0,l.Z)(_,2),k=C[0],w=C[1],b=(0,Z.jsx)(o.Z,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,Z.jsx)(o.Z.Item,{children:(0,Z.jsxs)(d.Z,{className:"d-flex justify-content-between",children:[(0,Z.jsx)(h,{children:e.title}),(0,Z.jsx)(s.Z,{defaultChecked:!0,onClick:function(){return function(e){var n=null===t||void 0===t?void 0:t.map((function(n){return n.dataIndex===e.dataIndex&&(n.is_show=!(null!==n&&void 0!==n&&n.is_show)),n}));a(n)}(e)},disabled:1===n})]})},e+n)}))});return(0,Z.jsx)(c.Z,{overlay:b,trigger:["click"],onVisibleChange:function(e){w(e)},visible:k,children:(0,Z.jsx)(u.Z,{title:g("change.columns"),children:(0,Z.jsx)(v.Z,{style:(0,i.Z)({},m),size:p,icon:(0,Z.jsx)(f.Z,{}),children:y?null:g("Columns")})})})}},41481:function(e,n,t){t.d(n,{Z:function(){return v}});var i=t(1413),l=t(29439),r=t(45987),a=t(47313),o=t(66672),d=t(16031),s=t(40765),c=t(46417),u=["handleChange","defaultValue","resetSearch"];function v(e){var n=e.handleChange,t=e.defaultValue,v=e.resetSearch,f=(0,r.Z)(e,u),x=(0,a.useState)(t),Z=(0,l.Z)(x,2),h=Z[0],m=Z[1],j=(0,a.useMemo)((function(){return(0,d.debounce)((function(e){n(e)}),800)}),[]);return(0,a.useEffect)((function(){m(t)}),[v]),(0,c.jsx)(o.Z,(0,i.Z)({value:h,onChange:function(e){m(e.target.value),j(e.target.value)},prefix:(0,c.jsx)(s.Z,{})},f))}},13945:function(e,n,t){function i(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(n,{Z:function(){return i}})},29242:function(e,n,t){function i(e,n){var t=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(n){return e>=n.value}));return t?"$"+(e/t.value).toFixed(n).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+t.symbol:"0"}t.d(n,{p:function(){return i}})},36311:function(e,n,t){var i=t(34344),l={orderExport:function(e,n){return i.Z.get("dashboard/user/export/order/".concat(e,"/pdf"),{params:n,responseType:"blob"})}};n.Z=l},14637:function(e,n,t){t.d(n,{Z:function(){return r}});t(47313);var i=t(77181),l=t(46417);function r(e){var n=e.title,t=void 0===n?"Orders":n,r=e.value,a=void 0===r?0:r,o=e.color,d=void 0===o?"grey":o,s=e.onClick;return(0,l.jsx)(i.Z,{className:"statistics-card",hoverable:!!s,onClick:s,children:(0,l.jsxs)("div",{className:"card-wrapper",children:[(0,l.jsx)("div",{className:"space"}),(0,l.jsx)("div",{className:"content",children:(0,l.jsx)("h1",{className:"number",children:a})}),(0,l.jsx)("span",{className:"highlighter ".concat(d)}),t&&(0,l.jsx)("h4",{className:"title",children:t})]})})}},83126:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var i=t(4942),l=t(93433),r=t(1413),a=t(29439),o=t(47313),d=t(99096),s=t(73591),c=t(66204),u=t(59491),v=t(45705),f=t(72652),x=t(77181),Z=t(78508),h=t(97890),m=t(12019),j=t(31741),p=t(47515),y=t(6986),g=t(2717),_=t(90954),C=t(24511),k=t(80314),w=t(22054),b=t(13945),S=t(41481),Y=t(84017),M=t(7920),N=t(24077),I=t(53233),z=t(5958),D=t(80355),$=t(24391),P=t(23560),U=t(55940),A=t(7370),E=t(74580),O=t(69658),T=t(97421),V=t(50402),K=t(70816),F=t.n(K),H=t(46417),R=d.Z.RangePicker,B=s.Z.TabPane;function G(){var e,n,t=(0,g.I0)(),d=(0,h.s0)(),K=(0,C.$)().t,G=(0,g.v9)((function(e){return e.currency}),g.wU).defaultCurrency,J=(0,o.useState)(null),L=(0,a.Z)(J,2),q=L[0],Q=L[1],W=(0,o.useState)(null),X=(0,a.Z)(W,2),ee=X[0],ne=X[1],te=(0,o.useState)(null),ie=(0,a.Z)(te,2),le=ie[0],re=ie[1],ae=(0,o.useState)(null),oe=(0,a.Z)(ae,2),de=oe[0],se=oe[1],ce=(0,h.UO)().id,ue=[{id:7,name:"all"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],ve=(0,o.useState)([{title:K("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:K("client"),is_show:!0,dataIndex:"user",key:"user",render:function(e){return(0,H.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})}},{title:K("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:function(e){return(0,H.jsxs)("div",{className:"text-lowercase",children:[e||0," ",K("products")]})}},{title:K("status"),is_show:!0,dataIndex:"status",key:"status",render:function(e,n){return(0,H.jsxs)("div",{children:["new"===e?(0,H.jsx)(c.Z,{color:"blue",children:K(e)}):"canceled"===e?(0,H.jsx)(c.Z,{color:"error",children:K(e)}):(0,H.jsx)(c.Z,{color:"cyan",children:K(e)}),"delivered"!==e&&"canceled"!==e?(0,H.jsx)(m.Z,{onClick:function(){return Q(n)}}):""]})}},{title:K("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:function(e,n){return(0,H.jsx)("div",{children:"ready"===n.status&&"pickup"!==n.delivery_type?(0,H.jsx)(u.Z,{type:"link",onClick:function(){return se(n)},children:(0,H.jsxs)(v.Z,{children:[e?"".concat(e.firstname," ").concat(e.lastname):K("add.deliveryman"),(0,H.jsx)(m.Z,{})]})}):(0,H.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})}},{title:K("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:function(e){return(0,Y.Z)(e,G.symbol)}},{title:K("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:function(e){var n;return K(null===e||void 0===e||null===(n=e.payment_system)||void 0===n?void 0:n.tag)||"-"}},{title:K("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:function(e){return F()(e).format("YYYY-MM-DD HH:mm")}},{title:K("options"),is_show:!0,key:"options",render:function(e,n){return(0,H.jsxs)(v.Z,{children:[(0,H.jsx)(u.Z,{icon:(0,H.jsx)(z.Y4r,{}),onClick:function(){return ne(n.id)}}),(0,H.jsx)(u.Z,{icon:(0,H.jsx)(j.Z,{}),onClick:function(){return function(e){t((0,_.bL)({url:"order/details/".concat(e.id),id:"order_details",name:K("order.details")})),d("/order/details/".concat(e.id))}(n)}}),(0,H.jsx)(U.Z,{icon:(0,H.jsx)(p.Z,{}),onClick:function(){we([n.id]),he(!0),Me(!0)}}),(0,H.jsx)(u.Z,{icon:(0,H.jsx)(y.Z,{}),onClick:function(){return re(n.id)}})]})}}]),fe=(0,a.Z)(ve,2),xe=fe[0],Ze=fe[1],he=(0,o.useContext)(E._).setIsModalVisible,me=(0,o.useState)(!1),je=(0,a.Z)(me,2),pe=je[0],ye=je[1],ge=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,_e=(0,o.useState)(null),Ce=(0,a.Z)(_e,2),ke=Ce[0],we=Ce[1],be=(0,o.useState)(null),Se=(0,a.Z)(be,2),Ye=Se[0],Me=Se[1],Ne=(0,o.useState)(!1),Ie=(0,a.Z)(Ne,2),ze=Ie[0],De=Ie[1],$e=(0,g.v9)((function(e){return e.orders}),g.wU),Pe=$e.orders,Ue=$e.meta,Ae=$e.loading,Ee=$e.params,Oe=$e.statistic,Te=null===ge||void 0===ge?void 0:ge.data;(0,k.Z)((function(){var e={search:null===Te||void 0===Te?void 0:Te.search,sort:null===Te||void 0===Te?void 0:Te.sort,column:null===Te||void 0===Te?void 0:Te.column,perPage:null===Te||void 0===Te?void 0:Te.perPage,page:null===Te||void 0===Te?void 0:Te.page,deliveryman:ce,date_from:null===Te||void 0===Te?void 0:Te.date_from,date_to:null===Te||void 0===Te?void 0:Te.date_to,status:"all"===(null===Te||void 0===Te?void 0:Te.status)||null===Te||void 0===Te?void 0:Te.status};t((0,w.AU)(e))}),[null===ge||void 0===ge?void 0:ge.data]);var Ve=function(){Q(null),se(null),ne(null),re(null)};(0,o.useEffect)((function(){if(null!==ge&&void 0!==ge&&ge.refetch){var e={status:null===Te||void 0===Te?void 0:Te.status,page:null===Te||void 0===Te?void 0:Te.page,perPage:10,type:"delivery",deliveryman:ce};t((0,w.AU)(e)),t((0,_.A_)(ge))}}),[null===ge||void 0===ge?void 0:ge.refetch]);var Ke={selectedRowKeys:ke,onChange:function(e){we(e)}};return(0,H.jsxs)("div",{children:[(0,H.jsx)(f.Z,{spinning:Ae,children:(0,H.jsx)(V.Z,{data:Oe})}),(0,H.jsxs)(x.Z,{title:K("orders"),extra:(0,H.jsxs)(v.Z,{wrap:!0,children:[(0,H.jsx)(R,{format:"YYYY-MM-DD",onChange:function(e){return n=e,void t((0,_.nc)({activeMenu:ge,data:(0,r.Z)((0,r.Z)({},Te),{},{date_from:n?F()(null===n||void 0===n?void 0:n[0]).format("YYYY-MM-DD").toString():void 0,date_to:n?F()(null===n||void 0===n?void 0:n[1]).format("YYYY-MM-DD").toString():void 0})}));var n}}),(0,H.jsx)(U.Z,{type:"danger",onClick:function(){null===ke||0===ke.length?P.Am.warning(K("select.the.product")):(he(!0),Me(!1))},children:K("delete.all")}),(0,H.jsx)(u.Z,{onClick:function(){ye(!0),A.Z.export({type:"delivery",deliveryman:ce,date_from:null===Te||void 0===Te?void 0:Te.date_from,date_to:null===Te||void 0===Te?void 0:Te.date_to,status:"all"===(null===Te||void 0===Te?void 0:Te.status)||null===Te||void 0===Te?void 0:Te.status}).then((function(e){var n=T.S0+e.data.file_name;window.location.href=n})).finally((function(){return ye(!1)}))},loading:pe,children:K("export")}),(0,H.jsx)(I.Z,{setColumns:Ze,columns:xe})]}),children:[(0,H.jsx)("div",{className:"mt-2 mb-4",children:(0,H.jsx)(S.Z,{placeholder:K("search"),width:480,handleChange:function(e){return n=e,l="search",void t((0,_.nc)({activeMenu:ge,data:(0,r.Z)((0,r.Z)({},Te),{},(0,i.Z)({},l,n))}));var n,l},defaultValue:null===(e=ge.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(n=ge.data)&&void 0!==n&&n.search)})}),(0,H.jsx)(s.Z,{onChange:function(e){var n=e;t((0,_.nc)({activeMenu:ge,data:(0,r.Z)((0,r.Z)({},Te),{},{status:n})}))},type:"card",activeKey:null===Te||void 0===Te?void 0:Te.status,children:ue.map((function(e){return(0,H.jsx)(B,{tab:K(e.name)},e.name)}))}),(0,H.jsx)(Z.Z,{scroll:{x:!0},rowSelection:Ke,columns:null===xe||void 0===xe?void 0:xe.filter((function(e){return e.is_show})),dataSource:Pe,loading:Ae,pagination:{pageSize:Ee.perPage,page:Ee.page,total:Ue.total,defaultCurrent:Ee.page},rowKey:function(e){return e.id},onChange:function(e,n,i){var l=e.pageSize,a=e.current,o=i.field,d=i.order,s=(0,b.Z)(d);t((0,_.nc)({activeMenu:ge,data:(0,r.Z)((0,r.Z)({},ge.data),{},{perPage:l,page:a,column:o,sort:s})}))}}),q&&(0,H.jsx)(M.Z,{orderDetails:q,handleCancel:Ve,status:ue}),de&&(0,H.jsx)(N.Z,{orderDetails:de,handleCancel:Ve}),ee&&(0,H.jsx)(D.Z,{id:ee,handleCancel:Ve}),le&&(0,H.jsx)($.Z,{id:le,handleCancel:Ve}),(0,H.jsx)(O.Z,{click:function(){De(!0);var e=(0,r.Z)({},Object.assign.apply(Object,[{}].concat((0,l.Z)(ke.map((function(e,n){return(0,i.Z)({},"ids[".concat(n,"]"),e)}))))));A.Z.delete(e).then((function(){P.Am.success(K("successfully.deleted")),he(!1),t((0,w.AU)()),Me(null),we(null)})).finally((function(){return De(!1)}))},text:K(Ye?"delete":"all.delete"),loading:ze,setText:we})]})]})}},24391:function(e,n,t){var i=t(29439),l=t(47313),r=t(36311),a=t(83334),o=t.n(a),d=t(51282),s=t(77181),c=t(9274),u=t(59491),v=t(68197),f=t(59624),x=t(24511),Z=t(58821),h=t(57864),m=t(97890),j=t(46417),p=s.Z.Meta;n.Z=function(e){var n=e.id,t=e.handleCancel,a=(0,l.useState)(null),y=(0,i.Z)(a,2),g=y[0],_=y[1],C=(0,x.$)().t,k=(0,m.s0)();return(0,j.jsx)(j.Fragment,{children:g?(0,j.jsx)(d.Z,{}):(0,j.jsx)(c.Z,{visible:!!n,title:C("selected.download"),closable:!1,handleCancel:t,footer:[(0,j.jsx)(u.Z,{type:"default",onClick:t,children:C("cancel")},"cancelBtn")],children:(0,j.jsxs)(v.Z,{children:[(0,j.jsx)(f.Z,{span:12,children:(0,j.jsx)(s.Z,{title:C("download.pdf"),onClick:function(){return function(e){_(!0),r.Z.orderExport(e).then((function(n){o()(n,"invoice_".concat(e,".pdf"),"application/pdf"),t()})).finally((function(){return _(!1)}))}(n)},className:"text-center cursor-pointer",children:(0,j.jsx)(p,{className:"d-flex align-items-center justify-content-center",title:(0,j.jsx)(Z._JY,{size:80})})})}),(0,j.jsx)(f.Z,{span:12,children:(0,j.jsx)(s.Z,{title:C("download.check"),onClick:function(){return function(e){k("/orders/generate-invoice/".concat(e))}(n)},className:"text-center cursor-pointer",children:(0,j.jsx)(p,{className:"d-flex align-items-center justify-content-center",title:(0,j.jsx)(h.ih9,{size:85})})})})]})})})}}}]);