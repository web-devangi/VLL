(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6192],{13944:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var a=s(47313),o=s(77181),l=s(58446),n=s(27834),r=s(33533),i=s(46417);const c={position:"absolute",zIndex:"1"},d={position:"absolute",zIndex:"1",right:"0",top:"-2px"},u=e=>{let{title:t,series:s,width:u,height:h,xAxis:v,customOptions:p,card:x,type:f,extra:m,direction:g,bodyClass:y}=e,Z=JSON.parse(JSON.stringify((e=>{switch(e){case"line":default:return r.jd;case"bar":return r.B0;case"area":return r.fT;case"pie":return r.LB}})(f)));const j=window.innerWidth<768,w=()=>{if(_.current){var e;const t=_.current.querySelectorAll("div.apexcharts-legend")[0];t.style.marginRight="".concat(j?0:null===(e=b.current)||void 0===e?void 0:e.offsetWidth,"px"),"rtl"===g&&(t.style.right="auto",t.style.left="0"),j&&(t.style.position="relative",t.style.top=0,t.style.justifyContent="start",t.style.padding=0)}};(0,a.useEffect)((()=>{w()}),[]);const b=(0,a.useRef)(null),_=(0,a.useRef)();Z.xaxis={categories:v},p&&(Z={...Z,...p});const C=()=>(0,i.jsx)(n.ZP,{onResize:void setTimeout((()=>{w()}),600),children:(0,i.jsx)("div",{style:"rtl"===g?{direction:"ltr"}:{},className:"chartRef",ref:_,children:(0,i.jsx)(l.Z,{options:Z,type:f,series:s,width:u,height:h})})});return(0,i.jsx)(i.Fragment,{children:x?(0,i.jsx)(o.Z,{children:(0,i.jsxs)("div",{className:"position-relative ".concat(y),children:[(0,i.jsx)("div",{style:j?{}:c,children:t})&&(0,i.jsx)("h4",{className:"font-weight-bold",style:j?{}:c,children:t}),m&&(0,i.jsx)("div",{ref:b,style:j?{}:d,children:m}),C()]})}):C()})};u.defaultProps={series:[],height:300,width:"100%",card:!0,type:"line"};const h=u},53233:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var a=s(47313),o=s(56140),l=s(67251),n=s(45705),r=s(86345),i=s(78267),c=s(37388),d=s(59491),u=s(99587),h=s(24511),v=s(46417);const{Text:p}=o.Z,x=e=>{let{columns:t=[],setColumns:s,style:o,size:x="",iconOnly:f}=e;const{t:m}=(0,h.$)(),[g,y]=(0,a.useState)(!1),Z=(0,v.jsx)(l.Z,{children:null===t||void 0===t?void 0:t.map(((e,a)=>(0,v.jsx)(l.Z.Item,{children:(0,v.jsxs)(n.Z,{className:"d-flex justify-content-between",children:[(0,v.jsx)(p,{children:e.title}),(0,v.jsx)(r.Z,{defaultChecked:!0,onClick:()=>function(e){const a=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));s(a)}(e),disabled:1===a})]})},e+a)))});return(0,v.jsx)(i.Z,{overlay:Z,trigger:["click"],onVisibleChange:e=>{y(e)},visible:g,children:(0,v.jsx)(c.Z,{title:m("change.columns"),children:(0,v.jsx)(d.Z,{style:{...o},size:x,icon:(0,v.jsx)(u.Z,{}),children:f?null:m("Columns")})})})}},22133:(e,t,s)=>{"use strict";s.d(t,{Z:()=>y});var a=s(56140),o=s(68197),l=s(59624),n=s(77181),r=s(45705),i=s(74294),c=s(46155),d=s(47313),u=s(16034),h=s(88038),v=s(13944),p=s(33533),x=s(24511),f=s(93131),m=s(46417);const{Title:g}=a.Z,y=e=>{let{reportData:t={}}=e;const{by_time:s,options:a,handleByTime:y,chart_type:Z,setChartType:j}=(0,d.useContext)(f.G),{t:w}=(0,x.$)(),b=(0,d.useMemo)((()=>{var e;return null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>e.time))}),[null===t||void 0===t?void 0:t.chart]),_=(0,d.useMemo)((()=>{var e;return Boolean(t.charts)?t.charts.map((e=>{var t;return{name:e.translation.title,data:(null===(t=e.stocks)||void 0===t?void 0:t.map((e=>e.total_order_quantity||e.avg_quantity||e.quantity||e.count||e.price||e.order_details_sum_quantity||0)))||[]}})):[{name:w("orders"),data:(null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>parseInt(e.count||e.total_price||e.quantity||e.price||e.products_count||e.order_details_avg_quantity||e.order_details_avg_total_price||e.order_details_sum_quantity||e.avg_price||e.avg_quantity||0,10))))||[]}]}),[null===t||void 0===t?void 0:t.chart]);return(0,m.jsx)(o.Z,{gutter:24,children:(0,m.jsx)(l.Z,{span:24,children:(0,m.jsxs)(n.Z,{children:[(0,m.jsx)(o.Z,{gutter:24,className:"w-100",children:(0,m.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,m.jsx)(r.Z,{size:"large",className:"d-flex",children:(0,m.jsx)(g,{level:3,className:"mb-0",children:w("item.sold")})}),(0,m.jsxs)("div",{className:"d-flex",children:[(0,m.jsx)(i.Z,{style:{width:100},onChange:y,options:a,defaultValue:s}),(0,m.jsx)(c.Z,{type:"vertical",style:{height:"100%"}}),(0,m.jsxs)(r.Z,{children:[(0,m.jsx)(u.Z,{style:{fontSize:"22px",cursor:"pointer",color:"area"===Z?"green":""},onClick:()=>j("area")}),(0,m.jsx)(h.Z,{style:{fontSize:"22px",cursor:"pointer",color:"bar"===Z?"green":""},onClick:()=>j("bar")})]})]})]})}),(0,m.jsx)(c.Z,{}),(0,m.jsx)(v.Z,{type:Z||"area",card:!1,series:_,xAxis:b,height:280,customOptions:{colors:[p.DM[1],p.DM[2],p.DM[3],p.DM[4],p.DM[5],p.DM[6],p.DM[0]],legend:{show:!1},stroke:{width:2.5,curve:"smooth"}}})]})})})}},41481:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(47313),o=s(66672),l=s(16031),n=s(40765),r=s(46417);function i(e){let{handleChange:t,defaultValue:s,resetSearch:i,...c}=e;const[d,u]=(0,a.useState)(s),h=(0,a.useMemo)((()=>(0,l.debounce)((e=>{t(e)}),800)),[]);return(0,a.useEffect)((()=>{u(s)}),[i]),(0,r.jsx)(o.Z,{value:d,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,r.jsx)(n.Z,{}),...c})}},89281:(e,t,s)=>{"use strict";s.d(t,{h:()=>c});var a=s(47313),o=s(12279),l=s.n(o),n=s(74294),r=s(72652),i=s(46417);const c=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:o,refetchOptions:c=!1,...d}=e;const[u,h]=(0,a.useState)(!1),[v,p]=(0,a.useState)([]),x=(0,a.useMemo)((()=>l()((e=>{p([]),h(!0),t(e).then((e=>{p(e),h(!1)}))}),s)),[t,s]);return(0,i.jsx)(n.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:x,onClear:()=>{x(""),o&&o()},notFoundContent:u?(0,i.jsx)(r.Z,{size:"small"}):"no results",...d,options:v,onFocus:()=>{v.length&&!c||x("")}})}},33533:(e,t,s)=>{"use strict";s.d(t,{B0:()=>n,DM:()=>a,LB:()=>r,fT:()=>l,jd:()=>o});const a=["#3e82f7","#04d182","#ff6b72","#ffc107","#a461d8","#fa8c16","#17bcff"],o={chart:{zoom:{enabled:!1},toolbar:{show:!1}},colors:[...a],dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},legend:{position:"top",horizontalAlign:"right",offsetY:-15,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}}},l={...o},n={chart:{zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"25px",startingShapre:"rounded",endingShape:"rounded"}},colors:[...a],dataLabels:{enabled:!1},stroke:{show:!0,width:6,curve:"smooth",colors:["transparent"]},legend:{position:"top",horizontalAlign:"right",offsetY:-15,inverseOrder:!0,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},fill:{opacity:1},tooltip:{y:{formatter:e=>"".concat(e)}}},r={colors:[...a],plotOptions:{pie:{size:200,donut:{labels:{show:!0,total:{show:!1,showAlways:!0,label:"",fontSize:"18px",fontFamily:"Roboto",fontWeight:"bold",color:"#1a3353",formatter:function(e){return e.globals.seriesTotals.reduce(((e,t)=>e+t),0)+"Orders count"}}},size:"100%"}}},labels:[],dataLabels:{enabled:!0},legend:{show:!0}}},84017:(e,t,s)=>{"use strict";function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const a=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===s?"".concat(a," ").concat(t):"".concat(t," ").concat(a)}s.d(t,{Z:()=>a})},61105:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var a=s(56140),o=s(99096),l=s(72652),n=s(68197),r=s(59624),i=s(45705),c=s(77181),d=s(59491),u=s(78508),h=s(47313),v=s(41481),p=s(63243),x=s(26441),f=s(90954),m=s(2717),g=s(22133),y=s(70816),Z=s.n(y),j=s(93131),w=s(53233),b=s(97421),_=s(8061),C=s(80314),z=s(97890),S=s(74776),M=s.n(S),k=s(23885),q=s(84017),N=s(49067),R=s(89281),V=s(46417);const{Text:I,Title:H}=a.Z,{RangePicker:O}=o.Z,T=()=>{const e=(0,m.I0)(),t=(0,z.TH)(),s=(0,z.s0)(),o=M().parse(t.search,[])["?category_id"],y=M().parse(t.search,[])["?product_id"],[S,T]=(0,h.useState)(),{date_from:D,date_to:B,by_time:L,chart:A,handleChart:P,handleDateRange:E}=(0,h.useContext)(j.G),{activeMenu:F}=(0,m.v9)((e=>e.menu),m.wU),{loading:W,chartData:K,productList:$}=(0,m.v9)((e=>e.productReport),m.wU),[U,G]=(0,h.useState)([]),[J,Y]=(0,h.useState)(!1),[Q,X]=(0,h.useState)(""),{defaultCurrency:ee}=(0,m.v9)((e=>e.currency),m.wU),[te,se]=(0,h.useState)([{title:(0,k.t)("product.title"),dataIndex:"title",key:"title",is_show:!0,render:e=>e,sorter:(e,t)=>{var s,a;return null===e||void 0===e||null===(s=e.translation)||void 0===s?void 0:s.title.localeCompare(null===t||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title)}},{title:(0,k.t)("orders"),dataIndex:"count",key:"count",is_show:!0},{title:(0,k.t)("item.sold"),dataIndex:"quantity",key:"quantity",sorter:(e,t)=>e.quantity-t.quantity,is_show:!0},{title:(0,k.t)("total.price"),dataIndex:"total_price",key:"total_price",is_show:!0,render:e=>(0,q.Z)(e,null===ee||void 0===ee?void 0:ee.symbol),sorter:(e,t)=>e.total_price-t.total_price}]),ae=(0,h.useMemo)((()=>[{label:"item.sold",value:"quantity",qty:"quantity",price:!1},{label:"net.sales",value:"price",qty:"price",price:!0},{label:"orders",value:"count",qty:"count",price:!1}]),[]),oe=()=>{const t={date_from:D,date_to:B,type:L,chart:A};o&&(t.categories=[o]),y&&(t.products=[y]),ae.find((e=>e.value===A))&&e((0,_.VT)(t))},le=(t,s)=>{const a={date_from:D,date_to:B,type:L,page:t,perPage:s,search:Q||null};o&&(a.categories=[o]),y&&(a.products=[y]),S&&(a.shop_id=S),e((0,_.Iy)(a))};(0,h.useEffect)((()=>{P(ae[0].value)}),[]),(0,h.useEffect)((()=>{F.refetch&&(le(),oe(),e((0,f.A_)(F)))}),[F.refetch]),(0,C.Z)((()=>{le()}),[B,Q,o,y,L,D,S]),(0,C.Z)((()=>{oe()}),[B,L,A,o,y,D]);const ne={selectedRowKeys:U,onChange:e=>{G(e)}};return(0,V.jsxs)(l.Z,{size:"large",spinning:W,children:[(0,V.jsx)(n.Z,{gutter:24,className:"mb-3",children:(0,V.jsx)(r.Z,{span:12,children:(0,V.jsx)(i.Z,{children:(0,V.jsx)(O,{defaultValue:[Z()(D),Z()(B)],onChange:E})})})}),(0,V.jsx)(n.Z,{gutter:24,className:"report-products",children:null===ae||void 0===ae?void 0:ae.map((e=>(0,V.jsx)(r.Z,{span:8,onClick:()=>P(e.value),children:(0,V.jsxs)(c.Z,{className:A===e.value&&"active",children:[(0,V.jsx)(n.Z,{className:"mb-5",children:(0,V.jsx)(r.Z,{children:(0,V.jsx)(I,{children:(0,k.t)(e.label)})})}),(0,V.jsx)(n.Z,{gutter:24,children:(0,V.jsx)(r.Z,{span:12,children:(0,V.jsx)(H,{level:2,children:null!==e&&void 0!==e&&e.price?(0,q.Z)(K[e.qty],null===ee||void 0===ee?void 0:ee.symbol):K[e.qty]})})})]})},e.label)))}),(0,V.jsx)(g.Z,{reportData:K,chart_data:"quantities_sum"}),(0,V.jsxs)(c.Z,{children:[(0,V.jsxs)(i.Z,{className:"d-flex justify-content-between align-center",children:[(0,V.jsx)(a.Z.Text,{strong:!0,level:3,children:(0,k.t)("products")}),(0,V.jsxs)(i.Z,{className:"d-flex justify-content-between",children:[(0,V.jsx)(v.Z,{style:{minWidth:"300px"},handleChange:e=>X(e)}),(0,V.jsx)(R.h,{fetchOptions:e=>{const t={perPage:10,search:e};return N.Z.selectPaginate(t).then((e=>null===e||void 0===e?void 0:e.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===e||void 0===e?void 0:e.id}})))).catch((e=>console.log("report product ERROR => ",e)))},placeholder:(0,k.t)("select.shop"),onSelect:e=>T(e.value),onClear:()=>(T(void 0),(0,_.Iy)(),void(0,_.VT)({}))}),(0,V.jsx)(d.Z,{type:Boolean(U.length)||o||y||S?"primary":"default",danger:Boolean(U.length)||!!o||!!y||!!S,onClick:()=>{e((0,_._Z)()),T(void 0),G([]),le(),oe(),s("/report/products")},children:(0,k.t)("clear")}),(0,V.jsx)(d.Z,{icon:(0,V.jsx)(p.Z,{}),loading:J,onClick:()=>{Y(!0),x.Z.getReportProductList({date_from:D,date_to:B,type:L,export:"excel",shop_id:S,products:null!==ne&&void 0!==ne&&ne.selectedRowKeys[0]?null===ne||void 0===ne?void 0:ne.selectedRowKeys:y?[y]:void 0}).then((e=>{const t=b.S0+e.data.file_name;window.location.href=t})).finally((()=>Y(!1)))},children:(0,k.t)("download")}),(0,V.jsx)(w.Z,{columns:te,setColumns:se})]})]}),(0,V.jsx)(u.Z,{rowSelection:ne,columns:null===te||void 0===te?void 0:te.filter((e=>e.is_show)),dataSource:Array.isArray(null===$||void 0===$?void 0:$.data)?null===$||void 0===$?void 0:$.data:[],rowKey:e=>e.id,loading:W,pagination:{pageSize:10,page:(null===$||void 0===$?void 0:$.page)||1,total:null===$||void 0===$?void 0:$.total,defaultCurrent:1},onChange:e=>{const{pageSize:t,current:s}=e;le(s,t)},scroll:{x:1500}})]})]})}},63243:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(1413),o=s(47313);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};var n=s(17469),r=function(e,t){return o.createElement(n.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:l}))};r.displayName="CloudDownloadOutlined";const i=o.forwardRef(r)},16034:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(1413),o=s(47313);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};var n=s(17469),r=function(e,t){return o.createElement(n.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:l}))};r.displayName="LineChartOutlined";const i=o.forwardRef(r)},99587:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(1413),o=s(47313);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var n=s(17469),r=function(e,t){return o.createElement(n.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:l}))};r.displayName="TableOutlined";const i=o.forwardRef(r)},24654:()=>{}}]);