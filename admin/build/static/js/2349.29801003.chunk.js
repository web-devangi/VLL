"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2349],{73431:function(e,n,t){var i=t(47313),a=t(39180),l=t(2717),r=t(28830),u=t(60535),c=t(46417);n.Z=function(){var e=(0,l.I0)(),n=(0,l.v9)((function(e){return e.formLang}),l.wU),t=n.languages,o=n.defaultLang;(0,i.useEffect)((function(){u.Z.getAllActive().then((function(n){var t=n.data;e((0,r.dc)(t)),e((0,r.mh)(t.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(a.ZP.Group,{value:o,onChange:function(n){var t=n.target.value;e((0,r.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((function(e){return(0,c.jsx)(a.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},41481:function(e,n,t){t.d(n,{Z:function(){return f}});var i=t(1413),a=t(29439),l=t(45987),r=t(47313),u=t(66672),c=t(16031),o=t(40765),s=t(46417),d=["handleChange","defaultValue","resetSearch"];function f(e){var n=e.handleChange,t=e.defaultValue,f=e.resetSearch,v=(0,l.Z)(e,d),h=(0,r.useState)(t),Z=(0,a.Z)(h,2),g=Z[0],p=Z[1],m=(0,r.useMemo)((function(){return(0,c.debounce)((function(e){n(e)}),800)}),[]);return(0,r.useEffect)((function(){p(t)}),[f]),(0,s.jsx)(u.Z,(0,i.Z)({value:g,onChange:function(e){p(e.target.value),m(e.target.value)},prefix:(0,s.jsx)(o.Z,{})},v))}},2349:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var i=t(4942),a=t(1413),l=t(29439),r=t(47313),u=t(86345),c=t(45705),o=t(59491),s=t(77181),d=t(78508),f=t(74580),v=t(2717),h=t(90954),Z=t(23560),g=t(24511),p=t(57982),m=t(41481),j=t(80314),x=t(27453),y=t(97890),b=t(93433),C=t(10976),k=t(9274),S=t(72652),w=t(68197),I=t(59624),P=t(66672),T=t(73431),V=t(46417);function A(e){var n=e.visible,t=e.setVisible,c=e.id,s=e.setId,d=C.Z.useForm(),f=(0,l.Z)(d,1)[0],h=(0,v.I0)(),m=(0,g.$)().t,j=(0,v.v9)((function(e){return e.formLang}),v.wU),y=j.defaultLang,A=j.languages,E=(0,r.useState)(!1),F=(0,l.Z)(E,2),O=F[0],_=F[1],z=(0,r.useState)(!1),L=(0,l.Z)(z,2),M=L[0],U=L[1],B=(0,r.useState)(null),N=(0,l.Z)(B,2),$=N[0],q=N[1],D=function(){q(null),t(!1),f.resetFields(),s(null)};return(0,r.useEffect)((function(){c&&(U(!0),x.Z.show(c).then((function(e){var n=e.data;q(n),f.setFieldsValue((0,a.Z)({active:null===n||void 0===n?void 0:n.active},function(e){if(null===e||void 0===e||!e.translations)return{};var n=e.translations,t=A.map((function(e){var t;return(0,i.Z)({},"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title)}));return Object.assign.apply(Object,[{}].concat((0,b.Z)(t)))}(n)))})).finally((function(){return U(!1)})))}),[c]),(0,V.jsx)(k.Z,{visible:n,onCancel:D,onOk:D,footer:null,loading:M,title:m("add.region"),children:(0,V.jsxs)(C.Z,{form:f,onFinish:function(e){_(!0),null!==$&&void 0!==$&&$.id?function(e){x.Z.update($.id,{active:e.active,title:(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,b.Z)(A.map((function(n){return(0,i.Z)({},n.locale,e["title[".concat(n.locale,"]")])}))))))}).then((function(){Z.Am.success(m("successfully.updated")),(0,v.dC)((function(){h((0,p.T)({}))})),t(!1),f.resetFields(),q(null)})).finally((function(){return _(!1)}))}(e):function(e){x.Z.create({active:e.active,title:(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,b.Z)(A.map((function(n){return(0,i.Z)({},n.locale,e["title[".concat(n.locale,"]")])}))))))}).then((function(){Z.Am.success(m("successfully.added")),(0,v.dC)((function(){h((0,p.T)({}))})),t(!1),f.resetFields(),q(null)})).finally((function(){return _(!1)}))}(e)},layout:"vertical",initialValues:{active:!0},children:[(0,V.jsx)(S.Z,{spinning:M,children:(0,V.jsxs)(w.Z,{gutter:24,children:[(0,V.jsx)(I.Z,{span:24,children:(0,V.jsx)(T.Z,{})}),(0,V.jsx)(I.Z,{span:24,children:A.map((function(e){return(0,V.jsx)(C.Z.Item,{label:m("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==y,rules:[{validator:function(n,t){return t||(null===e||void 0===e?void 0:e.locale)!==y?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(m("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(m("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(m("required")))}}],children:(0,V.jsx)(P.Z,{})},"title"+e.id)}))}),(0,V.jsx)(I.Z,{span:4,children:(0,V.jsx)(C.Z.Item,{label:m("active"),name:"active",valuePropName:"checked",children:(0,V.jsx)(u.Z,{defaultChecked:!0})})})]})}),(0,V.jsx)(o.Z,{type:"primary",htmlType:"submit",loading:O,children:m("submit")})]})})}var E=t(12019),F=t(47515),O=function(){var e=(0,g.$)().t,n=(0,v.I0)(),t=(0,y.s0)(),b=(0,r.useContext)(f._).setIsModalVisible,C=(0,v.v9)((function(e){return e.menu}),v.wU).activeMenu,k=null===C||void 0===C?void 0:C.data,S=(0,v.v9)((function(e){return e.deliveryRegion}),v.wU),w=S.list,I=S.meta,P=S.loading,T=(0,r.useState)(!1),O=(0,l.Z)(T,2),_=O[0],z=O[1],L=(0,r.useState)(!1),M=(0,l.Z)(L,2),U=M[0],B=M[1],N=(0,r.useState)(!1),$=(0,l.Z)(N,2),q=$[0],D=$[1],G=(0,r.useState)(null),K=(0,l.Z)(G,2),R=K[0],H=K[1],J=[{title:e("id"),dataIndex:"id",key:"id"},{title:e("name"),dataIndex:"translation",key:"translation",render:function(i,a){return(0,V.jsx)("div",{style:{cursor:"pointer",textDecoration:"underline"},onClick:function(){return function(i){n((0,h.bL)({url:"deliveryzone/country?region_id=".concat(i.id),id:"country",name:e("country")})),t("/deliveryzone/country?region_id=".concat(i.id))}(a)},children:(null===i||void 0===i?void 0:i.title)||"-"})}},{title:e("active"),dataIndex:"active",key:"active",render:function(t,i){return(0,V.jsx)(u.Z,{onChange:function(){return function(t){z(t),x.Z.status(t).then((function(){b(!1),n((0,p.T)()),Z.Am.success(e("successfully.updated"))})).finally((function(){z(null)}))}(i.id)},checked:t,loading:Boolean(_===i.id)},i.id)}},{title:e("options"),dataIndex:"options",is_show:!0,render:function(t,i){return(0,V.jsxs)(c.Z,{children:[(0,V.jsx)(o.Z,{type:"primary",icon:(0,V.jsx)(E.Z,{}),onClick:function(){return function(e){B(!0),H(e)}(i.id)}}),(0,V.jsx)(o.Z,{loading:Boolean(q===i.id),icon:(0,V.jsx)(F.Z,{onClick:function(){return function(t){D(t),x.Z.delete(t).then((function(){n((0,p.T)()),Z.Am.success(e("successfully.deleted"))})).finally((function(){D(!1)}))}(i.id)}})})]})}}];(0,r.useEffect)((function(){C.refetch&&(n((0,p.T)()),n((0,h.A_)(C)))}),[C.refetch]),(0,j.Z)((function(){var e={search:null===k||void 0===k?void 0:k.search};n((0,p.T)(e))}),[null===C||void 0===C?void 0:C.data]);return(0,V.jsxs)(s.Z,{title:e("regions"),extra:(0,V.jsxs)(c.Z,{children:[(0,V.jsx)(m.Z,{placeholder:e("search"),handleChange:function(e){return t=e,l="search",void n((0,h.nc)({activeMenu:C,data:(0,a.Z)((0,a.Z)({},k),{},(0,i.Z)({},l,t))}));var t,l},defaultValue:null===k||void 0===k?void 0:k.search,resetSearch:!(null!==k&&void 0!==k&&k.search)}),(0,V.jsx)(o.Z,{type:"primary",onClick:function(){return B(!0)},children:e("add.region")})]}),children:[(0,V.jsx)(d.Z,{columns:J,dataSource:w,pagination:{pageSize:I.per_page,page:I.current_page,total:I.total},rowKey:function(e){return e.id},loading:P,onChange:function(e){var t=e.pageSize,i=e.current;n((0,p.T)({perPage:t,page:i}))}}),(0,V.jsx)(A,{visible:U,setVisible:B,id:R,setId:H})]})}}}]);