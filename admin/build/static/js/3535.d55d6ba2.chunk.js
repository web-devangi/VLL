"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3535],{55940:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(1413),i=t(45987),a=(t(47313),t(59491)),l=t(47515),o=t(23560),s=t(24511),u=t(79492),d=t(46417),c=["size","onClick","type"];function v(e){var n=e.size,t=void 0===n?"":n,v=e.onClick,m=e.type,p=void 0===m?"default":m,f=(0,i.Z)(e,c),h=(0,s.$)().t,Z=(0,u.Z)().isDemo;return(0,d.jsx)(a.Z,(0,r.Z)({size:t,icon:(0,d.jsx)(l.Z,{}),onClick:function(e){Z?o.Am.warning(h("cannot.work.demo")):v(e)},type:p},f))}},53233:function(e,n,t){var r=t(1413),i=t(29439),a=t(47313),l=t(56140),o=t(67251),s=t(45705),u=t(86345),d=t(78267),c=t(37388),v=t(59491),m=t(99587),p=t(24511),f=t(46417),h=l.Z.Text;n.Z=function(e){var n=e.columns,t=void 0===n?[]:n,l=e.setColumns,Z=e.style,x=e.size,g=void 0===x?"":x,j=e.iconOnly,y=(0,p.$)().t,w=(0,a.useState)(!1),b=(0,i.Z)(w,2),k=b[0],_=b[1],I=(0,f.jsx)(o.Z,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,f.jsx)(o.Z.Item,{children:(0,f.jsxs)(s.Z,{className:"d-flex justify-content-between",children:[(0,f.jsx)(h,{children:e.title}),(0,f.jsx)(u.Z,{defaultChecked:!0,onClick:function(){return function(e){var n=null===t||void 0===t?void 0:t.map((function(n){return n.dataIndex===e.dataIndex&&(n.is_show=!(null!==n&&void 0!==n&&n.is_show)),n}));l(n)}(e)},disabled:1===n})]})},e+n)}))});return(0,f.jsx)(d.Z,{overlay:I,trigger:["click"],onVisibleChange:function(e){_(e)},visible:k,children:(0,f.jsx)(c.Z,{title:y("change.columns"),children:(0,f.jsx)(v.Z,{style:(0,r.Z)({},Z),size:g,icon:(0,f.jsx)(m.Z,{}),children:j?null:y("Columns")})})})}},97388:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(15861),i=t(29439),a=t(87757),l=t.n(a),o=t(47313),s=t(16609),u=t(97421),d=t.p+"static/media/pin.0e41858db80c699cd8a2.png",c=t(31881),v=t.n(c);function m(e){return p.apply(this,arguments)}function p(){return p=(0,r.Z)(l().mark((function e(n){var t,r,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:u.kr,r={latlng:"".concat(null===n||void 0===n?void 0:n.lat,",").concat(null===n||void 0===n?void 0:n.lng),key:t},e.abrupt("return",v().get("https://maps.googleapis.com/maps/api/geocode/json",{params:r}).then((function(e){var n;return null===(n=e.data.results[0])||void 0===n?void 0:n.formatted_address})).catch((function(e){return"not found"})));case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}var f=t(5958),h=t(23560),Z=t(24511),x=t(46417);var g=(0,s.GoogleApiWrapper)({apiKey:u.kr})((function(e){var n=(0,o.useState)(),t=(0,i.Z)(n,2),a=t[0],c=t[1],v=(0,Z.$)().t,p=function(){var n=(0,r.Z)(l().mark((function n(t,r,i){var a,o,s;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=i.latLng,o={lat:a.lat(),lng:a.lng()},e.setLocation(o),n.next=5,m(o,u.kr);case 5:s=n.sent,e.setAddress(s);case 7:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),g=function(){var n=(0,r.Z)(l().mark((function n(t){var r,i;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={lat:null===t||void 0===t?void 0:t.lat,lng:null===t||void 0===t?void 0:t.lng},e.setLocation(r),n.next=4,m(r,u.kr);case 4:i=n.sent,e.setAddress(i);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition((function(e){var n={lat:e.coords.latitude,lng:e.coords.longitude};c(n)}),(function(e){h.Am.warning(v("turn.on.gps"))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){j()}),[]);for(var y=[{lat:Number(e.location.lat)||0,lng:Number(e.location.lng)||0}],w=new e.google.maps.LatLngBounds,b=0;b<y.length;b++)w.extend(y[b]);return(0,x.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,x.jsx)("button",{className:"map-button",type:"button",onClick:function(){j(),a&&g(a)},children:(0,x.jsx)(f.nDs,{})}),(0,x.jsx)(s.Map,{cursor:"pointer",onClick:p,google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,x.jsx)(s.Marker,{position:e.location,icon:{url:d,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},89281:function(e,n,t){t.d(n,{h:function(){return m}});var r=t(1413),i=t(29439),a=t(45987),l=t(47313),o=t(12279),s=t.n(o),u=t(74294),d=t(72652),c=t(46417),v=["fetchOptions","debounceTimeout","onClear","refetchOptions"],m=function(e){var n=e.fetchOptions,t=e.debounceTimeout,o=void 0===t?400:t,m=e.onClear,p=e.refetchOptions,f=void 0!==p&&p,h=(0,a.Z)(e,v),Z=(0,l.useState)(!1),x=(0,i.Z)(Z,2),g=x[0],j=x[1],y=(0,l.useState)([]),w=(0,i.Z)(y,2),b=w[0],k=w[1],_=(0,l.useMemo)((function(){return s()((function(e){k([]),j(!0),n(e).then((function(e){k(e),j(!1)}))}),o)}),[n,o]);return(0,c.jsx)(u.Z,(0,r.Z)((0,r.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:_,onClear:function(){_(""),m&&m()},notFoundContent:g?(0,c.jsx)(d.Z,{size:"small"}):"no results"},h),{},{options:b,onFocus:function(){b.length&&!f||_("")}}))}},13945:function(e,n,t){function r(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(n,{Z:function(){return r}})},17649:function(e,n,t){t.d(n,{Z:function(){return r}});t(97421);function r(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};var n=e.location.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}},84017:function(e,n,t){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after",r=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(r," ").concat(n):"".concat(n," ").concat(r)}t.d(n,{Z:function(){return r}})},78067:function(e,n,t){var r=t(1413),i=t(29439),a=t(10976),l=t(68197),o=t(59624),s=t(66672),u=t(74294),d=t(86345),c=t(59491),v=t(47313),m=t(24511),p=t(45321),f=t(51282),h=t(2717),Z=t(5764),x=t(97388),g=t(17649),j=t(23560),y=t(89281),w=t(79637),b=t(47139),k=t(46417),_=[{label:"Benzine",value:"benzine"},{label:"Diesel",value:"diesel"},{label:"Gas",value:"gas"},{label:"Motorbike",value:"motorbike"},{label:"Bike",value:"bike"},{label:"Foot",value:"foot"},{label:"Electric",value:"electric"}];n.Z=function(e){var n=e.id,t=e.data,I=(0,m.$)().t,S=a.Z.useForm(),C=(0,i.Z)(S,1)[0],q=(0,v.useState)(!1),z=(0,i.Z)(q,2),N=z[0],P=z[1],V=(0,v.useState)(!1),M=(0,i.Z)(V,2),O=M[0],H=M[1],A=(0,v.useState)([]),F=(0,i.Z)(A,2),E=F[0],T=F[1],U=(0,v.useState)(""),L=(0,i.Z)(U,2),$=L[0],D=L[1],Y=(0,h.v9)((function(e){return e.globalSettings}),h.wU).settings,B=(0,v.useState)((0,g.Z)(Y)),K=(0,i.Z)(B,2),R=K[0],W=K[1],G=function(e){return e.map((function(e){return{uid:e.id,name:e.path,url:e.path}}))},J=a.Z.useWatch("country",C);return(0,v.useEffect)((function(){n&&function(e){H(!0),p.Z.getById(e).then((function(e){var n,t,i,a,l,o,s,u,d,c,v,m,p,f,h,Z,x,g,j,y,w,b,k,_=(0,r.Z)((0,r.Z)({},e.data),{},{country:{label:null===(n=e.data)||void 0===n||null===(t=n.country)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title,value:null===(a=e.data)||void 0===a||null===(l=a.country)||void 0===l?void 0:l.id,key:null===(o=e.data)||void 0===o||null===(s=o.country)||void 0===s?void 0:s.region_id},city:{label:null===(u=e.data)||void 0===u||null===(d=u.city)||void 0===d||null===(c=d.translation)||void 0===c?void 0:c.title,value:null===(v=e.data)||void 0===v||null===(m=v.city)||void 0===m?void 0:m.id},user_id:{label:(null===(p=e.data.deliveryman)||void 0===p?void 0:p.firstname)+" "+(null===(f=e.data.deliveryman)||void 0===f?void 0:f.firstname),value:null===(h=e.data.deliveryman)||void 0===h?void 0:h.id,images:G(e.data.galleries),location:{lat:null===(Z=e.data)||void 0===Z||null===(x=Z.location)||void 0===x?void 0:x.latitude,lng:null===(g=e.data)||void 0===g||null===(j=g.location)||void 0===j?void 0:j.longitude}}});W({lat:null===(y=e.data)||void 0===y||null===(w=y.location)||void 0===w?void 0:w.latitude,lng:null===(b=e.data)||void 0===b||null===(k=b.location)||void 0===k?void 0:k.longitude}),T(G(e.data.galleries)),C.setFieldsValue(_)})).finally((function(){return H(!1)}))}(n)}),[]),(0,k.jsx)(a.Z,{name:"basic",layout:"vertical",onFinish:function(e){var i,a,l,o,s,u,d;if(console.log(e),$.includes(null===(i=e.country)||void 0===i?void 0:i.label))if(!e.city||$.includes(null===(a=e.city)||void 0===a?void 0:a.label)){P(!0);var c=(0,r.Z)((0,r.Z)({},e),{},{user_id:t.id,images:null!==(l=E[0])&&void 0!==l&&l.name?[null===(o=E[0])||void 0===o?void 0:o.name]:void 0,country_id:null===e||void 0===e||null===(s=e.country)||void 0===s?void 0:s.value,city_id:null===e||void 0===e||null===(u=e.city)||void 0===u?void 0:u.value,region_id:null===e||void 0===e||null===(d=e.country)||void 0===d?void 0:d.key,location:{latitude:R.lat,longitude:R.lng},online:Boolean(e.online)});p.Z.update(n,c).then((function(){return j.Am.success(I("successfully.updated"))})).finally((function(){return P(!1)}))}else j.Am.warn(I("please.choose.corrent.location"));else j.Am.warn(I("please.choose.corrent.location"))},form:C,children:O?(0,k.jsx)(f.Z,{}):(0,k.jsxs)(l.Z,{gutter:12,children:[(0,k.jsx)(o.Z,{span:12,children:(0,k.jsx)(a.Z.Item,{label:I("brand"),name:"brand",rules:[{required:!0,message:I("required")}],children:(0,k.jsx)(s.Z,{})})}),(0,k.jsx)(o.Z,{span:12,children:(0,k.jsx)(a.Z.Item,{label:I("model"),name:"model",rules:[{required:!0,message:I("required")}],children:(0,k.jsx)(s.Z,{})})}),(0,k.jsx)(o.Z,{span:12,children:(0,k.jsx)(a.Z.Item,{label:I("type.of.technique"),name:"type_of_technique",rules:[{required:!0,message:I("required")}],children:(0,k.jsx)(u.Z,{options:_})})}),(0,k.jsx)(o.Z,{span:12,children:(0,k.jsx)(a.Z.Item,{label:I("car.number"),name:"number",rules:[{required:!0,message:I("required")}],children:(0,k.jsx)(s.Z,{})})}),(0,k.jsx)(o.Z,{span:12,children:(0,k.jsx)(a.Z.Item,{label:I("car.color"),name:"color",rules:[{required:!0,message:I("required")}],children:(0,k.jsx)(s.Z,{})})}),(0,k.jsx)(o.Z,{span:12,children:(0,k.jsx)(a.Z.Item,{name:"country",label:I("country"),rules:[{required:!0,message:I("required")}],children:(0,k.jsx)(y.h,{fetchOptions:function(e){var n={search:e,perPage:10,page:1,has_price:1};return b.Z.get(n).then((function(e){var n=e.data;return null===n||void 0===n?void 0:n.flatMap((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.region_id}}))}))},placeholder:I("select.country"),onClear:function(){C.setFieldsValue({city:[]})},autoComplete:"none"})})}),(0,k.jsx)(o.Z,{span:12,children:(0,k.jsx)(a.Z.Item,{name:"city",label:I("city"),children:(0,k.jsx)(y.h,{fetchOptions:function(e){var n={search:e,perPage:10,page:1,country_id:null===J||void 0===J?void 0:J.value,has_price:1};return w.Z.get(n).then((function(e){var n=e.data;return null===n||void 0===n?void 0:n.flatMap((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:I("select.city"),refetchOptions:!0,disabled:!J,autoComplete:"none"})})}),(0,k.jsx)(o.Z,{span:12,children:(0,k.jsx)(a.Z.Item,{label:I("image"),name:"images",children:(0,k.jsx)(Z.Z,{type:"deliveryman/settings",imageList:E,setImageList:T,form:C,length:"1",multiple:!0})})}),(0,k.jsx)(o.Z,{span:6,children:(0,k.jsx)(a.Z.Item,{label:I("online"),name:"online",valuePropName:"checked",children:(0,k.jsx)(d.Z,{})})}),(0,k.jsx)(o.Z,{span:24,children:(0,k.jsx)(a.Z.Item,{label:I("map"),name:"location",children:(0,k.jsx)(x.Z,{location:R,setLocation:W,setAddress:D})})}),(0,k.jsx)(o.Z,{span:24,children:(0,k.jsx)(c.Z,{type:"primary",htmlType:"submit",loading:N,children:I("save")})})]})})}},65559:function(e,n,t){t.d(n,{Z:function(){return P}});var r=t(15861),i=t(1413),a=t(29439),l=t(87757),o=t.n(l),s=t(47313),u=t(10976),d=t(68197),c=t(59624),v=t(66672),m=t(16124),p=t(99096),f=t(74294),h=t(59491),Z=t(97890),x=t(2717),g=t(49986),j=t(23560),y=t(90954),w=t(84304),b=t(70816),k=t.n(b),_=t(24511),I=t(85746),S=t(5764),C=t(89281),q=t(53149),z=t(79492),N=t(46417);function P(e){var n,t=e.form,l=e.data,b=e.image,P=e.setImage,V=e.action_type,M=void 0===V?"":V,O=(0,_.$)().t,H=(0,x.v9)((function(e){return e.menu.activeMenu}),x.wU),A=(0,x.I0)(),F=(0,Z.s0)(),E=(0,Z.UO)().uuid,T=(0,Z.TH)(),U=(0,s.useState)(null),L=(0,a.Z)(U,2),$=L[0],D=L[1],Y=(0,s.useState)(!1),B=(0,a.Z)(Y,2),K=B[0],R=B[1],W=null===H||void 0===H||null===(n=H.data)||void 0===n?void 0:n.role,G=(0,x.v9)((function(e){return e.user}),x.wU),J=(0,x.v9)((function(e){return e.client}),x.wU),Q=(0,z.Z)().isDemo;function X(e){return ee.apply(this,arguments)}function ee(){return(ee=(0,r.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,status:"approved"},e.abrupt("return",q.Z.search(t).then((function(e){return e.data.map((function(e){return{label:null!==e.translation?e.translation.title:O("no.name"),value:e.id,key:e.id}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,N.jsx)(u.Z,{form:t,layout:"vertical",initialValues:(0,i.Z)({gender:"male",role:"admin"},l),onFinish:function(e){var n,t,r,a;R(!0);var o={firstname:e.firstname,lastname:e.lastname,email:null===e||void 0===e?void 0:e.email,phone:null===e||void 0===e?void 0:e.phone,birthday:k()(e.birthday).format("YYYY-MM-DD"),gender:e.gender,images:b[0]?[null===(n=b[0])||void 0===n?void 0:n.name]:void 0,shop_id:null!==e&&void 0!==e&&e.shop_id?void 0!==(null===e||void 0===e||null===(t=e.shop_id)||void 0===t?void 0:t.length)?null===e||void 0===e||null===(r=e.shop_id)||void 0===r?void 0:r.map((function(e){return e.value})):[null===e||void 0===e||null===(a=e.shop_id)||void 0===a?void 0:a.value]:void 0,role:W},s=0===T.pathname.search("/user/delivery/")?"deliveries/list":"user"!==l.role?"users/admin":"users/user",u=(0,i.Z)((0,i.Z)({},G.params),{},{role:l.role}),d=(0,i.Z)({},J.params);"edit"===M?g.Z.update(E,o).then((function(){j.Am.success(O("successfully.updated")),A((0,y.ph)((0,i.Z)((0,i.Z)({},H),{},{nextUrl:s}))),F("/".concat(s)),"user"===l.role?A((0,I.Tu)(d)):A((0,w.uh)(u))})).catch((function(e){return D(e.response.data.params)})).finally((function(){return R(!1)})):g.Z.create(o).then((function(){j.Am.success(O("successfully.updated")),A((0,y.ph)((0,i.Z)((0,i.Z)({},H),{},{nextUrl:s}))),F("/".concat(s)),"user"===l.role?A((0,I.Tu)(d)):A((0,w.uh)(u))})).catch((function(e){return D(e.response.data.params)})).finally((function(){return R(!1)}))},className:"px-2",children:(0,N.jsxs)(d.Z,{gutter:12,children:[(0,N.jsx)(c.Z,{span:24,children:(0,N.jsx)(u.Z.Item,{name:"images",label:O("avatar"),rules:[{validator:function(){return 0===(null===b||void 0===b?void 0:b.length)?Promise.reject(new Error(O("required"))):Promise.resolve()}}],children:(0,N.jsx)(S.Z,{type:"users",imageList:b,setImageList:P,form:t,multiple:!1,name:"logo_img"})})}),(0,N.jsx)(c.Z,{span:12,children:(0,N.jsx)(u.Z.Item,{label:O("firstname"),name:"firstname",help:null!==$&&void 0!==$&&$.firstname?$.firstname[0]:null,validateStatus:null!==$&&void 0!==$&&$.firstname?"error":"success",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(O("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(O("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(O("required")))}}],children:(0,N.jsx)(v.Z,{className:"w-100"})})}),(0,N.jsx)(c.Z,{span:12,children:(0,N.jsx)(u.Z.Item,{label:O("lastname"),name:"lastname",help:null!==$&&void 0!==$&&$.lastname?$.lastname[0]:null,validateStatus:null!==$&&void 0!==$&&$.lastname?"error":"success",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(O("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(O("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(O("required")))}}],children:(0,N.jsx)(v.Z,{className:"w-100"})})}),(0,N.jsx)(c.Z,{span:12,children:(0,N.jsx)(u.Z.Item,{label:O("phone"),name:"phone",help:null!==$&&void 0!==$&&$.phone?$.phone[0]:null,validateStatus:null!==$&&void 0!==$&&$.phone?"error":"success",rules:[{required:!Q,message:O("required")}],children:(0,N.jsx)(m.Z,{min:0,className:"w-100"})})}),(0,N.jsx)(c.Z,{span:12,children:(0,N.jsx)(u.Z.Item,{label:O("birthday"),name:"birthday",rules:[{required:!0,message:O("required")}],valuePropName:"birthday",children:(0,N.jsx)(p.Z,{className:"w-100",disabledDate:function(e){return k()().add(-18,"years")<=e},defaultPickerValue:k()().add(-18,"years"),defaultValue:k()(null===l||void 0===l?void 0:l.birthday)})})}),(0,N.jsx)(c.Z,{span:12,children:(0,N.jsx)(u.Z.Item,{label:O("gender"),name:"gender",rules:[{required:!0,message:O("required")}],children:(0,N.jsxs)(f.Z,{picker:"dayTime",className:"w-100",children:[(0,N.jsx)(f.Z.Option,{value:"male",children:O("male")}),(0,N.jsx)(f.Z.Option,{value:"female",children:O("female")})]})})}),(0,N.jsx)(c.Z,{span:12,children:(0,N.jsx)(u.Z.Item,{label:O("email"),name:"email",help:null!==$&&void 0!==$&&$.email?$.email[0]:null,validateStatus:null!==$&&void 0!==$&&$.email?"error":"success",rules:[{required:!Q,message:O("required")},{type:"email",message:O("invalid.email")}],children:(0,N.jsx)(v.Z,{type:"email",className:"w-100",disabled:Q})})}),"cook"===W&&(0,N.jsx)(c.Z,{span:12,children:(0,N.jsx)(u.Z.Item,{label:O("shop"),name:"shop_id",rules:[{required:!1,message:O("required")}],children:(0,N.jsx)(C.h,{fetchOptions:X,className:"w-100",placeholder:O("select.shop"),allowClear:!1})})}),"moderator"===W&&(0,N.jsx)(c.Z,{span:12,children:(0,N.jsx)(u.Z.Item,{label:O("branches"),name:"shop_id",rules:[{required:!1,message:O("required")}],children:(0,N.jsx)(C.h,{fetchOptions:X,className:"w-100",placeholder:O("select.shop"),allowClear:!1})})}),(0,N.jsx)(c.Z,{span:24,children:(0,N.jsx)(h.Z,{type:"primary",htmlType:"submit",loading:K,children:O("save")})})]})})}},45713:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(4942),i=t(93433),a=t(1413),l=t(29439),o=t(47313),s=t(45705),u=t(59491),d=t(77181),c=t(78508),v=t(97890),m=t(31741),p=t(47515),f=t(2717),h=t(90954),Z=t(24511),x=t(84017),g=t(22054),j=t(13945),y=t(74580),w=t(23560),b=t(55940),k=t(69658),_=t(7370),I=t(53233),S=t(46417);function C(e){var n=e.data,t=(0,f.I0)(),C=(0,v.s0)(),q=(0,Z.$)().t,z=(0,o.useState)(null),N=(0,l.Z)(z,2),P=N[0],V=N[1],M=(0,o.useState)(null),O=(0,l.Z)(M,2),H=O[0],A=O[1],F=(0,o.useContext)(y._).setIsModalVisible,E=(0,o.useState)(!1),T=(0,l.Z)(E,2),U=T[0],L=T[1],$=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,D=(0,f.v9)((function(e){return e.orders}),f.wU),Y=D.orders,B=D.meta,K=D.loading,R=D.params,W=(0,f.v9)((function(e){return e.currency}),f.wU).defaultCurrency,G=(0,o.useState)([{title:q("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:q("client"),is_show:!0,dataIndex:"user",key:"user",render:function(e){return(0,S.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})}},{title:q("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:function(e){return(0,S.jsxs)("div",{className:"text-lowercase",children:[e||0," ",q("products")]})}},{title:q("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:function(e){return(0,x.Z)(e,null===W||void 0===W?void 0:W.symbol)}},{title:q("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:function(e){var n;return q(null===e||void 0===e||null===(n=e.payment_system)||void 0===n?void 0:n.tag)||"-"}},{title:q("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:q("options"),is_show:!0,key:"options",render:function(e,n){return(0,S.jsxs)(s.Z,{children:[(0,S.jsx)(u.Z,{icon:(0,S.jsx)(m.Z,{}),onClick:function(){return function(e){t((0,h.bL)({url:"order/details/".concat(e.id),id:"order_details",name:q("order.details")})),C("/order/details/".concat(e.id))}(n)}}),(0,S.jsx)(b.Z,{icon:(0,S.jsx)(p.Z,{}),onClick:function(){V([n.id]),F(!0),A(!0)}})]})}}]),J=(0,l.Z)(G,2),Q=J[0],X=J[1];(0,o.useEffect)((function(){var e={user_id:null===n||void 0===n?void 0:n.uuid,page:1,perPage:10};t((0,g.dT)(e))}),[]);var ee={selectedRowKeys:P,onChange:function(e){V(e)}};return(0,S.jsx)("div",{children:(0,S.jsxs)(d.Z,{title:q("orders"),extra:(0,S.jsxs)(s.Z,{wrap:!0,children:[(0,S.jsx)(b.Z,{type:"danger",onClick:function(){null===P||0===P.length?w.Am.warning(q("select.the.product")):(F(!0),A(!1))},children:q("delete.all")}),(0,S.jsx)(I.Z,{setColumns:X,columns:Q})]}),children:[(0,S.jsx)(c.Z,{scroll:{x:!0},rowSelection:ee,columns:null===Q||void 0===Q?void 0:Q.filter((function(e){return e.is_show})),dataSource:Y,loading:K,pagination:{pageSize:R.perPage,page:R.page,total:B.total,defaultCurrent:R.page},rowKey:function(e){return e.id},onChange:function(e,n,r){var i=e.pageSize,l=e.current,o=r.field,s=r.order,u=(0,j.Z)(s);t((0,h.nc)({activeMenu:$,data:(0,a.Z)((0,a.Z)({},$.data),{},{perPage:i,page:l,column:o,sort:u})}))}}),(0,S.jsx)(k.Z,{click:function(){L(!0);var e=(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,i.Z)(P.map((function(e,n){return(0,r.Z)({},"ids[".concat(n,"]"),e)}))))));_.Z.delete(e).then((function(){w.Am.success(q("successfully.deleted")),F(!1),t((0,g.dT)()),A(null)})).finally((function(){return L(!1)}))},text:q(H?"delete":"all.delete"),loading:U,setText:V})]})})}},94748:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(29439),i=t(47313),a=t(10976),l=t(77181),o=t(68197),s=t(59624),u=t(66672),d=t(59491),c=t(97890),v=t(23560),m=t(49986),p=t(24511),f=t(46417);function h(){var e=(0,p.$)().t,n=a.Z.useForm(),t=(0,r.Z)(n,1)[0],h=(0,i.useState)(null),Z=(0,r.Z)(h,2),x=Z[0],g=Z[1],j=(0,i.useState)(!1),y=(0,r.Z)(j,2),w=y[0],b=y[1],k=(0,c.UO)().uuid;return(0,f.jsx)(l.Z,{title:e("user.password.change"),children:(0,f.jsx)(a.Z,{form:t,layout:"vertical",onFinish:function(n){b(!0);var t={password:n.password?n.password:void 0,password_confirmation:n.password_confirmation};m.Z.updatePassword(k,t).then((function(){v.Am.success(e("successfully.created"))})).catch((function(e){return g(e.response.data.params)})).finally((function(){return b(!1)}))},children:(0,f.jsxs)(o.Z,{gutter:12,children:[(0,f.jsx)(s.Z,{span:12,children:(0,f.jsx)(a.Z.Item,{label:e("password"),name:"password",help:null!==x&&void 0!==x&&x.password?x.password[0]:null,validateStatus:null!==x&&void 0!==x&&x.password?"error":"success",rules:[{required:!0,message:e("required")}],children:(0,f.jsx)(u.Z.Password,{type:"password",className:"w-100",placeholder:"********"})})}),(0,f.jsx)(s.Z,{span:12,children:(0,f.jsx)(a.Z.Item,{label:e("password.confirmation"),help:null!==x&&void 0!==x&&x.password_confirmation?x.password_confirmation[0]:null,validateStatus:null!==x&&void 0!==x&&x.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:e("required")},function(n){var t=n.getFieldValue;return{validator:function(n,r){return r&&t("password")!==r?Promise.reject(e("two.passwords.dont.match")):Promise.resolve()}}}],children:(0,f.jsx)(u.Z.Password,{type:"password",placeholder:"********"})})}),(0,f.jsx)(s.Z,{span:24,children:(0,f.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:w,children:e("save")})})]})})})}},92815:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(29439),i=t(47313),a=t(45705),l=t(59491),o=t(78508),s=t(2717),u=t(24511),d=t(84017),c=t(49986),v=t(55768),m=t(10976),p=t(9274),f=t(16124),h=t(66672),Z=t(23560),x=t(90954),g=t(46417);function j(e){var n=e.modal,t=e.uuid,a=e.handleCancel,o=(0,i.useState)(!1),d=(0,r.Z)(o,2),v=d[0],j=d[1],y=m.Z.useForm(),w=(0,r.Z)(y,1)[0],b=(0,u.$)().t,k=(0,s.I0)(),_=(0,s.v9)((function(e){return e.menu}),s.wU).activeMenu;return(0,g.jsx)(p.Z,{visible:n,title:b("topup.wallet"),onCancel:a,footer:[(0,g.jsx)(l.Z,{type:"default",onClick:a,children:b("cancel")},"cancel-btn"),(0,g.jsx)(l.Z,{type:"primary",onClick:function(){return w.submit()},loading:v,children:b("save")},"submit-btn")],children:(0,g.jsxs)(m.Z,{layout:"vertical",form:w,onFinish:function(e){j(!0),c.Z.topupWallet(t,e).then((function(){Z.Am.success(b("successfully.added")),k((0,x.xo)(_)),a()})).finally((function(){return j(!1)}))},children:[(0,g.jsx)(m.Z.Item,{label:b("price"),name:"price",rules:[{required:!0,message:b("required")}],children:(0,g.jsx)(f.Z,{min:0,className:"w-100"})}),(0,g.jsx)(m.Z.Item,{label:b("note"),name:"note",children:(0,g.jsx)(h.Z,{})})]})})}var y=t(53233),w=t(70816),b=t.n(w);function k(e){var n,t=e.data,m=(0,u.$)().t,p=(0,i.useState)(1),f=(0,r.Z)(p,2),h=f[0],Z=f[1],x=(0,i.useState)(10),w=(0,r.Z)(x,2),k=w[0],_=w[1],I=(0,i.useState)(1),S=(0,r.Z)(I,2),C=S[0],q=S[1],z=(0,i.useState)(!1),N=(0,r.Z)(z,2),P=N[0],V=N[1],M=(0,i.useState)([]),O=(0,r.Z)(M,2),H=O[0],A=O[1],F=(0,i.useState)(!1),E=(0,r.Z)(F,2),T=E[0],U=E[1],L=(0,s.v9)((function(e){return e.currency}),s.wU).defaultCurrency,$=(0,i.useState)([{title:m("created.by"),dataIndex:"author",key:"author",is_show:!0,render:function(e){return(0,g.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})}},{title:m("price"),dataIndex:"price",key:"price",is_show:!0,render:function(e){return(0,d.Z)(e,null===L||void 0===L?void 0:L.symbol)}},{title:m("note"),dataIndex:"note",key:"note",is_show:!0},{title:m("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:function(e){return b()(e).format("YYYY-MM-DD HH:mm")}}]),D=(0,r.Z)($,2),Y=D[0],B=D[1];return(0,i.useEffect)((function(){!function(){V(!0);var e={pageSize:10,page:h||1};c.Z.walletHistory(t.uuid,e).then((function(e){A(e.data),q(e.meta.total)})).finally((function(){return V(!1)}))}()}),[h]),(0,g.jsxs)("div",{className:"px-2",children:[(0,g.jsx)("div",{className:"d-flex justify-content-end",children:(0,g.jsxs)(a.Z,{wrap:!0,children:[(0,g.jsx)(l.Z,{type:"primary",icon:(0,g.jsx)(v.Z,{}),onClick:function(){return U(!0)},children:"".concat(m("wallet"),": ").concat((0,d.Z)(null===t||void 0===t||null===(n=t.wallet)||void 0===n?void 0:n.price,null===L||void 0===L?void 0:L.symbol))}),(0,g.jsx)(y.Z,{columns:Y,setColumns:B})]})}),(0,g.jsx)(o.Z,{scroll:{x:!0},columns:null===Y||void 0===Y?void 0:Y.filter((function(e){return e.is_show})),dataSource:H,loading:P,pagination:{pageSize:k,page:h,total:C},rowKey:function(e){return e.id},onChange:function(e,n,t){var r=e.pageSize,i=e.current;Z(i),_(r)}}),T&&(0,g.jsx)(j,{modal:T,uuid:t.uuid,handleCancel:function(){return U(!1)}})]})}},55768:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(1413),i=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},l=t(17469),o=function(e,n){return i.createElement(l.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:a}))};o.displayName="PlusCircleOutlined";var s=i.forwardRef(o)},99587:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(1413),i=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},l=t(17469),o=function(e,n){return i.createElement(l.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:a}))};o.displayName="TableOutlined";var s=i.forwardRef(o)}}]);