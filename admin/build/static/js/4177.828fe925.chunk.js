"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4177],{13622:function(e,n,r){r.d(n,{R:function(){return p}});var a=r(1413),i=r(29439),s=r(45987),t=r(47313),l=r(12279),u=r.n(l),c=r(74294),m=r(72652),d=r(46417),o=["fetchOptions","debounceTimeout","refetch"],p=function(e){var n=e.fetchOptions,r=e.debounceTimeout,l=void 0===r?400:r,p=e.refetch,h=void 0!==p&&p,Z=(0,s.Z)(e,o),x=(0,t.useState)(!1),f=(0,i.Z)(x,2),j=f[0],v=f[1],g=(0,t.useState)([]),_=(0,i.Z)(g,2),w=_[0],b=_[1],q=(0,t.useMemo)((function(){return u()((function(e){b([]),v(!0),n(e).then((function(e){b(e),v(!1)}))}),l)}),[n,l]);return(0,d.jsx)(c.Z,(0,a.Z)((0,a.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,onClear:function(){return q("")},filterOption:!1,onSearch:q,notFoundContent:j?(0,d.jsx)(m.Z,{size:"small"}):"no results"},Z),{},{options:w,onFocus:function(){w.length&&!h||q("")}}))}},54177:function(e,n,r){r.r(n),r.d(n,{default:function(){return S}});var a=r(15861),i=r(1413),s=r(29439),t=r(87757),l=r.n(t),u=r(47313),c=r(10976),m=r(77181),d=r(68197),o=r(59624),p=r(66672),h=r(16124),Z=r(86345),x=r(59491),f=r(23560),j=r(97890),v=r(71927),g=r(2717),_=r(90954),w=r(24511),b=r(8550),q=r(51282),I=r(5764),y=r(29186),N=r(98231),k=r(13622),A=r(46417);function S(){var e,n,r=(0,w.$)().t,t=(0,j.s0)(),S=(0,j.UO)().id,F=(0,g.I0)(),P=c.Z.useForm(),C=(0,s.Z)(P,1)[0],E=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,O=(0,u.useState)(!1),U=(0,s.Z)(O,2),V=U[0],z=U[1],M=(0,u.useState)(!1),T=(0,s.Z)(M,2),B=T[0],K=T[1],L=(0,u.useState)((null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.image)||[]),R=(0,s.Z)(L,2),$=R[0],D=R[1],G=(0,u.useState)(null===E||void 0===E||null===(n=E.data)||void 0===n?void 0:n.special),H=(0,s.Z)(G,2),J=H[0],Q=H[1];(0,u.useEffect)((function(){return function(){var e=C.getFieldsValue(!0);F((0,_.nc)({activeMenu:E,data:(0,i.Z)((0,i.Z)({},E.data),e)}))}}),[]);var W=function(){var e=(0,a.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.Z.getAll({search:n}).then((function(e){return e.data.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id}}))})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){E.refetch&&S&&function(e){z(!0),v.Z.getById(e).then((function(e){var n=e.data;D([(0,b.Z)(n.img)]),Q(n.special),C.setFieldsValue((0,i.Z)((0,i.Z)({},n),{},{options:null===n||void 0===n?void 0:n.options.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))}))})).finally((function(){z(!1),F((0,_.A_)(E))}))}(S)}),[E.refetch]),(0,A.jsx)(m.Z,{title:r(S?"edit.parcel.type":"add.parcel.type"),children:V?(0,A.jsx)(q.Z,{}):(0,A.jsxs)(c.Z,{form:C,name:"parcel-type",layout:"vertical",initialValues:(0,i.Z)({},E.data),onFinish:function(e){var n;K(!0);var a=(0,i.Z)((0,i.Z)({},e),{},{special:Boolean(e.special),special_price:e.special_price||0,special_price_per_km:e.special_price_per_km||0,images:null===$||void 0===$?void 0:$.map((function(e){return e.name})),image:void 0,options:null===(n=e.options)||void 0===n?void 0:n.map((function(e){return e.value}))}),s="parcel-types";S?v.Z.update(S,a).then((function(){F((0,y.K)()),f.Am.success(r("successfully.updated")),F((0,_.ph)((0,i.Z)((0,i.Z)({},E),{},{nextUrl:s}))),t("/".concat(s))})).finally((function(){return K(!1)})):v.Z.create(a).then((function(){F((0,y.K)()),f.Am.success(r("successfully.created")),F((0,_.ph)((0,i.Z)((0,i.Z)({},E),{},{nextUrl:s}))),t("/".concat(s))})).finally((function(){return K(!1)}))},children:[(0,A.jsxs)(d.Z,{gutter:12,children:[(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("title"),name:"type",rules:[{validator:function(e,n){return n?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(r("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(r("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(r("required")))}}],children:(0,A.jsx)(p.Z,{})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("image"),name:"images",rules:[{validator:function(){return 0===(null===$||void 0===$?void 0:$.length)?Promise.reject(new Error(r("required"))):Promise.resolve()}}],children:(0,A.jsx)(I.Z,{type:"languages",imageList:$,setImageList:D,form:C,multiple:!1})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("start.price"),name:"price",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,className:"w-100"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("price.per.km"),name:"price_per_km",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,className:"w-100"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("min_width"),name:"min_width",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("max_width"),name:"max_width",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("min_height"),name:"min_height",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("max_height"),name:"max_height",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("min_length"),name:"min_length",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("max_length"),name:"max_length",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,max:32678,className:"w-100",addonAfter:"sm"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("min_weight"),name:"min_g",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,max:32678,className:"w-100",addonAfter:"gramm"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("max_weight"),name:"max_g",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,max:2147e6,className:"w-100",addonAfter:"gramm"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("options"),name:"options",children:(0,A.jsx)(k.R,{fetchOptions:W,mode:"multiple"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("max.range"),name:"max_range",children:(0,A.jsx)(h.Z,{min:0,className:"w-100",addonAfter:"km"})})}),(0,A.jsx)(o.Z,{span:24,children:(0,A.jsx)(c.Z.Item,{label:r("special"),name:"special",valuePropName:"checked",children:(0,A.jsx)(Z.Z,{onChange:function(e){return Q(e)}})})}),!!J&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("start.price"),name:"special_price",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,className:"w-100"})})}),(0,A.jsx)(o.Z,{span:12,children:(0,A.jsx)(c.Z.Item,{label:r("price.per.km"),name:"special_price_per_km",rules:[{required:!0,message:r("required")}],children:(0,A.jsx)(h.Z,{min:0,className:"w-100"})})})]})]}),(0,A.jsx)(x.Z,{type:"primary",htmlType:"submit",loading:B,children:r("save")})]})})}}}]);