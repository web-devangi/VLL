"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2349],{73431:(e,t,l)=>{l.d(t,{Z:()=>o});var a=l(47313),i=l(39180),n=l(2717),s=l(28830),d=l(60535),r=l(46417);const o=()=>{const e=(0,n.I0)(),{languages:t,defaultLang:l}=(0,n.v9)((e=>e.formLang),n.wU);(0,a.useEffect)((()=>{d.Z.getAllActive().then((t=>{let{data:l}=t;e((0,s.dc)(l)),e((0,s.mh)(l.find((e=>1===e.default)).locale))}))}),[]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.ZP.Group,{value:l,onChange:t=>{let{target:{value:l}}=t;e((0,s.mh)(l))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((e=>(0,r.jsx)(i.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},41481:(e,t,l)=>{l.d(t,{Z:()=>r});var a=l(47313),i=l(66672),n=l(16031),s=l(40765),d=l(46417);function r(e){let{handleChange:t,defaultValue:l,resetSearch:r,...o}=e;const[c,u]=(0,a.useState)(l),v=(0,a.useMemo)((()=>(0,n.debounce)((e=>{t(e)}),800)),[]);return(0,a.useEffect)((()=>{u(l)}),[r]),(0,d.jsx)(i.Z,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(s.Z,{}),...o})}},2349:(e,t,l)=>{l.r(t),l.d(t,{default:()=>A});var a=l(47313),i=l(86345),n=l(45705),s=l(59491),d=l(77181),r=l(78508),o=l(74580),c=l(2717),u=l(90954),v=l(23560),h=l(24511),g=l(57982),m=l(41481),f=l(80314),p=l(27453),x=l(97890),Z=l(10976),j=l(9274),y=l(72652),b=l(68197),C=l(59624),k=l(66672),S=l(73431),w=l(46417);function I(e){let{visible:t,setVisible:l,id:n,setId:d}=e;const[r]=Z.Z.useForm(),o=(0,c.I0)(),{t:u}=(0,h.$)(),{defaultLang:m,languages:f}=(0,c.v9)((e=>e.formLang),c.wU),[x,I]=(0,a.useState)(!1),[P,T]=(0,a.useState)(!1),[A,E]=(0,a.useState)(null),F=()=>{E(null),l(!1),r.resetFields(),d(null)};function V(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,l=f.map((e=>{var l;return{["title[".concat(e.locale,"]")]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title}}));return Object.assign({},...l)}return(0,a.useEffect)((()=>{n&&(T(!0),p.Z.show(n).then((e=>{let{data:t}=e;E(t),r.setFieldsValue({active:null===t||void 0===t?void 0:t.active,...V(t)})})).finally((()=>T(!1))))}),[n]),(0,w.jsx)(j.Z,{visible:t,onCancel:F,onOk:F,footer:null,loading:P,title:u("add.region"),children:(0,w.jsxs)(Z.Z,{form:r,onFinish:e=>{I(!0),null!==A&&void 0!==A&&A.id?(e=>{p.Z.update(A.id,{active:e.active,title:{...Object.assign({},...f.map((t=>({[t.locale]:e["title[".concat(t.locale,"]")]}))))}}).then((()=>{v.Am.success(u("successfully.updated")),(0,c.dC)((()=>{o((0,g.T)({}))})),l(!1),r.resetFields(),E(null)})).finally((()=>I(!1)))})(e):(e=>{p.Z.create({active:e.active,title:{...Object.assign({},...f.map((t=>({[t.locale]:e["title[".concat(t.locale,"]")]}))))}}).then((()=>{v.Am.success(u("successfully.added")),(0,c.dC)((()=>{o((0,g.T)({}))})),l(!1),r.resetFields(),E(null)})).finally((()=>I(!1)))})(e)},layout:"vertical",initialValues:{active:!0},children:[(0,w.jsx)(y.Z,{spinning:P,children:(0,w.jsxs)(b.Z,{gutter:24,children:[(0,w.jsx)(C.Z,{span:24,children:(0,w.jsx)(S.Z,{})}),(0,w.jsx)(C.Z,{span:24,children:f.map((e=>(0,w.jsx)(Z.Z.Item,{label:u("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==m,rules:[{validator:(t,l)=>l||(null===e||void 0===e?void 0:e.locale)!==m?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(u("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(u("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(u("required")))}],children:(0,w.jsx)(k.Z,{})},"title"+e.id)))}),(0,w.jsx)(C.Z,{span:4,children:(0,w.jsx)(Z.Z.Item,{label:u("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(i.Z,{defaultChecked:!0})})})]})}),(0,w.jsx)(s.Z,{type:"primary",htmlType:"submit",loading:x,children:u("submit")})]})})}var P=l(12019),T=l(47515);const A=()=>{const{t:e}=(0,h.$)(),t=(0,c.I0)(),l=(0,x.s0)(),{setIsModalVisible:Z}=(0,a.useContext)(o._),{activeMenu:j}=(0,c.v9)((e=>e.menu),c.wU),y=null===j||void 0===j?void 0:j.data,{list:b,meta:C,loading:k}=(0,c.v9)((e=>e.deliveryRegion),c.wU),[S,A]=(0,a.useState)(!1),[E,F]=(0,a.useState)(!1),[V,_]=(0,a.useState)(!1),[z,L]=(0,a.useState)(null),M=[{title:e("id"),dataIndex:"id",key:"id"},{title:e("name"),dataIndex:"translation",key:"translation",render:(a,i)=>(0,w.jsx)("div",{style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>(a=>{t((0,u.bL)({url:"deliveryzone/country?region_id=".concat(a.id),id:"country",name:e("country")})),l("/deliveryzone/country?region_id=".concat(a.id))})(i),children:(null===a||void 0===a?void 0:a.title)||"-"})},{title:e("active"),dataIndex:"active",key:"active",render:(l,a)=>(0,w.jsx)(i.Z,{onChange:()=>(l=>{A(l),p.Z.status(l).then((()=>{Z(!1),t((0,g.T)()),v.Am.success(e("successfully.updated"))})).finally((()=>{A(null)}))})(a.id),checked:l,loading:Boolean(S===a.id)},a.id)},{title:e("options"),dataIndex:"options",is_show:!0,render:(l,a)=>(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(s.Z,{type:"primary",icon:(0,w.jsx)(P.Z,{}),onClick:()=>(e=>{F(!0),L(e)})(a.id)}),(0,w.jsx)(s.Z,{loading:Boolean(V===a.id),icon:(0,w.jsx)(T.Z,{onClick:()=>(l=>{_(l),p.Z.delete(l).then((()=>{t((0,g.T)()),v.Am.success(e("successfully.deleted"))})).finally((()=>{_(!1)}))})(a.id)})})]})}];(0,a.useEffect)((()=>{j.refetch&&(t((0,g.T)()),t((0,u.A_)(j)))}),[j.refetch]),(0,f.Z)((()=>{const e={search:null===y||void 0===y?void 0:y.search};t((0,g.T)(e))}),[null===j||void 0===j?void 0:j.data]);return(0,w.jsxs)(d.Z,{title:e("regions"),extra:(0,w.jsxs)(n.Z,{children:[(0,w.jsx)(m.Z,{placeholder:e("search"),handleChange:e=>{return l=e,a="search",void t((0,u.nc)({activeMenu:j,data:{...y,[a]:l}}));var l,a},defaultValue:null===y||void 0===y?void 0:y.search,resetSearch:!(null!==y&&void 0!==y&&y.search)}),(0,w.jsx)(s.Z,{type:"primary",onClick:()=>F(!0),children:e("add.region")})]}),children:[(0,w.jsx)(r.Z,{columns:M,dataSource:b,pagination:{pageSize:C.per_page,page:C.current_page,total:C.total},rowKey:e=>e.id,loading:k,onChange:e=>{const{pageSize:l,current:a}=e;t((0,g.T)({perPage:l,page:a}))}}),(0,w.jsx)(I,{visible:E,setVisible:F,id:z,setId:L})]})}}}]);