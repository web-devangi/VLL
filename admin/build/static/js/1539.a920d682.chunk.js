"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1539],{81449:(e,l,i)=>{i.d(l,{Z:()=>t});i(47313);var n=i(84697),s=i(2717),a=i(97421),d=i(46417);function t(e){let{center:l,handleLoadMap:i,children:t}=e;const{google_map_key:o}=(0,s.v9)((e=>e.globalSettings.settings),s.wU);return(0,d.jsx)(n.ZP,{bootstrapURLKeys:{key:a.kr},defaultZoom:12,defaultCenter:l,options:{fullscreenControl:!1},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:e=>{let{map:l,maps:n}=e;return i(l,n)},children:t})}},17649:(e,l,i)=>{i.d(l,{Z:()=>n});i(97421);function n(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},29242:(e,l,i)=>{function n(e,l){var i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(l){return e>=l.value}));return i?"$"+(e/i.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+i.symbol:"0"}i.d(l,{p:()=>n})},33118:(e,l,i)=>{i.d(l,{Z:()=>d});var n=i(70816),s=i.n(n),a=i(24511);function d(e){const{t:l}=(0,a.$)();let i=s()(),n=s()(e),d=i.diff(n,"hours"),t=i.diff(n,"minutes");return d>23?s()(e).format("Do MMM, H:mm"):d>0?d+" "+l("hours.ago"):t+" "+l("minutes.ago")}},81539:(e,l,i)=>{i.r(l),i.d(l,{default:()=>$});var n=i(47313),s=i(45334),a=i(77181),d=i(74294),t=i(68197),o=i(59624),r=i(24511),v=i(2717),u=i(17649),c=i(97421),m=i(81566),h=i(90954),x=i(51282),j=i(80314),p=i(11829),g=i(55613),y=i(29242),_=i(33118),b=i(46417);const f=e=>{var l;let{data:i,handleClose:n}=e;const{t:a}=(0,r.$)(),d=(0,_.Z)(null===i||void 0===i||null===(l=i.delivery_man_setting)||void 0===l?void 0:l.updated_at),v=null===i||void 0===i?void 0:i.assign_reviews_avg_rating,u=null===i||void 0===i?void 0:i.phone,m=null===i||void 0===i?void 0:i.delivery_man_orders_count,h=null===i||void 0===i?void 0:i.delivery_man_orders_sum_total_price;return(0,b.jsxs)(t.Z,{gutter:12,align:"middle",children:[(0,b.jsx)(o.Z,{span:7,children:(0,b.jsxs)("div",{className:"d-flex align-items-center",children:[(0,b.jsx)(s.C,{src:c.bV+(null===i||void 0===i?void 0:i.img)}),(0,b.jsxs)("div",{className:"ml-2",children:[(0,b.jsx)("div",{className:"title",children:(null===i||void 0===i?void 0:i.firstname)+" "+(null===i||void 0===i?void 0:i.lastname)}),(0,b.jsx)(g.Z,{disabled:!0,allowHalf:!0,value:v||0})]})]})}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:u}),(0,b.jsx)("div",{className:"label",children:a("phone")})]}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:d}),(0,b.jsx)("div",{className:"label",children:a("last.activity")})]}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:m}),(0,b.jsx)("div",{className:"label",children:a("total.orders")})]}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:(0,y.p)(h)}),(0,b.jsxs)("div",{className:"label",children:[" ",a("total.earning")]})]}),(0,b.jsx)(o.Z,{span:1,children:(0,b.jsx)("button",{type:"button",className:"close-btn",onClick:n,children:(0,b.jsx)(p.Z,{})})})]})};var Z=i(45705),N=i(97890),k=i(39548);function C(e){var l,i,n,d;let{data:t}=e;const{t:o}=(0,r.$)(),u=(0,N.s0)(),m=(0,v.I0)(),{menuItems:x}=(0,v.v9)((e=>e.menu),v.wU),j=(null===t||void 0===t?void 0:t.deliveryman_orders)||[],p=(0,_.Z)(null===t||void 0===t||null===(l=t.delivery_man_setting)||void 0===l?void 0:l.updated_at);return(0,b.jsxs)(a.Z,{className:"user-card",onClick:()=>(e=>{!!x.find((e=>"delivery_map_orders"===e.id))&&m((0,h.ph)({id:"delivery_map_orders",nextUrl:"deliveries/map"})),m((0,h.bL)({url:"deliveries/map/".concat(e.id),id:"delivery_map_orders",name:o("delivery.orders"),data:{list:j,item:j[0],deliveryman:t}})),u("/deliveries/map/".concat(e.id))})(t),children:[(0,b.jsxs)(Z.Z,{children:[(0,b.jsx)(s.C,{src:c.bV+(null===t||void 0===t?void 0:t.img),icon:(0,b.jsx)(k.Z,{}),style:{color:"#1a3353"}}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"title",children:[null===t||void 0===t?void 0:t.firstname," ",null===t||void 0===t||null===(i=t.lastname)||void 0===i?void 0:i.charAt(0),"."]}),(0,b.jsx)("div",{className:"last-seen ".concat(null!==t&&void 0!==t&&null!==(n=t.delivery_man_setting)&&void 0!==n&&n.online?"online":"text-muted"),children:null!==t&&void 0!==t&&null!==(d=t.delivery_man_setting)&&void 0!==d&&d.online?o("online"):p})]})]}),(0,b.jsx)("div",{className:"mt-2"}),(0,b.jsxs)(Z.Z,{children:[(0,b.jsxs)("div",{children:[o("active_orders"),":"]}),(0,b.jsx)("div",{children:j.length})]})]})}var w=i(81449);const M=[{label:"All",value:"all",key:1},{label:"Online",value:"1",key:2},{label:"Offline",value:"0",key:3}],U=e=>(0,b.jsx)(s.C,{src:e.url,icon:(0,b.jsx)(k.Z,{}),style:{color:"#1a3353"},onClick:e.onClick});function $(){const{t:e}=(0,r.$)(),{activeMenu:l}=(0,v.v9)((e=>e.menu),v.wU),i=(0,v.I0)(),[s,p]=(0,n.useState)(void 0),[g,y]=(0,n.useState)(null),{settings:_}=(0,v.v9)((e=>e.globalSettings),v.wU),Z=(0,u.Z)(_),{delivery:N,loading:k}=(0,v.v9)((e=>e.deliveries),v.wU),$={page:1,perPage:100,online:s,"statuses[0]":"new","statuses[1]":"accepted","statuses[2]":"ready","statuses[3]":"on_a_way"};(0,j.Z)((()=>{"all"===s&&delete $.online,i((0,m.W)($))}),[s]);return(0,n.useEffect)((()=>{null!==l&&void 0!==l&&l.refetch&&("all"===s&&delete $.online,i((0,m.W)($)),i((0,h.A_)(l)))}),[null===l||void 0===l?void 0:l.refetch]),(0,b.jsx)(a.Z,{title:e("deliveries"),className:"delivery",extra:(0,b.jsx)(d.Z,{options:M,defaultValue:"all",loading:k,onChange:e=>p(e),style:{width:"200px"}}),children:k?(0,b.jsx)(x.Z,{}):(0,b.jsxs)(t.Z,{gutter:8,children:[(0,b.jsx)(o.Z,{span:18,children:(0,b.jsxs)("div",{className:"map-container",style:{height:"73vh",width:"100%"},children:[!!g&&(0,b.jsx)(a.Z,{className:"map-user-card",children:(0,b.jsx)(f,{data:g,handleClose:()=>{y(null)}})}),(0,b.jsx)(w.Z,{center:Z,handleLoadMap:(e,l)=>{const i=N.map((e=>{var l,i;return{lat:Number((null===e||void 0===e||null===(l=e.delivery_man_setting)||void 0===l?void 0:l.location.latitude)||"0"),lng:Number((null===e||void 0===e||null===(i=e.delivery_man_setting)||void 0===i?void 0:i.location.longitude)||"0")}}));let n=new l.LatLngBounds;for(var s=0;s<i.length;s++)n.extend(i[s]);e.fitBounds(n)},children:N.map((e=>{var l,i,n,s;return(0,b.jsx)(U,{lat:Number((null===e||void 0===e||null===(l=e.delivery_man_setting)||void 0===l||null===(i=l.location)||void 0===i?void 0:i.latitude)||"0"),lng:Number((null===e||void 0===e||null===(n=e.delivery_man_setting)||void 0===n||null===(s=n.location)||void 0===s?void 0:s.longitude)||"0"),url:c.bV+e.img,onClick:()=>{y(e)}},e.id)}))})]})}),(0,b.jsx)(o.Z,{span:6,children:(0,b.jsx)("div",{className:"order-list",style:{height:"75vh"},children:N.map(((e,l)=>(0,b.jsx)(C,{data:e},e.id+l)))})})]})})}}}]);