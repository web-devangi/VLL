"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6291],{53233:function(e,n,t){var i=t(1413),r=t(29439),a=t(47313),l=t(56140),s=t(67251),o=t(45705),u=t(86345),c=t(78267),d=t(37388),v=t(59491),f=t(99587),h=t(24511),m=t(46417),x=l.Z.Text;n.Z=function(e){var n=e.columns,t=void 0===n?[]:n,l=e.setColumns,Z=e.style,p=e.size,j=void 0===p?"":p,g=e.iconOnly,y=(0,h.$)().t,b=(0,a.useState)(!1),w=(0,r.Z)(b,2),k=w[0],C=w[1],z=(0,m.jsx)(s.Z,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,m.jsx)(s.Z.Item,{children:(0,m.jsxs)(o.Z,{className:"d-flex justify-content-between",children:[(0,m.jsx)(x,{children:e.title}),(0,m.jsx)(u.Z,{defaultChecked:!0,onClick:function(){return function(e){var n=null===t||void 0===t?void 0:t.map((function(n){return n.dataIndex===e.dataIndex&&(n.is_show=!(null!==n&&void 0!==n&&n.is_show)),n}));l(n)}(e)},disabled:1===n})]})},e+n)}))});return(0,m.jsx)(c.Z,{overlay:z,trigger:["click"],onVisibleChange:function(e){C(e)},visible:k,children:(0,m.jsx)(d.Z,{title:y("change.columns"),children:(0,m.jsx)(v.Z,{style:(0,i.Z)({},Z),size:j,icon:(0,m.jsx)(f.Z,{}),children:g?null:y("Columns")})})})}},13945:function(e,n,t){function i(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(n,{Z:function(){return i}})},36291:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var i=t(29439),r=t(47313),a=t(66204),l=t(45705),s=t(59491),o=t(77181),u=t(78508),c=t(70660),d=t(10976),v=t(9274),f=t(66672),h=t(39180),m=t(24511),x=t(2717),Z=t(15810),p=t(46417);function j(e){var n=e.inviteId,t=e.handleCancel,a=(0,m.$)().t,l=d.Z.useForm(),o=(0,i.Z)(l,1)[0],u=(0,x.I0)(),j=(0,r.useState)(!1),g=(0,i.Z)(j,2),y=g[0],b=g[1];return(0,p.jsx)(v.Z,{title:a("accept.invite"),visible:!!n,onCancel:t,footer:[(0,p.jsx)(s.Z,{type:"primary",onClick:function(){return o.submit()},loading:y,children:a("save")},"save-btn"),(0,p.jsx)(s.Z,{type:"default",onClick:t,children:a("cancel")},"cancel-btn")],children:(0,p.jsxs)(d.Z,{form:o,layout:"vertical",onFinish:function(e){var i={role:e.role};b(!0),c.Z.statusUpdate(n.id,i).then((function(){t(),u((0,Z.x)())})).finally((function(){return b(!1)}))},children:[(0,p.jsx)(d.Z.Item,{label:a("user"),children:(0,p.jsx)(f.Z,{value:n.user.firstname+" "+n.user.lastname,disabled:!0})}),(0,p.jsx)(d.Z.Item,{label:a("select.role"),name:"role",rules:[{required:!0,message:a("required")}],children:(0,p.jsxs)(h.ZP.Group,{optionType:"button",children:[(0,p.jsx)(h.ZP,{value:"moderator",children:a("moderator")}),(0,p.jsx)(h.ZP,{value:"deliveryman",children:a("deliveryman")})]})})]})})}var g=t(74580),y=t(69658),b=t(90954),w=t(13945),k=t(80314),C=t(53233);function z(){var e=(0,m.$)().t,n=(0,x.I0)(),t=(0,x.v9)((function(e){return e.menu}),x.wU).activeMenu,d=(0,x.v9)((function(e){return e.invite}),x.wU),v=d.loading,f=d.invites,h=d.params,z=d.meta,I=(0,r.useState)(null),_=(0,i.Z)(I,2),V=_[0],H=_[1],S=(0,r.useContext)(g._).setIsModalVisible,P=(0,r.useState)(null),M=(0,i.Z)(P,2),U=M[0],F=M[1],T=(0,r.useState)(!1),$=(0,i.Z)(T,2),q=$[0],E=$[1],N=(0,r.useState)([{title:e("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:e("fullname"),dataIndex:"user",key:"user",is_show:!0,render:function(e){return(0,p.jsxs)(p.Fragment,{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})}},{title:e("role"),dataIndex:"role",key:"role",is_show:!0},{title:e("status"),dataIndex:"status",key:"status",is_show:!0,render:function(n){return(0,p.jsx)(a.Z,{color:"rejected"===n?"red":"new"===n?"blue":"cyan",children:e(n)})}},{title:e("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0},{title:e("options"),key:"options",dataIndex:"options",is_show:!0,render:function(n,t){return(0,p.jsxs)(l.Z,{children:[(0,p.jsx)(s.Z,{type:"primary",onClick:function(){return H(t)},disabled:"excepted"===t.status,children:e("accept")}),(0,p.jsx)(s.Z,{type:"primary",danger:!0,onClick:function(){S(!0),F(t.id)},disabled:"rejected"===t.status,children:e("reject")})]})}}]),O=(0,i.Z)(N,2),A=O[0],B=O[1];return(0,r.useEffect)((function(){t.refetch&&(n((0,Z.x)()),n((0,b.A_)(t)))}),[t.refetch]),(0,k.Z)((function(){var e=t.data,i={sort:null===e||void 0===e?void 0:e.sort,column:null===e||void 0===e?void 0:e.column,perPage:null===e||void 0===e?void 0:e.perPage,page:null===e||void 0===e?void 0:e.page};n((0,Z.x)(i))}),[t.data]),(0,p.jsxs)(o.Z,{title:e("invites"),extra:(0,p.jsx)(l.Z,{children:(0,p.jsx)(C.Z,{columns:A,setColumns:B})}),children:[(0,p.jsx)(u.Z,{scroll:{x:!0},columns:null===A||void 0===A?void 0:A.filter((function(e){return e.is_show})),dataSource:f,pagination:{pageSize:h.perPage,page:h.page,total:z.total,defaultCurrent:h.page},rowKey:function(e){return e.id},onChange:function(e,i,r){var a=e.pageSize,l=e.current,s=r.field,o=r.order,u=(0,w.Z)(o);n((0,b.nc)({activeMenu:t,data:{perPage:a,page:l,column:s,sort:u}}))},loading:v}),!!V&&(0,p.jsx)(j,{inviteId:V,handleCancel:function(){return H(null)}}),(0,p.jsx)(y.Z,{click:function(){E(!0),c.Z.statusUpdate(U).then((function(){S(!1),F(null),n((0,Z.x)())})).finally((function(){return E(!1)}))},text:e("reject.invite"),loading:q})]})}},99587:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(1413),r=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},l=t(17469),s=function(e,n){return r.createElement(l.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:n,icon:a}))};s.displayName="TableOutlined";var o=r.forwardRef(s)}}]);