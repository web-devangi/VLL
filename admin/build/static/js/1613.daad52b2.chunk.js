"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1613],{89281:(e,s,t)=>{t.d(s,{h:()=>u});var a=t(47313),n=t(12279),l=t.n(n),r=t(74294),i=t(72652),d=t(46417);const u=e=>{let{fetchOptions:s,debounceTimeout:t=400,onClear:n,refetchOptions:u=!1,...o}=e;const[c,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)([]),p=(0,a.useMemo)((()=>l()((e=>{g([]),m(!0),s(e).then((e=>{g(e),m(!1)}))}),t)),[s,t]);return(0,d.jsx)(r.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),n&&n()},notFoundContent:c?(0,d.jsx)(i.Z,{size:"small"}):"no results",...o,options:h,onFocus:()=>{h.length&&!u||p("")}})}},31613:(e,s,t)=>{t.r(s),t.d(s,{default:()=>F});var a=t(47313),n=t(97890),l=t(23560),r=t(10976),i=t(77181),d=t(68197),u=t(59624),o=t(66672),c=t(74294),m=t(99096),h=t(59491),g=t(2717),p=t(90954),b=t(24511),x=t(7004),f=t(70816),j=t.n(f),Z=t(71274),v=t(18929),y=t(38758),w=t(89281),_=t(46417);const q=[{title:"order",value:"order"},{title:"subscribe",value:"subscribe"},{title:"verify",value:"verify"}],F=()=>{const{t:e}=(0,b.$)(),{activeMenu:s}=(0,g.v9)((e=>e.menu),g.wU),t=(0,g.I0)(),[f]=r.Z.useForm(),F=(0,n.s0)(),[N,D]=(0,a.useState)(!1),{defaultLang:C,languages:I}=(0,g.v9)((e=>e.formLang),g.wU),{subscribers:Y}=(0,g.v9)((e=>e.messageSubscriber),g.wU);(0,a.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);t((0,p.nc)({activeMenu:s,data:e}))}),[]);return(0,_.jsx)(i.Z,{title:e("add.subscriber"),className:"h-100",children:(0,_.jsxs)(r.Z,{name:"subscriber-add",layout:"vertical",onFinish:a=>{const n={...a,type:a.type,email_setting_id:a.email_setting_id.value,send_to:j()(a.send_to).format("YYYY-MM-DD HH:mm:ss")};D(!0);const r="message/subscriber";Z.Z.create(n).then((()=>{l.Am.success(e("successfully.created")),t((0,p.ph)({...s,nextUrl:r})),F("/".concat(r)),t((0,v.F)())})).finally((()=>D(!1)))},form:f,initialValues:{...s.data,...(()=>{const e=s.data;if(null===e||void 0===e||!e.send_to)return e;const t=e.send_to;return{...e,send_to:j()(t,"YYYY-MM-DD")}})()},className:"d-flex flex-column h-100",children:[(0,_.jsxs)(d.Z,{gutter:12,children:[(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(r.Z.Item,{label:e("subject"),name:"subject",rules:[{required:!0,message:e("required")}],children:(0,_.jsx)(o.Z,{})})}),(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(r.Z.Item,{label:e("type"),name:"type",rules:[{required:!0,message:e("required")}],children:(0,_.jsx)(c.Z,{options:q.filter((e=>!Y.some((s=>s.type===e.value)))),className:"w-100"})})}),(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(r.Z.Item,{label:e("email.setting.id"),name:"email_setting_id",rules:[{required:!0,message:e("required")}],children:(0,_.jsx)(w.h,{fetchOptions:()=>y.Z.get().then((e=>{let{data:s}=e;return s.map((e=>({label:e.host,value:e.id})))})),className:"w-100",placeholder:e("email.setting.id")})})}),(0,_.jsx)(u.Z,{span:24,children:(0,_.jsx)(x.Z,{languages:I,form:f,lang:C})}),(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(r.Z.Item,{label:e("alt.body"),name:"alt_body",rules:[{required:!0,message:e("required")}],children:(0,_.jsx)(o.Z,{})})}),(0,_.jsx)(u.Z,{span:12,children:(0,_.jsx)(r.Z.Item,{label:e("send.to"),name:"send_to",rules:[{required:!0,message:e("required")}],children:(0,_.jsx)(m.Z,{showTime:!0,className:"w-100",disabledDate:e=>j()().add(-1,"days")>=e})})})]}),(0,_.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,_.jsx)("div",{className:"pb-5",children:(0,_.jsx)(h.Z,{type:"primary",htmlType:"submit",loading:N,children:e("send")})})})]})})}},7004:(e,s,t)=>{t.d(s,{Z:()=>c});t(47313);var a=t(10976),n=t(24511),l=t(68144),r=t(76733),i=t.n(r),d=t(97421),u=t(36104),o=t(46417);function c(e){let{form:s,lang:t,languages:r}=e;const{t:c}=(0,n.$)();return(0,o.jsx)("div",{className:"textEditor",children:(0,o.jsx)(a.Z.Item,{label:c("newsletter.content"),name:"body",valuePropName:"data",getValueFromEvent:(e,s)=>s.getData(),rules:[{required:!0,message:c("required")}],className:"description-editor",children:(0,o.jsx)(l.CKEditor,{editor:i(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((s,t)=>{const a=new FormData;e.file.then((e=>{a.append("image",e),a.append("type","blogs"),u.Z.upload(a).then((e=>{let{data:t}=e;s({default:"".concat(d.bV+t.title)})})).catch((e=>{t(e)}))}))}))}}(e)}]},onChange:(e,s)=>{s.getData()},onBlur:(e,t)=>{const a=t.getData();s.setFieldsValue({body:a})}})})})}}}]);