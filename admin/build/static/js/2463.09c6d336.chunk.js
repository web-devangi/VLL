"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2463],{38628:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(77181),l=n(14133),o=(n(47313),n(46417));const s=e=>{let{loading:t}=e;return(0,o.jsx)(a.Z,{className:"order-card",children:(0,o.jsx)(l.Z,{loading:t,avatar:!0,active:!0})})}},41481:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(47313),l=n(66672),o=n(16031),s=n(40765),i=n(46417);function r(e){let{handleChange:t,defaultValue:n,resetSearch:r,...d}=e;const[c,u]=(0,a.useState)(n),v=(0,a.useMemo)((()=>(0,o.debounce)((e=>{t(e)}),800)),[]);return(0,a.useEffect)((()=>{u(n)}),[r]),(0,i.jsx)(l.Z,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,i.jsx)(s.Z,{}),...d})}},89281:(e,t,n)=>{n.d(t,{h:()=>d});var a=n(47313),l=n(12279),o=n.n(l),s=n(74294),i=n(72652),r=n(46417);const d=e=>{let{fetchOptions:t,debounceTimeout:n=400,onClear:l,refetchOptions:d=!1,...c}=e;const[u,v]=(0,a.useState)(!1),[p,h]=(0,a.useState)([]),m=(0,a.useMemo)((()=>o()((e=>{h([]),v(!0),t(e).then((e=>{h(e),v(!1)}))}),n)),[t,n]);return(0,r.jsx)(s.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),l&&l()},notFoundContent:u?(0,r.jsx)(i.Z,{size:"small"}):"no results",...c,options:p,onFocus:()=>{p.length&&!d||m("")}})}},98501:(e,t,n)=>{n.d(t,{Q:()=>a});const a={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]}},17649:(e,t,n)=>{n.d(t,{Z:()=>a});n(97421);function a(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},84017:(e,t,n)=>{function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const a=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===n?"".concat(a," ").concat(t):"".concat(t," ").concat(a)}n.d(t,{Z:()=>a})},36311:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(34344);const l={orderExport:(e,t)=>a.Z.get("dashboard/user/export/order/".concat(e,"/pdf"),{params:t,responseType:"blob"})}},59511:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(47313),l=n(10976),o=n(9274),s=n(59491),i=n(68197),r=n(59624),d=n(66672),c=n(24511),u=n(7370),v=n(23560),p=n(46417);function h(e){let{result:t,changeColumnData:n,statusChangedOrder:h,setStatusChangedOrder:m,modalNoteType:x}=e;const[f]=l.Z.useForm(),{t:y}=(0,c.$)(),[g,Z]=(0,a.useState)(!1),j=()=>m((e=>!e));return(0,p.jsx)(o.Z,{visible:!!h,onCancel:j,footer:[(0,p.jsx)(s.Z,{type:"primary",onClick:()=>f.submit(),loading:g,children:y("save")},"save-form"),(0,p.jsx)(s.Z,{type:"default",onClick:j,children:y("cancel")},"cansel-modal")],children:(0,p.jsx)(l.Z,{form:f,layout:"vertical",onFinish:e=>{Z(!0);const a={...e,status:x};u.Z.updateStatus(h,a).then((e=>{let{data:a}=e;j(),n(t),v.Am.success("#".concat(a.id," order status changed"))})).finally((()=>Z(!1)))},children:(0,p.jsx)(i.Z,{gutter:12,children:(0,p.jsx)(r.Z,{span:24,children:(0,p.jsx)(l.Z.Item,{label:y("pause"===x?"pause.note":"canceled.note"),name:"pause"===x?"pause_note":"canceled_note",rules:[{required:"canceled"===x,message:y("required")}],children:(0,p.jsx)(d.Z.TextArea,{})})})})})})}},55508:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(39180),l=(n(47313),n(58821)),o=n(54972),s=n(97890),i=n(46417);const r=[{value:"seller/orders-board",title:"Board",icon:(0,i.jsx)(o.Ez2,{size:20})},{value:"seller/orders",title:"List",icon:(0,i.jsx)(l.Ps6,{size:20})}],d=e=>{let{listType:t}=e;const{type:n}=(0,s.UO)(),l=(0,s.s0)();return(0,i.jsx)(a.ZP.Group,{value:t,onChange:e=>{l("/".concat(e.target.value).concat(n?"/".concat(n):""))},className:"float-right",buttonStyle:"solid",children:null===r||void 0===r?void 0:r.map((e=>(0,i.jsx)(a.ZP.Button,{value:e.value,children:(0,i.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},88852:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(47313),l=n(10976),o=n(9274),s=n(59491),i=n(68197),r=n(59624),d=n(2717),c=n(62412),u=n(90954),v=n(24511),p=n(94291),h=n(89281),m=n(58328),x=n(46417);function f(e){var t;let{orderDetails:n,handleCancel:f}=e;const{t:y}=(0,v.$)(),{activeMenu:g}=(0,d.v9)((e=>e.menu),d.wU),{deliverymans:Z}=(0,d.v9)((e=>e.deliveryman),d.wU),[j]=l.Z.useForm(),b=(0,d.I0)(),[C,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>{b((0,p.EH)())}),[]);return(0,x.jsx)(o.Z,{visible:!!n,title:n.title,onCancel:f,footer:[(0,x.jsx)(s.Z,{type:"primary",onClick:()=>j.submit(),loading:C,children:y("save")}),(0,x.jsx)(s.Z,{type:"default",onClick:f,children:y("cancel")})],children:(0,x.jsx)(l.Z,{form:j,layout:"vertical",onFinish:e=>{const t={deliveryman:e.deliveryman.value};k(!0),c.Z.updateDelivery(n.id,t).then((()=>{f(),b((0,u.xo)(g))})).finally((()=>k(!1)))},initialValues:{deliveryman:null===(t=n.deliveryman)||void 0===t?void 0:t.id},children:(0,x.jsx)(i.Z,{gutter:12,children:(0,x.jsx)(r.Z,{span:24,children:(0,x.jsx)(l.Z.Item,{label:y("deliveryman"),name:"deliveryman",rules:[{required:!0,message:y("required")}],children:(0,x.jsx)(h.h,{fetchOptions:e=>{const t={perPage:10,page:1,search:e};return m.Z.getDeliverymans(t).then((e=>e.data.map((e=>({label:e.firstname,value:e.id})))))}})})})})})})}},62463:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ze});var a=n(47313),l=n(99096),o=n(45705),s=n(59491),i=n(77181),r=n(97890),d=n(55768),c=n(15386),u=n(2717),v=n(90954),p=n(24511),h=n(80314),m=n(41589),x=n(41481),f=n(89281),y=n(58328),g=n(40197),Z=n(74580),j=n(23560),b=n(62412),C=n(43773),k=n(93709),w=n(66204),S=n(58840),_=n(46417);const M=e=>{let{children:t,title:n,name:a,isDropDisabled:l,total:s=0,loading:i=!1,reloadOrder:r}=e;const{t:d}=(0,p.$)();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(k.Z,{message:(0,_.jsxs)(o.Z,{children:[(0,_.jsx)(C.Z,{size:20,style:{cursor:"pointer"},spin:i,onClick:r}),d(n),(0,_.jsx)(w.Z,{children:i?(0,_.jsx)(C.Z,{spin:!0}):s})]}),className:"mb-4 ".concat(a),style:{textAlign:"center",fontSize:16,textTransform:"capitalize"}}),(0,_.jsx)(S.bK,{droppableId:a,isDropDisabled:l,children:e=>(0,_.jsx)("div",{ref:e.innerRef,className:"h-screen",style:{opacity:l?.6:1},children:(0,_.jsxs)(_.Fragment,{children:[t,e.placeholder]})})})]})};var O=n(72652),D=n(7142),I=n(82508),E=n(98501),N=n(38628),P=n(30804),T=n(60931),H=n(45427),z=n(86949),Y=n(35529),F=n(91805),V=n(31741),U=n(47515),B=n(6986),A=n(39548),K=n(14133),L=n(45334),R=n(42346),$=n(97421),q=n(84017),Q=n(70816),G=n.n(Q),W=n(5958),J=n(79492);const{Meta:X}=i.Z,ee=e=>{var t,n,a,l,s,r,d,c,u,v;let{data:h,goToShow:m,loading:x,setLocationsMap:f,setId:y,setIsModalVisible:g,setText:Z,setDowloadModal:j,setType:b,orderType:C}=e;const{isDemo:k,demoFunc:w}=(0,J.Z)(),{t:S}=(0,p.$)(),M=[{title:"Number of products",icon:(0,_.jsx)(P.Z,{}),data:null===h||void 0===h?void 0:h.order_details_count},{title:C?"Table":"Deliveryman",icon:(0,_.jsx)(T.Z,{}),data:C?"".concat((null===h||void 0===h||null===(t=h.table)||void 0===t?void 0:t.name)||"-"):"".concat((null===(n=h.deliveryman)||void 0===n?void 0:n.firstname)||"-"," ").concat((null===(a=h.deliveryman)||void 0===a?void 0:a.lastname)||"-")},{title:"Amount",icon:(0,_.jsx)(H.Z,{}),data:(0,q.Z)(h.total_price,null===(l=h.currency)||void 0===l?void 0:l.symbol)},{title:"Payment type",icon:(0,_.jsx)(z.Z,{}),data:(null===(s=h.transaction)||void 0===s||null===(r=s.payment_system)||void 0===r?void 0:r.tag)||"-"},{title:"Payment status",icon:(0,_.jsx)(Y.Z,{}),data:(null===(d=h.transaction)||void 0===d?void 0:d.status)||"-"},{title:S("delivery.type"),icon:(0,_.jsx)(F.Z,{}),data:(null===h||void 0===h?void 0:h.delivery_type)||"-"},{title:"Delivery date",icon:(0,_.jsx)(F.Z,{}),data:G()(null===h||void 0===h?void 0:h.delivery_date).format("YYYY-MM-DD")||"-"},{title:"Created at",icon:(0,_.jsx)(F.Z,{}),data:G()(null===h||void 0===h?void 0:h.created_at).format("YYYY-MM-DD")||"-"}];return(0,_.jsx)(i.Z,{actions:[(0,_.jsx)(W.Y4r,{size:20,onClick:e=>{e.stopPropagation(),f(h.id)}}),(0,_.jsx)(V.Z,{onClick:()=>m(h)},"setting"),(0,_.jsx)(U.Z,{onClick:e=>{k?w():(e.stopPropagation(),y([h.id]),g(!0),Z(!0),b(h.status))}}),(0,_.jsx)(B.Z,{onClick:()=>j(h.id)},"ellipsis")],className:"order-card",children:(0,_.jsxs)(K.Z,{loading:x,avatar:!0,active:!0,children:[(0,_.jsx)(X,{avatar:(0,_.jsx)(L.C,{src:$.bV+(null===(c=h.user)||void 0===c?void 0:c.img),icon:(0,_.jsx)(A.Z,{})}),description:"#".concat(h.id),title:null!==h&&void 0!==h&&h.user?"".concat((null===(u=h.user)||void 0===u?void 0:u.firstname)||"-"," ").concat((null===(v=h.user)||void 0===v?void 0:v.lastname)||"-"):S("deleted.user")}),(0,_.jsx)(R.ZP,{itemLayout:"horizontal",dataSource:M,renderItem:(e,t)=>(0,_.jsx)(R.ZP.Item,{children:(0,_.jsxs)(o.Z,{children:[e.icon,"".concat(e.title,":  ").concat(e.data)]})},t)})]})})};var te=n(51282),ne=n(59511);const ae=e=>{let{goToEdit:t,goToShow:n,fetchOrderAllItem:l,fetchOrders:o,setLocationsMap:s,setId:i,setIsModalVisible:r,setText:d,setDowloadModal:c,setType:v,orderType:p}=e;const h=(0,u.I0)(),{statusList:x,loading:f}=(0,u.v9)((e=>e.orderStatus),u.wU),y=null===x||void 0===x?void 0:x.map((e=>null===e||void 0===e?void 0:e.name)),{items:g}=(0,u.v9)((e=>e.sellerOrders),u.wU),{isEnabledStatusChange:Z}=(0,u.v9)((e=>e.myShop),u.wU),C=(0,u.v9)((e=>e.sellerOrders),u.wU),[k,w]=(0,a.useState)(""),[P,T]=(0,a.useState)({}),[H,z]=(0,a.useState)({}),[Y,F]=(0,a.useState)(null),[V,U]=(0,a.useState)(""),[B,A]=(0,a.useState)({}),K=e=>{const t={...g},n=t[e.source.droppableId],[a,l]=((e,t)=>{const n=Array.from(e),[a]=n.splice(t,1);return[a,n]})(n,e.source.index);t[e.source.droppableId]=l;const o=t[e.destination.droppableId];t[e.destination.droppableId]=((e,t,n)=>{const a=Array.from(e);return a.splice(t,0,n),a})(o,e.destination.index,a),h((0,m.U7)(t)),z(null)},L=e=>{var t,n;e.destination&&(A(e),"pause"===e.destination.droppableId?(U("pause"),F(e.draggableId)):e.destination&&P.source.droppableId!==e.destination.droppableId&&(t=e.draggableId,n={status:e.destination.droppableId},b.Z.updateStatus(t,n).then((()=>{j.Am.success("#".concat(t," order status changed"))})),K(e)))},R=e=>(0!==e||H!==(null===y||void 0===y?void 0:y.length)-1)&&Boolean(H>e);(0,a.useEffect)((()=>{h((0,m.H5)()),l()}),[]);return(0,_.jsxs)(_.Fragment,{children:[f?(0,_.jsx)("div",{children:(0,_.jsx)(te.Z,{})}):(0,_.jsx)(S.Z5,{onDragEnd:L,onDragStart:e=>{const t=null===y||void 0===y?void 0:y.findIndex((t=>{var n;return t===(null===e||void 0===e||null===(n=e.source)||void 0===n?void 0:n.droppableId)}));T(e),z(t)},children:(0,_.jsx)("div",{className:"order-board",children:null===y||void 0===y?void 0:y.map(((e,a)=>{var l,u,x,f,y,j,b;return(0,_.jsx)("div",{className:"dnd-column",children:(0,_.jsx)(M,{title:e,onDragEnd:L,name:e,isDropDisabled:R(a),total:null===(l=g[e])||void 0===l?void 0:l.length,loading:null===(u=C[e])||void 0===u?void 0:u.loading,reloadOrder:()=>(e=>{h((0,m.x9)(e)),o({status:e})})(e),children:(0,_.jsxs)(D.ZP,{onScroll:t=>((e,t)=>{const n=e.target.lastChild,a=e.target.clientHeight+e.target.scrollTop;var l;n&&a>n.offsetTop+n.clientHeight+19.9&&C[t].meta.last_page>C[t].meta.current_page&&(null===(l=C[t])||void 0===l||!l.loading)&&(w(t),o({page:C[t].meta.current_page+1,perPage:5,status:t}))})(t,e),autoHeight:!0,autoHeightMin:"75vh",autoHeightMax:"75vh",autoHide:!0,id:e,children:[Boolean((null===(x=C[e])||void 0===x?void 0:x.loading)&&!(null!==(f=g[e])&&void 0!==f&&f.length))?null===(j=E.Q[e])||void 0===j?void 0:j.map((()=>(0,_.jsx)(N.Z,{loading:!0}))):null===(y=g[e])||void 0===y?void 0:y.map(((e,a)=>(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(S._l,{draggableId:e.id.toString(),index:a,isDragDisabled:!Z,children:a=>(0,_.jsx)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,children:(0,_.jsx)(ee,{data:e,goToEdit:t,goToShow:n,setLocationsMap:s,setId:i,setIsModalVisible:r,setText:d,setDowloadModal:c,setType:v,orderType:p})})},e.id)}))),(null===(b=C[e])||void 0===b?void 0:b.loading)&&e===k&&(0,_.jsx)(O.Z,{indicator:(0,_.jsx)(I.Z,{style:{fontSize:24},spin:!0})})]})})},e)}))})}),Y&&(0,_.jsx)(ne.Z,{result:B,changeColumnData:K,statusChangedOrder:Y,setStatusChangedOrder:F,modalNoteType:V})]})};var le=n(88852),oe=n(55508),se=n(73270),ie=n(72944),re=n(36311),de=n(83334),ce=n.n(de),ue=n(9274),ve=n(68197),pe=n(59624),he=n(58821),me=n(57864);const xe=i.Z.Meta,fe=e=>{let{id:t,handleCancel:n}=e;const[l,o]=(0,a.useState)(null),{t:d}=(0,p.$)(),c=(0,r.s0)();return(0,_.jsx)(_.Fragment,{children:l?(0,_.jsx)(te.Z,{}):(0,_.jsx)(ue.Z,{visible:!!t,title:d("selected.download"),closable:!1,handleCancel:n,footer:[(0,_.jsx)(s.Z,{type:"default",onClick:n,children:d("cancel")},"cancelBtn")],children:(0,_.jsxs)(ve.Z,{children:[(0,_.jsx)(pe.Z,{span:12,children:(0,_.jsx)(i.Z,{title:d("download.pdf"),onClick:()=>function(e){o(!0),re.Z.orderExport(e).then((t=>{ce()(t,"invoice_".concat(e,".pdf"),"application/pdf"),n()})).finally((()=>o(!1)))}(t),className:"text-center cursor-pointer",children:(0,_.jsx)(xe,{className:"d-flex align-items-center justify-content-center",title:(0,_.jsx)(he._JY,{size:80})})})}),(0,_.jsx)(pe.Z,{span:12,children:(0,_.jsx)(i.Z,{title:d("download.check"),onClick:()=>(e=>{c("/seller/generate-invoice/".concat(e))})(t),className:"text-center cursor-pointer",children:(0,_.jsx)(xe,{className:"d-flex align-items-center justify-content-center",title:(0,_.jsx)(me.ih9,{size:85})})})})]})})})};var ye=n(69658);const{RangePicker:ge}=l.Z;function Ze(){var e;const t=(0,u.I0)(),n=(0,r.s0)(),{t:l}=(0,p.$)(),[C,k]=(0,a.useState)(null),{setIsModalVisible:w}=(0,a.useContext)(Z._),[S,M]=(0,a.useState)(null),[O,D]=(0,a.useState)(!1),[I,E]=(0,a.useState)(null),[N,P]=(0,a.useState)(null),[T,H]=(0,a.useState)(null),[z,Y]=(0,a.useState)(null),[F,V]=(0,a.useState)(null),{activeMenu:U}=(0,u.v9)((e=>e.menu),u.wU),B=(0,r.UO)(),A=null===B||void 0===B?void 0:B.type,K=null===U||void 0===U?void 0:U.data;(0,h.Z)((()=>{t((0,m.H5)()),$()}),[K]),(0,a.useEffect)((()=>{if(null!==U&&void 0!==U&&U.refetch){const e={status:null===K||void 0===K?void 0:K.status,perPage:10,delivery_type:A};t((0,m.AU)(e)),t((0,g.ZL)({})),t((0,v.A_)(U))}}),[null===U||void 0===U?void 0:U.refetch]);const L=(e,n)=>{(0,u.dC)((()=>{t((0,m.H5)()),t((0,v.nc)({activeMenu:U,data:{...K,[n]:e}}))}))};const R=e=>{var n,a,l,o;const s={...e,delivery_type:A,delivery_date_from:"scheduled"===z?G()().add(1,"day").format("YYYY-MM-DD"):void 0,search:null!==K&&void 0!==K&&K.search?K.search:void 0,user_id:null===K||void 0===K?void 0:K.client_id,status:null===e||void 0===e?void 0:e.status,shop_id:null!==(null===(n=U.data)||void 0===n?void 0:n.shop_id)?null===(a=U.data)||void 0===a?void 0:a.shop_id:null,date_from:(null===F||void 0===F||null===(l=F[0])||void 0===l?void 0:l.format("YYYY-MM-DD"))||void 0,date_to:(null===F||void 0===F||null===(o=F[1])||void 0===o?void 0:o.format("YYYY-MM-DD"))||void 0};switch(e.status){case"new":t((0,m.O7)(s));break;case"accepted":t((0,m.We)(s));break;case"ready":t((0,m.wC)(s));break;case"on_a_way":t((0,m.Ri)(s));break;case"delivered":t((0,m.Rd)(s));break;case"canceled":t((0,m.eV)(s));break;case"cooking":t((0,m.XK)(s));break;case"pause":t((0,m.p2)(s));break;default:console.log("Sorry, we are out of")}},$=()=>{R({status:"new"}),R({status:"accepted"}),R({status:"ready"}),R({status:"on_a_way"}),R({status:"delivered"}),R({status:"canceled"}),R({status:"cooking"}),R({status:"pause"})},q=()=>{H(null),E(null),P(null)};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(o.Z,{className:"justify-content-end w-100 mb-3",children:[(0,_.jsx)(oe.Z,{listType:"seller/orders-board"}),(0,_.jsx)(s.Z,{type:"primary",icon:(0,_.jsx)(d.Z,{}),onClick:()=>{t((0,se.bn)()),t((0,v.bL)({id:"pos.system",url:"seller/pos-system",name:l("add.order")})),n("/seller/pos-system",{state:{delivery_type:A}})},style:{width:"100%"},children:l("add.order")})]}),(0,_.jsx)(i.Z,{children:(0,_.jsxs)(o.Z,{wrap:!0,children:[(0,_.jsx)(x.Z,{placeholder:l("search"),handleChange:e=>L(e,"search"),defaultValue:null===(e=U.data)||void 0===e?void 0:e.search,resetSearch:!(null!==K&&void 0!==K&&K.search)}),(0,_.jsx)(f.h,{placeholder:l("select.client"),fetchOptions:async function(e){const t={search:e,perPage:10};return y.Z.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname||""),value:e.id})))}))},onSelect:e=>L(e.value,"client_id"),onDeselect:()=>L(null,"client_id"),style:{minWidth:200},value:null===K||void 0===K?void 0:K.client_id}),"scheduled"!==z&&(0,_.jsx)(ge,{defaultValue:F,onChange:e=>{L(JSON.stringify(e),"data_time"),V(e)},disabledDate:e=>e&&e>G()().endOf("day"),allowClear:!0,style:{width:"100%"},onClear:()=>{t((0,m.H5)()),V(null)}}),(0,_.jsx)(s.Z,{icon:(0,_.jsx)(c.Z,{}),onClick:()=>{(0,u.dC)((()=>{t((0,m.H5)()),t((0,v.nc)({activeMenu:U,data:null}))})),$()},children:l("clear")})]})}),(0,_.jsx)(ae,{goToShow:e=>{t((0,v.bL)({url:"seller/order/details/".concat(e.id),id:"order_details",name:l("order.details")})),n("/seller/order/details/".concat(e.id))},fetchOrderAllItem:$,fetchOrders:R,setLocationsMap:E,setId:k,setIsModalVisible:w,setText:M,setDowloadModal:P,type:z,setType:Y,orderType:A}),(0,_.jsx)(ye.Z,{click:()=>{D(!0);const e={...Object.assign({},...C.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};b.Z.delete(e).then((()=>{t((0,m.H5)()),j.Am.success(l("successfully.deleted")),w(!1),$({status:z}),M(null)})).finally((()=>{k(null),D(!1)}))},text:l(S?"delete":"all.delete"),loading:O,setText:k,setActive:k}),T&&(0,_.jsx)(le.Z,{orderDetails:T,handleCancel:q}),I&&(0,_.jsx)(ie.Z,{id:I,handleCancel:q}),N&&(0,_.jsx)(fe,{id:N,handleCancel:q})]})}},72944:(e,t,n)=>{n.d(t,{Z:()=>O});var a=n(84697),l=n(83999),o=n(9274),s=n(59491),i=n(77181),r=n(68197),d=n(59624),c=n(66204),u=n(47313),v=n(24511),p=n(62412),h=n(51282),m=n(58821),x=n(2717),f=n(97421),y=n(18478),g=n(17649),Z=n(66461),j=n(22539),b=n(3394),C=n(57864),k=n(70816),w=n.n(k),S=n(46417);const{Step:_}=l.Z,M=()=>(0,S.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,S.jsx)("img",{src:y,width:"50",alt:"Pin"})}),O=e=>{var t,n,y;let{id:k,handleCancel:O}=e;const{t:D}=(0,v.$)(),[I,E]=(0,u.useState)(null),[N,P]=(0,u.useState)(null),[T,H]=(0,u.useState)(null),{settings:z}=(0,x.v9)((e=>e.globalSettings),x.wU),Y=(0,g.Z)(z),[F,V]=(0,u.useState)(0),[U,B]=(0,u.useState)({lat:null===Y||void 0===Y?void 0:Y.lat,lng:null===Y||void 0===Y?void 0:Y.lng}),[A,K]=(0,u.useState)([{id:0,name:"new",icon:(0,S.jsx)(Z.Z,{})},{id:1,name:"accepted",icon:(0,S.jsx)(m.IQF,{})},{id:2,name:"ready",icon:(0,S.jsx)(j.TkG,{})},{id:3,name:"on_a_way",icon:(0,S.jsx)(b.Akc,{})},{id:4,name:"delivered",icon:(0,S.jsx)(b.kme,{})}]);const{google_map_key:L}=(0,x.v9)((e=>e.globalSettings.settings),x.wU);return(0,u.useEffect)((()=>{E(!0),p.Z.getById(k).then((e=>{var t,n,a,l,o,s,i;let{data:r}=e;K("canceled"===r.status?[{id:1,name:"new",icon:(0,S.jsx)(Z.Z,{})},{id:5,name:"canceled",icon:(0,S.jsx)(C.SV5,{})}]:A),V("canceled"===r.status?1:null===(t=A.find((e=>e.name===r.status)))||void 0===t?void 0:t.id);const d=null!==(n=null!==(a=null!==(l=null===r||void 0===r||null===(o=r.address)||void 0===o?void 0:o.location)&&void 0!==l?l:null===r||void 0===r||null===(s=r.my_address)||void 0===s?void 0:s.location)&&void 0!==a?a:null===r||void 0===r||null===(i=r.delivery_point)||void 0===i?void 0:i.location)&&void 0!==n?n:{latitude:null===Y||void 0===Y?void 0:Y.lat,longitude:null===Y||void 0===Y?void 0:Y.lng};B({lat:Number(null===d||void 0===d?void 0:d.latitude),lng:Number(null===d||void 0===d?void 0:d.longitude)}),H("canceled"===r.status?"error":"success"),P(r)})).finally((()=>{E(!1)}))}),[]),(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(o.Z,{visible:!!k,title:D("show.locations"),closable:!0,onCancel:O,style:{minWidth:"80vw"},footer:[(0,S.jsx)(s.Z,{type:"default",onClick:O,children:D("cancel")},"cancelBtn")],children:I?(0,S.jsx)(h.Z,{}):(0,S.jsxs)(i.Z,{children:[(0,S.jsx)(l.Z,{current:F,status:T,className:"mb-5",children:null===A||void 0===A?void 0:A.map(((e,t)=>(0,S.jsx)(_,{title:D(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+t)))}),(0,S.jsxs)(r.Z,{gutter:12,children:[(0,S.jsxs)(d.Z,{span:12,children:[(0,S.jsxs)("h3",{children:[D("order.id")," #",null===N||void 0===N?void 0:N.id]}),(0,S.jsxs)("p",{children:[(0,S.jsx)(m.D73,{})," ",w()(null===N||void 0===N?void 0:N.created_at).format("YYYY-MM-DD HH:mm")]}),(0,S.jsxs)("p",{children:[D("scheduled.at")," ",null===N||void 0===N?void 0:N.delivery_date]})]}),(0,S.jsxs)(d.Z,{span:12,children:[(0,S.jsxs)("p",{children:[D("status")," ","new"===(null===N||void 0===N?void 0:N.status)?(0,S.jsx)(c.Z,{color:"blue",children:D(null===N||void 0===N?void 0:N.status)}):"canceled"===(null===N||void 0===N?void 0:N.status)?(0,S.jsx)(c.Z,{color:"error",children:D(null===N||void 0===N?void 0:N.status)}):(0,S.jsx)(c.Z,{color:"cyan",children:D(null===N||void 0===N?void 0:N.status)})]}),(0,S.jsxs)("p",{children:[D("payment.method")," ",(0,S.jsx)("strong",{children:null===N||void 0===N||null===(t=N.transaction)||void 0===t||null===(n=t.payment_system)||void 0===n?void 0:n.tag})]}),(0,S.jsxs)("p",{children:[D("order.type")," ",(0,S.jsx)("strong",{children:null===N||void 0===N?void 0:N.delivery_type})]}),(0,S.jsxs)("p",{children:[D("payment.type")," ",(0,S.jsx)("strong",{children:null===N||void 0===N||null===(y=N.transaction)||void 0===y?void 0:y.status})]})]}),(0,S.jsxs)(d.Z,{span:24,className:"mt-5",children:[(0,S.jsx)("h4",{children:D("map")}),(0,S.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,S.jsx)(a.ZP,{bootstrapURLKeys:{key:L?f.kr:L},defaultZoom:10,center:null!==U&&void 0!==U?U:Y,options:{fullscreenControl:!1},children:(0,S.jsx)(M,{lat:null===U||void 0===U?void 0:U.lat,lng:null===U||void 0===U?void 0:U.lng})})})]})]})]})})})}},35529:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(1413),l=n(47313);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M117 368h231v64H117zm559 0h241v64H676zm-264 0h200v64H412zm0 224h200v64H412zm264 0h241v64H676zm-559 0h231v64H117zm295-160V179h-64v666h64V592zm264-64V179h-64v666h64V432z"}}]},name:"borderless-table",theme:"outlined"};var s=n(17469),i=function(e,t){return l.createElement(s.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o}))};i.displayName="BorderlessTableOutlined";const r=l.forwardRef(i)},30804:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(1413),l=n(47313);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"};var s=n(17469),i=function(e,t){return l.createElement(s.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o}))};i.displayName="ContainerOutlined";const r=l.forwardRef(i)},55768:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(1413),l=n(47313);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=n(17469),i=function(e,t){return l.createElement(s.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o}))};i.displayName="PlusCircleOutlined";const r=l.forwardRef(i)},39180:(e,t,n)=>{n.d(t,{ZP:()=>I});var a=n(4942),l=n(87462),o=n(47313),s=n(56482),i=n(46123),r=n.n(i),d=n(16945),c=n(4431),u=n(91964),v=o.createContext(null),p=v.Provider;const h=v;var m=o.createContext(null),x=m.Provider,f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},y=function(e,t){var n,i=o.useContext(h),v=o.useContext(m),p=o.useContext(u.E_),x=p.getPrefixCls,y=p.direction,g=o.useRef(),Z=(0,d.sQ)(t,g),j=(0,o.useContext)(c.aM).isFormItemInput,b=e.prefixCls,C=e.className,k=e.children,w=e.style,S=f(e,["prefixCls","className","children","style"]),_=x("radio",b),M="button"===((null===i||void 0===i?void 0:i.optionType)||v)?"".concat(_,"-button"):_,O=(0,l.Z)({},S);i&&(O.name=i.name,O.onChange=function(t){var n,a;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(a=null===i||void 0===i?void 0:i.onChange)||void 0===a||a.call(i,t)},O.checked=e.value===i.value,O.disabled=e.disabled||i.disabled);var D=r()("".concat(M,"-wrapper"),(n={},(0,a.Z)(n,"".concat(M,"-wrapper-checked"),O.checked),(0,a.Z)(n,"".concat(M,"-wrapper-disabled"),O.disabled),(0,a.Z)(n,"".concat(M,"-wrapper-rtl"),"rtl"===y),(0,a.Z)(n,"".concat(M,"-wrapper-in-form-item"),j),n),C);return o.createElement("label",{className:D,style:w,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},o.createElement(s.Z,(0,l.Z)({},O,{type:"radio",prefixCls:M,ref:Z})),void 0!==k?o.createElement("span",null,k):null)},g=o.forwardRef(y);g.displayName="Radio";const Z=g;var j=n(29439),b=n(10288),C=n(21631),k=n(81176),w=o.forwardRef((function(e,t){var n=o.useContext(u.E_),s=n.getPrefixCls,i=n.direction,d=o.useContext(C.Z),c=(0,b.Z)(e.defaultValue,{value:e.value}),v=(0,j.Z)(c,2),h=v[0],m=v[1];return o.createElement(p,{value:{onChange:function(t){var n=h,a=t.target.value;"value"in e||m(a);var l=e.onChange;l&&a!==n&&l(t)},value:h,disabled:e.disabled,name:e.name,optionType:e.optionType}},function(){var n,c=e.prefixCls,u=e.className,v=void 0===u?"":u,p=e.options,m=e.buttonStyle,x=void 0===m?"outline":m,f=e.disabled,y=e.children,g=e.size,j=e.style,b=e.id,C=e.onMouseEnter,w=e.onMouseLeave,S=s("radio",c),_="".concat(S,"-group"),M=y;p&&p.length>0&&(M=p.map((function(e){return"string"===typeof e||"number"===typeof e?o.createElement(Z,{key:e.toString(),prefixCls:S,disabled:f,value:e,checked:h===e},e):o.createElement(Z,{key:"radio-group-value-options-".concat(e.value),prefixCls:S,disabled:e.disabled||f,value:e.value,checked:h===e.value,style:e.style},e.label)})));var O=g||d,D=r()(_,"".concat(_,"-").concat(x),(n={},(0,a.Z)(n,"".concat(_,"-").concat(O),O),(0,a.Z)(n,"".concat(_,"-rtl"),"rtl"===i),n),v);return o.createElement("div",(0,l.Z)({},(0,k.Z)(e),{className:D,style:j,onMouseEnter:C,onMouseLeave:w,id:b,ref:t}),M)}())}));const S=o.memo(w);var _=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},M=function(e,t){var n=o.useContext(u.E_).getPrefixCls,a=e.prefixCls,s=_(e,["prefixCls"]),i=n("radio",a);return o.createElement(x,{value:"button"},o.createElement(Z,(0,l.Z)({prefixCls:i},s,{type:"radio",ref:t})))};const O=o.forwardRef(M);var D=Z;D.Button=O,D.Group=S;const I=D},56482:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(87462),l=n(4942),o=n(45987),s=n(1413),i=n(15671),r=n(43144),d=n(60136),c=n(54062),u=n(47313),v=n(46123),p=n.n(v),h=function(e){(0,d.Z)(n,e);var t=(0,c.Z)(n);function n(e){var a;(0,i.Z)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=a.props,n=t.disabled,l=t.onChange;n||("checked"in a.props||a.setState({checked:e.target.checked}),l&&l({target:(0,s.Z)((0,s.Z)({},a.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},a.saveInput=function(e){a.input=e};var l="checked"in e?e.checked:e.defaultChecked;return a.state={checked:l},a}return(0,r.Z)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,s=t.className,i=t.style,r=t.name,d=t.id,c=t.type,v=t.disabled,h=t.readOnly,m=t.tabIndex,x=t.onClick,f=t.onFocus,y=t.onBlur,g=t.onKeyDown,Z=t.onKeyPress,j=t.onKeyUp,b=t.autoFocus,C=t.value,k=t.required,w=(0,o.Z)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),S=Object.keys(w).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=w[t]),e}),{}),_=this.state.checked,M=p()(n,s,(e={},(0,l.Z)(e,"".concat(n,"-checked"),_),(0,l.Z)(e,"".concat(n,"-disabled"),v),e));return u.createElement("span",{className:M,style:i},u.createElement("input",(0,a.Z)({name:r,id:d,type:c,required:k,readOnly:h,disabled:v,tabIndex:m,className:"".concat(n,"-input"),checked:!!_,onClick:x,onFocus:f,onBlur:y,onKeyUp:j,onKeyDown:g,onKeyPress:Z,onChange:this.handleChange,autoFocus:b,ref:this.saveInput,value:C},S)),u.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,s.Z)((0,s.Z)({},t),{},{checked:e.checked}):null}}]),n}(u.Component);h.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const m=h},18478:(e,t,n)=>{e.exports=n.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);