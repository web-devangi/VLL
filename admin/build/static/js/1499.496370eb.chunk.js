"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1499],{61499:(t,e,a)=>{a.r(e),a.d(e,{default:()=>S});var i=a(47313),l=a(97890),n=a(23560),s=a(83999),c=a(10976),o=a(77181),d=a(2717),u=a(90954),r=a(24511),v=a(73431),m=a(10596),p=a(12545),g=a(97421),h=a(46417);const{Step:_}=s.Z,S=()=>{var t,e,a,S,k,x,f,j,y;const{t:Z}=(0,r.$)(),{activeMenu:w}=(0,d.v9)((t=>t.menu),d.wU),b=(0,d.I0)(),[F]=c.Z.useForm(),V=(0,l.s0)(),q=t=>({name:t,url:g.bV+t}),[z,C]=(0,i.useState)(null!==(t=w.data)&&void 0!==t&&null!==(e=t.galleries)&&void 0!==e&&e[0]?[q(null===(a=w.data)||void 0===a||null===(S=a.galleries)||void 0===S?void 0:S[0].path)]:[]),[I,M]=(0,i.useState)(null!==(k=w.data)&&void 0!==k&&null!==(x=k.galleries)&&void 0!==x&&x[1]?[q(null===(f=w.data)||void 0===f||null===(j=f.galleries)||void 0===j?void 0:j[1].path)]:[]),U=[...z,...I],[A,B]=(0,i.useState)((null===(y=w.data)||void 0===y?void 0:y.step)||0),E=()=>{B(A+1)},N=()=>{B(A-1)},[$,D]=(0,i.useState)(!1);(0,i.useEffect)((()=>()=>{const t=F.getFieldsValue(!0);b((0,u.nc)({activeMenu:w,data:t}))}),[]);return(0,h.jsx)(o.Z,{title:Z("add.recepe"),extra:(0,h.jsx)(v.Z,{}),children:(0,h.jsxs)(c.Z,{layout:"vertical",onFinish:t=>{var e;F.validateFields();const a={...t,images:U.map((t=>t.name)),category_id:t.category_id.value,shop_id:t.shop_id.value,active_time:t.active_time.toString(),total_time:t.total_time.toString(),nutrition:t.nutrition.map((t=>({...t,percentage:String(t.percentage),weight:String(t.weight)}))),stocks:null===(e=t.stocks)||void 0===e?void 0:e.map((t=>({min_quantity:t.min_quantity,stock_id:t.stock_id.value})))};D(!0);const i="catalog/recept";p.Z.create(a).then((()=>{n.Am.success(Z("successfully.created")),V("/".concat(i)),b((0,u.ph)({...w,nextUrl:i}))})).finally((()=>D(!1)))},form:F,initialValues:{active:!0,...w.data},children:[(0,h.jsx)(s.Z,{current:A,children:m.S.map((t=>(0,h.jsx)(_,{title:Z(t.title)},t.title)))}),m.S.map((t=>{const e=t.content;return(0,h.jsx)("div",{className:"steps-content ".concat(t.step!==A+1&&"hidden"),children:(0,h.jsx)(e,{next:E,prev:N,loading:$,image:z,setImage:C,back:I,setBack:M})},t.title)}))]})})}}}]);