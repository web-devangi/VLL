"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8351],{32380:function(e,t,n){n.d(t,{o:function(){return c}});var a=n(1413),i=n(29439),l=n(45987),r=n(47313),u=n(84762),s=n(72652),d=n(46417),o=["fetchOptions","refetch"],c=function(e){var t=e.fetchOptions,n=e.refetch,c=void 0!==n&&n,v=(0,l.Z)(e,o),m=(0,r.useState)(!1),f=(0,i.Z)(m,2),p=f[0],h=f[1],Z=(0,r.useState)([]),g=(0,i.Z)(Z,2),x=g[0],j=g[1];return(0,d.jsx)(u.Z,(0,a.Z)({treeLine:!0,treeData:p?[]:x,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:function(){x.length&&!c||(h(!0),t().then((function(e){j(e),h(!1)})))},notFoundContent:p?(0,d.jsx)(s.Z,{size:"small"}):"no results"},v))}},73431:function(e,t,n){var a=n(47313),i=n(39180),l=n(2717),r=n(28830),u=n(60535),s=n(46417);t.Z=function(){var e=(0,l.I0)(),t=(0,l.v9)((function(e){return e.formLang}),l.wU),n=t.languages,d=t.defaultLang;(0,a.useEffect)((function(){u.Z.getAllActive().then((function(t){var n=t.data;e((0,r.dc)(n)),e((0,r.mh)(n.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.ZP.Group,{value:d,onChange:function(t){var n=t.target.value;e((0,r.mh)(n))},className:"float-right",buttonStyle:"solid",children:null===n||void 0===n?void 0:n.map((function(e){return(0,s.jsx)(i.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},78351:function(e,t,n){n.r(t);var a=n(15861),i=n(1413),l=n(29439),r=n(87757),u=n.n(r),s=n(47313),d=n(10976),o=n(77181),c=n(68197),v=n(16124),m=n(59624),f=n(66672),p=n(74294),h=n(86345),Z=n(59491),g=n(72652),x=n(23560),j=n(97890),y=n(73431),b=n(52421),w=n(2717),k=n(90954),q=n(47647),I=n(97421),_=n(24511),S=n(5764),F=n(81218),U=n(71810),L=n(32380),A=n(46417);t.default=function(){var e,t,n=(0,_.$)().t,r=(0,j.s0)(),C=(0,w.I0)(),V=(0,w.v9)((function(e){return e.menu}),w.wU).activeMenu,N=(0,w.v9)((function(e){return e.requestModels}),w.wU).params,z=(0,s.useState)(!1),E=(0,l.Z)(z,2),O=E[0],P=E[1],M=(0,s.useState)(null!==(e=V.data)&&void 0!==e&&e.image?[null===(t=V.data)||void 0===t?void 0:t.image]:[]),B=(0,l.Z)(M,2),D=B[0],G=B[1],T=d.Z.useForm(),$=(0,l.Z)(T,1)[0],H=(0,s.useState)(!1),J=(0,l.Z)(H,2),K=J[0],Q=J[1],R=(0,s.useState)(null),W=(0,l.Z)(R,2),X=W[0],Y=W[1],ee=(0,s.useState)("main"),te=(0,l.Z)(ee,2),ne=te[0],ae=te[1],ie=(0,w.v9)((function(e){return e.auth}),w.wU).user,le=(0,j.UO)().id,re=(0,w.v9)((function(e){return e.formLang}),w.wU),ue=re.defaultLang,se=re.languages;(0,s.useEffect)((function(){return function(){var e=$.getFieldsValue(!0);C((0,k.nc)({activeMenu:V,data:e}))}}),[]);function de(){return de=(0,a.Z)(u().mark((function e(){var t,n,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$.getFieldValue(),n=t.id,a={perPage:100,type:"main"},e.abrupt("return",q.Z.getAll(a).then((function(e){return e.data.filter((function(e){return e.id!==n})).map((function(e){var t,n;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id,type:"main",children:null===(n=e.children)||void 0===n?void 0:n.map((function(e){var t,n;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id,type:"sub_main",children:null===(n=e.children)||void 0===n?void 0:n.map((function(e){var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id,disabled:!0,type:"child"}}))}}))}}))})));case 3:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}(0,s.useEffect)((function(){var e;V.refetch&&(e=le,P(!0),F.Z.getById(e).then((function(e){var t,n,a,l,r,u,s=e.data,d=(0,i.Z)((0,i.Z)({},null===s||void 0===s?void 0:s.data),{},{keywords:null===(t=s.data)||void 0===t?void 0:t.keywords.split(","),parent_id:{label:null===(n=s.parent)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title,value:s.data.parent_id,key:s.data.parent_id},input:(null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.input)||0});$.setFieldsValue(d),G([(u=null===(r=s.data.images)||void 0===r?void 0:r.at(0),{name:u,url:I.bV+u})])})).finally((function(){P(!1),C((0,k.A_)(V))})))}),[V.refetch]);return(0,A.jsx)(o.Z,{title:n("edit.request"),extra:(0,A.jsx)(y.Z,{}),children:O?(0,A.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,A.jsx)(g.Z,{size:"large",className:"mt-5 pt-5"})}):(0,A.jsxs)(d.Z,{name:"basic",layout:"vertical",onFinish:function(e){var t,a;Q(!0);var l={id:e.id,type:"category",data:(0,i.Z)((0,i.Z)({},e),{},{type:null!==(t=e.parent_id)&&void 0!==t&&t.value?ne:"main",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null===(a=e.parent_id)||void 0===a?void 0:a.value,images:null===D||void 0===D?void 0:D.map((function(e){return e.name}))})},u=(0,i.Z)((0,i.Z)({},N),{},{shop_id:null===ie||void 0===ie?void 0:ie.shop_id}),s="seller/categories";F.Z.requestChangeUpdate(le,l).then((function(){x.Am.success(n("successfully.updated")),C((0,k.ph)((0,i.Z)((0,i.Z)({},V),{},{nextUrl:s}))),C((0,U._7)(u)),r("/".concat(s),{state:{tab:"request"}})})).catch((function(e){return Y(e.response.data.params)})).finally((function(){return Q(!1)}))},initialValues:(0,i.Z)({active:!0},V.data),form:$,children:[(0,A.jsxs)(c.Z,{gutter:12,children:[(0,A.jsx)(d.Z.Item,{name:"id",hidden:!0,children:(0,A.jsx)(v.Z,{})}),(0,A.jsx)(m.Z,{span:12,children:se.map((function(e,t){return(0,A.jsx)(d.Z.Item,{label:n("name"),name:["title",e.locale],help:X&&X.title[ue]?X.title[ue][0]:null,validateStatus:X?"error":"success",rules:[{required:e.locale===ue,message:n("required")}],hidden:e.locale!==ue,children:(0,A.jsx)(f.Z,{})},e.title+t)}))}),(0,A.jsx)(m.Z,{span:12,children:se.map((function(e,t){return(0,A.jsx)(d.Z.Item,{label:n("description"),name:["description",e.locale],rules:[{required:e.locale===ue,message:n("required")}],hidden:e.locale!==ue,children:(0,A.jsx)(b.Z,{rows:4})},e.locale+t)}))}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(d.Z.Item,{label:n("keywords"),name:"keywords",rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(p.Z,{mode:"tags",style:{width:"100%"}})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(d.Z.Item,{label:n("parent.category"),name:"parent_id",rules:[{required:!1,message:n("required")}],children:(0,A.jsx)(L.o,{fetchOptions:function(){return de.apply(this,arguments)},onSelect:function(e,t,n){var a=(t||{}).type;ae("main"===a?"sub_main":"sub_main"===a?"child":"main")},allowClear:!0})})}),(0,A.jsx)(m.Z,{span:12,children:(0,A.jsx)(d.Z.Item,{name:"input",label:n("input"),rules:[{required:!0,message:n("required")}],children:(0,A.jsx)(v.Z,{min:0,parser:function(e){return parseInt(e,10)},max:32767,className:"w-100"})})}),(0,A.jsx)(m.Z,{span:4,children:(0,A.jsx)(d.Z.Item,{label:n("image"),children:(0,A.jsx)(S.Z,{type:"categories",imageList:D,setImageList:G,form:$,multiple:!1})})}),(0,A.jsx)(m.Z,{span:2,children:(0,A.jsx)(d.Z.Item,{label:n("active"),name:"active",valuePropName:"checked",children:(0,A.jsx)(h.Z,{})})})]}),(0,A.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:K,children:n("submit")})]})})}}}]);