"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5764],{32380:function(e,t,n){n.d(t,{o:function(){return c}});var i=n(1413),a=n(29439),r=n(45987),l=n(47313),u=n(84762),s=n(72652),d=n(46417),o=["fetchOptions","refetch"],c=function(e){var t=e.fetchOptions,n=e.refetch,c=void 0!==n&&n,m=(0,r.Z)(e,o),p=(0,l.useState)(!1),v=(0,a.Z)(p,2),f=v[0],h=v[1],Z=(0,l.useState)([]),g=(0,a.Z)(Z,2),x=g[0],j=g[1];return(0,d.jsx)(u.Z,(0,i.Z)({treeLine:!0,treeData:f?[]:x,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:function(){x.length&&!c||(h(!0),t().then((function(e){j(e),h(!1)})))},notFoundContent:f?(0,d.jsx)(s.Z,{size:"small"}):"no results"},m))}},73431:function(e,t,n){var i=n(47313),a=n(39180),r=n(2717),l=n(28830),u=n(60535),s=n(46417);t.Z=function(){var e=(0,r.I0)(),t=(0,r.v9)((function(e){return e.formLang}),r.wU),n=t.languages,d=t.defaultLang;(0,i.useEffect)((function(){u.Z.getAllActive().then((function(t){var n=t.data;e((0,l.dc)(n)),e((0,l.mh)(n.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.ZP.Group,{value:d,onChange:function(t){var n=t.target.value;e((0,l.mh)(n))},className:"float-right",buttonStyle:"solid",children:null===n||void 0===n?void 0:n.map((function(e){return(0,s.jsx)(a.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},85764:function(e,t,n){n.r(t);var i=n(15861),a=n(4942),r=n(93433),l=n(1413),u=n(29439),s=n(87757),d=n.n(s),o=n(47313),c=n(10976),m=n(77181),p=n(68197),v=n(16124),f=n(59624),h=n(66672),Z=n(74294),g=n(86345),x=n(59491),j=n(72652),y=n(23560),b=n(97890),w=n(73431),I=n(52421),k=n(2717),_=n(90954),q=n(47647),S=n(97421),F=n(24511),L=n(5764),U=n(81218),C=n(42472),O=n(32380),V=n(46417);t.default=function(){var e,t,n=(0,F.$)().t,s=(0,b.s0)(),z=(0,k.I0)(),A=(0,o.useState)("main"),N=(0,u.Z)(A,2),P=N[0],E=N[1],M=(0,k.v9)((function(e){return e.menu}),k.wU),B=M.activeMenu,D=(0,k.v9)((function(e){return e.requestModels}),k.wU),T=D.params,$=(0,k.v9)((function(e){return e.auth}),k.wU),G=$.user,H=(0,b.TH)().state,J=(0,o.useState)(!1),K=(0,u.Z)(J,2),Q=K[0],R=K[1],W=(0,o.useState)(null!==(e=B.data)&&void 0!==e&&e.image?[null===(t=B.data)||void 0===t?void 0:t.image]:[]),X=(0,u.Z)(W,2),Y=X[0],ee=X[1],te=c.Z.useForm(),ne=(0,u.Z)(te,1)[0],ie=(0,o.useState)(!1),ae=(0,u.Z)(ie,2),re=ae[0],le=ae[1],ue=(0,o.useState)(null),se=(0,u.Z)(ue,2),de=se[0],oe=se[1],ce=(0,b.UO)().uuid,me=(0,k.v9)((function(e){return e.formLang}),k.wU),pe=me.defaultLang,ve=me.languages;(0,o.useEffect)((function(){return function(){var e=ne.getFieldsValue(!0);z((0,_.nc)({activeMenu:B,data:e})),z((0,C.z$)((0,l.Z)((0,l.Z)({},T),{},{type:P,parent_id:null===H||void 0===H?void 0:H.parentId,shop_id:null===G||void 0===G?void 0:G.shop_id})))}}),[]);var fe=function(e){return{name:e,url:S.bV+e}},he=function(e){return Object.assign.apply(Object,[{}].concat((0,r.Z)(e)))};function Ze(){return Ze=(0,i.Z)(d().mark((function e(){var t,n,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ne.getFieldValue({}),n=t.id,i={perPage:100,type:"main"},e.abrupt("return",q.Z.selectPaginate(i).then((function(e){return e.data.filter((function(e){return e.id!==n})).map((function(e){var t,n;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id,type:"main",children:null===(n=e.children)||void 0===n?void 0:n.map((function(e){var t,n;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id,type:"sub_main",children:null===(n=e.children)||void 0===n?void 0:n.map((function(e){var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id,disabled:!0,type:"child"}}))}}))}}))})));case 3:case"end":return e.stop()}}),e)}))),Ze.apply(this,arguments)}(0,o.useEffect)((function(){var e;e=ce,R(!0),q.Z.getById(e).then((function(e){var t,n,i=e.data,r=(0,l.Z)((0,l.Z)({},i),{},{title:he(i.translations.map((function(e){return(0,a.Z)({},e.locale,e.title)}))),description:he(i.translations.map((function(e){return(0,a.Z)({},e.locale,e.description)}))),image:[fe(i.img)],keywords:i.keywords.split(","),id:i.id,parent_id:{label:null===(t=i.parent)||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title,value:i.parent_id,key:i.parent_id},input:(null===i||void 0===i?void 0:i.input)||0});ne.setFieldsValue(r),ee([fe(i.img)])})).finally((function(){R(!1),z((0,_.A_)(B))}))}),[B.refetch,ce,null===H||void 0===H?void 0:H.parentId]);return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(m.Z,{title:null!==H&&void 0!==H&&H.parentId?n("edit.sub.category"):n("edit.category"),extra:(0,V.jsx)(w.Z,{}),children:Q?(0,V.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,V.jsx)(j.Z,{size:"large",className:"mt-5 pt-5"})}):(0,V.jsxs)(c.Z,{name:"basic",layout:"vertical",onFinish:function(e){var t,i;le(!0);var a={id:e.id,type:"category",data:(0,l.Z)((0,l.Z)({},e),{},{type:null!==(t=e.parent_id)&&void 0!==t&&t.value?P:"main",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null===(i=e.parent_id)||void 0===i?void 0:i.value,images:null===Y||void 0===Y?void 0:Y.map((function(e){return e.name}))})},r="seller/categories";U.Z.requestChange(a).then((function(){y.Am.success(n("successfully.updated")),z((0,_.ph)((0,l.Z)((0,l.Z)({},B),{},{nextUrl:r}))),z((0,_.xo)(B)),s("/".concat(r),{state:{tab:"request"}})})).catch((function(e){return oe(e.response.data.params)})).finally((function(){return le(!1)}))},initialValues:(0,l.Z)({active:!0},B.data),form:ne,children:[(0,V.jsxs)(p.Z,{gutter:12,children:[(0,V.jsx)(c.Z.Item,{name:"id",hidden:!0,children:(0,V.jsx)(v.Z,{})}),(0,V.jsx)(f.Z,{span:12,children:ve.map((function(e,t){return(0,V.jsx)(c.Z.Item,{label:n("name"),name:["title",e.locale],help:de&&de.title[pe]?de.title[pe][0]:null,validateStatus:de?"error":"success",rules:[{required:e.locale===pe,message:n("required")}],hidden:e.locale!==pe,children:(0,V.jsx)(h.Z,{})},e.title+t)}))}),(0,V.jsx)(f.Z,{span:12,children:ve.map((function(e,t){return(0,V.jsx)(c.Z.Item,{label:n("description"),name:["description",e.locale],rules:[{required:e.locale===pe,message:n("required")}],hidden:e.locale!==pe,children:(0,V.jsx)(I.Z,{rows:4})},e.locale+t)}))}),(0,V.jsx)(f.Z,{span:12,children:(0,V.jsx)(c.Z.Item,{label:n("keywords"),name:"keywords",rules:[{required:!0,message:n("required")}],children:(0,V.jsx)(Z.Z,{mode:"tags",style:{width:"100%"}})})}),(0,V.jsx)(f.Z,{span:12,children:(0,V.jsx)(c.Z.Item,{label:n("parent.category"),name:"parent_id",rules:[{required:!1,message:n("required")}],children:(0,V.jsx)(O.o,{fetchOptions:function(){return Ze.apply(this,arguments)},onSelect:function(e,t){var n=(t||{}).type;E("main"===n?"sub_main":"sub_main"===n?"child":"main")},allowClear:!0})})}),(0,V.jsx)(f.Z,{span:12,children:(0,V.jsx)(c.Z.Item,{name:"input",label:n("input"),rules:[{required:!0,message:n("required")}],children:(0,V.jsx)(v.Z,{min:0,parser:function(e){return parseInt(e,10)},max:32767,className:"w-100"})})}),(0,V.jsx)(f.Z,{span:4,children:(0,V.jsx)(c.Z.Item,{label:n("image"),children:(0,V.jsx)(L.Z,{type:"categories",imageList:Y,setImageList:ee,form:ne,multiple:!1})})}),(0,V.jsx)(f.Z,{span:2,children:(0,V.jsx)(c.Z.Item,{label:n("active"),name:"active",valuePropName:"checked",children:(0,V.jsx)(g.Z,{})})})]}),(0,V.jsx)(x.Z,{type:"primary",htmlType:"submit",loading:re,children:n("submit")})]})})})}}}]);