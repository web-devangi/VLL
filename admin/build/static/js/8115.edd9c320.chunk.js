"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8115],{89281:function(e,t,n){n.d(t,{h:function(){return m}});var i=n(1413),s=n(29439),a=n(45987),r=n(47313),u=n(12279),c=n.n(u),l=n(74294),o=n(72652),d=n(46417),f=["fetchOptions","debounceTimeout","onClear","refetchOptions"],m=function(e){var t=e.fetchOptions,n=e.debounceTimeout,u=void 0===n?400:n,m=e.onClear,h=e.refetchOptions,p=void 0!==h&&h,Z=(0,a.Z)(e,f),v=(0,r.useState)(!1),x=(0,s.Z)(v,2),j=x[0],b=x[1],g=(0,r.useState)([]),y=(0,s.Z)(g,2),C=y[0],O=y[1],S=(0,r.useMemo)((function(){return c()((function(e){O([]),b(!0),t(e).then((function(e){O(e),b(!1)}))}),u)}),[t,u]);return(0,d.jsx)(l.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:S,onClear:function(){S(""),m&&m()},notFoundContent:j?(0,d.jsx)(o.Z,{size:"small"}):"no results"},Z),{},{options:C,onFocus:function(){C.length&&!p||S("")}}))}},48115:function(e,t,n){n.r(t);var i=n(4942),s=n(93433),a=n(1413),r=n(29439),u=n(47313),c=n(97890),l=n(23560),o=n(10976),d=n(77181),f=n(68197),m=n(59624),h=n(59491),p=n(2717),Z=n(90954),v=n(18333),x=n(89281),j=n(24511),b=n(4446),g=n(84980),y=n(5764),C=n(46417);t.default=function(){var e,t,n=(0,j.$)().t,O=(0,p.v9)((function(e){return e.menu}),p.wU).activeMenu,S=(0,p.I0)(),w=o.Z.useForm(),F=(0,r.Z)(w,1)[0],I=(0,c.s0)(),k=(0,p.v9)((function(e){return e.myShop}),p.wU).myShop,q=(0,u.useState)(null!==(e=O.data)&&void 0!==e&&e.images?[null===(t=O.data)||void 0===t?void 0:t.images[0]]:[]),N=(0,r.Z)(q,2),T=N[0],U=N[1],_=(0,u.useState)(!1),z=(0,r.Z)(_,2),M=z[0],V=z[1];(0,u.useEffect)((function(){return function(){var e=F.getFieldsValue(!0);S((0,Z.nc)({activeMenu:O,data:e}))}}),[]);return(0,C.jsx)(d.Z,{title:n("add.story"),className:"h-100",children:(0,C.jsxs)(o.Z,{name:"story-add",layout:"vertical",onFinish:function(e){var t=(0,a.Z)((0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,s.Z)(T.map((function(e,t){return(0,i.Z)({},"file_urls[".concat(t,"]"),e.name)})))))),{},{product_id:e.products.value});V(!0);var r="seller/stories";b.Z.create(t).then((function(){var e={shop_id:k.id};l.Am.success(n("successfully.created")),(0,p.dC)((function(){S((0,Z.ph)((0,a.Z)((0,a.Z)({},O),{},{nextUrl:r}))),S((0,g.U7)(e))})),I("/".concat(r))})).finally((function(){return V(!1)}))},form:F,initialValues:(0,a.Z)({active:!0},O.data),className:"d-flex flex-column h-100",children:[(0,C.jsxs)(f.Z,{gutter:12,children:[(0,C.jsx)(m.Z,{span:12,children:(0,C.jsx)(o.Z.Item,{label:n("products"),name:"products",rules:[{required:!1,message:n("required")}],children:(0,C.jsx)(x.h,{fetchOptions:function(e){var t={search:e,shop_id:k.id,status:"published",active:1,rest:1};return v.Z.getAll(t).then((function(e){return e.data.map((function(e){return{label:e.translation.title,value:e.id}}))}))},debounceTimeout:200})})}),(0,C.jsx)(m.Z,{span:12,children:(0,C.jsx)(o.Z.Item,{label:n("image"),name:"image",rules:[{required:0===T.length,message:n("required")}],children:(0,C.jsx)(y.Z,{type:"banners",imageList:T,setImageList:U,form:F,multiple:!1})})})]}),(0,C.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,C.jsx)("div",{className:"pb-5",children:(0,C.jsx)(h.Z,{type:"primary",htmlType:"submit",loading:M,children:n("submit")})})})]})})}}}]);