"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[351],{90351:function(e,t,n){n.r(t);var i=n(1413),a=n(29439),s=n(47313),r=n(97890),l=n(23560),u=n(10976),c=n(77181),d=n(68197),m=n(59624),o=n(66672),f=n(86345),Z=n(59491),v=n(72652),h=n(97421),g=n(2717),p=n(90954),x=n(11216),j=n(73253),y=n(24511),b=n(5764),I=n(46417);t.default=function(){var e,t,n=(0,y.$)().t,k=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,w=(0,r.UO)().id,S=(0,g.I0)(),q=(0,s.useState)(null!==(e=k.data)&&void 0!==e&&e.image?[null===(t=k.data)||void 0===t?void 0:t.image]:[]),E=(0,a.Z)(q,2),F=E[0],N=E[1],P=u.Z.useForm(),U=(0,a.Z)(P,1)[0],V=(0,r.s0)(),z=(0,r.TH)(),A=(0,s.useState)(!1),L=(0,a.Z)(A,2),C=L[0],M=L[1],T=(0,s.useState)(!1),B=(0,a.Z)(T,2),H=B[0],O=B[1];(0,s.useEffect)((function(){return function(){var e=U.getFieldsValue(!0);S((0,p.nc)({activeMenu:k,data:e}))}}),[]);var $=function(e){return{name:e,url:h.bV+e}};return(0,s.useEffect)((function(){k.refetch&&function(e){M(!0),x.Z.getById(e).then((function(e){var t=e.data;U.setFieldsValue((0,i.Z)((0,i.Z)({},t),{},{image:[$(t.img)]})),N([$(t.img)])})).finally((function(){M(!1),S((0,p.A_)(k))}))}(w)}),[k.refetch]),(0,I.jsx)(c.Z,{title:n("edit.brand"),children:C?(0,I.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,I.jsx)(v.Z,{size:"large",className:"py-5"})}):(0,I.jsxs)(u.Z,{name:"basic",layout:"vertical",onFinish:function(e){var t,a=(0,i.Z)((0,i.Z)({},e),{},{active:e.active?1:0,"images[0]":null===(t=F[0])||void 0===t?void 0:t.name});O(!0);var s="catalog/brands";"edit"===z.state?x.Z.update(w,a).then((function(){l.Am.success(n("successfully.updated")),S((0,p.ph)((0,i.Z)((0,i.Z)({},k),{},{nextUrl:s}))),V("/".concat(s)),S((0,j.S0)({}))})).finally((function(){return O(!1)})):x.Z.create(a).then((function(){l.Am.success(n("successfully.updated")),S((0,p.ph)((0,i.Z)((0,i.Z)({},k),{},{nextUrl:s}))),V("/".concat(s)),S((0,j.S0)({}))})).finally((function(){return O(!1)}))},form:U,initialValues:(0,i.Z)({},k.data),children:[(0,I.jsxs)(d.Z,{gutter:12,children:[(0,I.jsx)(m.Z,{span:12,children:(0,I.jsx)(u.Z.Item,{label:n("title"),name:"title",rules:[{required:!0,message:n("required")},{validator:function(e,t){return t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(n("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(n("must.be.at.least.2"))):Promise.resolve()}}],children:(0,I.jsx)(o.Z,{maxLength:50})})}),(0,I.jsx)(m.Z,{span:6,children:(0,I.jsx)(u.Z.Item,{label:n("image"),name:"images",rules:[{required:!(null!==F&&void 0!==F&&F.length),message:n("required")}],children:(0,I.jsx)(b.Z,{type:"brands",imageList:F,setImageList:N,form:U,multiple:!1})})}),(0,I.jsx)(m.Z,{span:6,children:(0,I.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,I.jsx)(u.Z.Item,{label:n("active"),name:"active",valuePropName:"checked",children:(0,I.jsx)(f.Z,{})})})})]}),(0,I.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:H,children:n("submit")})]})})}}}]);