"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8351],{32380:(e,a,t)=>{t.d(a,{o:()=>d});var l=t(47313),i=t(84762),n=t(72652),s=t(46417);const d=e=>{let{fetchOptions:a,refetch:t=!1,...d}=e;const[r,u]=(0,l.useState)(!1),[o,c]=(0,l.useState)([]);return(0,s.jsx)(i.Z,{treeLine:!0,treeData:r?[]:o,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:()=>{o.length&&!t||(u(!0),a().then((e=>{c(e),u(!1)})))},notFoundContent:r?(0,s.jsx)(n.Z,{size:"small"}):"no results",...d})}},73431:(e,a,t)=>{t.d(a,{Z:()=>u});var l=t(47313),i=t(39180),n=t(2717),s=t(28830),d=t(60535),r=t(46417);const u=()=>{const e=(0,n.I0)(),{languages:a,defaultLang:t}=(0,n.v9)((e=>e.formLang),n.wU);(0,l.useEffect)((()=>{d.Z.getAllActive().then((a=>{let{data:t}=a;e((0,s.dc)(t)),e((0,s.mh)(t.find((e=>1===e.default)).locale))}))}),[]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.ZP.Group,{value:t,onChange:a=>{let{target:{value:t}}=a;e((0,s.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===a||void 0===a?void 0:a.map((e=>(0,r.jsx)(i.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},78351:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var l=t(47313),i=t(10976),n=t(77181),s=t(68197),d=t(16124),r=t(59624),u=t(66672),o=t(74294),c=t(86345),m=t(59491),v=t(72652),p=t(23560),h=t(97890),g=t(73431),x=t(52421),Z=t(2717),j=t(90954),y=t(47647),f=t(97421),b=t(24511),w=t(5764),k=t(81218),q=t(71810),I=t(32380),_=t(46417);const S=()=>{var e,a;const{t:t}=(0,b.$)(),S=(0,h.s0)(),F=(0,Z.I0)(),{activeMenu:U}=(0,Z.v9)((e=>e.menu),Z.wU),{params:L}=(0,Z.v9)((e=>e.requestModels),Z.wU),[A,C]=(0,l.useState)(!1),[V,N]=(0,l.useState)(null!==(e=U.data)&&void 0!==e&&e.image?[null===(a=U.data)||void 0===a?void 0:a.image]:[]),[z]=i.Z.useForm(),[E,P]=(0,l.useState)(!1),[M,O]=(0,l.useState)(null),[B,D]=(0,l.useState)("main"),{user:G}=(0,Z.v9)((e=>e.auth),Z.wU),{id:T}=(0,h.UO)(),{defaultLang:$,languages:H}=(0,Z.v9)((e=>e.formLang),Z.wU);(0,l.useEffect)((()=>()=>{const e=z.getFieldsValue(!0);F((0,j.nc)({activeMenu:U,data:e}))}),[]);(0,l.useEffect)((()=>{var e;U.refetch&&(e=T,C(!0),k.Z.getById(e).then((e=>{var a,t,l,i,n;let s=e.data;const d={...null===s||void 0===s?void 0:s.data,keywords:null===(a=s.data)||void 0===a?void 0:a.keywords.split(","),parent_id:{label:null===(t=s.parent)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title,value:s.data.parent_id,key:s.data.parent_id},input:(null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.input)||0};var r;z.setFieldsValue(d),N([(r=null===(n=s.data.images)||void 0===n?void 0:n.at(0),{name:r,url:f.bV+r})])})).finally((()=>{C(!1),F((0,j.A_)(U))})))}),[U.refetch]);return(0,_.jsx)(n.Z,{title:t("edit.request"),extra:(0,_.jsx)(g.Z,{}),children:A?(0,_.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,_.jsx)(v.Z,{size:"large",className:"mt-5 pt-5"})}):(0,_.jsxs)(i.Z,{name:"basic",layout:"vertical",onFinish:e=>{var a,l;P(!0);const i={id:e.id,type:"category",data:{...e,type:null!==(a=e.parent_id)&&void 0!==a&&a.value?B:"main",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null===(l=e.parent_id)||void 0===l?void 0:l.value,images:null===V||void 0===V?void 0:V.map((e=>e.name))}},n={...L,shop_id:null===G||void 0===G?void 0:G.shop_id},s="seller/categories";k.Z.requestChangeUpdate(T,i).then((()=>{p.Am.success(t("successfully.updated")),F((0,j.ph)({...U,nextUrl:s})),F((0,q._7)(n)),S("/".concat(s),{state:{tab:"request"}})})).catch((e=>O(e.response.data.params))).finally((()=>P(!1)))},initialValues:{active:!0,...U.data},form:z,children:[(0,_.jsxs)(s.Z,{gutter:12,children:[(0,_.jsx)(i.Z.Item,{name:"id",hidden:!0,children:(0,_.jsx)(d.Z,{})}),(0,_.jsx)(r.Z,{span:12,children:H.map(((e,a)=>(0,_.jsx)(i.Z.Item,{label:t("name"),name:["title",e.locale],help:M&&M.title[$]?M.title[$][0]:null,validateStatus:M?"error":"success",rules:[{required:e.locale===$,message:t("required")}],hidden:e.locale!==$,children:(0,_.jsx)(u.Z,{})},e.title+a)))}),(0,_.jsx)(r.Z,{span:12,children:H.map(((e,a)=>(0,_.jsx)(i.Z.Item,{label:t("description"),name:["description",e.locale],rules:[{required:e.locale===$,message:t("required")}],hidden:e.locale!==$,children:(0,_.jsx)(x.Z,{rows:4})},e.locale+a)))}),(0,_.jsx)(r.Z,{span:12,children:(0,_.jsx)(i.Z.Item,{label:t("keywords"),name:"keywords",rules:[{required:!0,message:t("required")}],children:(0,_.jsx)(o.Z,{mode:"tags",style:{width:"100%"}})})}),(0,_.jsx)(r.Z,{span:12,children:(0,_.jsx)(i.Z.Item,{label:t("parent.category"),name:"parent_id",rules:[{required:!1,message:t("required")}],children:(0,_.jsx)(I.o,{fetchOptions:async function(){const{id:e}=z.getFieldValue();return y.Z.getAll({perPage:100,type:"main"}).then((a=>a.data.filter((a=>a.id!==e)).map((e=>{var a,t;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id,key:e.id,type:"main",children:null===(t=e.children)||void 0===t?void 0:t.map((e=>{var a,t;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id,key:e.id,type:"sub_main",children:null===(t=e.children)||void 0===t?void 0:t.map((e=>{var a;return{label:null===(a=e.translation)||void 0===a?void 0:a.title,value:e.id,key:e.id,disabled:!0,type:"child"}}))}}))}}))))},onSelect:(e,a,t)=>{const{type:l}=a||{};D("main"===l?"sub_main":"sub_main"===l?"child":"main")},allowClear:!0})})}),(0,_.jsx)(r.Z,{span:12,children:(0,_.jsx)(i.Z.Item,{name:"input",label:t("input"),rules:[{required:!0,message:t("required")}],children:(0,_.jsx)(d.Z,{min:0,parser:e=>parseInt(e,10),max:32767,className:"w-100"})})}),(0,_.jsx)(r.Z,{span:4,children:(0,_.jsx)(i.Z.Item,{label:t("image"),children:(0,_.jsx)(w.Z,{type:"categories",imageList:V,setImageList:N,form:z,multiple:!1})})}),(0,_.jsx)(r.Z,{span:2,children:(0,_.jsx)(i.Z.Item,{label:t("active"),name:"active",valuePropName:"checked",children:(0,_.jsx)(c.Z,{})})})]}),(0,_.jsx)(m.Z,{type:"primary",htmlType:"submit",loading:E,children:t("submit")})]})})}}}]);