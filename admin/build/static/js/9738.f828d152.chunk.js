"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9738],{89281:(e,t,l)=>{l.d(t,{h:()=>d});var n=l(47313),o=l(12279),s=l.n(o),u=l(74294),i=l(72652),a=l(46417);const d=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:o,refetchOptions:d=!1,...r}=e;const[c,v]=(0,n.useState)(!1),[p,m]=(0,n.useState)([]),h=(0,n.useMemo)((()=>s()((e=>{m([]),v(!0),t(e).then((e=>{m(e),v(!1)}))}),l)),[t,l]);return(0,a.jsx)(u.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),o&&o()},notFoundContent:c?(0,a.jsx)(i.Z,{size:"small"}):"no results",...r,options:p,onFocus:()=>{p.length&&!d||h("")}})}},79738:(e,t,l)=>{l.r(t),l.d(t,{default:()=>k});var n=l(47313),o=l(97890),s=l(23560),u=l(10976),i=l(77181),a=l(2717),d=l(90954),r=l(24511),c=l(70816),v=l.n(c),p=l(96708),m=l(73346),h=l(51282),x=l(77397),b=l(46417);const k=()=>{const{t:e}=(0,r.$)(),{activeMenu:t}=(0,a.v9)((e=>e.menu),a.wU),l=(0,a.I0)(),[c]=u.Z.useForm(),k=(0,o.s0)(),[j,Z]=(0,n.useState)(!1),{id:_}=(0,o.UO)();const f=e=>{Z(!0),m.Z.getById(e).then((e=>function(e){var n,o,s,u,i,a,r,p,m,h,x,b,k,j,_,f,y,g;const q={status:null===e||void 0===e?void 0:e.status,expired_at:v()(null===e||void 0===e?void 0:e.expired_at,"YYYY-MM-DD"),stock:{label:(null===e||void 0===e||null===(n=e.stock)||void 0===n||null===(o=n.product)||void 0===o||null===(s=o.translation)||void 0===s?void 0:s.title)+"".concat((null===e||void 0===e||null===(u=e.stock)||void 0===u||null===(i=u.extras)||void 0===i?void 0:i.length)>0?": ".concat(null===e||void 0===e||null===(a=e.stock)||void 0===a||null===(r=a.extras)||void 0===r?void 0:r.map((e=>{var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.value})).join(", ")):""),value:null===e||void 0===e||null===(p=e.stock)||void 0===p?void 0:p.id,key:null===e||void 0===e||null===(m=e.stock)||void 0===m?void 0:m.id},stock_quantity:null===e||void 0===e?void 0:e.value,bonus_stock:{label:(null===e||void 0===e||null===(h=e.bonusStock)||void 0===h||null===(x=h.product)||void 0===x||null===(b=x.translation)||void 0===b?void 0:b.title)+"".concat((null===e||void 0===e||null===(k=e.bonusStock)||void 0===k||null===(j=k.extras)||void 0===j?void 0:j.length)>0?": ".concat(null===e||void 0===e||null===(_=e.bonusStock)||void 0===_||null===(f=_.extras)||void 0===f?void 0:f.map((e=>{var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.value})).join(", ")):""),value:null===e||void 0===e||null===(y=e.bonusStock)||void 0===y?void 0:y.id,key:null===e||void 0===e||null===(g=e.bonusStock)||void 0===g?void 0:g.id},bonus_stock_quantity:null===e||void 0===e?void 0:e.bonus_quantity};console.log("data",q),c.setFieldsValue(q),l((0,d.nc)({activeMenu:t,data:{...q,expired_at:null===e||void 0===e?void 0:e.expired_at}})),Z(!1)}(e.data))).finally((()=>l((0,d.A_)(t))))};(0,n.useEffect)((()=>{t.refetch&&f(_)}),[t.refetch]);return(0,b.jsx)(i.Z,{title:e("edit.bonus"),className:"h-100",children:j?(0,b.jsx)(h.Z,{}):(0,b.jsx)(x.Z,{form:c,handleSubmit:n=>{const o="seller/bonus/product";return m.Z.update(_,n).then((()=>{s.Am.success(e("successfully.created")),(0,a.dC)((()=>{l((0,d.ph)({...t,nextUrl:o})),l((0,p.k)({}))})),k("/".concat(o))}))}})})}},77397:(e,t,l)=>{l.d(t,{Z:()=>j});var n=l(47313),o=l(24511),s=l(2717),u=l(10976),i=l(68197),a=l(59624),d=l(16124),r=l(99096),c=l(86345),v=l(59491),p=l(89281),m=l(18333),h=l(90954),x=l(70816),b=l.n(x),k=l(46417);function j(e){let{form:t,handleSubmit:l}=e;const{t:x}=(0,o.$)(),{activeMenu:j}=(0,s.v9)((e=>e.menu),s.wU),Z=(0,s.I0)(),[_,f]=(0,n.useState)(!1),y=e=>{const t={search:e,page:1,perPage:20};return m.Z.getStock(t).then((e=>{let{data:t}=e;return null===t||void 0===t?void 0:t.map((e=>{var t,l,n,o;return{label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title)+"".concat((null===e||void 0===e||null===(n=e.extras)||void 0===n?void 0:n.length)>0?": ".concat(null===e||void 0===e||null===(o=e.extras)||void 0===o?void 0:o.map((e=>{var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.value})).join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))};(0,n.useEffect)((()=>()=>{const e=t.getFieldsValue(!0),l={...e,expired_at:null===e||void 0===e?void 0:e.expired_at};Z((0,h.nc)({activeMenu:j,data:l}))}),[]);return(0,k.jsxs)(u.Z,{form:t,name:"product_bonus_form",layout:"vertical",onFinish:e=>{var t,n;f(!0);const o={stock_id:null===(t=e.stock)||void 0===t?void 0:t.value,value:e.stock_quantity,bonus_stock_id:null===(n=e.bonus_stock)||void 0===n?void 0:n.value,bonus_quantity:e.bonus_stock_quantity,expired_at:b()(e.expired_at).format("YYYY-MM-DD"),status:e.status,type:"count"};l(o).finally((()=>f(!1)))},initialValues:{status:!0,...j.data},children:[(0,k.jsxs)(i.Z,{gutter:12,children:[(0,k.jsx)(a.Z,{span:12,children:(0,k.jsx)(u.Z.Item,{label:x("products.stock"),name:"stock",rules:[{required:!0,message:x("required")}],children:(0,k.jsx)(p.h,{fetchOptions:y,placeholder:x("select.product.stock")})})}),(0,k.jsx)(a.Z,{span:12,children:(0,k.jsx)(u.Z.Item,{label:x("product.stock.quantity"),name:"stock_quantity",rules:[{required:!0,message:x("required")},{type:"number",min:0,message:x("must.be.greater.than.0")}],children:(0,k.jsx)(d.Z,{className:"w-100",placeholder:x("input.product.stock.quantity")})})}),(0,k.jsx)(a.Z,{span:12,children:(0,k.jsx)(u.Z.Item,{label:x("bonus.product.stock"),name:"bonus_stock",rules:[{required:!0,message:x("required")}],children:(0,k.jsx)(p.h,{fetchOptions:y,placeholder:x("select.product.stock")})})}),(0,k.jsx)(a.Z,{span:12,children:(0,k.jsx)(u.Z.Item,{label:x("bonus.product.stock.quantity"),name:"bonus_stock_quantity",rules:[{required:!0,message:x("required")},{type:"number",min:0,message:x("must.be.greater.than.0")}],children:(0,k.jsx)(d.Z,{className:"w-100",placeholder:x("input.bonus.product.stock.quantity")})})}),(0,k.jsx)(a.Z,{span:12,children:(0,k.jsx)(u.Z.Item,{label:x("expired.at"),name:"expired_at",rules:[{required:!0,message:x("required")}],children:(0,k.jsx)(r.Z,{className:"w-100",placeholder:x("select.expired.at"),disabledDate:e=>b()().add(-1,"days")>=e})})}),(0,k.jsx)(a.Z,{span:8,children:(0,k.jsx)(u.Z.Item,{label:x("active"),name:"status",valuePropName:"checked",children:(0,k.jsx)(c.Z,{})})})]}),(0,k.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,k.jsx)("div",{className:"pb-5",children:(0,k.jsx)(v.Z,{type:"primary",htmlType:"submit",loading:_,children:x("submit")})})})]})}}}]);