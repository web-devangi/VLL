"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5037],{89281:function(e,n,t){t.d(n,{h:function(){return f}});var r=t(1413),o=t(29439),i=t(45987),a=t(47313),l=t(12279),u=t.n(l),d=t(74294),c=t(72652),s=t(46417),v=["fetchOptions","debounceTimeout","onClear","refetchOptions"],f=function(e){var n=e.fetchOptions,t=e.debounceTimeout,l=void 0===t?400:t,f=e.onClear,p=e.refetchOptions,h=void 0!==p&&p,_=(0,i.Z)(e,v),m=(0,a.useState)(!1),y=(0,o.Z)(m,2),Z=y[0],w=y[1],x=(0,a.useState)([]),g=(0,o.Z)(x,2),Y=g[0],k=g[1],b=(0,a.useMemo)((function(){return u()((function(e){k([]),w(!0),n(e).then((function(e){k(e),w(!1)}))}),l)}),[n,l]);return(0,s.jsx)(d.Z,(0,r.Z)((0,r.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:b,onClear:function(){b(""),f&&f()},notFoundContent:Z?(0,s.jsx)(c.Z,{size:"small"}):"no results"},_),{},{options:Y,onFocus:function(){Y.length&&!h||b("")}}))}},13945:function(e,n,t){function r(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(n,{Z:function(){return r}})},84017:function(e,n,t){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after",r=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(r," ").concat(n):"".concat(n," ").concat(r)}t.d(n,{Z:function(){return r}})},75037:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(15861),o=t(4942),i=t(1413),a=t(29439),l=t(93433),u=t(87757),d=t.n(u),c=t(47313),s=t(99096),v=t(77181),f=t(45705),p=t(78508),h=t(97890),_=t(2717),m=t(90954),y=t(24511),Z=t(80314),w=t(13945),x=t(84017),g=t(89281),Y=t(49986),k=t(70816),b=t.n(k),M=t(53149),j=t(10924),D=t(46417),C=s.Z.RangePicker;function I(){var e,n,t,u,s,k,I,S=(0,h.UO)().type,O=(0,_.I0)(),P=(0,h.s0)(),A=(0,y.$)().t,z=(0,_.v9)((function(e){return e.currency}),_.wU).defaultCurrency,F=[{title:A("order.id"),is_show:!0,dataIndex:"order_id",key:"order_id",sorter:!0,render:function(e){return(0,D.jsxs)("span",{className:"text-hover",onClick:function(){return function(e){O((0,m.bL)({url:"order/details/".concat(e),id:"order_details",name:A("order.details")})),P("/order/details/".concat(e))}(e)},children:["#",e]})}},{title:A(S),is_show:!0,dataIndex:"user",key:"user",render:function(e,n){var t=null===n||void 0===n?void 0:n.user;return(0,D.jsxs)("div",{children:[null===t||void 0===t?void 0:t.firstname," ",(null===t||void 0===t?void 0:t.lastname)||""]})}},{title:A("order.total_price"),is_show:!0,dataIndex:"transaction",key:"transaction",render:function(e,n){var t;null===e||void 0===e||e.status;return(0,D.jsx)("span",{children:(0,x.Z)(null===n||void 0===n||null===(t=n.order)||void 0===t?void 0:t.total_price,z.symbol)})}}].concat((0,l.Z)("seller"===S?[{title:A("coupon.price"),is_show:!0,dataIndex:"coupon_price",key:"coupon_price",render:function(e){return(0,x.Z)(e)}}]:[]),(0,l.Z)("seller"===S?[{title:A("total.cashback"),is_show:!0,dataIndex:"point_histories",key:"point_histories",render:function(e){var n;return(0,x.Z)(null===e||void 0===e||null===(n=e[0])||void 0===n?void 0:n.price)}}]:[]),[{title:A("delivery.fee"),is_show:!0,dataIndex:"delivery_fee",key:"delivery_fee",render:function(e,n){var t;return(0,x.Z)(null===n||void 0===n||null===(t=n.order)||void 0===t?void 0:t.delivery_fee)}}],(0,l.Z)("seller"===S?[{title:A("service.fee"),is_show:!0,dataIndex:"service_fee",key:"service_fee",render:function(e,n){var t;return(0,x.Z)(((null===n||void 0===n||null===(t=n.order)||void 0===t?void 0:t.service_fee)||0)+((null===n||void 0===n?void 0:n.order.commission_fee)||0))}}]:[]),(0,l.Z)("seller"===S?[{title:A("seller.fee"),is_show:!0,dataIndex:"seller_fee",key:"seller_fee",render:function(e,n){var t;return(0,x.Z)(null===n||void 0===n||null===(t=n.order)||void 0===t?void 0:t.seller_fee)}}]:[]),[{title:A("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:function(e){var n;return A(null===e||void 0===e||null===(n=e.payment_system)||void 0===n?void 0:n.tag)||"-"}}]),N=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,U=(0,c.useState)(b()().subtract(1,"month"),b()()),R=(0,a.Z)(U,2),T=R[0],$=R[1],E=(0,_.v9)((function(e){return e.paymentToPartners}),_.wU),L=E.completedList,K=E.loading,V=E.params,q=E.meta,B=N.data,G={search:null===B||void 0===B?void 0:B.search,sort:null===B||void 0===B?void 0:B.sort,column:null===B||void 0===B?void 0:B.column,perPage:null===B||void 0===B?void 0:B.perPage,page:null===B||void 0===B?void 0:B.page,user_id:null===B||void 0===B?void 0:B.user_id,shop_id:null!==(null===(e=N.data)||void 0===e?void 0:e.shop_id)?null===(n=N.data)||void 0===n?void 0:n.shop_id:null,date_from:Array.isArray(T)?null===(t=T[0])||void 0===t?void 0:t.format("YYYY-MM-DD"):b()().subtract(1,"month").format("YYYY-MM-DD"),date_to:Array.isArray(T)?null===(u=T[1])||void 0===u?void 0:u.format("YYYY-MM-DD"):b()().format("YYYY-MM-DD"),type:S};(0,Z.Z)((function(){O((0,j.kR)(G))}),[B,T,S]);var H=function(e,n){O((0,m.nc)({activeMenu:N,data:(0,i.Z)((0,i.Z)({},B),(0,o.Z)({},n,e))}))};function J(){return J=(0,r.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,perPage:10,role:S},e.abrupt("return",Y.Z.search(t).then((function(e){return e.data.map((function(e){return{label:"".concat(e.firstname," ").concat(e.lastname),value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function Q(){return Q=(0,r.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,status:"approved"},e.abrupt("return",M.Z.getAll(t).then((function(e){return e.data.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}return(0,c.useEffect)((function(){null!==N&&void 0!==N&&N.refetch&&(O((0,j.kR)(G)),O((0,m.A_)(N)))}),[null===N||void 0===N?void 0:N.refetch]),(0,c.useEffect)((function(){return function(){O((0,m.nc)({activeMenu:N,data:{}}))}}),[]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(v.Z,{children:(0,D.jsx)("div",{className:"flex justify-content-space-between",children:(0,D.jsxs)(f.Z,{wrap:!0,className:"order-filter",style:{flex:1,width:"100%"},children:[(0,D.jsx)(g.h,{placeholder:A("select.shop"),fetchOptions:function(e){return Q.apply(this,arguments)},style:{width:"100%"},onSelect:function(e){return H(e.value,"shop_id")},onDeselect:function(){return H(null,"shop_id")},allowClear:!0,value:null===B||void 0===B?void 0:B.shop_id}),(0,D.jsx)(g.h,{placeholder:A("select.user"),fetchOptions:function(e){return J.apply(this,arguments)},onSelect:function(e){return H(e.value,"user_id")},onDeselect:function(){return H(null,"user_id")},style:{width:"100%"},value:null===B||void 0===B?void 0:B.user_id}),(0,D.jsx)(C,{value:T,onChange:function(e){H((function(n){var t,r;return(0,i.Z)((0,i.Z)({},n),{date_from:null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.format("YYYY-MM-DD"),date_to:null===e||void 0===e||null===(r=e[1])||void 0===r?void 0:r.format("YYYY-MM-DD")})})),$(e)},disabledDate:function(e){return e&&e>b()().endOf("day")},style:{width:"100%"}})]})})}),(0,D.jsx)(v.Z,{children:(0,D.jsx)(p.Z,{scroll:{x:!0},columns:null===F||void 0===F?void 0:F.filter((function(e){return e.is_show})),dataSource:L,loading:K,pagination:{pageSize:V.perPage,page:(null===(s=N.data)||void 0===s?void 0:s.page)||1,total:null===q||void 0===q?void 0:q.total,defaultCurrent:null===(k=N.data)||void 0===k?void 0:k.page,current:null===(I=N.data)||void 0===I?void 0:I.page},rowKey:function(e){return null===e||void 0===e?void 0:e.id},onChange:function(e,n,t){var r=e.pageSize,o=e.current,a=t.field,l=t.order,u=(0,w.Z)(l);O((0,m.nc)({activeMenu:N,data:(0,i.Z)((0,i.Z)({},B),{},{perPage:r,page:o,column:a,sort:u})}))}})})]})}}}]);