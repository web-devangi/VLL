"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9044],{59044:function(t,n,e){e.r(n);var u=e(1413),i=e(93433),r=e(4942),a=e(29439),o=e(47313),c=e(10976),l=e(77181),s=e(73431),d=e(97890),f=e(69147),p=e(70816),v=e.n(p),Z=e(2717),h=e(90954),m=e(24511),x=e(39523),y=e(38020),Y=e(23560),b=e(46417);n.default=function(){var t=(0,m.$)().t,n=c.Z.useForm(),e=(0,a.Z)(n,1)[0],p=(0,o.useState)(!1),_=(0,a.Z)(p,2),g=_[0],j=_[1],w=(0,Z.v9)((function(t){return t.formLang}),Z.wU).languages,M=(0,Z.I0)(),U=(0,d.s0)(),k=(0,d.UO)().id,D=(0,Z.v9)((function(t){return t.menu}),Z.wU).activeMenu,S=(0,Z.v9)((function(t){return t.myShop}),Z.wU).myShop;function C(t){j(!0),f.Z.getById(t).then((function(t){var n=t.data,a=(0,u.Z)((0,u.Z)((0,u.Z)({},n),function(t){if(null===t||void 0===t||!t.translations)return{};var n=t.translations,e=w.map((function(t){var e;return(0,r.Z)({},"title[".concat(t.locale,"]"),null===(e=n.find((function(n){return n.locale===t.locale})))||void 0===e?void 0:e.title)}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(e)))}(n)),{},{expired_at:v()(n.expired_at,"YYYY-MM-DD")});e.setFieldsValue(a)})).finally((function(){j(!1),M((0,h.A_)(D))}))}return(0,o.useEffect)((function(){D.refetch&&C(k)}),[D.refetch]),(0,b.jsx)(l.Z,{title:t("edit.coupon"),extra:(0,b.jsx)(s.Z,{}),loading:g,children:(0,b.jsx)(y.Z,{form:e,handleSubmit:function(n){var e="seller/coupons",i=(0,u.Z)((0,u.Z)({},n),{},{shop_id:null===S||void 0===S?void 0:S.id,expired_at:v()(n.expired_at).format("YYYY-MM-DD"),qty:Number(n.qty),price:Number(n.price)});return f.Z.update(k,i).then((function(n){Y.Am.success(t("successfully.updated")),(0,Z.dC)((function(){M((0,h.ph)((0,u.Z)((0,u.Z)({},D),{},{nextUrl:e}))),M((0,x.v)({shop_id:null===S||void 0===S?void 0:S.id}))})),U("/".concat(e))}))}})})}}}]);