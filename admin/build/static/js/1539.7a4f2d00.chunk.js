"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1539],{81449:function(e,n,l){l.d(n,{Z:function(){return d}});l(47313);var i=l(84697),t=l(2717),a=l(97421),s=l(46417);function d(e){var n=e.center,l=e.handleLoadMap,d=e.children;(0,t.v9)((function(e){return e.globalSettings.settings}),t.wU).google_map_key;return(0,s.jsx)(i.ZP,{bootstrapURLKeys:{key:a.kr},defaultZoom:12,defaultCenter:n,options:{fullscreenControl:!1},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var n=e.map,i=e.maps;return l(n,i)},children:d})}},17649:function(e,n,l){l.d(n,{Z:function(){return i}});l(97421);function i(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};var n=e.location.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}},29242:function(e,n,l){function i(e,n){var l=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(n){return e>=n.value}));return l?"$"+(e/l.value).toFixed(n).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+l.symbol:"0"}l.d(n,{p:function(){return i}})},33118:function(e,n,l){l.d(n,{Z:function(){return s}});var i=l(70816),t=l.n(i),a=l(24511);function s(e){var n=(0,a.$)().t,l=t()(),i=t()(e),s=l.diff(i,"hours"),d=l.diff(i,"minutes");return s>23?t()(e).format("Do MMM, H:mm"):s>0?s+" "+n("hours.ago"):d+" "+n("minutes.ago")}},81539:function(e,n,l){l.r(n),l.d(n,{default:function(){return L}});var i=l(29439),t=l(47313),a=l(45334),s=l(77181),d=l(74294),r=l(68197),o=l(59624),u=l(24511),c=l(2717),v=l(17649),m=l(97421),f=l(81566),h=l(90954),x=l(51282),j=l(80314),p=l(11829),g=l(55613),y=l(29242),_=l(33118),b=l(46417),Z=function(e){var n,l=e.data,i=e.handleClose,t=(0,u.$)().t,s=(0,_.Z)(null===l||void 0===l||null===(n=l.delivery_man_setting)||void 0===n?void 0:n.updated_at),d=null===l||void 0===l?void 0:l.assign_reviews_avg_rating,c=null===l||void 0===l?void 0:l.phone,v=null===l||void 0===l?void 0:l.delivery_man_orders_count,f=null===l||void 0===l?void 0:l.delivery_man_orders_sum_total_price;return(0,b.jsxs)(r.Z,{gutter:12,align:"middle",children:[(0,b.jsx)(o.Z,{span:7,children:(0,b.jsxs)("div",{className:"d-flex align-items-center",children:[(0,b.jsx)(a.C,{src:m.bV+(null===l||void 0===l?void 0:l.img)}),(0,b.jsxs)("div",{className:"ml-2",children:[(0,b.jsx)("div",{className:"title",children:(null===l||void 0===l?void 0:l.firstname)+" "+(null===l||void 0===l?void 0:l.lastname)}),(0,b.jsx)(g.Z,{disabled:!0,allowHalf:!0,value:d||0})]})]})}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:c}),(0,b.jsx)("div",{className:"label",children:t("phone")})]}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:s}),(0,b.jsx)("div",{className:"label",children:t("last.activity")})]}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:v}),(0,b.jsx)("div",{className:"label",children:t("total.orders")})]}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:(0,y.p)(f)}),(0,b.jsxs)("div",{className:"label",children:[" ",t("total.earning")]})]}),(0,b.jsx)(o.Z,{span:1,children:(0,b.jsx)("button",{type:"button",className:"close-btn",onClick:i,children:(0,b.jsx)(p.Z,{})})})]})},N=l(45705),k=l(97890),C=l(39548);function w(e){var n,l,i,t,d=e.data,r=(0,u.$)().t,o=(0,k.s0)(),v=(0,c.I0)(),f=(0,c.v9)((function(e){return e.menu}),c.wU).menuItems,x=(null===d||void 0===d?void 0:d.deliveryman_orders)||[],j=(0,_.Z)(null===d||void 0===d||null===(n=d.delivery_man_setting)||void 0===n?void 0:n.updated_at);return(0,b.jsxs)(s.Z,{className:"user-card",onClick:function(){return function(e){!!f.find((function(e){return"delivery_map_orders"===e.id}))&&v((0,h.ph)({id:"delivery_map_orders",nextUrl:"deliveries/map"})),v((0,h.bL)({url:"deliveries/map/".concat(e.id),id:"delivery_map_orders",name:r("delivery.orders"),data:{list:x,item:x[0],deliveryman:d}})),o("/deliveries/map/".concat(e.id))}(d)},children:[(0,b.jsxs)(N.Z,{children:[(0,b.jsx)(a.C,{src:m.bV+(null===d||void 0===d?void 0:d.img),icon:(0,b.jsx)(C.Z,{}),style:{color:"#1a3353"}}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"title",children:[null===d||void 0===d?void 0:d.firstname," ",null===d||void 0===d||null===(l=d.lastname)||void 0===l?void 0:l.charAt(0),"."]}),(0,b.jsx)("div",{className:"last-seen ".concat(null!==d&&void 0!==d&&null!==(i=d.delivery_man_setting)&&void 0!==i&&i.online?"online":"text-muted"),children:null!==d&&void 0!==d&&null!==(t=d.delivery_man_setting)&&void 0!==t&&t.online?r("online"):j})]})]}),(0,b.jsx)("div",{className:"mt-2"}),(0,b.jsxs)(N.Z,{children:[(0,b.jsxs)("div",{children:[r("active_orders"),":"]}),(0,b.jsx)("div",{children:x.length})]})]})}var M=l(81449),U=[{label:"All",value:"all",key:1},{label:"Online",value:"1",key:2},{label:"Offline",value:"0",key:3}],$=function(e){return(0,b.jsx)(a.C,{src:e.url,icon:(0,b.jsx)(C.Z,{}),style:{color:"#1a3353"},onClick:e.onClick})};function L(){var e=(0,u.$)().t,n=(0,c.v9)((function(e){return e.menu}),c.wU).activeMenu,l=(0,c.I0)(),a=(0,t.useState)(void 0),p=(0,i.Z)(a,2),g=p[0],y=p[1],_=(0,t.useState)(null),N=(0,i.Z)(_,2),k=N[0],C=N[1],L=(0,c.v9)((function(e){return e.globalSettings}),c.wU).settings,A=(0,v.Z)(L),I=(0,c.v9)((function(e){return e.deliveries}),c.wU),S=I.delivery,V=I.loading,G={page:1,perPage:100,online:g,"statuses[0]":"new","statuses[1]":"accepted","statuses[2]":"ready","statuses[3]":"on_a_way"};(0,j.Z)((function(){"all"===g&&delete G.online,l((0,f.W)(G))}),[g]);return(0,t.useEffect)((function(){null!==n&&void 0!==n&&n.refetch&&("all"===g&&delete G.online,l((0,f.W)(G)),l((0,h.A_)(n)))}),[null===n||void 0===n?void 0:n.refetch]),(0,b.jsx)(s.Z,{title:e("deliveries"),className:"delivery",extra:(0,b.jsx)(d.Z,{options:U,defaultValue:"all",loading:V,onChange:function(e){return y(e)},style:{width:"200px"}}),children:V?(0,b.jsx)(x.Z,{}):(0,b.jsxs)(r.Z,{gutter:8,children:[(0,b.jsx)(o.Z,{span:18,children:(0,b.jsxs)("div",{className:"map-container",style:{height:"73vh",width:"100%"},children:[!!k&&(0,b.jsx)(s.Z,{className:"map-user-card",children:(0,b.jsx)(Z,{data:k,handleClose:function(){C(null)}})}),(0,b.jsx)(M.Z,{center:A,handleLoadMap:function(e,n){for(var l=S.map((function(e){var n,l;return{lat:Number((null===e||void 0===e||null===(n=e.delivery_man_setting)||void 0===n?void 0:n.location.latitude)||"0"),lng:Number((null===e||void 0===e||null===(l=e.delivery_man_setting)||void 0===l?void 0:l.location.longitude)||"0")}})),i=new n.LatLngBounds,t=0;t<l.length;t++)i.extend(l[t]);e.fitBounds(i)},children:S.map((function(e){var n,l,i,t;return(0,b.jsx)($,{lat:Number((null===e||void 0===e||null===(n=e.delivery_man_setting)||void 0===n||null===(l=n.location)||void 0===l?void 0:l.latitude)||"0"),lng:Number((null===e||void 0===e||null===(i=e.delivery_man_setting)||void 0===i||null===(t=i.location)||void 0===t?void 0:t.longitude)||"0"),url:m.bV+e.img,onClick:function(){C(e)}},e.id)}))})]})}),(0,b.jsx)(o.Z,{span:6,children:(0,b.jsx)("div",{className:"order-list",style:{height:"75vh"},children:S.map((function(e,n){return(0,b.jsx)(w,{data:e},e.id+n)}))})})]})})}}}]);