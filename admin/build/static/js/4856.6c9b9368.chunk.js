"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4856],{54856:function(e,n,t){t.r(n),t.d(n,{default:function(){return W}});var a=t(4942),i=t(93433),l=t(1413),o=t(29439),u=t(47313),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"},r=t(17469),s=function(e,n){return u.createElement(r.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:n,icon:d}))};s.displayName="LoginOutlined";var c=u.forwardRef(s),f=t(47548),v=t(31741),m=t(12019),h=t(66407),Z=t(47515),x=t(55768),g=t(73591),p=t(45705),j=t(59491),C=t(77181),w=t(78508),y=t(97890),b=t(2717),S=t(55127),k=t(84304),_=t(13945),I=t(90954),M=t(80314),z=t(91405),A=t(24511),L=t(10310),N=t(41481),P=t(53233),E=t(55940),U=t(74580),K=t(23560),O=t(45321),R=t(69658),D=t(79492),T=t(49986),V=t(51418),B=t(84232),F=t(99638),H=t(73339),$=t(4014),q=t(46417),G=g.Z.TabPane,J="seller_login",Q="delete";function W(){var e,n,t,d,r,s,W=(0,A.$)().t,X=(0,b.I0)(),Y=(0,y.s0)(),ee=(0,u.useState)(null),ne=(0,o.Z)(ee,2),te=ne[0],ae=ne[1],ie=(0,u.useState)(null),le=(0,o.Z)(ie,2),oe=le[0],ue=le[1],de=(0,u.useContext)(U._).setIsModalVisible,re=(0,u.useState)(!1),se=(0,o.Z)(re,2),ce=se[0],fe=se[1],ve=(0,u.useState)(!1),me=(0,o.Z)(ve,2),he=me[0],Ze=me[1],xe=(0,b.v9)((function(e){return e.menu}),b.wU).activeMenu,ge=(0,b.v9)((function(e){return e.user}),b.wU),pe=ge.users,je=ge.loading,Ce=ge.meta,we=ge.params,ye=(0,u.useState)(null),be=(0,o.Z)(ye,2),Se=be[0],ke=be[1],_e=(0,u.useState)(null),Ie=(0,o.Z)(_e,2),Me=Ie[0],ze=Ie[1],Ae=(0,u.useState)([]),Le=(0,o.Z)(Ae,2),Ne=Le[0],Pe=Le[1],Ee=(0,u.useState)("admin"),Ue=(0,o.Z)(Ee,2),Ke=Ue[0],Oe=Ue[1],Re=(0,u.useState)(Q),De=(0,o.Z)(Re,2),Te=De[0],Ve=De[1],Be=(null===(e=xe.data)||void 0===e?void 0:e.role)||Ke,Fe=(0,b.v9)((function(e){return e.auth}),b.wU).user,He=(0,D.Z)(),$e=He.isDemo,qe=He.demoDeliveryman,Ge=He.demoSeller,Je=He.demoAdmin,Qe=He.demoModerator,We=He.demoMeneger,Xe=xe.data,Ye={role:Be},en=(0,l.Z)((0,l.Z)({sort:null===Xe||void 0===Xe?void 0:Xe.sort,column:null===Xe||void 0===Xe?void 0:Xe.column},Ye),{},{perPage:null===Xe||void 0===Xe?void 0:Xe.perPage,page:null===Xe||void 0===Xe?void 0:Xe.page,search:null===Xe||void 0===Xe?void 0:Xe.search}),nn=(0,u.useState)([{title:W("id"),dataIndex:"id",sorter:!0,is_show:!0},{title:W("firstname"),dataIndex:"firstname",is_show:!0},{title:W("lastname"),dataIndex:"lastname",is_show:!0},{title:W("email"),dataIndex:"email",is_show:!0,render:function(e){return(0,$.Z)(e)}},{title:W("role"),dataIndex:"role",is_show:!0},{title:W("options"),dataIndex:"options",is_show:!0,render:function(e,n){return(0,q.jsxs)(p.Z,{children:[(0,q.jsx)(j.Z,{icon:(0,q.jsx)(f.Z,{}),onClick:function(){return ke(n.uuid)}}),"manager"===Fe.role&&"admin"===n.role?void 0:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(j.Z,{icon:(0,q.jsx)(v.Z,{}),onClick:function(){return function(e){X((0,I.bL)({url:"/users/user/".concat(e.uuid),id:"user_info",name:W("user.info")})),Y("/users/user/".concat(e.uuid),{state:{user_id:e.id}})}(n)}}),(0,q.jsx)(j.Z,{type:"primary",icon:(0,q.jsx)(m.Z,{}),onClick:function(){return function(e){X((0,I.bL)({url:"user/".concat(e.uuid),id:"user_edit",name:"User edit"})),Y("/user/".concat(e.uuid))}(n)},disabled:$e&&(null===n||void 0===n?void 0:n.id)==qe||$e&&(null===n||void 0===n?void 0:n.id)==Qe||$e&&(null===n||void 0===n?void 0:n.id)==We||$e&&(null===n||void 0===n?void 0:n.id)==Ge||$e&&(null===n||void 0===n?void 0:n.id)==Je})]}),"admin"!==(null===n||void 0===n?void 0:n.role)&&(0,q.jsxs)(p.Z,{children:[(0,q.jsx)(j.Z,{icon:(0,q.jsx)(h.Z,{}),onClick:function(){return function(e){X((0,I.bL)({url:"user-clone/".concat(e.uuid),id:"user-clone",name:"user.clone"})),Y("/user-clone/".concat(e.uuid))}(n)}}),(0,q.jsx)(E.Z,{icon:(0,q.jsx)(Z.Z,{}),onClick:function(){Ve(Q),ae([n.id]),de(!0),ue(!0)}})]}),"seller"===(null===n||void 0===n?void 0:n.role)&&(0,q.jsx)(j.Z,{icon:(0,q.jsx)(c,{}),onClick:function(){Ve(J),de(!0),ae(n.uuid)}})]})}}]),tn=(0,o.Z)(nn,2),an=tn[0],ln=tn[1];(0,u.useEffect)((function(){xe.refetch&&(0,b.dC)((function(){X((0,k.uh)(en)),X((0,I.A_)(xe))}))}),[xe.refetch]),(0,M.Z)((function(){X((0,k.uh)(en))}),[xe.data]),(0,u.useEffect)((function(){fe(!0),T.Z.getRoles().then((function(e){var n=e.data;Pe(null===n||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.name})))})).finally((function(){return fe(!1)}))}),[]);var on=function(e){var n=xe.data;X((0,I.nc)({activeMenu:xe,data:(0,l.Z)((0,l.Z)({},n),e)}))},un={selectedRowKeys:te,onChange:function(e){ae(e)}};return(0,q.jsxs)(C.Z,{title:W("users"),extra:(0,q.jsxs)(p.Z,{wrap:!0,children:[(0,q.jsx)(E.Z,{size:"",onClick:function(){null===te||0===te.length?K.Am.warning(W("select.the.product")):(Ve(Q),de(!0),ue(!1))},children:W("delete.selected")}),(0,q.jsx)(P.Z,{columns:an,setColumns:ln})]}),loading:ce,children:[(0,q.jsx)("div",{className:"d-flex justify-content-between mb-3",children:(0,q.jsx)(N.Z,{placeholder:W("search"),className:"w-25",handleChange:function(e){on({search:e})},defaultValue:null===(n=xe.data)||void 0===n?void 0:n.search,resetSearch:!(null!==(t=xe.data)&&void 0!==t&&t.search)})}),(0,q.jsx)(g.Z,{scroll:{x:!0},activeKey:Be,onChange:function(e){on({role:e,page:1}),Oe(e)},type:"card",children:Ne.map((function(e){return(0,q.jsx)(G,{tab:W(e)},e)}))}),"admin"!==Be&&"seller"!==Be?(0,q.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,q.jsx)(j.Z,{type:"primary",icon:(0,q.jsx)(x.Z,{}),onClick:function(){return e=Be,X((0,I.bL)({id:"user-add-role",url:"user/add/".concat(e),name:W("add.".concat(e))})),void Y("/user/add/".concat(e));var e},className:"mr-2",children:W("add.".concat(Be))})}):null,(0,q.jsx)(w.Z,{scroll:{x:!0},rowSelection:un,columns:null===an||void 0===an?void 0:an.filter((function(e){return e.is_show})),dataSource:pe,loading:je,pagination:{pageSize:we.perPage,page:(null===(d=xe.data)||void 0===d?void 0:d.page)||1,total:Ce.total,defaultCurrent:null===(r=xe.data)||void 0===r?void 0:r.page,current:null===(s=xe.data)||void 0===s?void 0:s.page},rowKey:function(e){return e.id},onChange:function(e,n,t){var a=e.pageSize,i=e.current,o=t.field,u=t.order,d=(0,_.Z)(u);X((0,I.nc)({activeMenu:xe,data:(0,l.Z)((0,l.Z)({},xe.data),{},{perPage:a,page:i,column:o,sort:d})}))}}),(0,q.jsx)(R.Z,{click:Te===J?function(){Ze(!0),T.Z.loginAs(te).then((function(e){var n,t,a,i,l,o={fullName:e.data.user.firstname+" "+e.data.user.lastname,role:"seller",urls:S.a.seller,img:e.data.user.img,token:e.data.access_token,email:e.data.user.email,id:e.data.user.id,shop_id:null===(n=e.data.user)||void 0===n||null===(t=n.shop)||void 0===t?void 0:t.id,walledId:null===(a=e.data)||void 0===a||null===(i=a.user)||void 0===i||null===(l=i.wallet)||void 0===l?void 0:l.id};(0,b.dC)((function(){X((0,I.Eb)()),X((0,B.eb)(null)),X((0,V.M)(o)),X((0,F._h)())})),localStorage.setItem("token",e.data.access_token),X((0,H.S)())})),de(!1),Y("/dashboard")}:function(){Ze(!0);var e=(0,l.Z)({},Object.assign.apply(Object,[{}].concat((0,i.Z)(te.map((function(e,n){return(0,a.Z)({},"ids[".concat(n,"]"),e)}))))));O.Z.delete(e).then((function(){K.Am.success(W("successfully.deleted")),X((0,k.uh)(en)),de(!1),ue([])})).finally((function(){ae(null),Ze(!1)}))},text:W(Te===J?"do.you.want.login.as.this.seller":oe?"delete":"all.delete"),loading:he,setText:ae}),Se&&(0,q.jsx)(z.Z,{uuid:Se,handleCancel:function(){return ke(null)}}),Me&&(0,q.jsx)(L.Z,{data:Me,handleCancel:function(){return ze(null)}})]})}}}]);