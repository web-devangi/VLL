"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8849],{52008:(e,t,l)=>{l.d(t,{Z:()=>a});l(47313);const a=l.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},84017:(e,t,l)=>{function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const a=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===l?"".concat(a," ").concat(t):"".concat(t," ").concat(a)}l.d(t,{Z:()=>a})},18849:(e,t,l)=>{l.r(t),l.d(t,{default:()=>U});var a=l(66204),n=l(77181),i=l(59491),r=l(56140),s=l(78508),d=l(84017),c=l(70816),o=l.n(c),u=l(47313),p=l(24511),h=l(2717),v=l(90954),m=l(49986),y=l(10976),x=l(9274),j=l(68197),f=l(59624),Z=l(16124),g=l(42111),b=l(51282),w=l(23560),k=l(52008),S=l(26672),C=l(92709),I=l(57864),z=l(20637),_=l(49644),F=l(46417);function N(e){var t,l;let{open:a,handleCancel:r,refetch:s}=e;const{t:d}=(0,p.$)(),c=(0,h.I0)(),{payments:o,loading:v}=(0,h.v9)((e=>e.payment),h.wU),{myShop:m}=(0,h.v9)((e=>e.myShop),h.wU),{defaultCurrency:N}=(0,h.v9)((e=>e.currency),h.wU),U=(0,h.v9)((e=>e.auth.user.walledId)),[A,Y]=(0,u.useState)(!1),[$,D]=(0,u.useState)({}),[M,q]=(0,u.useState)(null),[E,T]=(0,u.useState)(null),{payment_type:B}=(0,h.v9)((e=>e.globalSettings.settings),h.wU),[K]=y.Z.useForm();(0,u.useEffect)((()=>{o.length||c((0,g.dA)()),async function(){await z.Z.getById(m.id).then((e=>{let{data:t}=e;return q(t.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){return z.Z.getAll().then((e=>{let{data:t}=e;return T(t.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}().then()}),[]);const G=e=>{switch(e){case"wallet":return(0,F.jsx)(I.dk2,{size:80});case"paypal":return(0,F.jsx)(S.kD0,{size:80});case"stripe":return(0,F.jsx)(C.K6C,{size:80});case"razorpay":return(0,F.jsx)(C.r98,{size:80});case"paystack":return(0,F.jsx)("img",{src:k.Z,alt:"img",width:"80",height:"80"})}};return(0,F.jsx)(x.Z,{visible:a,title:d("wallet.topup"),onCancel:r,footer:[(0,F.jsx)(i.Z,{type:"primary",disabled:v,htmlType:"submit",form:"payment",loading:A,children:d("save")},"save-btn"),(0,F.jsx)(i.Z,{type:"default",onClick:r,children:d("cancel")},"cancel-btn")],children:v?(0,F.jsx)(b.Z,{}):(0,F.jsx)(y.Z,{layout:"vertical",id:"payment",onFinish:e=>{if(!$.value)return void w.Am.warning(d("please.select.payment.type"));const t={wallet_id:U,total_price:e.price,currency_id:null===N||void 0===N?void 0:N.id};Y(!0),_.Z.topUp($.label,t).then((e=>{let{data:t}=e;K.resetFields(),D({}),r(),s(),window.open(t.data.url)})).finally((()=>Y(!1)))},children:(0,F.jsxs)(j.Z,{gutter:12,children:[(0,F.jsx)(f.Z,{span:24,children:(0,F.jsx)(y.Z.Item,{name:"price",label:d("price"),rules:[{required:!0,message:d("required")},{type:"number",min:0,message:d("should.be.greater.than.0")}],children:(0,F.jsx)(Z.Z,{className:"w-100"})})}),null===(t="admin"===B?E:M)||void 0===t||null===(l=t.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label)&&"wallet"!==(null===e||void 0===e?void 0:e.label))))||void 0===l?void 0:l.map(((e,t)=>(0,F.jsx)(f.Z,{span:8,children:(0,F.jsxs)(n.Z,{className:"payment-card ".concat((null===$||void 0===$?void 0:$.label)===e.label?"active":""),onClick:()=>{D(e)},children:[(0,F.jsx)("div",{className:"payment-icon",children:G(null===e||void 0===e?void 0:e.label)}),(0,F.jsx)("div",{className:"font-weight-bold mt-2",children:d(null===e||void 0===e?void 0:e.label)})]})},t)))]})})})}const U=()=>{var e;const[t,l]=(0,u.useState)(null),{t:c}=(0,p.$)(),y=(0,h.I0)(),[x,j]=(0,u.useState)(!1),[f,Z]=(0,u.useState)(!1),{activeMenu:g}=(0,h.v9)((e=>e.menu)),b=(0,u.useCallback)((()=>{j(!0),m.Z.profileShow().then((e=>{l(e.data)})).finally((()=>{j(!1)}))}),[]);(0,u.useEffect)((()=>{null!==g&&void 0!==g&&g.refetch&&b(),y((0,v.A_)(g))}),[null===g||void 0===g?void 0:g.refetch]);const w=[{title:c("created.at"),dataIndex:"created_at",render:e=>o()(e).format("YYYY-MM-DD hh:mm")},{title:c("status"),dataIndex:"status",render:e=>(0,F.jsx)("div",{children:"paid"===e?(0,F.jsx)(a.Z,{color:"cyan",children:e}):(0,F.jsx)(a.Z,{color:"blue",children:e})})},{title:c("type"),dataIndex:"type",render:e=>"topup"===e?(0,F.jsx)(a.Z,{color:"cyan",children:e}):(0,F.jsx)(a.Z,{color:"error",children:e})},{title:c("note"),dataIndex:"note"}];return(0,F.jsxs)(n.Z,{title:c("user.wallet"),extra:x?null:(0,F.jsx)(i.Z,{onClick:()=>Z(!0),children:c("top.up")}),children:[null!==t&&void 0!==t&&t.wallet?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(r.Z.Title,{children:(0,d.Z)(null===t||void 0===t?void 0:t.wallet.price)}),(0,F.jsx)(s.Z,{loading:x,dataSource:null===t||void 0===t||null===(e=t.wallet)||void 0===e?void 0:e.histories,columns:w})]}):(0,F.jsx)(s.Z,{dataSource:[],columns:w,loading:x}),(0,F.jsx)(N,{refetch:b,open:f,handleCancel:()=>Z(!1)})]})}}}]);