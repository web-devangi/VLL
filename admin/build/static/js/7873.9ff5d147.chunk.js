(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7873],{55940:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var i=t(1413),l=t(45987),a=(t(47313),t(59491)),r=t(47515),o=t(23560),s=t(24511),d=t(79492),c=t(46417),u=["size","onClick","type"];function v(e){var n=e.size,t=void 0===n?"":n,v=e.onClick,f=e.type,h=void 0===f?"default":f,m=(0,l.Z)(e,u),Z=(0,s.$)().t,p=(0,d.Z)().isDemo;return(0,c.jsx)(a.Z,(0,i.Z)({size:t,icon:(0,c.jsx)(r.Z,{}),onClick:function(e){p?o.Am.warning(Z("cannot.work.demo")):v(e)},type:h},m))}},53233:function(e,n,t){"use strict";var i=t(1413),l=t(29439),a=t(47313),r=t(56140),o=t(67251),s=t(45705),d=t(86345),c=t(78267),u=t(37388),v=t(59491),f=t(99587),h=t(24511),m=t(46417),Z=r.Z.Text;n.Z=function(e){var n=e.columns,t=void 0===n?[]:n,r=e.setColumns,p=e.style,x=e.size,j=void 0===x?"":x,g=e.iconOnly,y=(0,h.$)().t,b=(0,a.useState)(!1),C=(0,l.Z)(b,2),w=C[0],_=C[1],k=(0,m.jsx)(o.Z,{children:null===t||void 0===t?void 0:t.map((function(e,n){return(0,m.jsx)(o.Z.Item,{children:(0,m.jsxs)(s.Z,{className:"d-flex justify-content-between",children:[(0,m.jsx)(Z,{children:e.title}),(0,m.jsx)(d.Z,{defaultChecked:!0,onClick:function(){return function(e){var n=null===t||void 0===t?void 0:t.map((function(n){return n.dataIndex===e.dataIndex&&(n.is_show=!(null!==n&&void 0!==n&&n.is_show)),n}));r(n)}(e)},disabled:1===n})]})},e+n)}))});return(0,m.jsx)(c.Z,{overlay:k,trigger:["click"],onVisibleChange:function(e){_(e)},visible:w,children:(0,m.jsx)(u.Z,{title:y("change.columns"),children:(0,m.jsx)(v.Z,{style:(0,i.Z)({},p),size:j,icon:(0,m.jsx)(f.Z,{}),children:g?null:y("Columns")})})})}},41481:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var i=t(1413),l=t(29439),a=t(45987),r=t(47313),o=t(66672),s=t(16031),d=t(40765),c=t(46417),u=["handleChange","defaultValue","resetSearch"];function v(e){var n=e.handleChange,t=e.defaultValue,v=e.resetSearch,f=(0,a.Z)(e,u),h=(0,r.useState)(t),m=(0,l.Z)(h,2),Z=m[0],p=m[1],x=(0,r.useMemo)((function(){return(0,s.debounce)((function(e){n(e)}),800)}),[]);return(0,r.useEffect)((function(){p(t)}),[v]),(0,c.jsx)(o.Z,(0,i.Z)({value:Z,onChange:function(e){p(e.target.value),x(e.target.value)},prefix:(0,c.jsx)(d.Z,{})},f))}},89281:function(e,n,t){"use strict";t.d(n,{h:function(){return f}});var i=t(1413),l=t(29439),a=t(45987),r=t(47313),o=t(12279),s=t.n(o),d=t(74294),c=t(72652),u=t(46417),v=["fetchOptions","debounceTimeout","onClear","refetchOptions"],f=function(e){var n=e.fetchOptions,t=e.debounceTimeout,o=void 0===t?400:t,f=e.onClear,h=e.refetchOptions,m=void 0!==h&&h,Z=(0,a.Z)(e,v),p=(0,r.useState)(!1),x=(0,l.Z)(p,2),j=x[0],g=x[1],y=(0,r.useState)([]),b=(0,l.Z)(y,2),C=b[0],w=b[1],_=(0,r.useMemo)((function(){return s()((function(e){w([]),g(!0),n(e).then((function(e){w(e),g(!1)}))}),o)}),[n,o]);return(0,u.jsx)(d.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:_,onClear:function(){_(""),f&&f()},notFoundContent:j?(0,u.jsx)(c.Z,{size:"small"}):"no results"},Z),{},{options:C,onFocus:function(){C.length&&!m||_("")}}))}},13945:function(e,n,t){"use strict";function i(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(n,{Z:function(){return i}})},17649:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});t(97421);function i(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};var n=e.location.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}},84017:function(e,n,t){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after",i=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(i," ").concat(n):"".concat(n," ").concat(i)}t.d(n,{Z:function(){return i}})},33834:function(e,n,t){"use strict";t.d(n,{K:function(){return s}});var i=t(4942),l=t(1413),a=t(97890),r=t(74776),o=t.n(r),s=function(){var e=(0,a.s0)(),n=(0,a.TH)(),t=o().parse(n.search,{ignoreQueryPrefix:!0});return{values:t,set:function(n,a){return e({search:o().stringify((0,l.Z)((0,l.Z)({},t),{},(0,i.Z)({},n,a)))})},reset:function(n){var i=(0,l.Z)({},t);i[n]&&delete i[n],e({search:o().stringify((0,l.Z)({},i))})},clear:function(){return e({search:o().stringify({})})},merge:function(n){return e({search:o().stringify((0,l.Z)((0,l.Z)({},t),n))})}}}},94576:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Me}});var i=t(15861),l=t(4942),a=t(1413),r=t(93433),o=t(29439),s=t(87757),d=t.n(s),c=t(47313),u=t(73591),v=t(99096),f=t(66204),h=t(59491),m=t(45705),Z=t(77181),p=t(37388),x=t(78508),j=t(97890),g=t(12019),y=t(31741),b=t(47515),C=t(55768),w=t(15386),_=t(2717),k=t(90954),S=t(24511),I=t(80314),H=t(22054),M=t(70250),z=t(13945),V=t(41481),Y=t(73270),D=t(89281),P=t(49986),N=t(53233),O=t(23560),F=t(55940),B=t(90486),E=t(74580),L=t(69658),U=t(70816),$=t.n(U),T=t(97421),A=t(5958),R=t(3925),q=t(33834),K=t(10976),Q=t(9274),G=t(68197),W=t(59624),X=t(74294),J=t(46417);function ee(e){var n=e.orderDetails,t=e.handleCancel,i=e.status,l=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,r=K.Z.useForm(),s=(0,o.Z)(r,1)[0],d=(0,_.I0)(),u=(0,S.$)().t,v=(0,c.useState)(!1),f=(0,o.Z)(v,2),m=f[0],Z=f[1],p=(0,c.useState)(i),x=(0,o.Z)(p,2),j=x[0],g=x[1];(0,c.useEffect)((function(){var e=i.findIndex((function(e){return e.name===n.status})),t=[i[e],i[e+1],{name:"canceled",id:8,active:!0}];e<0&&(t=[i[e+1],"canceled"]),g(t)}),[n]);return(0,J.jsx)(Q.Z,{visible:!!n,title:n.title,onCancel:t,footer:[(0,J.jsx)(h.Z,{type:"primary",onClick:function(){return s.submit()},loading:m,children:u("save")},"save-form"),(0,J.jsx)(h.Z,{type:"default",onClick:t,children:u("cancel")},"cansel-modal")],children:(0,J.jsx)(K.Z,{form:s,layout:"vertical",onFinish:function(e){Z(!0);var i=(0,a.Z)({},e);B.Z.updateStatus(n.id,i).then((function(){t(),d((0,k.xo)(l))})).finally((function(){return Z(!1)}))},initialValues:{status:n.status},children:(0,J.jsx)(G.Z,{gutter:12,children:(0,J.jsx)(W.Z,{span:24,children:(0,J.jsx)(K.Z.Item,{label:u("status"),name:"status",rules:[{required:!0,message:u("required")}],children:(0,J.jsx)(X.Z,{children:null===j||void 0===j?void 0:j.map((function(e){return(0,J.jsx)(X.Z.Option,{value:null===e||void 0===e?void 0:e.name,children:u(null===e||void 0===e?void 0:e.name)},null===e||void 0===e?void 0:e.name)}))})})})})})})}var ne=t(83999),te=t(84697),ie=t(51282),le=t(58821),ae=t(18478),re=t(84618),oe=t(17649),se=t(66461),de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},ce=t(17469),ue=function(e,n){return c.createElement(ce.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:n,icon:de}))};ue.displayName="FileDoneOutlined";var ve=c.forwardRef(ue),fe=t(3394),he=t(57864);function me(e){return e?$()(e).format("DD-MM-YYYY, HH:mm"):""}var Ze=ne.Z.Step,pe=function(){return(0,J.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,J.jsx)("img",{src:ae,width:"50",alt:"Pin"})})},xe=function(){return(0,J.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,J.jsx)("img",{src:re,width:"50",alt:"Pin"})})},je=["blue","red","gold","volcano","cyan","lime"],ge=function(e){var n,t,i,l,a,r,s=e.id,d=e.handleCancel,u=(0,S.$)().t,v=(0,c.useState)(null),m=(0,o.Z)(v,2),p=m[0],x=m[1],j=(0,c.useState)(null),g=(0,o.Z)(j,2),y=g[0],b=g[1],C=(0,c.useState)(null),w=(0,o.Z)(C,2),k=w[0],I=w[1],H=(0,_.v9)((function(e){return e.globalSettings}),_.wU).settings,M=(0,oe.Z)(H),z=(0,c.useState)(0),V=(0,o.Z)(z,2),Y=V[0],D=V[1],P=(0,c.useState)((0,oe.Z)(H)),N=(0,o.Z)(P,2),O=N[0],F=N[1],E=(0,c.useState)((0,oe.Z)(H)),L=(0,o.Z)(E,2),U=L[0],$=L[1],A=(0,c.useState)([{id:0,name:"new",icon:(0,J.jsx)(se.Z,{})},{id:1,name:"accepted",icon:(0,J.jsx)(ve,{})},{id:3,name:"ready",icon:(0,J.jsx)(le.IQF,{})},{id:4,name:"on_a_way",icon:(0,J.jsx)(le.qaI,{})},{id:5,name:"delivered",icon:(0,J.jsx)(fe.kme,{})}]),R=(0,o.Z)(A,2),q=R[0],K=R[1];var X=(0,_.v9)((function(e){return e.globalSettings.settings}),_.wU).google_map_key;(0,c.useEffect)((function(){x(!0),B.Z.getById(s).then((function(e){var n,t=e.data;K("canceled"===t.status?[{id:1,name:"new",icon:(0,J.jsx)(se.Z,{})},{id:5,name:"canceled",icon:(0,J.jsx)(he.SV5,{})}]:q),D("canceled"===t.status?1:null===(n=q.find((function(e){return e.name===t.status})))||void 0===n?void 0:n.id),I("canceled"===t.status?"error":"success"),b(t),$({lat:t.address_from.latitude,lng:t.address_from.longitude}),F({lat:t.address_to.latitude,lng:t.address_to.longitude})})).finally((function(){x(!1)}))}),[]);return(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(Q.Z,{visible:!!s,title:u("show.locations"),onCancel:function(){return d()},style:{minWidth:"80vw"},footer:[(0,J.jsx)(h.Z,{type:"default",onClick:d,children:u("cancel")},"cancelBtn")],children:p?(0,J.jsx)(ie.Z,{}):(0,J.jsxs)(Z.Z,{children:[(0,J.jsx)(ne.Z,{current:Y,status:k,className:"mb-5",children:null===q||void 0===q?void 0:q.map((function(e,n){return(0,J.jsx)(Ze,{title:u(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+n)}))}),(0,J.jsxs)(G.Z,{gutter:12,children:[(0,J.jsxs)(W.Z,{span:12,children:[(0,J.jsxs)("h3",{children:[u("order.id")," #",null===y||void 0===y?void 0:y.id]}),(0,J.jsxs)("p",{children:[(0,J.jsx)(le.D73,{})," ",me(null===y||void 0===y?void 0:y.created_at)]}),(0,J.jsxs)("p",{children:[u("delivery.time"),": ",me(null===y||void 0===y?void 0:y.delivery_date)]}),(0,J.jsxs)("span",{children:[(0,J.jsx)("strong",{children:null===y||void 0===y||null===(n=y.shop)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title})," ",null===y||void 0===y||null===(i=y.details)||void 0===i?void 0:i.map((function(e,n){var t;return(0,J.jsx)(f.Z,{color:je[n],children:null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.product.translation.title})}))]})]}),(0,J.jsxs)(W.Z,{span:12,children:[(0,J.jsxs)("p",{children:[u("status"),": ","new"===(null===y||void 0===y?void 0:y.status)?(0,J.jsx)(f.Z,{color:"blue",children:u(null===y||void 0===y?void 0:y.status)}):"canceled"===(null===y||void 0===y?void 0:y.status)?(0,J.jsx)(f.Z,{color:"error",children:u(null===y||void 0===y?void 0:y.status)}):(0,J.jsx)(f.Z,{color:"cyan",children:u(null===y||void 0===y?void 0:y.status)})]}),(0,J.jsxs)("p",{children:[u("order.type"),": ",(0,J.jsx)("strong",{children:u("parcel")})]}),(0,J.jsxs)("p",{children:[u("payment.method"),": ",(0,J.jsx)("strong",{children:null===y||void 0===y||null===(l=y.transaction)||void 0===l||null===(a=l.payment_system)||void 0===a?void 0:a.tag})]}),(0,J.jsxs)("p",{children:[u("payment.status"),": ",(0,J.jsx)("strong",{children:null===y||void 0===y||null===(r=y.transaction)||void 0===r?void 0:r.status})]})]}),(0,J.jsxs)(W.Z,{span:24,className:"mt-5",children:[(0,J.jsx)("h4",{children:u("map")}),(0,J.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,J.jsxs)(te.ZP,{bootstrapURLKeys:{key:T.kr||X},defaultZoom:15,center:M,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:function(e){for(var n=e.map,t=e.maps,i=[O,U].map((function(e){return{lat:Number(e.lat||"0"),lng:Number(e.lng||"0")}})),l=new t.LatLngBounds,a=0;a<i.length;a++)l.extend(i[a]);n.fitBounds(l)},children:[(0,J.jsx)(xe,{lat:null===O||void 0===O?void 0:O.lat,lng:null===O||void 0===O?void 0:O.lng}),(0,J.jsx)(pe,{lat:null===U||void 0===U?void 0:U.lat,lng:null===U||void 0===U?void 0:U.lng})]})})]})]})]})})})},ye=t(83371),be=t(84017),Ce=["paid","canceled"];function we(e){var n=e.data,t=e.handleCancel,i=e.fetchParcelDetails,l=(e.orderId,K.Z.useForm()),a=(0,o.Z)(l,1)[0],r=(0,S.$)().t,s=(0,c.useState)(!1),d=(0,o.Z)(s,2),u=d[0],v=d[1];return(0,J.jsx)(Q.Z,{visible:!!n,title:r("transaction.status"),closable:!1,footer:[(0,J.jsx)(h.Z,{type:"primary",onClick:function(){return a.submit()},loading:u,children:r("save")},"save-form"),(0,J.jsx)(h.Z,{type:"default",onClick:t,children:r("cancel")},"cansel-modal")],children:(0,J.jsx)(K.Z,{form:a,layout:"vertical",onFinish:function(e){v(!0),B.Z.transactionStatus(null===n||void 0===n?void 0:n.id,e).then((function(){t(),i()})).catch((function(e){return O.Am.error(e.message)})).finally((function(){return v(!1)}))},initialValues:{status:n.transaction.status},children:(0,J.jsx)(G.Z,{gutter:12,children:(0,J.jsx)(W.Z,{span:24,children:(0,J.jsx)(K.Z.Item,{label:r("status"),name:"status",rules:[{validator:function(e,n){return"paid"===n||"canceled"===n?Promise.resolve():Promise.reject(new Error(r("required")))}}],children:(0,J.jsx)(X.Z,{children:Ce.map((function(e,n){return(0,J.jsx)(X.Z.Option,{value:e,children:r(e)},n)}))})})})})})})}var _e=function(e){var n,t,i,l,a,r,s,d,u,v,f,m,Z=e.id,p=e.handleCancel,x=(0,S.$)().t,j=(0,c.useState)(null),y=(0,o.Z)(j,2),b=y[0],C=y[1],w=(0,c.useState)(null),_=(0,o.Z)(w,2),k=_[0],I=_[1],H=(0,c.useState)(!1),M=(0,o.Z)(H,2),z=M[0],V=M[1];function Y(){C(!0),B.Z.getById(Z).then((function(e){var n=e.data;I(n)})).finally((function(){C(!1)}))}return(0,c.useEffect)((function(){Y()}),[]),(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(Q.Z,{visible:!!Z,title:"".concat(x("parcel.id")," #").concat(Z),onCancel:function(){return p()},footer:[(0,J.jsx)(h.Z,{type:"default",onClick:p,children:x("cancel")},"cancelBtn")],className:"large-modal",children:b?(0,J.jsx)(ie.Z,{}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(G.Z,{gutter:24,children:[(0,J.jsx)(W.Z,{span:12,children:(0,J.jsxs)(ye.Z,{title:x("sender.details"),bordered:!0,children:[(0,J.jsx)(ye.Z.Item,{label:x("username"),span:3,children:null===k||void 0===k?void 0:k.username_from}),(0,J.jsx)(ye.Z.Item,{label:x("phone"),span:3,children:null===k||void 0===k?void 0:k.phone_from}),(0,J.jsx)(ye.Z.Item,{label:x("address"),span:3,children:null===k||void 0===k||null===(n=k.address_from)||void 0===n?void 0:n.address}),(0,J.jsx)(ye.Z.Item,{label:x("house"),span:3,children:null===k||void 0===k||null===(t=k.address_from)||void 0===t?void 0:t.house}),(0,J.jsx)(ye.Z.Item,{label:x("stage"),span:3,children:null===k||void 0===k||null===(i=k.address_from)||void 0===i?void 0:i.stage}),(0,J.jsx)(ye.Z.Item,{label:x("room"),span:3,children:null===k||void 0===k||null===(l=k.address_from)||void 0===l?void 0:l.room})]})}),(0,J.jsx)(W.Z,{span:12,children:(0,J.jsxs)(ye.Z,{title:x("receiver.details"),bordered:!0,children:[(0,J.jsx)(ye.Z.Item,{label:x("username"),span:3,children:null===k||void 0===k?void 0:k.username_to}),(0,J.jsx)(ye.Z.Item,{label:x("phone"),span:3,children:null===k||void 0===k?void 0:k.phone_to}),(0,J.jsx)(ye.Z.Item,{label:x("address"),span:3,children:null===k||void 0===k||null===(a=k.address_to)||void 0===a?void 0:a.address}),(0,J.jsx)(ye.Z.Item,{label:x("house"),span:3,children:null===k||void 0===k||null===(r=k.address_to)||void 0===r?void 0:r.house}),(0,J.jsx)(ye.Z.Item,{label:x("stage"),span:3,children:null===k||void 0===k||null===(s=k.address_to)||void 0===s?void 0:s.stage}),(0,J.jsx)(ye.Z.Item,{label:x("room"),span:3,children:null===k||void 0===k||null===(d=k.address_to)||void 0===d?void 0:d.room})]})}),(0,J.jsx)(W.Z,{span:24,children:(0,J.jsxs)(ye.Z,{bordered:!0,className:"mt-4",children:[(0,J.jsxs)(ye.Z.Item,{label:x("client"),span:3,children:[null===k||void 0===k||null===(u=k.user)||void 0===u?void 0:u.firstname," ",null===k||void 0===k||null===(v=k.user)||void 0===v?void 0:v.lastname]}),(0,J.jsx)(ye.Z.Item,{label:x("delivery.date.&.time"),span:3,children:null===k||void 0===k?void 0:k.delivery_date}),(0,J.jsx)(ye.Z.Item,{label:x("price"),span:3,children:(0,be.Z)(null===k||void 0===k?void 0:k.total_price)}),(0,J.jsx)(ye.Z.Item,{label:x("created.at"),span:3,children:$()(null===k||void 0===k?void 0:k.created_at).format("YYYY-MM-DD HH:mm")}),(0,J.jsx)(ye.Z.Item,{label:x("note"),span:3,children:null!==(f=null===k||void 0===k?void 0:k.note)&&void 0!==f?f:"---"}),(0,J.jsx)(ye.Z.Item,{label:x("transaction"),span:3,children:(0,J.jsxs)("span",{style:{cursor:"pointer"},onClick:function(){return V(!0)},children:[null===k||void 0===k||null===(m=k.transaction)||void 0===m?void 0:m.status," ",(0,J.jsx)(g.Z,{})]})})]})})]}),z&&(0,J.jsx)(we,{handleCancel:function(){return V(!1)},data:k,fetchParcelDetails:Y})]})})})};function ke(e){var n,t,l,a=e.orderDetails,r=e.handleCancel,s=(0,S.$)().t,u=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,v=K.Z.useForm(),f=(0,o.Z)(v,1)[0],m=(0,_.I0)(),Z=(0,c.useState)(!1),p=(0,o.Z)(Z,2),x=p[0],j=p[1];function g(){return g=(0,i.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n.length?n:void 0,page:1,perPage:10,role:"deliveryman",exist_token:1},e.abrupt("return",P.Z.getAll(t).then((function(e){return e.data.map((function(e){return{label:[e.firstname,e.lastname].join(" "),value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}return(0,J.jsx)(Q.Z,{visible:!!a,onCancel:r,footer:[(0,J.jsx)(h.Z,{type:"primary",onClick:function(){return f.submit()},loading:x,children:s("save")},"saveBtn"),(0,J.jsx)(h.Z,{type:"default",onClick:r,children:s("cancel")},"cancelBtn")],children:(0,J.jsx)(K.Z,{form:f,layout:"vertical",onFinish:function(e){var n={deliveryman_id:e.deliveryman.value};j(!0),B.Z.updateDelivery(a.id,n).then((function(){r(),m((0,k.xo)(u))})).finally((function(){return j(!1)}))},initialValues:{deliveryman:{label:a.deliveryman?(null===a||void 0===a||null===(n=a.deliveryman)||void 0===n?void 0:n.firstname)+" "+(null===a||void 0===a||null===(t=a.deliveryman)||void 0===t?void 0:t.lastname):null,value:a.deliveryman?null===a||void 0===a||null===(l=a.deliveryman)||void 0===l?void 0:l.id:null}},children:(0,J.jsx)(G.Z,{gutter:12,children:(0,J.jsx)(W.Z,{span:24,children:(0,J.jsx)(K.Z.Item,{label:s("deliveryman"),name:"deliveryman",rules:[{required:!0,message:s("required")}],children:(0,J.jsx)(D.h,{className:"w-100",debounceTimeout:500,placeholder:s("select.shop"),fetchOptions:function(e){return g.apply(this,arguments)},allowClear:!0})})})})})})}var Se=t(40197),Ie=u.Z.TabPane,He=v.Z.RangePicker;function Me(){var e,n,t,s,v,U,K,Q,G=(0,j.UO)().type,W=(0,_.I0)(),X=(0,j.s0)(),ne=(0,S.$)().t,te=(0,_.v9)((function(e){return e.orderStatus}),_.wU),ie=te.statusList,le=te.loading,ae=(0,c.useState)(null),re=(0,o.Z)(ae,2),oe=re[0],se=re[1],de=(0,c.useState)(null),ce=(0,o.Z)(de,2),ue=ce[0],ve=ce[1],fe=(0,c.useState)(null),he=(0,o.Z)(fe,2),me=he[0],Ze=he[1],pe=(0,c.useState)(null),xe=(0,o.Z)(pe,2),je=xe[0],ye=xe[1],be=[{name:"all",id:"0",active:!0,sort:0}].concat((0,r.Z)(ie)),Ce=(0,c.useState)([{title:ne("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:ne("client"),is_show:!0,dataIndex:"user",key:"user",render:function(e){return(0,J.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})}},{title:ne("status"),is_show:!0,dataIndex:"status",key:"status",render:function(e,n){return(0,J.jsxs)("div",{className:"cursor-pointer",children:["new"===e?(0,J.jsx)(f.Z,{color:"blue",children:ne(e)}):"canceled"===e?(0,J.jsx)(f.Z,{color:"error",children:ne(e)}):(0,J.jsx)(f.Z,{color:"cyan",children:ne(e)}),"delivered"!==e&&"canceled"!==e?(0,J.jsx)(g.Z,{onClick:function(e){e.stopPropagation(),se(n)}}):""]})}},{title:ne("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:function(e,n){return(0,J.jsx)("div",{children:"ready"===(null===n||void 0===n?void 0:n.status)&&"pickup"!==(null===n||void 0===n?void 0:n.delivery_type)?(0,J.jsx)(h.Z,{type:"link",onClick:function(){return Ze(n)},children:(0,J.jsxs)(m.Z,{children:[e?"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname):ne("add.deliveryman"),(0,J.jsx)(g.Z,{})]})}):(0,J.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})}},{title:ne("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:function(e){var n;return ne(null===e||void 0===e||null===(n=e.payment_system)||void 0===n?void 0:n.tag)||"-"}},{title:ne("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:function(e){return $()(e).format("YYYY-MM-DD HH:mm")}},{title:ne("delivery.date"),is_show:!0,dataIndex:"delivery_date",key:"delivery_date",render:function(e){return $()(e).format("YYYY-MM-DD")}},{title:ne("options"),is_show:!0,key:"options",render:function(e,n){return(0,J.jsxs)(m.Z,{children:[(0,J.jsx)(h.Z,{icon:(0,J.jsx)(A.Y4r,{}),onClick:function(e){e.stopPropagation(),ve(n.id)}}),(0,J.jsx)(h.Z,{icon:(0,J.jsx)(y.Z,{}),onClick:function(e){e.stopPropagation(),function(e){ye(e.id)}(n)}}),(0,J.jsx)(h.Z,{type:"primary",icon:(0,J.jsx)(g.Z,{}),onClick:function(e){e.stopPropagation(),function(e){W((0,Y.bn)()),W((0,k.bL)({url:"parcel-orders/".concat(e.id),id:"edit_parcel_order",name:ne("edit.parcel.order")})),X("/parcel-orders/".concat(e.id))}(n)},disabled:"delivered"===n.status||"canceled"===n.status}),(0,J.jsx)(F.Z,{icon:(0,J.jsx)(b.Z,{}),onClick:function(e){e.stopPropagation(),Ke([n.id]),Ve(!0),Xe(!0)}})]})}}]),we=(0,o.Z)(Ce,2),Me=we[0],ze=we[1],Ve=(0,c.useContext)(E._).setIsModalVisible,Ye=(0,c.useState)(!1),De=(0,o.Z)(Ye,2),Pe=De[0],Ne=De[1],Oe=(0,_.v9)((function(e){return e.menu}),_.wU).activeMenu,Fe=(0,q.K)(),Be=(0,c.useState)(Fe.values.status||"all"),Ee=(0,o.Z)(Be,2),Le=Ee[0],Ue=Ee[1],$e=(null===(e=Oe.data)||void 0===e?void 0:e.role)||Le,Te=Oe.data,Ae=(0,c.useState)(null),Re=(0,o.Z)(Ae,2),qe=Re[0],Ke=Re[1],Qe=(0,c.useState)(null),Ge=(0,o.Z)(Qe,2),We=Ge[0],Xe=Ge[1],Je=(0,c.useState)(!1),en=(0,o.Z)(Je,2),nn=en[0],tn=en[1],ln=(0,c.useState)($()().subtract(1,"months"),$()()),an=(0,o.Z)(ln,2),rn=an[0],on=an[1],sn=(0,_.v9)((function(e){return e.parcelOrders}),_.wU),dn=sn.data,cn=sn.loading,un=sn.params,vn=sn.meta,fn={search:null===Te||void 0===Te?void 0:Te.search,sort:null===Te||void 0===Te?void 0:Te.sort,column:null===Te||void 0===Te?void 0:Te.column,perPage:null===Te||void 0===Te?void 0:Te.perPage,page:null===Te||void 0===Te?void 0:Te.page,user_id:null===Te||void 0===Te?void 0:Te.user_id,status:"all"===$e?void 0:$e,shop_id:null!==(null===(n=Oe.data)||void 0===n?void 0:n.shop_id)?null===(t=Oe.data)||void 0===t?void 0:t.shop_id:null,delivery_type:"scheduled"!==G?G:void 0,delivery_date_from:"scheduled"===G?$()().add(1,"day").format("YYYY-MM-DD"):void 0,date_from:rn?null===(s=rn[0])||void 0===s?void 0:s.format("YYYY-MM-DD"):null,date_to:rn?null===(v=rn[1])||void 0===v?void 0:v.format("YYYY-MM-DD"):null};(0,I.Z)((function(){W((0,M.LF)(fn))}),[Te,rn,G]);var hn=function(e,n){W((0,k.nc)({activeMenu:Oe,data:(0,a.Z)((0,a.Z)({},Te),(0,l.Z)({},n,e))}))};function mn(){return mn=(0,i.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,perPage:10},e.abrupt("return",P.Z.search(t).then((function(e){return e.data.map((function(e){return{label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),mn.apply(this,arguments)}var Zn=function(){se(null),Ze(null),ve(null),ye(null)};(0,c.useEffect)((function(){null!==Oe&&void 0!==Oe&&Oe.refetch&&(0,_.dC)((function(){W((0,M.LF)(fn)),W((0,k.A_)(Oe))}))}),[null===Oe||void 0===Oe?void 0:Oe.refetch]),(0,c.useEffect)((function(){W((0,Se.dX)({}))}),[]);var pn={selectedRowKeys:qe,onChange:function(e){Ke(e)}};return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(m.Z,{className:"justify-content-end w-100 mb-3",children:(0,J.jsx)(h.Z,{type:"primary",icon:(0,J.jsx)(C.Z,{}),onClick:function(){(0,_.dC)((function(){W((0,Y.bn)()),W((0,k.bL)({id:"parcel-orders/add",url:"parcel-orders/add",name:"add.parcel.order"}))})),X("/parcel-orders/add")},style:{width:"100%"},children:ne("add.parcel.order")})}),(0,J.jsx)(Z.Z,{children:(0,J.jsxs)(m.Z,{wrap:!0,className:"order-filter",children:[(0,J.jsx)(V.Z,{defaultValue:null===Te||void 0===Te?void 0:Te.search,resetSearch:!(null!==Te&&void 0!==Te&&Te.search),placeholder:ne("search"),handleChange:function(e){return hn(e,"search")}}),(0,J.jsx)(D.h,{placeholder:ne("select.client"),fetchOptions:function(e){return mn.apply(this,arguments)},onSelect:function(e){return hn(e.value,"user_id")},onDeselect:function(){return hn(null,"user_id")},style:{width:"100%"},value:null===Te||void 0===Te?void 0:Te.user_id}),(0,J.jsx)(He,{value:rn,onChange:function(e){return on(e)},disabledDate:function(e){return e&&e>$()().endOf("day")},style:{width:"100%"}}),(0,J.jsxs)(h.Z,{onClick:function(){Ne(!0);var e="all"!==Le?{status:Le}:null;B.Z.export(e).then((function(e){var n;window.location.href=T.S0+(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.file_name)})).finally((function(){return Ne(!1)}))},loading:Pe,style:{width:"100%"},children:[(0,J.jsx)(R.bwQ,{className:"mr-2"}),ne("export")]}),(0,J.jsx)(h.Z,{onClick:function(){(0,_.dC)((function(){W((0,H.H5)()),W((0,k.nc)({activeMenu:Oe,data:null})),W((0,M.LF)({status:void 0,page:null===Te||void 0===Te?void 0:Te.page,perPage:20}))})),on(void 0)},style:{width:"100%"},icon:(0,J.jsx)(w.Z,{}),children:ne("clear")})]})}),(0,J.jsxs)(Z.Z,{loading:le,children:[(0,J.jsxs)(m.Z,{className:"justify-content-between align-items-start w-100",children:[(0,J.jsx)(u.Z,{onChange:function(e){var n=e;W((0,k.nc)({activeMenu:Oe,data:{role:n,page:1}})),Ue(e),X("?status=".concat(n))},type:"card",activeKey:$e,children:be.filter((function(e){return!0===e.active})).map((function(e){return(0,J.jsx)(Ie,{tab:ne(e.name)},e.name)}))}),(0,J.jsxs)(m.Z,{children:[null!==qe&&0!==qe.length&&(0,J.jsx)(p.Z,{title:ne("delete.selected"),children:(0,J.jsx)(F.Z,{type:"primary",onClick:function(){null===qe||0===qe.length?O.Am.warning(ne("select.the.product")):(Ve(!0),Xe(!1))},danger:!0})}),(0,J.jsx)(N.Z,{setColumns:ze,columns:Me,iconOnly:!0})]})]}),(0,J.jsx)(x.Z,{scroll:{x:!0},rowSelection:pn,columns:null===Me||void 0===Me?void 0:Me.filter((function(e){return e.is_show})),dataSource:dn,loading:cn,pagination:{pageSize:un.perPage,page:(null===(U=Oe.data)||void 0===U?void 0:U.page)||1,total:vn.total,defaultCurrent:null===(K=Oe.data)||void 0===K?void 0:K.page,current:null===(Q=Oe.data)||void 0===Q?void 0:Q.page},rowKey:function(e){return e.id},onChange:function(e,n,t){var i=e.pageSize,l=e.current,r=t.field,o=t.order,s=(0,z.Z)(o);W((0,k.nc)({activeMenu:Oe,data:(0,a.Z)((0,a.Z)({},Te),{},{perPage:i,page:l,column:r,sort:s})}))}})]}),oe&&(0,J.jsx)(ee,{orderDetails:oe,handleCancel:Zn,status:ie}),me&&(0,J.jsx)(ke,{orderDetails:me,handleCancel:Zn}),ue&&(0,J.jsx)(ge,{id:ue,handleCancel:Zn}),!!je&&(0,J.jsx)(_e,{id:je,handleCancel:Zn}),(0,J.jsx)(L.Z,{click:function(){tn(!0);var e=(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,r.Z)(qe.map((function(e,n){return(0,l.Z)({},"ids[".concat(n,"]"),e)}))))));B.Z.delete(e).then((function(){O.Am.success(ne("successfully.deleted")),Ve(!1),W((0,M.LF)(fn)),Xe(null),Ke(null)})).finally((function(){tn(!1)}))},text:ne(We?"delete":"all.delete"),loading:nn,setText:Ke})]})}},15386:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var i=t(1413),l=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},r=t(17469),o=function(e,n){return l.createElement(r.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:n,icon:a}))};o.displayName="ClearOutlined";var s=l.forwardRef(o)},55768:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var i=t(1413),l=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},r=t(17469),o=function(e,n){return l.createElement(r.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:n,icon:a}))};o.displayName="PlusCircleOutlined";var s=l.forwardRef(o)},99587:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var i=t(1413),l=t(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},r=t(17469),o=function(e,n){return l.createElement(r.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:n,icon:a}))};o.displayName="TableOutlined";var s=l.forwardRef(o)},84618:function(e,n,t){"use strict";e.exports=t.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:function(e,n,t){"use strict";e.exports=t.p+"static/media/user.fbe7078c52acde79652d.jpg"},24654:function(){}}]);