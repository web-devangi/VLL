"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2267],{55940:(e,l,n)=>{n.d(l,{Z:()=>c});n(47313);var t=n(59491),a=n(47515),s=n(23560),i=n(24511),o=n(79492),r=n(46417);function c(e){let{size:l="",onClick:n,type:c="default",...d}=e;const{t:u}=(0,i.$)(),{isDemo:h}=(0,o.Z)();return(0,r.jsx)(t.Z,{size:l,icon:(0,r.jsx)(a.Z,{}),onClick:e=>{h?s.Am.warning(u("cannot.work.demo")):n(e)},type:c,...d})}},53233:(e,l,n)=>{n.d(l,{Z:()=>p});var t=n(47313),a=n(56140),s=n(67251),i=n(45705),o=n(86345),r=n(78267),c=n(37388),d=n(59491),u=n(99587),h=n(24511),v=n(46417);const{Text:m}=a.Z,p=e=>{let{columns:l=[],setColumns:n,style:a,size:p="",iconOnly:Z}=e;const{t:x}=(0,h.$)(),[f,j]=(0,t.useState)(!1),g=(0,v.jsx)(s.Z,{children:null===l||void 0===l?void 0:l.map(((e,t)=>(0,v.jsx)(s.Z.Item,{children:(0,v.jsxs)(i.Z,{className:"d-flex justify-content-between",children:[(0,v.jsx)(m,{children:e.title}),(0,v.jsx)(o.Z,{defaultChecked:!0,onClick:()=>function(e){const t=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));n(t)}(e),disabled:1===t})]})},e+t)))});return(0,v.jsx)(r.Z,{overlay:g,trigger:["click"],onVisibleChange:e=>{j(e)},visible:f,children:(0,v.jsx)(c.Z,{title:x("change.columns"),children:(0,v.jsx)(d.Z,{style:{...a},size:p,icon:(0,v.jsx)(u.Z,{}),children:Z?null:x("Columns")})})})}},4014:(e,l,n)=>{function t(e){var l,n;let t=null===e||void 0===e?void 0:e.slice(0,1),a=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,a-1);s=null===(l=s)||void 0===l?void 0:l.replace(/./g,"*");let i=null===e||void 0===e?void 0:e.slice(a-1,e.length);return null===t||void 0===t||null===(n=t.concat(s))||void 0===n?void 0:n.concat(i)}n.d(l,{Z:()=>t})},84261:(e,l,n)=>{function t(e){const l="".concat(e),n="*".repeat(l.length-2);return(null===l||void 0===l?void 0:l[0])+n+(null===l||void 0===l?void 0:l[(null===l||void 0===l?void 0:l.length)-1])}n.d(l,{Z:()=>t})},41481:(e,l,n)=>{n.d(l,{Z:()=>r});var t=n(47313),a=n(66672),s=n(16031),i=n(40765),o=n(46417);function r(e){let{handleChange:l,defaultValue:n,resetSearch:r,...c}=e;const[d,u]=(0,t.useState)(n),h=(0,t.useMemo)((()=>(0,s.debounce)((e=>{l(e)}),800)),[]);return(0,t.useEffect)((()=>{u(n)}),[r]),(0,o.jsx)(a.Z,{value:d,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,o.jsx)(i.Z,{}),...c})}},89281:(e,l,n)=>{n.d(l,{h:()=>c});var t=n(47313),a=n(12279),s=n.n(a),i=n(74294),o=n(72652),r=n(46417);const c=e=>{let{fetchOptions:l,debounceTimeout:n=400,onClear:a,refetchOptions:c=!1,...d}=e;const[u,h]=(0,t.useState)(!1),[v,m]=(0,t.useState)([]),p=(0,t.useMemo)((()=>s()((e=>{m([]),h(!0),l(e).then((e=>{m(e),h(!1)}))}),n)),[l,n]);return(0,r.jsx)(i.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),a&&a()},notFoundContent:u?(0,r.jsx)(o.Z,{size:"small"}):"no results",...d,options:v,onFocus:()=>{v.length&&!c||p("")}})}},13945:(e,l,n)=>{function t(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(l,{Z:()=>t})},84017:(e,l,n)=>{function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const t=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===n?"".concat(t," ").concat(l):"".concat(l," ").concat(t)}n.d(l,{Z:()=>t})},12267:(e,l,n)=>{n.r(l),n.d(l,{default:()=>O});var t=n(47313),a=n(31741),s=n(47548),i=n(12019),o=n(47515),r=n(55768),c=n(45705),d=n(59491),u=n(37388),h=n(77181),v=n(78508),m=n(97890),p=n(26672),Z=n(2717),x=n(90954),f=n(24511),j=n(13945),g=n(80314),b=n(91405),y=n(10310),C=n(85746),w=n(41481),k=n(53233),I=n(55940),z=n(23560),V=n(74580),S=n(69658),_=n(45321),H=n(79492),M=n(4014),N=n(46417);const O=()=>{var e,l,n,O,T;const{t:E}=(0,f.$)(),$=(0,Z.I0)(),R=(0,m.s0)(),[A,F]=(0,t.useState)(null),{setIsModalVisible:P}=(0,t.useContext)(V._),[U,q]=(0,t.useState)(!1),{activeMenu:B}=(0,Z.v9)((e=>e.menu),Z.wU),{clients:D,loading:L,meta:K,params:Y}=(0,Z.v9)((e=>e.client),Z.wU),{isDemo:G}=(0,H.Z)(),[J,Q]=(0,t.useState)(null),[W,X]=(0,t.useState)(null),ee=B.data,le={sort:null===ee||void 0===ee?void 0:ee.sort,column:null===ee||void 0===ee?void 0:ee.column,perPage:null===ee||void 0===ee?void 0:ee.perPage,page:null===ee||void 0===ee?void 0:ee.page,search:null===ee||void 0===ee?void 0:ee.search,status:"published"},[ne,te]=(0,t.useState)([{title:E("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:E("firstname"),dataIndex:"firstname",key:"firstname",is_show:!0},{title:E("lastname"),dataIndex:"lastname",key:"lastname",is_show:!0},{title:E("email"),dataIndex:"email",key:"email",is_show:!0,render:e=>(0,N.jsx)("div",{children:(0,M.Z)(e)})},{title:E("role"),dataIndex:"role",key:"role",is_show:!0},{title:E("options"),dataIndex:"options",key:"options",is_show:!0,render:(e,l)=>(0,N.jsxs)(c.Z,{children:[(0,N.jsx)(d.Z,{icon:(0,N.jsx)(a.Z,{}),onClick:()=>(e=>{$((0,x.bL)({url:"users/user/".concat(e.uuid),id:"user_info",name:E("user.info")})),R("/users/user/".concat(e.uuid),{state:{user_id:e.id}})})(l)}),(0,N.jsx)(d.Z,{icon:(0,N.jsx)(s.Z,{}),onClick:()=>Q(l.uuid)}),(0,N.jsx)(d.Z,{type:"primary",icon:(0,N.jsx)(i.Z,{}),onClick:()=>(e=>{$((0,x.bL)({url:"user/".concat(e.uuid),id:"user_edit",name:"User edit"})),R("/user/".concat(e.uuid),{state:"user"})})(l)}),(0,N.jsx)(u.Z,{title:E("change.user.role"),children:(0,N.jsx)(d.Z,{onClick:()=>X(l),icon:(0,N.jsx)(p.VRY,{})})}),(0,N.jsx)(I.Z,{icon:(0,N.jsx)(o.Z,{}),onClick:()=>{F([l.id]),P(!0)}})]})}]);(0,t.useEffect)((()=>{B.refetch&&($((0,C.Tu)(le)),$((0,x.A_)(B)))}),[B.refetch]),(0,g.Z)((()=>{$((0,C.Tu)(le))}),[B.data]);const ae={selectedRowKeys:A,onChange:e=>{F(e)}};return(0,N.jsxs)(h.Z,{title:E("clients"),extra:(0,N.jsxs)(c.Z,{wrap:!0,children:[(0,N.jsxs)(c.Z,{children:[(0,N.jsx)(d.Z,{type:"primary",icon:(0,N.jsx)(r.Z,{}),onClick:()=>{$((0,x.bL)({id:"user-add",url:"user/add",name:E("add.client")})),R("/user/add")},children:E("add.client")}),(0,N.jsx)(I.Z,{size:"",onClick:()=>{null===A||0===A.length?z.Am.warning(E("select.the.product")):P(!0)},children:E("delete.selected")})]}),(0,N.jsx)(k.Z,{columns:ne,setColumns:te})]}),children:[(0,N.jsx)("div",{className:"d-flex justify-content-between",children:(0,N.jsx)(w.Z,{placeholder:E("search"),className:"w-25",handleChange:e=>(e=>{const l=B.data;$((0,x.nc)({activeMenu:B,data:{...l,...e}}))})({search:e}),defaultValue:null===(e=B.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(l=B.data)&&void 0!==l&&l.search)})}),(0,N.jsx)(v.Z,{scroll:{x:!0},rowSelection:ae,columns:null===ne||void 0===ne?void 0:ne.filter((e=>e.is_show)),dataSource:D,loading:L,pagination:{pageSize:Y.perPage,page:(null===(n=B.data)||void 0===n?void 0:n.page)||1,total:K.total,defaultCurrent:null===(O=B.data)||void 0===O?void 0:O.page,current:null===(T=B.data)||void 0===T?void 0:T.page},rowKey:e=>e.id,onChange:function(e,l,n){const{pageSize:t,current:a}=e,{field:s,order:i}=n,o=(0,j.Z)(i);$((0,x.nc)({activeMenu:B,data:{...B.data,perPage:t,page:a,column:s,sort:o}}))}}),(0,N.jsx)(S.Z,{click:()=>{q(!0);const e={...Object.assign({},...A.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};_.Z.delete(e).then((()=>{z.Am.success(E("successfully.deleted")),$((0,C.Tu)(le)),P(!1)})).finally((()=>{F(null),q(!1)}))},text:E("delete"),loading:U,setText:F}),J&&(0,N.jsx)(b.Z,{uuid:J,handleCancel:()=>Q(null)}),W&&(0,N.jsx)(y.Z,{data:W,handleCancel:()=>X(null)})]})}},10310:(e,l,n)=>{n.d(l,{Z:()=>x});var t=n(47313),a=n(10976),s=n(9274),i=n(59491),o=n(74294),r=n(49986),c=n(2717),d=n(84304),u=n(23560),h=n(24511),v=n(85746),m=n(89281),p=n(53149),Z=n(46417);function x(e){let{data:l,handleCancel:n}=e;const{t:x}=(0,h.$)(),[f]=a.Z.useForm(),j=(0,c.I0)(),[g,b]=(0,t.useState)(!1),[y,C]=(0,t.useState)(l.role),{user:w}=(0,c.v9)((e=>e.auth),c.wU),k=[{label:x("user"),value:"user",key:1},{label:x("manager"),value:"manager",key:2},{label:x("moderator"),value:"moderator",key:3}],I=[{label:x("user"),value:"user",key:4},{label:x("moderator"),value:"moderator",key:5}];return(0,Z.jsx)(s.Z,{visible:!!l,title:x("change.user.role"),onCancel:n,footer:[(0,Z.jsx)(i.Z,{type:"primary",onClick:()=>f.submit(),loading:g,children:x("save")}),(0,Z.jsx)(i.Z,{type:"default",onClick:n,children:x("cancel")})],children:(0,Z.jsxs)(a.Z,{layout:"vertical",name:"user-role",form:f,onFinish:e=>{!function(e,t){b(!0),r.Z.updateRole(e,{role:t}).then((()=>{u.Am.success(x("successfully.updated")),"user"===l.role?j((0,v.Tu)()):j((0,d.uh)({role:l.role})),n()})).finally((()=>b(!1)))}(l.uuid,e.role)},initialValues:l,children:[(0,Z.jsx)(a.Z.Item,{name:"role",label:x("role"),rules:[{required:!0,message:x("required")}],children:(0,Z.jsx)(o.Z,{className:"w-100",options:"manager"===w.role?I:k,onChange:e=>C(e)})}),"manager"!==y&&"user"!==y?(0,Z.jsx)(a.Z.Item,{label:x("shop"),name:"shop_id",rules:[{required:!0,message:x("required")}],children:(0,Z.jsx)(m.h,{className:"w-100",placeholder:x("select.shop"),fetchOptions:async function(e){const l={search:e,status:"approved"};return p.Z.search(l).then((e=>e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id})))))},allowClear:!1})}):void 0]})})}},91405:(e,l,n)=>{n.d(l,{Z:()=>g});var t=n(47313),a=n(9274),s=n(59491),i=n(68197),o=n(59624),r=n(83371),c=n(26824),d=n(49986),u=n(45464),h=n(24511),v=n(51282),m=n(2717),p=n(84017),Z=n(79492),x=n(4014),f=n(84261),j=n(46417);function g(e){var l,n,g;let{uuid:b,handleCancel:y}=e;const[C,w]=(0,t.useState)({}),[k,I]=(0,t.useState)(!1),{t:z}=(0,h.$)(),{defaultCurrency:V}=(0,m.v9)((e=>e.currency),m.wU),{isDemo:S}=(0,Z.Z)();return(0,t.useEffect)((()=>{!function(e){I(!0),d.Z.getById(e).then((e=>w(e.data))).finally((()=>I(!1)))}(b)}),[b]),(0,j.jsx)(a.Z,{visible:!!b,title:z("user"),onCancel:y,footer:[(0,j.jsx)(s.Z,{type:"default",onClick:y,children:z("cancel")},"cancel")],className:C.shop?"large-modal":"",children:k?(0,j.jsx)(v.Z,{}):(0,j.jsxs)(i.Z,{gutter:24,children:[(0,j.jsx)(o.Z,{span:C.shop?12:24,children:(0,j.jsxs)(r.Z,{bordered:!0,children:[(0,j.jsx)(r.Z.Item,{span:3,label:z("avatar"),children:(0,j.jsx)(c.Z,{src:(0,u.Z)(C.img),alt:C.firstname,width:80,className:"rounded"})}),(0,j.jsx)(r.Z.Item,{span:3,label:z("user.id"),children:C.id}),(0,j.jsxs)(r.Z.Item,{span:3,label:z("name"),children:[C.firstname," ",C.lastname||""]}),(0,j.jsx)(r.Z.Item,{span:3,label:z("gender"),children:C.gender}),(0,j.jsx)(r.Z.Item,{span:3,label:z("birthday"),children:C.birthday}),(0,j.jsx)(r.Z.Item,{span:3,label:z("email"),children:(0,x.Z)(null===C||void 0===C?void 0:C.email)}),(0,j.jsx)(r.Z.Item,{span:3,label:z("phone"),children:null!==C&&void 0!==C&&C.phone?(0,f.Z)(null===C||void 0===C?void 0:C.phone):z("no.phone")}),(0,j.jsx)(r.Z.Item,{span:3,label:z("role"),children:C.role}),(0,j.jsx)(r.Z.Item,{span:3,label:z("wallet"),children:(0,p.Z)(null===(l=C.wallet)||void 0===l?void 0:l.price,null===V||void 0===V?void 0:V.symbol)})]})}),C.shop?(0,j.jsx)(o.Z,{span:12,children:(0,j.jsxs)(r.Z,{bordered:!0,children:[(0,j.jsx)(r.Z.Item,{span:3,label:z("shop.id"),children:C.shop.id}),(0,j.jsx)(r.Z.Item,{span:3,label:z("shop.name"),children:null===(n=C.shop.translation)||void 0===n?void 0:n.title}),(0,j.jsx)(r.Z.Item,{span:3,label:z("shop.logo"),children:(0,j.jsx)("img",{src:(0,u.Z)(C.shop.logo_img),alt:null===(g=C.shop.translation)||void 0===g?void 0:g.title,width:100,className:"rounded"})}),(0,j.jsx)(r.Z.Item,{span:3,label:z("shop.phone"),children:C.shop.phone}),(0,j.jsxs)(r.Z.Item,{span:3,label:z("shop.open_close.time"),children:[C.shop.open_time," - ",C.shop.close_time]}),(0,j.jsx)(r.Z.Item,{span:3,label:z("delivery.range"),children:C.shop.delivery_range})]})}):""]})})}},47548:(e,l,n)=>{n.d(l,{Z:()=>r});var t=n(1413),a=n(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"};var i=n(17469),o=function(e,l){return a.createElement(i.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:l,icon:s}))};o.displayName="ExpandOutlined";const r=a.forwardRef(o)},55768:(e,l,n)=>{n.d(l,{Z:()=>r});var t=n(1413),a=n(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var i=n(17469),o=function(e,l){return a.createElement(i.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:l,icon:s}))};o.displayName="PlusCircleOutlined";const r=a.forwardRef(o)},99587:(e,l,n)=>{n.d(l,{Z:()=>r});var t=n(1413),a=n(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=n(17469),o=function(e,l){return a.createElement(i.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:l,icon:s}))};o.displayName="TableOutlined";const r=a.forwardRef(o)}}]);