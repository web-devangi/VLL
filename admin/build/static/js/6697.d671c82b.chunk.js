"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6697],{4014:function(e,n,i){function l(e){var n,i,l=null===e||void 0===e?void 0:e.slice(0,1),d=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,d-1);s=null===(n=s)||void 0===n?void 0:n.replace(/./g,"*");var t=null===e||void 0===e?void 0:e.slice(d-1,e.length);return null===l||void 0===l||null===(i=l.concat(s))||void 0===i?void 0:i.concat(t)}i.d(n,{Z:function(){return l}})},84261:function(e,n,i){function l(e){var n="".concat(e),i="*".repeat(n.length-2);return(null===n||void 0===n?void 0:n[0])+i+(null===n||void 0===n?void 0:n[(null===n||void 0===n?void 0:n.length)-1])}i.d(n,{Z:function(){return l}})},31025:function(e,n,i){i.d(n,{Z:function(){return Z}});var l=i(15861),d=i(29439),s=i(87757),t=i.n(s),o=i(47313),r=i(24511),a=i(51095),c=i(23560),u=i(59491),v=i(66204),x=i(31881),h=i.n(x),m=i(97421),j=i(51282),p=i(46417),f="https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=".concat(m.$h);function Z(e){var n=e.orderId,i=e.showLink,s=void 0===i||i,x=e.size,Z=void 0===x?2:x,y=(0,r.$)().t,g=(0,o.useState)(""),b=(0,d.Z)(g,2),_=b[0],k=b[1],N=(0,o.useState)(!1),w=(0,d.Z)(N,2),I=w[0],S=w[1],Y=(0,o.useState)(null),C=(0,d.Z)(Y,2),z=C[0],D=C[1],H=function(){var e=(0,l.Z)(t().mark((function e(){var i,l,d;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),i={dynamicLinkInfo:{domainUriPrefix:m.AC,link:"".concat(m.o6,"/orders/").concat(n),androidInfo:{androidPackageName:m.aG},iosInfo:{iosBundleId:m.Ir}}},e.prev=2,e.next=5,h().post(f,i);case 5:l=e.sent,d=l.data,D(null),k(null===d||void 0===d?void 0:d.shortLink),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),D(e.t0),c.Am.error(e.t0.message);case 15:return e.prev=15,S(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){H()}),[n]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("h3",{children:[y("qr_code"),":"]}),(0,p.jsx)("div",{children:I||z?z?(0,p.jsx)(v.Z,{color:"red",children:y("smth.went.wrong")}):(0,p.jsx)(j.Z,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{width:"".concat(100*Z,"px"),height:"".concat(100*Z,"px"),borderRadius:"10px",overflow:z?"none":"hidden"},children:(0,p.jsx)(a.Qd,{size:500,id:"qrCode",includeMargin:!0,value:_,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,p.jsx)("br",{}),s&&(0,p.jsx)(u.Z,{type:"primary",href:_,target:"_blank",rel:"noreferrer",style:{width:"".concat(100*Z,"px")},children:y("link.to.order")})]})})]})}},64922:function(e,n,i){i.d(n,{t:function(){return c}});var l=i(10976),d=i(68197),s=i(59624),t=i(66672),o=i(59491),r=i(24511),a=i(46417),c=function(e){var n=e.onSubmit,i=e.initialData,c=e.isSubmitting,u=(0,r.$)().t;return(0,a.jsx)(l.Z,{layout:"vertical",initialValues:i,onFinish:n,children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:u("tracking.name"),name:"track_name",rules:[{required:!0,message:u("required")}],children:(0,a.jsx)(t.Z,{})})}),(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:u("tracking.id"),name:"track_id",rules:[{required:!0,message:u("required")}],children:(0,a.jsx)(t.Z,{})})}),(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:u("tracking.url"),name:"track_url",rules:[{type:"url",message:u("should.be.url")}],children:(0,a.jsx)(t.Z,{})})}),(0,a.jsx)(s.Z,{span:7,children:(0,a.jsx)(o.Z,{type:"primary",loading:c,htmlType:"submit",children:u("submit")})})]})})}},17649:function(e,n,i){i.d(n,{Z:function(){return l}});i(97421);function l(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};var n=e.location.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}},84017:function(e,n,i){function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after",l=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===i?"".concat(l," ").concat(n):"".concat(n," ").concat(l)}i.d(n,{Z:function(){return l}})},76697:function(e,n,i){i.r(n),i.d(n,{default:function(){return G}});var l=i(29439),d=i(47313),s=i(45705),t=i(66204),o=i(26824),r=i(78508),a=i(77181),c=i(68197),u=i(59624),v=i(56140),x=i(14133),h=i(83999),m=i(72652),j=i(59491),p=i(45334),f=i(41068),Z=i(46155),y=i(83685),g=i(89720),b=i(12019),_=i(97890),k=i(29466),N=i(7370),w=i(45464),I=i(2717),S=i(90954),Y=i(24511),C=i(84017),z=i(22539),D=i(80355),H=i(32916),q=i(58821),M=i(5958),B=i(70816),F=i.n(B),R=i(40197),L=i(79492),T=i(4014),U=i(31025),A=i(23560),$=i(64922),E=i(84261),O=i(60861),P=i(46417);function G(){var e,n,i,B,G,V,Q,K,W,J,X,ee,ne,ie,le,de,se,te,oe,re,ae,ce,ue,ve,xe,he,me,je,pe,fe,Ze,ye,ge,be,_e,ke,Ne,we,Ie,Se,Ye,Ce,ze,De=(0,I.v9)((function(e){return e.menu}),I.wU).activeMenu,He=(0,I.v9)((function(e){return e.currency}),I.wU).defaultCurrency,qe=(0,I.v9)((function(e){return e.formLang}),I.wU).defaultLang,Me=De.data,Be=(0,Y.$)().t,Fe=(0,_.UO)().id,Re=(0,I.I0)(),Le=(0,_.s0)(),Te=(0,d.useRef)(),Ue=(0,d.useRef)(),Ae=((0,L.Z)().isDemo,(0,d.useState)(null)),$e=(0,l.Z)(Ae,2),Ee=$e[0],Oe=$e[1],Pe=(0,d.useState)(!1),Ge=(0,l.Z)(Pe,2),Ve=Ge[0],Qe=Ge[1],Ke=(0,d.useState)(!1),We=(0,l.Z)(Ke,2),Je=We[0],Xe=We[1],en=(0,I.v9)((function(e){return e.orderStatus}),I.wU).statusList,nn=(0,d.useState)(!1),ln=(0,l.Z)(nn,2),dn=ln[0],sn=ln[1],tn=[{title:Be("id"),dataIndex:"id",key:"id",render:function(e,n){var i;return null===(i=n.stock)||void 0===i?void 0:i.id}},{title:Be("product.name"),dataIndex:"product",key:"product",render:function(e,n){var i,l,d,o,r;return(0,P.jsxs)(s.Z,{direction:"vertical",className:"relative",children:[null===(i=n.stock)||void 0===i||null===(l=i.product)||void 0===l||null===(d=l.translation)||void 0===d?void 0:d.title,null===(o=n.stock)||void 0===o||null===(r=o.extras)||void 0===r?void 0:r.map((function(e){var n,i,l;return(0,P.jsxs)(t.Z,{children:[null===(n=e.group)||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title,": ",null===(l=e.value)||void 0===l?void 0:l.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Be("image"),dataIndex:"img",key:"img",render:function(e,n){var i,l;return(0,P.jsx)(o.Z,{src:(0,w.Z)(null===(i=n.stock)||void 0===i||null===(l=i.product)||void 0===l?void 0:l.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Be("price"),dataIndex:"origin_price",key:"origin_price",render:function(e,n){var i;return(0,C.Z)(null===n||void 0===n||null===(i=n.stock)||void 0===i?void 0:i.price,null===He||void 0===He?void 0:He.symbol)}},{title:Be("quantity"),dataIndex:"quantity",key:"quantity",render:function(e){return(0,P.jsx)("span",{children:e})}},{title:Be("discount"),dataIndex:"rate_discount",key:"rate_discount",render:function(e,n){var i;return(0,C.Z)(null===n||void 0===n||null===(i=n.stock)||void 0===i?void 0:i.discount,null===He||void 0===He?void 0:He.symbol)}},{title:Be("tax"),dataIndex:"tax",key:"tax",render:function(e,n){return(0,C.Z)(null===n||void 0===n?void 0:n.tax,null===He||void 0===He?void 0:He.symbol)}},{title:Be("total.price"),dataIndex:"total_price",key:"total_price",render:function(e,n){return(0,C.Z)(null===n||void 0===n?void 0:n.total_price,null===He||void 0===He?void 0:He.symbol)}}],on=[{title:Be("date"),dataIndex:"date",key:"date",render:function(e){return F()(e).format("YYYY-MM-DD HH:mm")}},{title:Be("document"),dataIndex:"document",key:"document"},{title:Be("number"),dataIndex:"number",key:"number"},{title:Be("total.price"),dataIndex:"price",key:"price"}],rn=[{price:(0,C.Z)(null===Me||void 0===Me?void 0:Me.total_price,He.symbol),number:(0,P.jsxs)(k.rU,{to:"/orders/generate-invoice/".concat(null===Me||void 0===Me?void 0:Me.id),children:["#",null===Me||void 0===Me?void 0:Me.id]}),document:Be("invoice"),date:F()(null===Me||void 0===Me?void 0:Me.created_at).format("YYYY-MM-DD HH:mm")},{price:"-",number:(0,P.jsxs)(k.rU,{to:"/orders/generate-invoice/".concat(null===Me||void 0===Me?void 0:Me.id),children:["#",null===Me||void 0===Me?void 0:Me.id]}),document:Be("delivery.receipt"),date:F()(null===Me||void 0===Me?void 0:Me.created_at).format("YYYY-MM-DD HH:mm")}];function an(){Qe(!0),N.Z.getById(Fe).then((function(e){var n=e.data;Re((0,S.nc)({activeMenu:De,data:n}))})).finally((function(){Qe(!1),Re((0,S.A_)(De))}))}var cn=(0,d.useCallback)((function(e){sn(!0),N.Z.updateTracking(null===Me||void 0===Me?void 0:Me.id,e).then((function(){A.Am.success(Be("successfully.updated")),an()})).finally((function(){sn(!1)}))}),[null===Me||void 0===Me?void 0:Me.id]);(0,d.useEffect)((function(){De.refetch&&(an(),0===en.length&&Re((0,R.dX)({})))}),[De.refetch]);return(0,P.jsxs)("div",{className:"order_details",children:[(0,P.jsx)(a.Z,{className:"order-details-info",title:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(H.Qyq,{className:"mr-2 icon"}),"".concat(Be("order")," ").concat(null!==Me&&void 0!==Me&&Me.id?"#".concat(null===Me||void 0===Me?void 0:Me.id," "):"")," ",Be("from.order")," ",null===Me||void 0===Me||null===(e=Me.user)||void 0===e?void 0:e.firstname," ",(null===Me||void 0===Me||null===(n=Me.user)||void 0===n?void 0:n.lastname)||""]})}),(0,P.jsxs)(c.Z,{gutter:24,children:[(0,P.jsx)(u.Z,{span:24,children:(0,P.jsx)(a.Z,{children:(0,P.jsxs)(s.Z,{className:"justify-content-between w-100",children:[(0,P.jsxs)(s.Z,{className:"align-items-start",children:[(0,P.jsx)(g.Z,{className:"order-card-icon"}),(0,P.jsxs)("div",{className:"d-flex flex-column",children:[(0,P.jsx)(v.Z.Text,{children:Be("delivery.date")}),Ve?(0,P.jsx)(x.Z.Button,{size:16}):(0,P.jsxs)(v.Z.Text,{className:"order-card-title",children:[null===Me||void 0===Me?void 0:Me.delivery_date," ",null===Me||void 0===Me?void 0:Me.delivery_time]})]})]}),(0,P.jsxs)(s.Z,{className:"align-items-start",onClick:function(){return Ue.current.scrollIntoView({behavior:"smooth"})},children:[(0,P.jsx)(M.iFN,{className:"order-card-icon"}),(0,P.jsxs)("div",{className:"d-flex flex-column",children:[(0,P.jsx)(v.Z.Text,{children:Be("total.price")}),Ve?(0,P.jsx)(x.Z.Button,{size:16,loading:Ve}):(0,P.jsx)(v.Z.Text,{className:"order-card-title",children:(0,C.Z)(null===Me||void 0===Me?void 0:Me.total_price,null===He||void 0===He?void 0:He.symbol)})]})]}),(0,P.jsxs)(s.Z,{className:"align-items-start",children:[(0,P.jsx)(M.Dij,{className:"order-card-icon"}),(0,P.jsxs)("div",{className:"d-flex flex-column",children:[(0,P.jsx)(v.Z.Text,{children:Be("messages")}),Ve?(0,P.jsx)(x.Z.Button,{size:16}):(0,P.jsx)(v.Z.Text,{className:"order-card-title",children:null!==Me&&void 0!==Me&&Me.review?1:0})]})]}),(0,P.jsxs)(s.Z,{className:"align-items-start",onClick:function(){return Te.current.scrollIntoView({behavior:"smooth"})},children:[(0,P.jsx)(H.Qyq,{className:"order-card-icon"}),(0,P.jsxs)("div",{className:"d-flex flex-column",children:[(0,P.jsx)(v.Z.Text,{children:Be("products")}),Ve?(0,P.jsx)(x.Z.Button,{size:16}):(0,P.jsx)(v.Z.Text,{className:"order-card-title",children:null===Me||void 0===Me||null===(i=Me.details)||void 0===i?void 0:i.reduce((function(e,n){return e+n.quantity}),0)})]})]})]})})}),"canceled"!==(null===Me||void 0===Me?void 0:Me.status)&&(0,P.jsx)(u.Z,{span:24,children:(0,P.jsx)(a.Z,{children:(0,P.jsx)(h.Z,{current:null===en||void 0===en?void 0:en.findIndex((function(e){return e.name===(null===Me||void 0===Me?void 0:Me.status)})),children:null===en||void 0===en?void 0:en.slice(0,-1).map((function(e){return(0,P.jsx)(h.Z.Step,{title:Be(e.name)},e.id)}))})})}),(0,P.jsxs)(u.Z,{span:16,children:[(0,P.jsx)(m.Z,{spinning:Ve,children:(0,P.jsxs)(a.Z,{style:{minHeight:"200px"},children:[(0,P.jsxs)("h3",{children:[Be("details"),":"]}),(0,P.jsxs)(c.Z,{hidden:Ve,className:"mb-3 order_detail",gutter:10,children:[(0,P.jsxs)(u.Z,{span:12,children:[(0,P.jsxs)("div",{children:[Be("created.date.&.time"),":",(0,P.jsxs)("span",{className:"ml-2",children:[(0,P.jsx)(q.yoA,{className:"mr-1"})," ",F()(null===Me||void 0===Me?void 0:Me.created_at).format("YYYY-MM-DD HH:mm")," "]})]}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[Be("delivery.date.&.time"),":",(0,P.jsxs)("span",{className:"ml-2",children:[(0,P.jsx)(q.yoA,{className:"mr-1"})," ",null===Me||void 0===Me?void 0:Me.delivery_date," ",null===Me||void 0===Me?void 0:Me.delivery_time]})]}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[Be("payment.status"),":",(0,P.jsxs)("span",{style:{cursor:"pointer"},className:"ml-2",onClick:function(){return Xe(!0)},children:[Be(null===Me||void 0===Me||null===(B=Me.transaction)||void 0===B?void 0:B.status)," ",(0,P.jsx)(b.Z,{})]})]}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[Be("note"),":",(0,P.jsx)("span",{className:"ml-2",children:Be(null!==Me&&void 0!==Me&&Me.note?null===Me||void 0===Me?void 0:Me.note:"")})]})]}),(0,P.jsxs)(u.Z,{span:12,children:[(0,P.jsxs)("div",{children:[Be("status"),":",(0,P.jsx)("span",{className:"ml-2",children:"new"===(null===Me||void 0===Me?void 0:Me.status)?(0,P.jsx)(t.Z,{color:"blue",children:Be(null===Me||void 0===Me?void 0:Me.status)}):"canceled"===(null===Me||void 0===Me?void 0:Me.status)?(0,P.jsx)(t.Z,{color:"error",children:Be(null===Me||void 0===Me?void 0:Me.status)}):(0,P.jsx)(t.Z,{color:"cyan",children:Be(null===Me||void 0===Me?void 0:Me.status)})})]}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[Be("delivery.type"),":",(0,P.jsx)("span",{className:"ml-2",children:null===Me||void 0===Me?void 0:Me.delivery_type})]}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[Be("payment.type"),":",(0,P.jsx)("span",{className:"ml-2",children:Be(null===Me||void 0===Me||null===(G=Me.transaction)||void 0===G||null===(V=G.payment_system)||void 0===V?void 0:V.tag)})]}),(0,P.jsx)("br",{})]})]}),(0,P.jsxs)(c.Z,{hidden:Ve,className:"mb-3 order_detail",children:[(0,P.jsxs)(u.Z,{span:12,children:[(0,P.jsxs)("h3",{children:[Be("delivery.address"),":"]}),(0,P.jsx)("div",{children:null!==Me&&void 0!==Me&&Me.address?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{children:[Be("street.house.number"),":"," ",null!==(Q=null===Me||void 0===Me||null===(K=Me.address)||void 0===K?void 0:K.street_house_number)&&void 0!==Q?Q:Be("not.given")]}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[Be("zipcode"),":"," ",null!==(W=null!==(J=null===Me||void 0===Me||null===(X=Me.address)||void 0===X?void 0:X.zipcode)&&void 0!==J?J:null===Me||void 0===Me||null===(ee=Me.address)||void 0===ee?void 0:ee.zip_code)&&void 0!==W?W:Be("not.given")]})]}):null!==Me&&void 0!==Me&&Me.my_address?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{children:[Be("street.house.number"),":"," ",null!==(ne=null===Me||void 0===Me||null===(ie=Me.my_address)||void 0===ie?void 0:ie.street_house_number)&&void 0!==ne?ne:Be("not.given")]}),(0,P.jsx)("br",{}),(0,P.jsxs)("div",{children:[Be("zipcode"),":"," ",null!==(le=null===Me||void 0===Me||null===(de=Me.my_address)||void 0===de?void 0:de.zipcode)&&void 0!==le?le:Be("not.given")]})]}):null!==Me&&void 0!==Me&&Me.delivery_point?(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("div",{children:[Be("address"),":"," ",null!==(se=null===Me||void 0===Me||null===(te=Me.delivery_point)||void 0===te||null===(oe=te.address)||void 0===oe?void 0:oe[qe])&&void 0!==se?se:Be("no.address")]})}):"digital"===(null===Me||void 0===Me?void 0:Me.delivery_type)?(0,P.jsx)("div",{children:Be("digital.delivery")}):(0,P.jsx)("div",{children:Be("no.address")})}),(0,P.jsxs)(j.Z,{className:"map_show mt-3",onClick:function(){return Oe(Fe)},children:[(0,P.jsx)(z.$0r,{style:{marginRight:"8px"}})," ",Be("show.locations")]})]}),(0,P.jsx)(u.Z,{span:12,children:(0,P.jsx)(U.Z,{orderId:Fe})})]})]})}),(0,P.jsx)(a.Z,{title:Be("documents"),children:(0,P.jsx)(r.Z,{columns:on,dataSource:rn,pagination:!1,loading:Ve})})]}),(0,P.jsxs)(u.Z,{span:8,className:"order_info",children:[!(null===Me||void 0===Me||!Me.username)&&(0,P.jsxs)(a.Z,{title:Be("order.receiver"),children:[(0,P.jsxs)("div",{className:"customer-info",children:[(0,P.jsx)("span",{className:"title",children:Be("name")}),(0,P.jsxs)("span",{className:"description",children:[(0,P.jsx)(q.HHm,{}),null===Me||void 0===Me?void 0:Me.username]})]}),(0,P.jsxs)("div",{className:"customer-info",children:[(0,P.jsx)("span",{className:"title",children:Be("phone")}),(0,P.jsxs)("span",{className:"description",children:[(0,P.jsx)(q.lfG,{}),null===Me||void 0===Me?void 0:Me.phone]})]})]}),2===(null===Me||void 0===Me?void 0:Me.type)&&"delivery"===(null===Me||void 0===Me?void 0:Me.delivery_type)&&(0,P.jsx)(a.Z,{title:Be("tracking.info"),children:(0,P.jsx)($.t,{onSubmit:cn,isSubmitting:dn,initialData:{track_name:null===Me||void 0===Me?void 0:Me.track_name,track_id:null===Me||void 0===Me?void 0:Me.track_id,track_url:null===Me||void 0===Me?void 0:Me.track_url}})}),(0,P.jsx)(a.Z,{title:(0,P.jsxs)(s.Z,{children:[Be("customer.info"),(0,P.jsx)(b.Z,{onClick:function(){return Re((0,S.bL)({url:"users/user/".concat(null===Me||void 0===Me?void 0:Me.user.uuid),id:"user_info",name:Be("user.info")})),void Le("/users/user/".concat(null===Me||void 0===Me?void 0:Me.user.uuid),{state:{user_id:null===Me||void 0===Me?void 0:Me.user.id}})}})]}),children:(0,P.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[Ve?(0,P.jsx)(x.Z.Avatar,{size:64,shape:"square"}):(0,P.jsx)(p.C,{shape:"square",size:64,src:null===Me||void 0===Me||null===(re=Me.user)||void 0===re?void 0:re.img}),(0,P.jsx)("h5",{className:"customer-name",children:Ve?(0,P.jsx)(x.Z.Button,{size:20,style:{width:70}}):(null===Me||void 0===Me||null===(ae=Me.user)||void 0===ae?void 0:ae.firstname)+" "+((null===Me||void 0===Me||null===(ce=Me.user)||void 0===ce?void 0:ce.lastname)||"")}),(0,P.jsxs)("div",{className:"customer-info-detail",children:[(0,P.jsxs)("div",{className:"customer-info",children:[(0,P.jsx)("span",{className:"title",children:Be("phone")}),(0,P.jsxs)("span",{className:"description",children:[(0,P.jsx)(q.lfG,{}),Ve?(0,P.jsx)(x.Z.Button,{size:16}):null!==Me&&void 0!==Me&&null!==(ue=Me.user)&&void 0!==ue&&ue.phone?(0,E.Z)(null===Me||void 0===Me||null===(ve=Me.user)||void 0===ve?void 0:ve.phone):Be("no.phone")]})]}),(0,P.jsxs)("div",{className:"customer-info",children:[(0,P.jsx)("span",{className:"title",children:Be("email")}),(0,P.jsxs)("span",{className:"description",children:[(0,P.jsx)(z.ixJ,{}),Ve?(0,P.jsx)(x.Z.Button,{size:16}):(0,T.Z)(null===Me||void 0===Me||null===(xe=Me.user)||void 0===xe?void 0:xe.email)]})]}),(0,P.jsxs)("div",{className:"customer-info",children:[(0,P.jsx)("span",{className:"title",children:Be("registration.date")}),(0,P.jsxs)("span",{className:"description",children:[(0,P.jsx)(q.yoA,{}),Ve?(0,P.jsx)(x.Z.Button,{size:16}):F()(null===Me||void 0===Me||null===(he=Me.user)||void 0===he?void 0:he.created_at).format("DD-MM-YYYY, HH:mm")]})]}),(0,P.jsxs)("div",{className:"customer-info",children:[(0,P.jsx)("span",{className:"title",children:Be("orders.count")}),(0,P.jsx)("span",{className:"description",children:Ve?(0,P.jsx)(x.Z.Button,{size:16}):(0,P.jsx)(f.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===Me||void 0===Me||null===(me=Me.user)||void 0===me?void 0:me.orders_count)||0})})]}),(0,P.jsxs)("div",{className:"customer-info",children:[(0,P.jsx)("span",{className:"title",children:Be("spent.since.registration")}),(0,P.jsx)("span",{className:"description",children:Ve?(0,P.jsx)(x.Z.Button,{size:16}):(0,P.jsx)(f.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,C.Z)(null===Me||void 0===Me||null===(je=Me.user)||void 0===je?void 0:je.orders_sum_price,null===He||void 0===He?void 0:He.symbol)})})]})]})]})}),(null===Me||void 0===Me?void 0:Me.review)&&!Ve&&(0,P.jsx)(a.Z,{title:Be("messages"),children:(0,P.jsxs)("div",{className:"order-message",children:[(0,P.jsx)("span",{className:"message",children:null===Me||void 0===Me||null===(pe=Me.review)||void 0===pe?void 0:pe.comment}),(0,P.jsx)(s.Z,{className:"w-100 justify-content-end",children:(0,P.jsx)("span",{className:"date",children:F()(null===Me||void 0===Me||null===(fe=Me.review)||void 0===fe?void 0:fe.created_at).format("YYYY-MM-DD HH:mm")})})]})}),(null===Me||void 0===Me?void 0:Me.shop)&&(0,P.jsx)(a.Z,{title:"".concat(Be("shop.details"),": #").concat(null===Me||void 0===Me||null===(Ze=Me.shop)||void 0===Ze?void 0:Ze.id),loading:Ve,children:(0,P.jsxs)(c.Z,{gutter:12,children:[(0,P.jsxs)(u.Z,{span:24,style:{display:"flex",columnGap:"20px",marginBottom:"20px"},children:[(0,P.jsx)("div",{style:{width:"100px",height:"100px",backgroundColor:"#f5f5f5",overflow:"hidden",borderRadius:"10px",position:"relative"},children:(0,P.jsx)(o.Z,{alt:Be("shop.logo"),style:{objectFit:"contain"},src:(null===Me||void 0===Me||null===(ye=Me.shop)||void 0===ye?void 0:ye.logo_img)||"https://via.placeholder.com/150",width:100,height:100,preview:!1})}),(0,P.jsxs)("div",{style:{width:"calc(100% - 100px - 20px)"},children:[(0,P.jsx)("h5",{style:{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(null===Me||void 0===Me||null===(ge=Me.shop)||void 0===ge||null===(be=ge.translation)||void 0===be?void 0:be.title)||"--"}),(0,P.jsx)("p",{children:null!==Me&&void 0!==Me&&null!==(_e=Me.shop)&&void 0!==_e&&_e.open?(0,P.jsx)(t.Z,{color:"green",children:Be("open")}):(0,P.jsx)(t.Z,{color:"red",children:Be("closed")})})]})]}),(0,P.jsxs)(u.Z,{span:24,children:[(null===Me||void 0===Me||null===(ke=Me.shop)||void 0===ke?void 0:ke.phone)&&(0,P.jsxs)("p",{children:[(0,P.jsxs)("strong",{children:[Be("phone"),":"]})," ",null===Me||void 0===Me||null===(Ne=Me.shop)||void 0===Ne?void 0:Ne.phone]}),(null===Me||void 0===Me||null===(we=Me.shop)||void 0===we||null===(Ie=we.translation)||void 0===Ie?void 0:Ie.address)&&(0,P.jsxs)("p",{children:[(0,P.jsxs)("strong",{children:[Be("address"),":"]})," ",null===Me||void 0===Me||null===(Se=Me.shop)||void 0===Se||null===(Ye=Se.translation)||void 0===Ye?void 0:Ye.address]})]})]})})]}),(0,P.jsx)(u.Z,{span:24,children:(0,P.jsxs)(a.Z,{className:"w-100 order-table",title:Be("order.products"),children:[(0,P.jsx)(Z.Z,{}),(0,P.jsx)(r.Z,{ref:Te,scroll:{x:!0},columns:tn,dataSource:(null===(Ce=De.data)||void 0===Ce?void 0:Ce.details)||[],loading:Ve,rowKey:function(e){return e.id},pagination:!1,expandable:{expandedRowRender:function(e){if(null!==e&&void 0!==e&&e.replace_stock){var n=[{title:Be("id"),dataIndex:"id",key:"id",render:function(e,n){var i;return null===n||void 0===n||null===(i=n.replace_stock)||void 0===i?void 0:i.id}},{title:Be("product.name"),dataIndex:"product",key:"product",render:function(e,n){var i,l,d,o,r;return(0,P.jsxs)(s.Z,{direction:"vertical",className:"relative",children:[null===n||void 0===n||null===(i=n.replace_stock)||void 0===i||null===(l=i.product)||void 0===l||null===(d=l.translation)||void 0===d?void 0:d.title,null===n||void 0===n||null===(o=n.replace_stock)||void 0===o||null===(r=o.extras)||void 0===r?void 0:r.map((function(e){var n,i,l;return(0,P.jsxs)(t.Z,{children:[null===(n=e.group)||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title,": ",null===(l=e.value)||void 0===l?void 0:l.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Be("image"),dataIndex:"img",key:"img",render:function(e,n){var i,l;return(0,P.jsx)(o.Z,{src:(0,w.Z)(null===n||void 0===n||null===(i=n.replace_stock)||void 0===i||null===(l=i.product)||void 0===l?void 0:l.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Be("price"),dataIndex:"price",key:"price",render:function(e,n){var i;return(0,C.Z)(null===n||void 0===n||null===(i=n.replace_stock)||void 0===i?void 0:i.price,null===He||void 0===He?void 0:He.symbol)}},{title:Be("quantity"),dataIndex:"replace_quantity",key:"replace_quantity",render:function(e,n){return(0,P.jsx)("span",{children:null===n||void 0===n?void 0:n.replace_quantity})}},{title:Be("discount"),dataIndex:"discount",key:"discount",render:function(e,n){var i,l;return(0,C.Z)(null!==(i=null===n||void 0===n||null===(l=n.replace_stock)||void 0===l?void 0:l.discount)&&void 0!==i?i:0,null===He||void 0===He?void 0:He.symbol)}},{title:Be("tax"),dataIndex:"tax",key:"tax",render:function(e,n){var i;return(0,C.Z)(null===n||void 0===n||null===(i=n.replace_stock)||void 0===i?void 0:i.tax,null===He||void 0===He?void 0:He.symbol)}},{title:Be("total.price"),dataIndex:"total_price",key:"total_price",render:function(e,n){var i;return(0,C.Z)(null===n||void 0===n||null===(i=n.replace_stock)||void 0===i?void 0:i.total_price,null===He||void 0===He?void 0:He.symbol)}}];return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,P.jsx)(y.Z,{style:{padding:"10px",margin:"10px 0 50px 0",border:"2px solid #cad2de",borderRadius:"30%"},rotate:90})}),(0,P.jsx)(r.Z,{columns:n,dataSource:[e],pagination:!1})]})}},expandIcon:function(e){e.expanded;var n=e.onExpand,i=e.record;return(0,P.jsx)(y.Z,{onClick:function(e){return n(i,e)},rotate:90})},defaultExpandedRowKeys:["0"]}}),(0,P.jsxs)(s.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,P.jsxs)("div",{children:[(0,P.jsxs)("span",{children:[Be("delivery.fee"),":"]}),(0,P.jsx)("br",{}),(0,P.jsxs)("span",{children:[Be("order.tax"),":"]}),(0,P.jsx)("br",{}),(0,P.jsxs)("span",{children:[Be("product"),":"]}),(0,P.jsx)("br",{}),(0,P.jsxs)("span",{children:[Be("discount"),":"]}),(0,P.jsx)("br",{}),(0,P.jsxs)("span",{children:[Be("service.fee"),":"]}),(0,P.jsx)("br",{}),(0,P.jsxs)("span",{children:[Be("coupon.price"),":"]}),(0,P.jsx)("br",{}),(0,P.jsxs)("h3",{children:[Be("total.price"),":"]})]}),(0,P.jsxs)("div",{children:[(0,P.jsx)("span",{children:(0,C.Z)(null!==(ze=null===Me||void 0===Me?void 0:Me.delivery_fee)&&void 0!==ze?ze:0,null===He||void 0===He?void 0:He.symbol)}),(0,P.jsx)("br",{}),(0,P.jsx)("span",{children:(0,C.Z)(null===Me||void 0===Me?void 0:Me.tax,null===He||void 0===He?void 0:He.symbol)}),(0,P.jsx)("br",{}),(0,P.jsx)("span",{children:(0,C.Z)(null===Me||void 0===Me?void 0:Me.origin_price,null===He||void 0===He?void 0:He.symbol)}),(0,P.jsx)("br",{}),(0,P.jsx)("span",{children:(0,C.Z)(null===Me||void 0===Me?void 0:Me.total_discount,null===He||void 0===He?void 0:He.symbol)}),(0,P.jsx)("br",{}),(0,P.jsx)("span",{children:(0,C.Z)(null===Me||void 0===Me?void 0:Me.service_fee,null===He||void 0===He?void 0:He.symbol)}),(0,P.jsx)("br",{}),(0,P.jsx)("span",{children:(0,C.Z)(null===Me||void 0===Me?void 0:Me.coupon_price,null===He||void 0===He?void 0:He.symbol)}),(0,P.jsx)("br",{}),(0,P.jsx)("h3",{ref:Ue,children:(0,C.Z)(null===Me||void 0===Me?void 0:Me.total_price,null===He||void 0===He?void 0:He.symbol)})]})]})]})})]}),Ee&&(0,P.jsx)(D.Z,{id:Ee,handleCancel:function(){Oe(null)}}),Je&&(0,P.jsx)(O.Z,{orderId:Fe,handleCancel:function(){return Xe(!1)},transactionDetails:null===Me||void 0===Me?void 0:Me.transaction,fetchOrder:an})]})}},80355:function(e,n,i){var l=i(29439),d=i(84697),s=i(83999),t=i(9274),o=i(59491),r=i(77181),a=i(68197),c=i(59624),u=i(66204),v=i(47313),x=i(24511),h=i(7370),m=i(51282),j=i(58821),p=i(2717),f=i(97421),Z=i(18478),y=i(17649),g=i(66461),b=i(22539),_=i(3394),k=i(57864),N=i(70816),w=i.n(N),I=i(46417),S=s.Z.Step,Y=function(){return(0,I.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,I.jsx)("img",{src:Z,width:"50",alt:"Pin"})})};n.Z=function(e){var n,i,Z,N=e.id,C=e.handleCancel,z=(0,x.$)().t,D=(0,v.useState)(null),H=(0,l.Z)(D,2),q=H[0],M=H[1],B=(0,v.useState)(null),F=(0,l.Z)(B,2),R=F[0],L=F[1],T=(0,v.useState)(null),U=(0,l.Z)(T,2),A=U[0],$=U[1],E=(0,p.v9)((function(e){return e.globalSettings}),p.wU).settings,O=(0,y.Z)(E),P=(0,v.useState)(0),G=(0,l.Z)(P,2),V=G[0],Q=G[1],K=(0,v.useState)({lat:null===O||void 0===O?void 0:O.lat,lng:null===O||void 0===O?void 0:O.lng}),W=(0,l.Z)(K,2),J=W[0],X=W[1],ee=(0,v.useState)([{id:0,name:"new",icon:(0,I.jsx)(g.Z,{})},{id:1,name:"accepted",icon:(0,I.jsx)(j.IQF,{})},{id:2,name:"ready",icon:(0,I.jsx)(b.TkG,{})},{id:3,name:"on_a_way",icon:(0,I.jsx)(_.Akc,{})},{id:4,name:"delivered",icon:(0,I.jsx)(_.kme,{})}]),ne=(0,l.Z)(ee,2),ie=ne[0],le=ne[1];var de=(0,p.v9)((function(e){return e.globalSettings.settings}),p.wU).google_map_key;return(0,v.useEffect)((function(){M(!0),h.Z.getById(N).then((function(e){var n,i,l,d,s,t,o,r=e.data;le("canceled"===r.status?[{id:1,name:"new",icon:(0,I.jsx)(g.Z,{})},{id:5,name:"canceled",icon:(0,I.jsx)(k.SV5,{})}]:ie),Q("canceled"===r.status?1:null===(n=ie.find((function(e){return e.name===r.status})))||void 0===n?void 0:n.id);var a=null!==(i=null!==(l=null!==(d=null===r||void 0===r||null===(s=r.address)||void 0===s?void 0:s.location)&&void 0!==d?d:null===r||void 0===r||null===(t=r.my_address)||void 0===t?void 0:t.location)&&void 0!==l?l:null===r||void 0===r||null===(o=r.delivery_point)||void 0===o?void 0:o.location)&&void 0!==i?i:{latitude:null===O||void 0===O?void 0:O.lat,longitude:null===O||void 0===O?void 0:O.lng};X({lat:Number(null===a||void 0===a?void 0:a.latitude),lng:Number(null===a||void 0===a?void 0:a.longitude)}),$("canceled"===r.status?"error":"success"),L(r)})).finally((function(){M(!1)}))}),[]),(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(t.Z,{visible:!!N,title:z("show.locations"),onCancel:function(){return C()},style:{minWidth:"80vw"},footer:[(0,I.jsx)(o.Z,{type:"default",onClick:C,children:z("cancel")},"cancelBtn")],children:q?(0,I.jsx)(m.Z,{}):(0,I.jsxs)(r.Z,{children:[(0,I.jsx)(s.Z,{current:V,status:A,className:"mb-5",children:null===ie||void 0===ie?void 0:ie.map((function(e,n){return(0,I.jsx)(S,{title:z(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+n)}))}),(0,I.jsxs)(a.Z,{gutter:12,children:[(0,I.jsxs)(c.Z,{span:12,children:[(0,I.jsxs)("h3",{children:[z("order.id")," #",null===R||void 0===R?void 0:R.id]}),(0,I.jsxs)("p",{children:[(0,I.jsx)(j.D73,{})," ",w()(null===R||void 0===R?void 0:R.created_at).format("YYYY-MM-DD HH:mm")]}),(0,I.jsxs)("p",{children:[z("scheduled.at")," ",null===R||void 0===R?void 0:R.delivery_date]})]}),(0,I.jsxs)(c.Z,{span:12,children:[(0,I.jsxs)("p",{children:[z("status")," ","new"===(null===R||void 0===R?void 0:R.status)?(0,I.jsx)(u.Z,{color:"blue",children:z(null===R||void 0===R?void 0:R.status)}):"canceled"===(null===R||void 0===R?void 0:R.status)?(0,I.jsx)(u.Z,{color:"error",children:z(null===R||void 0===R?void 0:R.status)}):(0,I.jsx)(u.Z,{color:"cyan",children:z(null===R||void 0===R?void 0:R.status)})]}),(0,I.jsxs)("p",{children:[z("payment.method")," ",(0,I.jsx)("strong",{children:null===R||void 0===R||null===(n=R.transaction)||void 0===n||null===(i=n.payment_system)||void 0===i?void 0:i.tag})]}),(0,I.jsxs)("p",{children:[z("order.type")," ",(0,I.jsx)("strong",{children:null===R||void 0===R?void 0:R.delivery_type})]}),(0,I.jsxs)("p",{children:[z("payment.type")," ",(0,I.jsx)("strong",{children:null===R||void 0===R||null===(Z=R.transaction)||void 0===Z?void 0:Z.status})]})]}),(0,I.jsxs)(c.Z,{span:24,className:"mt-5",children:[(0,I.jsx)("h4",{children:z("map")}),(0,I.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,I.jsx)(d.ZP,{bootstrapURLKeys:{key:de?f.kr:de},defaultZoom:10,center:null!==J&&void 0!==J?J:O,options:{fullscreenControl:!1},children:(0,I.jsx)(Y,{lat:null===J||void 0===J?void 0:J.lat,lng:null===J||void 0===J?void 0:J.lng})})})]})]})]})})})}},60861:function(e,n,i){i.d(n,{Z:function(){return j}});var l=i(29439),d=i(47313),s=i(10976),t=i(9274),o=i(59491),r=i(68197),a=i(59624),c=i(74294),u=i(24511),v=i(23560),x=i(1003),h=i(46417),m=["paid","canceled"];function j(e){var n=e.transactionDetails,i=e.handleCancel,j=e.fetchOrder,p=e.orderId,f=s.Z.useForm(),Z=(0,l.Z)(f,1)[0],y=(0,u.$)().t,g=(0,d.useState)(!1),b=(0,l.Z)(g,2),_=b[0],k=b[1];return(0,h.jsx)(t.Z,{visible:!!n,title:y("transaction.status"),closable:!1,footer:[(0,h.jsx)(o.Z,{type:"primary",onClick:function(){return Z.submit()},loading:_,children:y("save")},"save-form"),(0,h.jsx)(o.Z,{type:"default",onClick:i,children:y("cancel")},"cansel-modal")],children:(0,h.jsx)(s.Z,{form:Z,layout:"vertical",onFinish:function(e){k(!0),x.Z.updateStatus(p,e).then((function(){i(),j()})).catch((function(e){return v.Am.error(e.message)})).finally((function(){return k(!1)}))},initialValues:{status:n.status},children:(0,h.jsx)(r.Z,{gutter:12,children:(0,h.jsx)(a.Z,{span:24,children:(0,h.jsx)(s.Z.Item,{label:y("status"),name:"status",rules:[{validator:function(e,n){return"paid"===n||"canceled"===n?Promise.resolve():Promise.reject(new Error(y("required")))}}],children:(0,h.jsx)(c.Z,{children:m.map((function(e,n){return(0,h.jsx)(c.Z.Option,{value:e,children:y(e)},n)}))})})})})})})}},83685:function(e,n,i){i.d(n,{Z:function(){return r}});var l=i(1413),d=i(47313),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},t=i(17469),o=function(e,n){return d.createElement(t.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:n,icon:s}))};o.displayName="SwapOutlined";var r=d.forwardRef(o)},18478:function(e,n,i){e.exports=i.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);