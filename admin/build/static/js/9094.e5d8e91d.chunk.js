"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9094],{52008:(e,s,t)=>{t.d(s,{Z:()=>a});t(47313);const a=t.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},19094:(e,s,t)=>{t.r(s),t.d(s,{default:()=>z});var a=t(47313),n=t(77181),l=t(68197),c=t(59624),i=t(41068),r=t(59491),d=t(72652),o=t(34344);const h={getAll:e=>o.Z.get("dashboard/seller/subscriptions",{params:e}),attach:(e,s)=>o.Z.post("dashboard/seller/subscriptions/".concat(e,"/attach"),s),transactionCreate:(e,s)=>o.Z.post("payments/subscription/".concat(e,"/transactions"),s)};var u=t(2717),m=t(24511),p=t(9274),v=t(42111),x=t(51282),j=t(23560),f=t(73339),y=t(52008),g=t(26672),b=t(92709),Z=t(57864),w=t(46417);const N=["wallet"];function k(e){var s;let{modal:t,handleCancel:i}=e;const{t:d}=(0,m.$)(),o=(0,u.I0)(),{seller:k}=(0,u.v9)((e=>e.myShop.myShop),u.wU),[C,S]=(0,a.useState)(!1),[z,A]=(0,a.useState)({}),{payments:U,loading:E}=(0,u.v9)((e=>e.payment),u.wU);(0,a.useEffect)((()=>{o((0,v.dA)({}))}),[]);const I=e=>{switch(e){case"wallet":default:return(0,w.jsx)(Z.dk2,{size:80});case"paypal":return(0,w.jsx)(g.kD0,{size:80});case"stripe":return(0,w.jsx)(b.K6C,{size:80});case"razorpay":return(0,w.jsx)(b.r98,{size:80});case"paystack":return(0,w.jsx)("img",{src:y.Z,alt:"img",width:"80",height:"80"})}};return(0,w.jsx)(p.Z,{visible:!!t,title:d("purchase.subscription"),onCancel:i,footer:[(0,w.jsx)(r.Z,{type:"primary",onClick:()=>{var e;z.id?"wallet"===z.tag&&(null===k||void 0===k||null===(e=k.wallet)||void 0===e?void 0:e.price)<t.price?j.Am.warning(d("insufficient.balance")):(S(!0),h.attach(t.id).then((e=>{let{data:s}=e;return function(e){const s={payment_sys_id:z.id};h.transactionCreate(e,s).then((()=>{i(),j.Am.success(d("successfully.purchased")),o((0,f.S)({}))})).finally((()=>S(!1)))}(s.id)})).error((()=>S(!1)))):j.Am.warning(d("please.select.payment.type"))},loading:C,children:d("save")},"save-btn"),(0,w.jsx)(r.Z,{type:"default",onClick:i,children:d("cancel")},"cancel-btn")],children:E?(0,w.jsx)(x.Z,{}):(0,w.jsx)(l.Z,{gutter:12,children:null===U||void 0===U||null===(s=U.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.tag))))||void 0===s?void 0:s.map(((e,s)=>(0,w.jsx)(c.Z,{span:8,children:(0,w.jsxs)(n.Z,{className:"payment-card ".concat((null===z||void 0===z?void 0:z.tag)===e.tag?"active":""),onClick:()=>{return s=e,void(N.includes(s.tag)?A(s):j.Am.warning(d("cannot.work.demo")));var s},children:[(0,w.jsx)("div",{className:"payment-icon",children:I(null===e||void 0===e?void 0:e.tag)}),(0,w.jsx)("div",{className:"font-weight-bold mt-2",children:d(null===e||void 0===e?void 0:e.tag)})]})},s)))})})}var C=t(90954);const S=[];function z(){const{t:e}=(0,m.$)(),{defaultCurrency:s}=(0,u.v9)((e=>e.currency),u.wU),{myShop:t}=(0,u.v9)((e=>e.myShop),u.wU),[o,p]=(0,a.useState)(null),[v,x]=(0,a.useState)(!1),[j,f]=(0,a.useState)([]),y=j.length,{activeMenu:g}=(0,u.v9)((e=>e.menu),u.wU),b=(0,u.I0)(),Z=()=>{x(!0),h.getAll().then((e=>{f(e.data)})).finally((()=>{x(!1),b((0,C.A_)(g))}))};return(0,a.useEffect)((()=>{g.refetch&&Z()}),[g.refetch]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(n.Z,{className:"h-100",children:v?(0,w.jsx)(c.Z,{className:"ant-col-spin d-flex justify-content-center",children:(0,w.jsx)(d.Z,{size:"large"})}):(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"text-center mb-4",children:[(0,w.jsx)("h2",{className:"font-weight-semibold",children:"Pick a base plan"}),(0,w.jsx)(l.Z,{type:"flex",justify:"center",children:(0,w.jsx)(c.Z,{sm:24,md:12,lg:8,children:(0,w.jsx)("p",{children:"Space, the final frontier. These are the voyages of the Starship Enterprise. Its five-year mission."})})})]}),(0,w.jsx)(l.Z,{children:j.map(((a,n)=>{var l,d;return(0,w.jsx)(c.Z,{span:6,className:y===n+1?"":"border-right",children:(0,w.jsx)(i.Z.Ribbon,{text:e("active"),color:"red",className:(null===t||void 0===t||null===(l=t.subscription)||void 0===l||null===(d=l.subscription)||void 0===d?void 0:d.id)===a.id?"":"d-none",children:(0,w.jsxs)("div",{className:"p-3",children:[(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsxs)("h1",{className:"display-4 mt-4",children:[(0,w.jsx)("span",{className:"font-size-md d-inline-block mr-1",style:{transform:"translate(0px, -17px)"},children:null===s||void 0===s?void 0:s.symbol}),(0,w.jsx)("span",{children:a.price})]}),(0,w.jsxs)("p",{className:"mb-0 text-lowercase",children:[a.month," ",e("month")]})]}),(0,w.jsx)("div",{className:"mt-4",children:(0,w.jsx)("h2",{className:"text-center font-weight-semibold",children:a.type})}),(0,w.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,w.jsx)("div",{children:null===S||void 0===S?void 0:S.map(((e,s)=>(0,w.jsxs)("p",{children:[(0,w.jsx)(i.Z,{color:"blue"}),(0,w.jsx)("span",{children:e})]},"pricing-feature-".concat(s))))})}),(0,w.jsx)("div",{className:"mt-3 text-center",children:(0,w.jsx)(r.Z,{type:"default",onClick:()=>p(a),children:e("purchase")})})]})})},"price-column-".concat(n))}))})]})}),o&&(0,w.jsx)(k,{modal:o,handleCancel:()=>p(null),refetch:Z})]})}}}]);