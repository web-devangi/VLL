"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5081],{52008:(e,l,t)=>{t.d(l,{Z:()=>n});t(47313);const n=t.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},89281:(e,l,t)=>{t.d(l,{h:()=>d});var n=t(47313),i=t(12279),a=t.n(i),o=t(74294),s=t(72652),r=t(46417);const d=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:i,refetchOptions:d=!1,...c}=e;const[u,v]=(0,n.useState)(!1),[h,p]=(0,n.useState)([]),f=(0,n.useMemo)((()=>a()((e=>{p([]),v(!0),l(e).then((e=>{p(e),v(!1)}))}),t)),[l,t]);return(0,r.jsx)(o.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:f,onClear:()=>{f(""),i&&i()},notFoundContent:u?(0,r.jsx)(s.Z,{size:"small"}):"no results",...c,options:h,onFocus:()=>{h.length&&!d||f("")}})}},13945:(e,l,t)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{Z:()=>n})},84017:(e,l,t)=>{function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const n=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(n," ").concat(l):"".concat(l," ").concat(n)}t.d(l,{Z:()=>n})},14637:(e,l,t)=>{t.d(l,{Z:()=>a});t(47313);var n=t(77181),i=t(46417);function a(e){let{title:l="Orders",value:t=0,color:a="grey",onClick:o}=e;return(0,i.jsx)(n.Z,{className:"statistics-card",hoverable:!!o,onClick:o,children:(0,i.jsxs)("div",{className:"card-wrapper",children:[(0,i.jsx)("div",{className:"space"}),(0,i.jsx)("div",{className:"content",children:(0,i.jsx)("h1",{className:"number",children:t})}),(0,i.jsx)("span",{className:"highlighter ".concat(a)}),l&&(0,i.jsx)("h4",{className:"title",children:l})]})})}},85081:(e,l,t)=>{t.r(l),t.d(l,{default:()=>F});var n=t(47313),i=t(99096),a=t(77181),o=t(45705),s=t(59491),r=t(68197),d=t(59624),c=t(78508),u=t(97890),v=t(2717),h=t(90954),p=t(24511),f=t(80314),x=t(13945),m=t(84017),y=t(89281),_=t(49986),j=t(23560),Z=t(70816),g=t.n(Z),b=t(53149),w=t(10924),k=t(71122),C=t(9274),Y=t(72652),M=t(52008),N=t(26672),S=t(92709),D=t(57864),z=t(20637),I=t(58821),A=t(46417);function P(e){let{open:l,onCancel:t,onConfirm:i,isPaying:o}=e;const{t:c}=(0,p.$)(),[u,v]=(0,n.useState)({}),[h,f]=(0,n.useState)(null),[x,m]=(0,n.useState)(!1);(0,n.useEffect)((()=>{!async function(){m(!0),z.Z.getAll().then((e=>{let{data:l}=e;return f(l.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))})).finally((()=>{m(!1)}))}()}),[]);const y=e=>{switch(e){case"wallet":return(0,A.jsx)(D.dk2,{size:80});case"paypal":return(0,A.jsx)(N.kD0,{size:80});case"stripe":return(0,A.jsx)(S.K6C,{size:80});case"razorpay":return(0,A.jsx)(S.r98,{size:80});case"paystack":return(0,A.jsx)("img",{src:M.Z,alt:"img",width:"80",height:"80"});default:return(0,A.jsx)(I.HsN,{size:80})}};return(0,A.jsx)(C.Z,{visible:l,title:c("pay.to.partner"),onCancel:t,footer:[(0,A.jsx)(s.Z,{type:"primary",disabled:x||!u.value,loading:o,onClick:()=>{u.value?i(u.value):j.Am.warning(c("please.select.payment.type"))},children:c("confirm")},"save-btn"),(0,A.jsx)(s.Z,{type:"default",onClick:t,children:c("cancel")},"cancel-btn")],children:(0,A.jsx)(Y.Z,{spinning:x,children:(0,A.jsx)(r.Z,{gutter:12,children:null===h||void 0===h?void 0:h.map(((e,l)=>"cash"===e.label||"wallet"===e.label?(0,A.jsx)(d.Z,{span:12,children:(0,A.jsxs)(a.Z,{style:{display:"flex",justifyContent:"center"},className:"payment-card ".concat((null===u||void 0===u?void 0:u.label)===e.label?"active":""),onClick:()=>{v(e)},children:[(0,A.jsx)("div",{className:"payment-icon",children:y(null===e||void 0===e?void 0:e.label)}),(0,A.jsx)("div",{className:"font-weight-bold mt-2 text-center",children:c(null===e||void 0===e?void 0:e.label)})]})},l):null))})})})}var O=t(14637);const{RangePicker:E}=i.Z;function F(){var e,l,t,i,Z,C,Y;const{type:M}=(0,u.UO)(),N=(0,v.I0)(),S=(0,u.s0)(),{t:D}=(0,p.$)(),{defaultCurrency:z}=(0,v.v9)((e=>e.currency),v.wU),[I,F]=(0,n.useState)(!1),U=[{title:D("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0,render:e=>(0,A.jsxs)("span",{className:"text-hover",onClick:()=>(e=>{N((0,h.bL)({url:"order/details/".concat(e),id:"order_details",name:D("order.details")})),S("/order/details/".concat(e))})(e),children:["#",e]})},{title:D(M),is_show:!0,dataIndex:"user",key:"user",render:(e,l)=>{var t;const n="seller"===M?null===l||void 0===l||null===(t=l.shop)||void 0===t?void 0:t.seller:l.deliveryman;return(0,A.jsxs)("div",{children:[null===n||void 0===n?void 0:n.firstname," ",(null===n||void 0===n?void 0:n.lastname)||""]})}},{title:D("order.total_price"),is_show:!0,dataIndex:"total_price",key:"total_price",render:(e,l)=>{var t,n;const i=null===(t=l.transaction)||void 0===t?void 0:t.status;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{children:(0,m.Z)(e,z.symbol)}),(0,A.jsx)("br",{}),(0,A.jsx)("span",{className:"progress"===i?"text-primary":"paid"===i?"text-success":"rejected"===i?"text-danger":"text-info",children:null===(n=l.transaction)||void 0===n?void 0:n.status})]})}},..."seller"===M?[{title:D("coupon.price"),is_show:!0,dataIndex:"coupon_price",key:"coupon_price",render:e=>(0,m.Z)(e)}]:[],..."seller"===M?[{title:D("total.cashback"),is_show:!0,dataIndex:"point_histories",key:"point_histories",render:e=>{var l;return(0,m.Z)(null===e||void 0===e||null===(l=e[0])||void 0===l?void 0:l.price)}}]:[],{title:D("delivery.fee"),is_show:!0,dataIndex:"delivery_fee",key:"delivery_fee",render:e=>(0,m.Z)(e)},..."seller"===M?[{title:D("service.fee"),is_show:!0,dataIndex:"service_fee",key:"service_fee",render:(e,l)=>(0,m.Z)((l.service_fee||0)+(l.commission_fee||0))}]:[],..."seller"===M?[{title:D("seller.fee"),is_show:!0,dataIndex:"seller_fee",key:"seller_fee",render:e=>(0,m.Z)(e)}]:[],{title:D("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return D(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}}],{activeMenu:$}=(0,v.v9)((e=>e.menu),v.wU),[K,R]=(0,n.useState)(null),[T,H]=(0,n.useState)(!1),[L,V]=(0,n.useState)(g()().subtract(1,"month"),g()()),{list:q,loading:B,params:G,meta:J}=(0,v.v9)((e=>e.paymentToPartners),v.wU),Q=$.data,W={search:null===Q||void 0===Q?void 0:Q.search,sort:null===Q||void 0===Q?void 0:Q.sort,column:null===Q||void 0===Q?void 0:Q.column,perPage:null===Q||void 0===Q?void 0:Q.perPage,page:null===Q||void 0===Q?void 0:Q.page,user_id:null===Q||void 0===Q?void 0:Q.user_id,shop_id:null!==(null===(e=$.data)||void 0===e?void 0:e.shop_id)?null===(l=$.data)||void 0===l?void 0:l.shop_id:null,date_from:Array.isArray(L)?null===(t=L[0])||void 0===t?void 0:t.format("YYYY-MM-DD"):g()().subtract(1,"month").format("YYYY-MM-DD"),date_to:Array.isArray(L)?null===(i=L[1])||void 0===i?void 0:i.format("YYYY-MM-DD"):g()().format("YYYY-MM-DD"),type:M};(0,f.Z)((()=>{N((0,w.EZ)(W))}),[Q,L,M]);const X=(e,l)=>{N((0,h.nc)({activeMenu:$,data:{...Q,[l]:e}}))};(0,n.useEffect)((()=>{null!==$&&void 0!==$&&$.refetch&&(N((0,w.EZ)(W)),N((0,h.A_)($)))}),[null===$||void 0===$?void 0:$.refetch]);const ee={selectedRowKeys:K,onChange:e=>{R(e)}};return(0,n.useEffect)((()=>()=>{N((0,h.nc)({activeMenu:$,data:{}}))}),[]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(a.Z,{children:(0,A.jsxs)("div",{className:"flex justify-content-space-between",children:[(0,A.jsxs)(o.Z,{wrap:!0,className:"order-filter",style:{flex:1,width:"100%"},children:[(0,A.jsx)(y.h,{placeholder:D("select.shop"),fetchOptions:async function(e){const l={search:e,status:"approved"};return b.Z.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>{var l;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id}}))}))},style:{width:"100%"},onSelect:e=>X(e.value,"shop_id"),onDeselect:()=>X(null,"shop_id"),allowClear:!0,value:null===Q||void 0===Q?void 0:Q.shop_id}),(0,A.jsx)(y.h,{placeholder:D("select.user"),fetchOptions:async function(e){const l={search:e,perPage:10,role:M};return _.Z.search(l).then((e=>{let{data:l}=e;return l.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname),value:e.id})))}))},onSelect:e=>X(e.value,"user_id"),onDeselect:()=>X(null,"user_id"),style:{width:"100%"},value:null===Q||void 0===Q?void 0:Q.user_id}),(0,A.jsx)(E,{value:L,onChange:e=>{X((l=>{var t,n;return{...l,date_from:null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.format("YYYY-MM-DD"),date_to:null===e||void 0===e||null===(n=e[1])||void 0===n?void 0:n.format("YYYY-MM-DD")}})),V(e)},disabledDate:e=>e&&e>g()().endOf("day"),style:{width:"100%"}})]}),(0,A.jsx)(s.Z,{type:"primary",disabled:!K||0===K.length,onClick:()=>F(!0),children:D("pay")})]})}),(0,A.jsx)(a.Z,{children:(0,A.jsxs)(r.Z,{gutter:16,className:"mt-3",children:[(0,A.jsx)(d.Z,{flex:"0 0 25%",children:(0,A.jsx)(O.Z,{title:D("commission.fee"),value:(0,m.Z)(null===q||void 0===q?void 0:q.total_commission_fee,null===z||void 0===z?void 0:z.symbol),color:"purple"})}),(0,A.jsx)(d.Z,{flex:"0 0 25%",children:(0,A.jsx)(O.Z,{title:D("coupon"),value:(0,m.Z)(null===q||void 0===q?void 0:q.total_coupon,null===z||void 0===z?void 0:z.symbol),color:"red"})}),(0,A.jsx)(d.Z,{flex:"0 0 25%",children:(0,A.jsx)(O.Z,{title:D("delivery.fee"),value:(0,m.Z)(null!==q&&void 0!==q&&q.total_delivery_fee?Math.trunc(null===q||void 0===q?void 0:q.total_delivery_fee):0,null===z||void 0===z?void 0:z.symbol),color:"green"})}),(0,A.jsx)(d.Z,{flex:"0 0 25%",children:(0,A.jsx)(O.Z,{title:D("point.history"),value:(0,m.Z)(null!==q&&void 0!==q&&q.total_point_history?Math.trunc(null===q||void 0===q?void 0:q.total_point_history):0,null===z||void 0===z?void 0:z.symbol),color:"purple"})}),(0,A.jsx)(d.Z,{flex:"0 0 25%",children:(0,A.jsx)(O.Z,{title:D("price"),value:(0,m.Z)(null!==q&&void 0!==q&&q.total_price?Math.trunc(null===q||void 0===q?void 0:q.total_price):0,null===z||void 0===z?void 0:z.symbol),color:"red"})}),(0,A.jsx)(d.Z,{flex:"0 0 25%",children:(0,A.jsx)(O.Z,{title:D("seller.fee"),value:(0,m.Z)(null!==q&&void 0!==q&&q.total_seller_fee?Math.trunc(null===q||void 0===q?void 0:q.total_seller_fee):0,null===z||void 0===z?void 0:z.symbol),color:"purple"})}),(0,A.jsx)(d.Z,{flex:"0 0 25%",children:(0,A.jsx)(O.Z,{title:D("service.fee"),value:(0,m.Z)(null!==q&&void 0!==q&&q.total_service_fee?Math.trunc(null===q||void 0===q?void 0:q.total_service_fee):0,null===z||void 0===z?void 0:z.symbol),color:"red"})}),(0,A.jsx)(d.Z,{flex:"0 0 25%",children:(0,A.jsx)(O.Z,{title:D("tax"),value:(0,m.Z)(null!==q&&void 0!==q&&q.total_tax?Math.trunc(null===q||void 0===q?void 0:q.total_tax):0,null===z||void 0===z?void 0:z.symbol),color:"green"})})]})}),(0,A.jsx)(a.Z,{children:(0,A.jsx)(c.Z,{scroll:{x:!0},rowSelection:ee,columns:null===U||void 0===U?void 0:U.filter((e=>e.is_show)),dataSource:null===q||void 0===q?void 0:q.data,loading:B,pagination:{pageSize:G.perPage,page:(null===(Z=$.data)||void 0===Z?void 0:Z.page)||1,total:null===J||void 0===J?void 0:J.total,defaultCurrent:null===(C=$.data)||void 0===C?void 0:C.page,current:null===(Y=$.data)||void 0===Y?void 0:Y.page},rowKey:e=>null===e||void 0===e?void 0:e.id,onChange:function(e,l,t){const{pageSize:n,current:i}=e,{field:a,order:o}=t,s=(0,x.Z)(o);N((0,h.nc)({activeMenu:$,data:{...Q,perPage:n,page:i,column:a,sort:s}}))}})}),I&&(0,A.jsx)(P,{open:I,onCancel:()=>{F(!1),R(null)},onConfirm:e=>(e=>{H(!0);const l={data:K,type:M,payment_id:e};k.Z.pay(l).then((()=>{j.Am.success(D("successfully.payed")),N((0,w.EZ)(W))})).finally((()=>{R(null),H(!1),F(!1)}))})(e),isPaying:T})]})}}}]);