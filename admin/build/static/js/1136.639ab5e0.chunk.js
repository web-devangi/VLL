"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1136],{55940:(e,l,t)=>{t.d(l,{Z:()=>u});t(47313);var n=t(59491),a=t(47515),s=t(23560),o=t(24511),r=t(79492),i=t(46417);function u(e){let{size:l="",onClick:t,type:u="default",...c}=e;const{t:d}=(0,o.$)(),{isDemo:v}=(0,r.Z)();return(0,i.jsx)(n.Z,{size:l,icon:(0,i.jsx)(a.Z,{}),onClick:e=>{v?s.Am.warning(d("cannot.work.demo")):t(e)},type:u,...c})}},53233:(e,l,t)=>{t.d(l,{Z:()=>m});var n=t(47313),a=t(56140),s=t(67251),o=t(45705),r=t(86345),i=t(78267),u=t(37388),c=t(59491),d=t(99587),v=t(24511),p=t(46417);const{Text:h}=a.Z,m=e=>{let{columns:l=[],setColumns:t,style:a,size:m="",iconOnly:x}=e;const{t:g}=(0,v.$)(),[y,f]=(0,n.useState)(!1),Z=(0,p.jsx)(s.Z,{children:null===l||void 0===l?void 0:l.map(((e,n)=>(0,p.jsx)(s.Z.Item,{children:(0,p.jsxs)(o.Z,{className:"d-flex justify-content-between",children:[(0,p.jsx)(h,{children:e.title}),(0,p.jsx)(r.Z,{defaultChecked:!0,onClick:()=>function(e){const n=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,p.jsx)(i.Z,{overlay:Z,trigger:["click"],onVisibleChange:e=>{f(e)},visible:y,children:(0,p.jsx)(u.Z,{title:g("change.columns"),children:(0,p.jsx)(c.Z,{style:{...a},size:m,icon:(0,p.jsx)(d.Z,{}),children:x?null:g("Columns")})})})}},49655:(e,l,t)=>{t.d(l,{_:()=>u});var n=t(47313),a=t(12279),s=t.n(a),o=t(74294),r=t(72652),i=t(46417);const u=e=>{let{fetchOptions:l,debounceTimeout:t=400,hasMore:a,...u}=e;const[c,d]=(0,n.useState)(!1),[v,p]=(0,n.useState)([]),[h,m]=(0,n.useState)(!1),[x,g]=(0,n.useState)(null),[y,f]=(0,n.useState)(1),Z=(0,n.useMemo)((()=>s()((e=>{p([]),g(e),d(!0),l({search:e}).then((e=>{p(e),f(2),d(!1)})).finally((()=>m(!1)))}),t)),[l,t,y]);return(0,i.jsxs)(o.Z,{showSearch:!0,allowClear:!0,onPopupScroll:async e=>{const t=e.target;h||t.scrollTop+t.offsetHeight!==t.scrollHeight||a&&(m(!0),t.scrollTo(0,t.scrollHeight),l({search:x,page:y}).then((e=>{f((e=>e+1)),p([...v,...e])})).finally((()=>m(!1))))},labelInValue:!0,filterOption:!1,onSearch:Z,notFoundContent:c?(0,i.jsx)(r.Z,{size:"small"}):"no results",onFocus:()=>{v.length||Z("")},...u,children:[v.map(((e,l)=>(0,i.jsx)(o.Z.Option,{value:e.value,children:e.label},l))),h&&(0,i.jsx)(o.Z.Option,{children:(0,i.jsx)(r.Z,{size:"small"})})]})}},89281:(e,l,t)=>{t.d(l,{h:()=>u});var n=t(47313),a=t(12279),s=t.n(a),o=t(74294),r=t(72652),i=t(46417);const u=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:a,refetchOptions:u=!1,...c}=e;const[d,v]=(0,n.useState)(!1),[p,h]=(0,n.useState)([]),m=(0,n.useMemo)((()=>s()((e=>{h([]),v(!0),l(e).then((e=>{h(e),v(!1)}))}),t)),[l,t]);return(0,i.jsx)(o.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),a&&a()},notFoundContent:d?(0,i.jsx)(r.Z,{size:"small"}):"no results",...c,options:p,onFocus:()=>{p.length&&!u||m("")}})}},81136:(e,l,t)=>{t.r(l),t.d(l,{default:()=>$});var n=t(47313),a=t(45705),s=t(26824),o=t(59491),r=t(77181),i=t(78508),u=t(12019),c=t(47515),d=t(55768),v=t(23560),p=t(24511),h=t(2717),m=t(94311),x=t(13966),g=t(10976),y=t(66672),f=t(9274),Z=t(8922),j=t(20503),C=t(8550),b=t(89281),w=t(46417);function k(e){let{modal:l,handleCancel:t,onSuccess:a,groupId:s}=e;const[r]=g.Z.useForm(),{t:i}=(0,p.$)(),u=(0,h.I0)(),[c,d]=(0,n.useState)(!1),[k,S]=(0,n.useState)("text"),[_,V]=(0,n.useState)(null),[z,H]=(0,n.useState)("");(0,n.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){var e,t,n;S(l.group.type);const a={...l,property_group_id:{label:null===l||void 0===l||null===(e=l.group)||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===l||void 0===l||null===(n=l.group)||void 0===n?void 0:n.id},value:l.value};switch(l.group.type){case"color":H(l.value);break;case"image":V((0,C.Z)(l.value))}r.setFieldsValue(a)}s&&r.setFieldsValue({property_group_id:{value:s}})}),[l,s]);function I(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,w.jsx)(f.Z,{title:null!==l&&void 0!==l&&l.id?i("edit.property"):i("add.property"),visible:!!l,onCancel:t,footer:[(0,w.jsx)(o.Z,{type:"primary",onClick:()=>r.submit(),loading:c,children:i("save")}),(0,w.jsx)(o.Z,{type:"default",onClick:t,children:i("cancel")})],children:(0,w.jsxs)(g.Z,{name:"property-form",layout:"vertical",form:r,onFinish:e=>{var n;const s={property_group_id:null===e||void 0===e||null===(n=e.property_group_id)||void 0===n?void 0:n.value,value:I(k,e.value)};null!==l&&void 0!==l&&l.id?((e,l)=>{d(!0),x.Z.updateValue(e,l).then((()=>{v.Am.success(i("successfully.updated")),t(),u((0,m.$v)())})).finally((()=>d(!1)))})(l.id,s):(e=>{d(!0),x.Z.createValue(e).then((()=>{v.Am.success(i("successfully.created")),t(),u((0,m.$v)()),a&&a()})).finally((()=>d(!1)))})(s)},children:[(0,w.jsx)(g.Z.Item,{name:"property_group_id",label:i("property.group"),hidden:!!s,rules:[{required:!0,message:""}],children:(0,w.jsx)(b.h,{fetchOptions:async function(e){const l={perPage:10,active:1,search:e};return x.Z.getAllGroups(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,key:null===e||void 0===e?void 0:e.id}}))}))}})}),(0,w.jsx)(g.Z.Item,{name:"value",label:i("value"),rules:[{required:!0,message:""}],children:(e=>{switch(e){case"color":return(0,w.jsx)(Z.xS,{onChangeComplete:e=>H(e.hex),color:z,disableAlpha:!0});case"text":return(0,w.jsx)(y.Z,{placeholder:i("enter.extra.value")});case"image":return(0,w.jsx)(j.Z,{type:"property",image:_,setImage:V,form:r,name:"value"});default:return""}})(k)})]})})}function S(e){let{id:l,loading:t,handleClose:n,text:a,click:s}=e;const{t:r}=(0,p.$)();return(0,w.jsxs)(f.Z,{closable:!1,visible:!!l,footer:null,centered:!0,children:[(0,w.jsx)("p",{children:a}),(0,w.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,w.jsx)(o.Z,{type:"primary",className:"mr-2",onClick:s,loading:t,children:r("yes")}),(0,w.jsx)(o.Z,{onClick:n,children:r("no")})]})]})}var _=t(55940),V=t(97421),z=t(90954),H=t(53233),I=t(49655),O=t(80314);function $(){var e;const{t:l}=(0,p.$)(),t=(0,h.I0)(),{activeMenu:g}=(0,h.v9)((e=>e.menu),h.wU),{propertyGroups:y}=(0,h.v9)((e=>e.propertyGroup),h.wU),{propertyValues:f,loading:Z}=(0,h.v9)((e=>e.propertyValue),h.wU),[j,C]=(0,n.useState)(null),[b,$]=(0,n.useState)(null),[M,A]=(0,n.useState)(!1),[F,N]=(0,n.useState)([{title:l("id"),dataIndex:"id",key:"id",is_show:!0},{title:l("title"),dataIndex:"group",key:"group",is_show:!0,render:e=>{var l;return null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title}},{title:l("value"),dataIndex:"value",key:"value",is_show:!0,render:(e,l)=>(0,w.jsxs)(a.Z,{className:"extras",children:["color"===l.group.type?(0,w.jsx)("div",{className:"extra-color-wrapper-contain",style:{backgroundColor:l.value}}):null,"image"===l.group.type?(0,w.jsx)(s.Z,{width:100,src:V.bV+l.value,className:"borderRadius"}):null,"image"===l.group.type?null:(0,w.jsx)("span",{children:l.value})]})},{title:l("options"),is_show:!0,render:e=>(0,w.jsxs)(a.Z,{children:[(0,w.jsx)(o.Z,{type:"primary",icon:(0,w.jsx)(u.Z,{}),onClick:()=>$(e)}),(0,w.jsx)(_.Z,{type:"primary",danger:!0,icon:(0,w.jsx)(c.Z,{}),onClick:()=>C([e.id])})]})}]);(0,O.Z)((()=>{var e;t((0,m.$v)({group_id:null===g||void 0===g||null===(e=g.data)||void 0===e?void 0:e.group_id}))}),[g.data]),(0,n.useEffect)((()=>{g.refetch&&(t((0,m.$v)()),t((0,z.A_)(g)))}),[g.refetch]);return(0,w.jsxs)(r.Z,{title:l("property.value"),extra:(0,w.jsxs)(a.Z,{wrap:!0,children:[(0,w.jsx)(I._,{placeholder:l("select.group"),fetchOptions:async function(e){let{search:l,page:t}=e;const n={search:0===(null===l||void 0===l?void 0:l.length)?void 0:l,page:t};return x.Z.getAllGroups(n).then((e=>e.data.map((e=>{var l;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id}}))))},loading:Z,style:{minWidth:180},onChange:e=>(e=>{const l=g.data;t((0,z.nc)({activeMenu:g,data:{...l,...e}}))})({group_id:null===e||void 0===e?void 0:e.value}),value:null===(e=g.data)||void 0===e?void 0:e.group_id}),(0,w.jsx)(o.Z,{type:"primary",icon:(0,w.jsx)(d.Z,{}),onClick:()=>$({}),children:l("add.property")}),(0,w.jsx)(H.Z,{columns:F,setColumns:N})]}),children:[(0,w.jsx)(i.Z,{scroll:{x:!0},loading:Z,columns:null===F||void 0===F?void 0:F.filter((e=>e.is_show)),dataSource:f,rowKey:e=>e.id,pagination:!1}),b&&(0,w.jsx)(k,{modal:b,handleCancel:()=>$(null)}),j&&(0,w.jsx)(S,{id:j,click:()=>{A(!0);const e={...Object.assign({},...j.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};x.Z.deleteValue(e).then((()=>{v.Am.success(l("successfully.deleted")),C(null),t((0,m.$v)())})).finally((()=>A(!1)))},text:l("delete.property"),loading:M,handleClose:()=>C(null)})]})}},55768:(e,l,t)=>{t.d(l,{Z:()=>i});var n=t(1413),a=t(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var o=t(17469),r=function(e,l){return a.createElement(o.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:l,icon:s}))};r.displayName="PlusCircleOutlined";const i=a.forwardRef(r)},99587:(e,l,t)=>{t.d(l,{Z:()=>i});var n=t(1413),a=t(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var o=t(17469),r=function(e,l){return a.createElement(o.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:l,icon:s}))};r.displayName="TableOutlined";const i=a.forwardRef(r)}}]);