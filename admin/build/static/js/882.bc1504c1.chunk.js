"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[882],{89802:(e,t,n)=>{n.d(t,{q:()=>i});var r=n(47313),a=n(74294),s=n(72652),l=n(46417);const i=e=>{let{fetchOptions:t,refetch:n=!1,value:i,...o}=e;const[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)([]);"object"===typeof(null===i||void 0===i?void 0:i.label)&&null!==(null===i||void 0===i?void 0:i.label)&&(i.label=i.label.value);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.Z,{labelInValue:!0,filterOption:!1,notFoundContent:c?(0,l.jsx)(s.Z,{size:"small"}):"no results",value:i,...o,options:c?[]:u,onFocus:()=>{u.length&&!n||(d(!0),t().then((e=>{m(e),d(!1)})))}})})}},73431:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(47313),a=n(39180),s=n(2717),l=n(28830),i=n(60535),o=n(46417);const c=()=>{const e=(0,s.I0)(),{languages:t,defaultLang:n}=(0,s.v9)((e=>e.formLang),s.wU);(0,r.useEffect)((()=>{i.Z.getAllActive().then((t=>{let{data:n}=t;e((0,l.dc)(n)),e((0,l.mh)(n.find((e=>1===e.default)).locale))}))}),[]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.ZP.Group,{value:n,onChange:t=>{let{target:{value:n}}=t;e((0,l.mh)(n))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((e=>(0,o.jsx)(a.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},65436:(e,t,n)=>{n.d(t,{S:()=>E});var r=n(10976),a=n(68197),s=n(59624),l=n(45705),i=n(59491),o=(n(47313),n(2717)),c=n(68144),d=n(76733),u=n.n(d),m=n(24511),p=n(46417);const v=e=>{let{next:t,prev:n}=e;const{t:d}=(0,m.$)(),v=r.Z.useFormInstance(),{defaultLang:h,languages:x}=(0,o.v9)((e=>e.formLang),o.wU);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Z,{gutter:12,children:(0,p.jsx)(s.Z,{span:24,children:x.map((e=>(0,p.jsx)(r.Z.Item,{label:d("ingredients"),name:["ingredient",e.locale],valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===h,message:d("required")}],hidden:e.locale!==h,children:(0,p.jsx)(c.CKEditor,{editor:u()})})))})}),(0,p.jsxs)(l.Z,{children:[(0,p.jsx)(i.Z,{type:"primary",htmlType:"button",onClick:()=>n(),children:d("prev")}),(0,p.jsx)(i.Z,{type:"primary",htmlType:"button",onClick:()=>{v.validateFields([["ingredient",h]]).then((()=>{t()}))},children:d("next")})]})]})},h=e=>{let{next:t,prev:n}=e;const{t:d}=(0,m.$)(),v=r.Z.useFormInstance(),{defaultLang:h,languages:x}=(0,o.v9)((e=>e.formLang),o.wU);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Z,{gutter:12,children:(0,p.jsx)(s.Z,{span:24,children:x.map((e=>(0,p.jsx)(r.Z.Item,{label:d("instructions"),name:["instruction",e.locale],valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===h,message:d("required")}],hidden:e.locale!==h,children:(0,p.jsx)(c.CKEditor,{editor:u()})})))})}),(0,p.jsxs)(l.Z,{children:[(0,p.jsx)(i.Z,{type:"primary",htmlType:"button",onClick:()=>n(),children:d("prev")}),(0,p.jsx)(i.Z,{type:"primary",htmlType:"button",onClick:()=>{v.validateFields([["instruction",h]]).then((()=>{t()}))},children:d("next")})]})]})};var x=n(66672),g=n(16124),y=n(74294),Z=n(5764),j=n(47647),f=n(89802);const{TextArea:b}=x.Z,k=e=>{let{next:t,image:n,setImage:l}=e;const{t:c}=(0,m.$)(),d=r.Z.useFormInstance(),{defaultLang:u,languages:v}=(0,o.v9)((e=>e.formLang),o.wU);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.Z,{gutter:12,children:[(0,p.jsx)(s.Z,{span:12,children:v.map((e=>(0,p.jsx)(r.Z.Item,{label:c("name"),name:["title",e.locale],rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==u?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(c("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(c("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(c("required")))}],hidden:e.locale!==u,children:(0,p.jsx)(x.Z,{})},"name"+e.id)))}),(0,p.jsx)(s.Z,{span:12,children:(0,p.jsx)(r.Z.Item,{label:c("category"),name:"category_id",rules:[{required:!0,message:c("required")}],children:(0,p.jsx)(f.q,{fetchOptions:function(){return j.Z.getAll({active:1,type:"receipt"}).then((e=>e.data.map((e=>({label:e.translation.title,value:e.id})))))},debounceTimeout:200})},"category_id")}),(0,p.jsx)(s.Z,{span:12,children:v.map((e=>(0,p.jsx)(r.Z.Item,{label:c("description"),name:["description",e.locale],rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==u?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(c("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<5?Promise.reject(new Error(c("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(c("required")))}],hidden:e.locale!==u,children:(0,p.jsx)(b,{rows:3})},"description"+e.id)))}),(0,p.jsx)(s.Z,{span:6,children:(0,p.jsx)(r.Z.Item,{label:c("calories"),name:"calories",rules:[{required:!0,message:c("required")},{type:"number",min:0,message:c("must.be.positive")}],children:(0,p.jsx)(g.Z,{className:"w-100"})},"calories")}),(0,p.jsx)(s.Z,{span:6,children:(0,p.jsx)(r.Z.Item,{label:c("servings"),name:"servings",rules:[{required:!0,message:c("required")},{type:"number",min:0,message:c("must.be.positive")}],children:(0,p.jsx)(g.Z,{className:"w-100"})},"servings")}),(0,p.jsx)(s.Z,{span:6,children:(0,p.jsx)(r.Z.Item,{label:c("active.time"),name:"active_time",rules:[{required:!0,message:c("required")},{type:"number",min:0,message:c("must.be.positive")}],children:(0,p.jsx)(g.Z,{className:"w-100"})},"active_time")}),(0,p.jsx)(s.Z,{span:6,children:(0,p.jsx)(r.Z.Item,{label:c("total.time"),name:"total_time",rules:[{required:!0,message:c("required")},{type:"number",min:0,message:c("must.be.positive")}],children:(0,p.jsx)(g.Z,{className:"w-100"})},"total_time")}),(0,p.jsx)(s.Z,{span:12,children:(0,p.jsx)(r.Z.Item,{label:c("discount.type"),name:"discount_type",rules:[{required:!0,message:c("required")}],children:(0,p.jsx)(y.Z,{options:[{label:c("fix"),value:"fix"},{label:c("percent"),value:"percent"}]})})}),(0,p.jsx)(s.Z,{span:12,children:(0,p.jsx)(r.Z.Item,{label:c("discount.price"),name:"discount_price",rules:[{required:!0,message:c("required")},{type:"number",min:0,message:c("must.be.positive")}],children:(0,p.jsx)(g.Z,{className:"w-100"})})}),(0,p.jsx)(s.Z,{span:12,children:(0,p.jsx)(r.Z.Item,{label:c("image"),name:"images",rules:[{validator:()=>0===(null===n||void 0===n?void 0:n.length)?Promise.reject(new Error(c("required"))):Promise.resolve()}],children:(0,p.jsx)(Z.Z,{type:"receipts",imageList:n,setImageList:l,form:d,multiple:!1})})})]}),(0,p.jsx)(i.Z,{type:"primary",htmlType:"button",onClick:()=>{d.validateFields([["title",u],["description",u],"calories","servings","active_time","total_time","discount_type","discount_price","category_id","images"]).then((e=>{t()}))},children:c("next")})]})};var C=n(47515),w=n(82138);const q=e=>{let{prev:t,loading:n}=e;const{t:c}=(0,m.$)(),{defaultLang:d,languages:u}=(0,o.v9)((e=>e.formLang),o.wU);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Z,{gutter:12,children:(0,p.jsx)(s.Z,{span:24,children:(0,p.jsx)(r.Z.List,{name:"nutrition",initialValue:[{weight:void 0,percentage:void 0,en:void 0,ru:void 0}],children:(e,t)=>{let{add:n,remove:l}=t;return(0,p.jsxs)(p.Fragment,{children:[e.map(((e,t)=>{let{key:n,name:o,...m}=e;return(0,p.jsxs)(a.Z,{gutter:12,align:"middle",children:[(0,p.jsx)(s.Z,{span:7,children:u.map((e=>(0,p.jsx)(r.Z.Item,{label:c("name"),name:[o,e.locale],rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==d?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(c("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(c("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(c("required")))}],hidden:e.locale!==d,children:(0,p.jsx)(x.Z,{})},"name"+e.id)))}),(0,p.jsx)(s.Z,{span:7,children:(0,p.jsx)(r.Z.Item,{...m,label:c("weight"),name:[o,"weight"],rules:[{required:!0,message:c("required")},{type:"number",min:0,message:c("must.be.positive")}],children:(0,p.jsx)(g.Z,{className:"w-100",addonAfter:"g"})})}),(0,p.jsx)(s.Z,{span:7,children:(0,p.jsx)(r.Z.Item,{...m,label:c("percentage"),name:[o,"percentage"],rules:[{required:!0,message:c("required")},{type:"number",min:0,max:100,message:c("must.be.between.0.and.100")}],children:(0,p.jsx)(g.Z,{className:"w-100",addonAfter:"%"})})}),0!==t&&(0,p.jsx)(s.Z,{span:3,className:"d-flex justify-content-end",children:(0,p.jsx)(i.Z,{onClick:()=>l(o),danger:!0,className:"w-100",type:"primary",icon:(0,p.jsx)(C.Z,{})})})]})})),(0,p.jsx)(r.Z.Item,{children:(0,p.jsx)(i.Z,{onClick:()=>n(),block:!0,icon:(0,p.jsx)(w.Z,{}),children:c("add.nutrition")})})]})}})})}),(0,p.jsxs)(l.Z,{children:[(0,p.jsx)(i.Z,{type:"primary",htmlType:"button",onClick:()=>t(),children:c("prev")}),(0,p.jsx)(i.Z,{type:"primary",htmlType:"submit",loading:n,children:c("submit")})]})]})};var P=n(18333);const E=[{step:1,title:"recipe",content:k},{step:2,title:"instructions",content:h},{step:3,title:"ingredients",content:v},{step:4,title:"stocks",content:e=>{let{next:t,prev:n}=e;const{t:o}=(0,m.$)(),c=r.Z.useFormInstance(),d=r.Z.useWatch("stocks",c);function u(e){const t={perPage:10,page:1,search:e,active:1};return P.Z.getStock(t).then((e=>e.data.filter((e=>!d.map((e=>{var t;return null===e||void 0===e||null===(t=e.stock_id)||void 0===t?void 0:t.value})).includes(e.id))).map((e=>({label:e.product.translation.title+" "+e.extras.map((e=>e.value)).join(", "),value:e.id})))))}return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Z,{gutter:12,children:(0,p.jsx)(s.Z,{span:24,children:(0,p.jsx)(r.Z.List,{name:"stocks",initialValue:[{stock_id:void 0,min_quantity:void 0}],children:(e,t)=>{let{add:n,remove:l}=t;return(0,p.jsxs)(p.Fragment,{children:[e.map(((e,t)=>{let{key:n,name:c,...d}=e;return(0,p.jsxs)(a.Z,{gutter:12,align:"middle",children:[(0,p.jsx)(s.Z,{span:11,children:(0,p.jsx)(r.Z.Item,{...d,label:o("stock"),name:[c,"stock_id"],rules:[{required:!0,message:o("required")}],children:(0,p.jsx)(f.q,{fetchOptions:u,debounceTimeout:200})})}),(0,p.jsx)(s.Z,{span:11,children:(0,p.jsx)(r.Z.Item,{...d,label:o("min.quantity"),name:[c,"min_quantity"],rules:[{required:!0,message:o("required")},{type:"number",min:1,message:o("must.be.at.least.1")}],children:(0,p.jsx)(g.Z,{className:"w-100"})})}),0!==t&&(0,p.jsx)(s.Z,{span:2,className:"d-flex justify-content-end",children:(0,p.jsx)(i.Z,{onClick:()=>l(c),danger:!0,className:"w-100",type:"primary",icon:(0,p.jsx)(C.Z,{})})})]})})),(0,p.jsx)(r.Z.Item,{children:(0,p.jsx)(i.Z,{onClick:()=>n(),block:!0,icon:(0,p.jsx)(w.Z,{}),children:o("add.stock")})})]})}})})}),(0,p.jsxs)(l.Z,{children:[(0,p.jsx)(i.Z,{type:"primary",htmlType:"button",onClick:()=>n(),children:o("prev")}),(0,p.jsx)(i.Z,{type:"primary",htmlType:"button",onClick:()=>{c.validateFields(d.flatMap(((e,t)=>[["stocks",t,"stock_id"],["stocks",t,"min_quantity"]]))).then((()=>{t()}))},children:o("next")})]})]})}},{step:5,title:"nutritions",content:q}]},39180:(e,t,n)=>{n.d(t,{ZP:()=>N});var r=n(4942),a=n(87462),s=n(47313),l=n(56482),i=n(46123),o=n.n(i),c=n(16945),d=n(4431),u=n(91964),m=s.createContext(null),p=m.Provider;const v=m;var h=s.createContext(null),x=h.Provider,g=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},y=function(e,t){var n,i=s.useContext(v),m=s.useContext(h),p=s.useContext(u.E_),x=p.getPrefixCls,y=p.direction,Z=s.useRef(),j=(0,c.sQ)(t,Z),f=(0,s.useContext)(d.aM).isFormItemInput,b=e.prefixCls,k=e.className,C=e.children,w=e.style,q=g(e,["prefixCls","className","children","style"]),P=x("radio",b),E="button"===((null===i||void 0===i?void 0:i.optionType)||m)?"".concat(P,"-button"):P,I=(0,a.Z)({},q);i&&(I.name=i.name,I.onChange=function(t){var n,r;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(r=null===i||void 0===i?void 0:i.onChange)||void 0===r||r.call(i,t)},I.checked=e.value===i.value,I.disabled=e.disabled||i.disabled);var F=o()("".concat(E,"-wrapper"),(n={},(0,r.Z)(n,"".concat(E,"-wrapper-checked"),I.checked),(0,r.Z)(n,"".concat(E,"-wrapper-disabled"),I.disabled),(0,r.Z)(n,"".concat(E,"-wrapper-rtl"),"rtl"===y),(0,r.Z)(n,"".concat(E,"-wrapper-in-form-item"),f),n),k);return s.createElement("label",{className:F,style:w,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},s.createElement(l.Z,(0,a.Z)({},I,{type:"radio",prefixCls:E,ref:j})),void 0!==C?s.createElement("span",null,C):null)},Z=s.forwardRef(y);Z.displayName="Radio";const j=Z;var f=n(29439),b=n(10288),k=n(21631),C=n(81176),w=s.forwardRef((function(e,t){var n=s.useContext(u.E_),l=n.getPrefixCls,i=n.direction,c=s.useContext(k.Z),d=(0,b.Z)(e.defaultValue,{value:e.value}),m=(0,f.Z)(d,2),v=m[0],h=m[1];return s.createElement(p,{value:{onChange:function(t){var n=v,r=t.target.value;"value"in e||h(r);var a=e.onChange;a&&r!==n&&a(t)},value:v,disabled:e.disabled,name:e.name,optionType:e.optionType}},function(){var n,d=e.prefixCls,u=e.className,m=void 0===u?"":u,p=e.options,h=e.buttonStyle,x=void 0===h?"outline":h,g=e.disabled,y=e.children,Z=e.size,f=e.style,b=e.id,k=e.onMouseEnter,w=e.onMouseLeave,q=l("radio",d),P="".concat(q,"-group"),E=y;p&&p.length>0&&(E=p.map((function(e){return"string"===typeof e||"number"===typeof e?s.createElement(j,{key:e.toString(),prefixCls:q,disabled:g,value:e,checked:v===e},e):s.createElement(j,{key:"radio-group-value-options-".concat(e.value),prefixCls:q,disabled:e.disabled||g,value:e.value,checked:v===e.value,style:e.style},e.label)})));var I=Z||c,F=o()(P,"".concat(P,"-").concat(x),(n={},(0,r.Z)(n,"".concat(P,"-").concat(I),I),(0,r.Z)(n,"".concat(P,"-rtl"),"rtl"===i),n),m);return s.createElement("div",(0,a.Z)({},(0,C.Z)(e),{className:F,style:f,onMouseEnter:k,onMouseLeave:w,id:b,ref:t}),E)}())}));const q=s.memo(w);var P=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},E=function(e,t){var n=s.useContext(u.E_).getPrefixCls,r=e.prefixCls,l=P(e,["prefixCls"]),i=n("radio",r);return s.createElement(x,{value:"button"},s.createElement(j,(0,a.Z)({prefixCls:i},l,{type:"radio",ref:t})))};const I=s.forwardRef(E);var F=j;F.Button=I,F.Group=q;const N=F},56482:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(87462),a=n(4942),s=n(45987),l=n(1413),i=n(15671),o=n(43144),c=n(60136),d=n(54062),u=n(47313),m=n(46123),p=n.n(m),v=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e){var r;(0,i.Z)(this,n),(r=t.call(this,e)).handleChange=function(e){var t=r.props,n=t.disabled,a=t.onChange;n||("checked"in r.props||r.setState({checked:e.target.checked}),a&&a({target:(0,l.Z)((0,l.Z)({},r.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},r.saveInput=function(e){r.input=e};var a="checked"in e?e.checked:e.defaultChecked;return r.state={checked:a},r}return(0,o.Z)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,l=t.className,i=t.style,o=t.name,c=t.id,d=t.type,m=t.disabled,v=t.readOnly,h=t.tabIndex,x=t.onClick,g=t.onFocus,y=t.onBlur,Z=t.onKeyDown,j=t.onKeyPress,f=t.onKeyUp,b=t.autoFocus,k=t.value,C=t.required,w=(0,s.Z)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),q=Object.keys(w).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=w[t]),e}),{}),P=this.state.checked,E=p()(n,l,(e={},(0,a.Z)(e,"".concat(n,"-checked"),P),(0,a.Z)(e,"".concat(n,"-disabled"),m),e));return u.createElement("span",{className:E,style:i},u.createElement("input",(0,r.Z)({name:o,id:c,type:d,required:C,readOnly:v,disabled:m,tabIndex:h,className:"".concat(n,"-input"),checked:!!P,onClick:x,onFocus:g,onBlur:y,onKeyUp:f,onKeyDown:Z,onKeyPress:j,onChange:this.handleChange,autoFocus:b,ref:this.saveInput,value:k},q)),u.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,l.Z)((0,l.Z)({},t),{},{checked:e.checked}):null}}]),n}(u.Component);v.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const h=v}}]);