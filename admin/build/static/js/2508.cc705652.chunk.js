"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2508],{4014:(e,d,t)=>{function l(e){var d,t;let l=null===e||void 0===e?void 0:e.slice(0,1),i=null===e||void 0===e?void 0:e.lastIndexOf("@"),n=null===e||void 0===e?void 0:e.slice(1,i-1);n=null===(d=n)||void 0===d?void 0:d.replace(/./g,"*");let o=null===e||void 0===e?void 0:e.slice(i-1,e.length);return null===l||void 0===l||null===(t=l.concat(n))||void 0===t?void 0:t.concat(o)}t.d(d,{Z:()=>l})},84261:(e,d,t)=>{function l(e){const d="".concat(e),t="*".repeat(d.length-2);return(null===d||void 0===d?void 0:d[0])+t+(null===d||void 0===d?void 0:d[(null===d||void 0===d?void 0:d.length)-1])}t.d(d,{Z:()=>l})},13945:(e,d,t)=>{function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(d,{Z:()=>l})},84017:(e,d,t)=>{function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const l=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(l," ").concat(d):"".concat(d," ").concat(l)}t.d(d,{Z:()=>l})},29457:(e,d,t)=>{t.r(d),t.d(d,{default:()=>R});var l=t(45705),i=t(66204),n=t(56140),o=t(78508),a=t(72652),r=t(256),c=t(59491),s=t(68197),u=t(59624),v=t(77181),p=t(26824),h=t(83371),x=t(41068),m=t(70816),g=t.n(m),y=t(47313),Z=t(24511),j=t(2717),f=t(97890),b=t(84017),k=t(90954),_=t(49986),I=t(45464),w=t(22054),C=t(13945),S=t(79492),Y=t(80314),M=t(7370),P=t(46417);const D=e=>{let{id:d}=e;const{t:t}=(0,Z.$)(),n=(0,j.I0)(),a=(0,f.s0)(),[r,c]=(0,y.useState)([]),[s,u]=(0,y.useState)(!1),{defaultCurrency:h}=(0,j.v9)((e=>e.currency),j.wU),x=e=>{u(!0),M.Z.getUserTopProducts(d,e).then((e=>c(e.data))).finally((()=>u(!1)))};return(0,y.useEffect)((()=>{x()}),[]),(0,P.jsx)(v.Z,{title:t("top.products"),children:(0,P.jsx)(o.Z,{loading:s,dataSource:null===r||void 0===r?void 0:r.data,pagination:{total:null===r||void 0===r?void 0:r.total,current:null===r||void 0===r?void 0:r.current_page,pageSize:null===r||void 0===r?void 0:r.per_page},columns:[{title:t("product"),dataIndex:"stock",key:"stock",render:e=>{var d,i,o;return(0,P.jsxs)(l.Z,{children:[(0,P.jsx)(p.Z,{width:100,src:null===e||void 0===e||null===(d=e.product)||void 0===d?void 0:d.img,placeholder:!0,style:{borderRadius:4}}),(0,P.jsx)("div",{onClick:()=>(e=>{n((0,k.bL)({id:"product-edit",url:"product/".concat(e.uuid),name:t("edit.product")})),a("/product/".concat(e.uuid))})(null===e||void 0===e?void 0:e.product),className:"text-hover",children:null===e||void 0===e||null===(i=e.product)||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.title})]})}},{title:t("count"),dataIndex:"count",key:"count"},{title:t("total.price"),dataIndex:"total_price",key:"total_price",render:e=>(0,b.Z)(e,null===h||void 0===h?void 0:h.symbol)},{title:t("status"),dataIndex:"status",key:"status",render:(e,d)=>{var l,n;return(0,P.jsx)(i.Z,{children:null!==(l=d.stock)&&void 0!==l&&null!==(n=l.product)&&void 0!==n&&n.active?t("active"):t("inactive")})}}],onChange:e=>x({page:null===e||void 0===e?void 0:e.current,perPage:null===e||void 0===e?void 0:e.pageSize})})})};var z=t(74294),U=t(49319);const E=e=>{var d,t,l;let{id:n}=e;const{t:a}=(0,Z.$)(),[r,c]=(0,y.useState)({}),[s,u]=(0,y.useState)(!1),{defaultCurrency:p}=(0,j.v9)((e=>e.currency),j.wU),h=e=>{u(!0),U.Z.getAll({user_uuid:n,...e}).then((e=>{c(e)})).finally((()=>{u(!1)}))};return(0,y.useEffect)((()=>{h()}),[]),(0,P.jsx)(v.Z,{title:a("order.refunds"),extra:(0,P.jsx)(z.Z,{options:[{label:a("pending"),value:"pending",key:"pending"},{label:a("accepted"),value:"accepted",key:"accepted"},{label:a("canceled"),value:"canceled",key:"canceled"}],onChange:e=>h({status:e}),placeholder:a("status"),allowClear:!0,style:{width:130}}),children:(0,P.jsx)(o.Z,{loading:s,dataSource:null===r||void 0===r?void 0:r.data,pagination:{total:null===r||void 0===r||null===(d=r.meta)||void 0===d?void 0:d.total,current:null===r||void 0===r||null===(t=r.meta)||void 0===t?void 0:t.current_page,pageSize:null===r||void 0===r||null===(l=r.meta)||void 0===l?void 0:l.per_page},columns:[{title:a("cause"),dataIndex:"cause",key:"cause"},{title:a("answer"),dataIndex:"answer",key:"answer",render:e=>e||"no.answer"},{title:a("total.price"),dataIndex:"total_price",key:"total_price",render:(e,d)=>{var t;return(0,b.Z)(null===(t=d.order)||void 0===t?void 0:t.total_price,null===p||void 0===p?void 0:p.symbol)}},{title:a("status"),dataIndex:"status",key:"status",render:e=>(0,P.jsx)(i.Z,{children:e})},{title:a("created.date.&.time"),dataIndex:"created_at",key:"created_at",render:e=>g()(e).format("YYYY-MM-DD HH:mm")}],onChange:e=>h({page:e.current,perPage:e.pageSize})})})};var L=t(4014),N=t(84261);const R=()=>{var e;const{id:d}=(0,f.UO)(),t=(0,f.s0)(),[m,M]=(0,y.useState)({}),z=(0,j.I0)(),[U,R]=(0,y.useState)(!1),{t:T}=(0,Z.$)(),{activeMenu:$}=(0,j.v9)((e=>e.menu),j.wU),{defaultCurrency:q}=(0,j.v9)((e=>e.currency),j.wU),{defaultLang:H}=(0,j.v9)((e=>e.formLang),j.wU),{orders:A,meta:F,loading:K,params:O}=(0,j.v9)((e=>e.orders),j.wU),{isDemo:B,demoDeliveryman:G,demoSeller:J,demoAdmin:Q,demoModerator:V,demoMeneger:W}=(0,S.Z)();function X(e){R(!0),_.Z.getById(e).then((e=>M(e.data))).finally((()=>R(!1)))}const ee=e=>{z((0,k.bL)({id:"product-edit",url:"product/".concat(e),name:T("edit.product")})),t("/product/".concat(e))};return(0,y.useEffect)((()=>{X(d)}),[d]),(0,y.useEffect)((()=>{const e={user_id:d,page:1,perPage:10};z((0,w.dT)(e))}),[]),(0,Y.Z)((()=>{var e,t;const l={user_id:d,page:(null===$||void 0===$||null===(e=$.data)||void 0===e?void 0:e.page)||1,perPage:(null===$||void 0===$||null===(t=$.data)||void 0===t?void 0:t.perPage)||10};z((0,w.dT)(l))}),[$.data]),(0,y.useEffect)((()=>{if($.refetch){var e,t;const l={user_id:d,page:(null===$||void 0===$||null===(e=$.data)||void 0===e?void 0:e.page)||1,perPage:(null===$||void 0===$||null===(t=$.data)||void 0===t?void 0:t.perPage)||10};X(d),z((0,w.dT)(l)),z((0,k.A_)($))}}),[$.refetch]),U?(0,P.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100",children:(0,P.jsx)(a.Z,{})}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(r.Z,{title:T("user.info"),extra:(0,P.jsx)(c.Z,{type:"primary",disabled:B&&(null===m||void 0===m?void 0:m.id)==G||B&&(null===m||void 0===m?void 0:m.id)==V||B&&(null===m||void 0===m?void 0:m.id)==W||B&&(null===m||void 0===m?void 0:m.id)==J||B&&(null===m||void 0===m?void 0:m.id)===Q,onClick:()=>{z((0,k.bL)({url:"user/".concat(d),id:"user_edit",name:T("edit.user")})),t("/user/".concat(d),{state:"user"})},children:T("edit")})}),(0,P.jsxs)(s.Z,{gutter:24,children:[(0,P.jsx)(u.Z,{span:16,children:(0,P.jsxs)(v.Z,{title:"".concat(null===m||void 0===m?void 0:m.firstname," ").concat((null===m||void 0===m?void 0:m.lastname)||""," #").concat(null===m||void 0===m?void 0:m.id),children:[(0,P.jsx)(p.Z,{src:(0,I.Z)(null===m||void 0===m?void 0:m.img),alt:null===m||void 0===m?void 0:m.firstname,width:100,height:100,style:{borderRadius:"10px",objectFit:"cover"}}),(0,P.jsxs)(h.Z,{column:2,children:[(0,P.jsx)(h.Z.Item,{label:T("registration.date"),children:g()(null===m||void 0===m?void 0:m.registered_at).format("YYYY-MM-DD HH:mm")}),(0,P.jsx)(h.Z.Item,{label:T("status"),children:(0,P.jsx)(i.Z,{color:null!==m&&void 0!==m&&m.active?"cyan":"red",children:null!==m&&void 0!==m&&m.active?T("active"):T("inactive")})}),(0,P.jsx)(h.Z.Item,{label:T("birthday"),children:g()(null===m||void 0===m?void 0:m.birthday).format("YYYY-MM-DD")}),(0,P.jsx)(h.Z.Item,{label:T("email"),children:(0,L.Z)(null===m||void 0===m?void 0:m.email)}),(0,P.jsx)(h.Z.Item,{label:T("gender"),children:null===m||void 0===m?void 0:m.gender}),(0,P.jsx)(h.Z.Item,{label:T("role"),children:null===m||void 0===m?void 0:m.role}),(0,P.jsx)(h.Z.Item,{label:T("wallet"),children:(0,b.Z)(null===m||void 0===m||null===(e=m.wallet)||void 0===e?void 0:e.price,null===q||void 0===q?void 0:q.symbol)}),(0,P.jsx)(h.Z.Item,{label:T("phone"),children:null!==m&&void 0!==m&&m.phone?(0,N.Z)(null===m||void 0===m?void 0:m.phone):T("no.phone.number")})]})]})}),(0,P.jsxs)(u.Z,{span:8,children:[(0,P.jsx)(v.Z,{title:T("successfull.orders"),children:(0,P.jsxs)(h.Z,{column:1,children:[(0,P.jsx)(h.Z.Item,{label:T("delivered.orders.count"),children:(0,P.jsx)(x.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===m||void 0===m?void 0:m.o_count)||0})}),(0,P.jsx)(h.Z.Item,{label:T("spent.since.registration"),children:(0,P.jsx)(x.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,b.Z)(null===m||void 0===m?void 0:m.o_sum,null===q||void 0===q?void 0:q.symbol)||0})})]})}),(null===m||void 0===m?void 0:m.shop)&&(0,P.jsx)(v.Z,{title:"".concat(T("shop.info")," #").concat(null===m||void 0===m?void 0:m.shop.id),children:(0,P.jsxs)(h.Z,{column:1,children:[(0,P.jsx)(h.Z.Item,{label:T("name"),children:null===m||void 0===m?void 0:m.shop.translation.title}),(0,P.jsx)(h.Z.Item,{label:T("phone"),children:null===m||void 0===m?void 0:m.shop.phone})]})})]}),(0,P.jsxs)(u.Z,{span:24,children:[(0,P.jsx)(v.Z,{title:T("orders"),children:(0,P.jsx)(o.Z,{expandable:{expandedRowRender:e=>{const d=[{title:T("product"),dataIndex:"product",render:(e,d)=>{var t,n,o,a;return(0,P.jsx)("div",{className:"text-hover",onClick:()=>{var e,t;return ee(null===(e=d.stock)||void 0===e||null===(t=e.product)||void 0===t?void 0:t.uuid)},children:(0,P.jsxs)(l.Z,{wrap:!0,children:[null===(t=d.stock)||void 0===t||null===(n=t.product)||void 0===n||null===(o=n.translation)||void 0===o?void 0:o.title,null===(a=d.addons)||void 0===a?void 0:a.map((e=>{var d,t,l;return(0,P.jsxs)(i.Z,{children:[null===e||void 0===e||null===(d=e.stock)||void 0===d||null===(t=d.product)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title," x ",e.quantity]},e.id)}))]})})},key:"product"},{title:T("quantity"),dataIndex:"quantity",key:"quantity"},{title:T("total.price"),dataIndex:"total_price",render:e=>(0,b.Z)(e,null===q||void 0===q?void 0:q.symbol),key:"total_price"},{title:T("discount"),dataIndex:"discount",key:"discount"}];return(0,P.jsxs)(l.Z,{direction:"vertical",className:"w-100",children:[(0,P.jsx)(n.Z.Text,{children:T("ordered.products")}),(0,P.jsx)(o.Z,{scroll:{x:!0},columns:d,dataSource:e.details,pagination:!1})]})},defaultExpandedRowKeys:["0"]},dataSource:A,columns:[{title:"ID",dataIndex:"id",key:"id",render:e=>(0,P.jsxs)("div",{onClick:()=>(e=>{z((0,k.bL)({url:"/order/details/".concat(e),id:"order.details",name:T("order.details")})),t("/order/details/".concat(e))})(e),className:"text-hover",children:["#",e]})},{title:T("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",render:e=>"".concat(e||0," ").concat(T(e&&e<2?"products":"product"))},{title:T("total.price"),dataIndex:"total_price",key:"total_price",render:e=>(0,b.Z)(e,null===q||void 0===q?void 0:q.symbol)},{title:T("delivery.date.&.time"),dataIndex:"delivery_date",key:"delivery_date",render:(e,d)=>"".concat(null===d||void 0===d?void 0:d.delivery_date," ").concat((null===d||void 0===d?void 0:d.delivery_time)||"")},{title:T("status"),dataIndex:"status",key:"status",render:e=>(0,P.jsx)(i.Z,{children:e})},{title:T("delivery.address"),dataIndex:"address",key:"address",render:(e,d)=>{var t,l,i,n,o;let a;switch(null===d||void 0===d?void 0:d.delivery_type){case"delivery":a=null!==(t=null===d||void 0===d||null===(l=d.my_address)||void 0===l?void 0:l.street_house_number)&&void 0!==t?t:T("no.address");break;case"point":a=null!==(i=null===d||void 0===d||null===(n=d.delivery_point)||void 0===n||null===(o=n.address)||void 0===o?void 0:o[H])&&void 0!==i?i:T("no.address");break;case"digital":a=T("digital.delivery");break;default:a=T("no.address")}return a}}],loading:K,pagination:{pageSize:O.perPage,page:O.page,total:F.total,defaultCurrent:O.page},rowKey:e=>e.id,onChange:function(e,d,t){const{pageSize:l,current:i}=e,{field:n,order:o}=t,a=(0,C.Z)(o);z((0,k.nc)({activeMenu:$,data:{...$.data,perPage:l,page:i,column:n,sort:a}}))}})}),(0,P.jsx)(E,{id:d}),(0,P.jsx)(D,{id:d})]})]})]})}}}]);