"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2170],{49655:function(e,n,t){t.d(n,{_:function(){return g}});var i=t(1413),a=t(93433),r=t(15861),l=t(29439),u=t(45987),o=t(87757),c=t.n(o),s=t(47313),d=t(12279),f=t.n(d),v=t(74294),h=t(72652),Z=t(46417),p=["fetchOptions","debounceTimeout","hasMore"],g=function(e){var n=e.fetchOptions,t=e.debounceTimeout,o=void 0===t?400:t,d=e.hasMore,g=(0,u.Z)(e,p),m=(0,s.useState)(!1),x=(0,l.Z)(m,2),j=x[0],y=x[1],b=(0,s.useState)([]),_=(0,l.Z)(b,2),S=_[0],C=_[1],w=(0,s.useState)(!1),I=(0,l.Z)(w,2),k=I[0],O=I[1],P=(0,s.useState)(null),V=(0,l.Z)(P,2),A=V[0],q=V[1],E=(0,s.useState)(1),F=(0,l.Z)(E,2),M=F[0],z=F[1],T=(0,s.useMemo)((function(){return f()((function(e){C([]),q(e),y(!0),n({search:e}).then((function(e){C(e),z(2),y(!1)})).finally((function(){return O(!1)}))}),o)}),[n,o,M]),L=function(){var e=(0,r.Z)(c().mark((function e(t){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.target,k||i.scrollTop+i.offsetHeight!==i.scrollHeight||d&&(O(!0),i.scrollTo(0,i.scrollHeight),n({search:A,page:M}).then((function(e){z((function(e){return e+1})),C([].concat((0,a.Z)(S),(0,a.Z)(e)))})).finally((function(){return O(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsxs)(v.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,onPopupScroll:L,labelInValue:!0,filterOption:!1,onSearch:T,notFoundContent:j?(0,Z.jsx)(h.Z,{size:"small"}):"no results",onFocus:function(){S.length||T("")}},g),{},{children:[S.map((function(e,n){return(0,Z.jsx)(v.Z.Option,{value:e.value,children:e.label},n)})),k&&(0,Z.jsx)(v.Z.Option,{children:(0,Z.jsx)(h.Z,{size:"small"})})]}))}},73431:function(e,n,t){var i=t(47313),a=t(39180),r=t(2717),l=t(28830),u=t(60535),o=t(46417);n.Z=function(){var e=(0,r.I0)(),n=(0,r.v9)((function(e){return e.formLang}),r.wU),t=n.languages,c=n.defaultLang;(0,i.useEffect)((function(){u.Z.getAllActive().then((function(n){var t=n.data;e((0,l.dc)(t)),e((0,l.mh)(t.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.ZP.Group,{value:c,onChange:function(n){var t=n.target.value;e((0,l.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((function(e){return(0,o.jsx)(a.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},41481:function(e,n,t){t.d(n,{Z:function(){return f}});var i=t(1413),a=t(29439),r=t(45987),l=t(47313),u=t(66672),o=t(16031),c=t(40765),s=t(46417),d=["handleChange","defaultValue","resetSearch"];function f(e){var n=e.handleChange,t=e.defaultValue,f=e.resetSearch,v=(0,r.Z)(e,d),h=(0,l.useState)(t),Z=(0,a.Z)(h,2),p=Z[0],g=Z[1],m=(0,l.useMemo)((function(){return(0,o.debounce)((function(e){n(e)}),800)}),[]);return(0,l.useEffect)((function(){g(t)}),[f]),(0,s.jsx)(u.Z,(0,i.Z)({value:p,onChange:function(e){g(e.target.value),m(e.target.value)},prefix:(0,s.jsx)(c.Z,{})},v))}},92170:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var i=t(4942),a=t(1413),r=t(29439),l=t(47313),u=t(86345),o=t(45705),c=t(59491),s=t(77181),d=t(78508),f=t(74580),v=t(2717),h=t(90954),Z=t(23560),p=t(24511),g=t(21944),m=t(41481),x=t(80314),j=t(27443),y=t(29466),b=t(93433),_=t(10976),S=t(9274),C=t(72652),w=t(68197),I=t(59624),k=t(66672),O=t(73431),P=t(47139),V=t(49655),A=t(79637),q=t(27453),E=t(46417);function F(e){var n=e.visible,t=e.setVisible,o=e.id,s=e.setId,d=_.Z.useForm(),f=(0,r.Z)(d,1)[0],h=(0,v.I0)(),m=(0,p.$)().t,x=(0,v.v9)((function(e){return e.formLang}),v.wU),y=x.defaultLang,F=x.languages,M=(0,l.useState)(!1),z=(0,r.Z)(M,2),T=z[0],L=z[1],U=(0,l.useState)(!1),B=(0,r.Z)(U,2),H=B[0],N=B[1],$=(0,l.useState)(null),G=(0,r.Z)($,2),K=G[0],D=G[1],J=function(){D(null),t(!1),f.resetFields(),s(null)};return(0,l.useEffect)((function(){o&&(N(!0),j.Z.show(o).then((function(e){var n=e.data;D(n),f.setFieldsValue((0,a.Z)({active:null===n||void 0===n?void 0:n.active,country_id:{label:n.country.translation.title,value:n.country.id},region_id:{label:n.region.translation.title,value:n.region.id},city_id:{label:n.city.translation.title,value:n.city.id}},function(e){if(null===e||void 0===e||!e.translations)return{};var n=e.translations,t=F.map((function(e){var t;return(0,i.Z)({},"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title)}));return Object.assign.apply(Object,[{}].concat((0,b.Z)(t)))}(n)))})).finally((function(){return N(!1)})))}),[o]),(0,E.jsx)(S.Z,{visible:n,onCancel:J,onOk:J,footer:null,loading:H,title:m("add.country"),children:(0,E.jsxs)(_.Z,{form:f,onFinish:function(e){var n,t,r;L(!0);var l={country_id:null===e||void 0===e||null===(n=e.country_id)||void 0===n?void 0:n.value,region_id:null===e||void 0===e||null===(t=e.region_id)||void 0===t?void 0:t.value,city_id:null===e||void 0===e||null===(r=e.city_id)||void 0===r?void 0:r.value,active:e.active,title:(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,b.Z)(F.map((function(n){return(0,i.Z)({},n.locale,e["title[".concat(n.locale,"]")])}))))))};null!==K&&void 0!==K&&K.id?function(e){j.Z.update(K.id,e).then((function(){Z.Am.success(m("successfully.updated")),(0,v.dC)((function(){h((0,g.e)({}))})),J()})).finally((function(){return L(!1)}))}(l):function(e){j.Z.create(e).then((function(){Z.Am.success(m("successfully.added")),(0,v.dC)((function(){h((0,g.e)({}))})),J()})).finally((function(){return L(!1)}))}(l)},layout:"vertical",initialValues:{active:!0},children:[(0,E.jsx)(C.Z,{spinning:H,children:(0,E.jsxs)(w.Z,{gutter:24,children:[(0,E.jsx)(I.Z,{span:24,children:(0,E.jsx)(O.Z,{})}),(0,E.jsx)(I.Z,{span:24,children:F.map((function(e){return(0,E.jsx)(_.Z.Item,{label:m("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==y,rules:[{validator:function(n,t){return t||(null===e||void 0===e?void 0:e.locale)!==y?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(m("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(m("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(m("required")))}}],children:(0,E.jsx)(k.Z,{})},"title"+e.id)}))}),(0,E.jsx)(I.Z,{span:24,children:(0,E.jsx)(_.Z.Item,{name:"region_id",label:m("region_id"),rules:[{required:!0,message:m("required")}],children:(0,E.jsx)(V._,{fetchOptions:function(e){var n=e.search,t=e.page;return q.Z.get({search:n,page:t,has_price:!0}).then((function(e){return e.data.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))}))}})})}),(0,E.jsx)(I.Z,{span:24,children:(0,E.jsx)(_.Z.Item,{name:"country_id",label:m("country_id"),rules:[{required:!0,message:m("required")}],children:(0,E.jsx)(V._,{fetchOptions:function(e){var n=e.search,t=e.page;return P.Z.get({search:n,page:t,has_price:!0}).then((function(e){return e.data.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))}))}})})}),(0,E.jsx)(I.Z,{span:24,children:(0,E.jsx)(_.Z.Item,{name:"city_id",label:m("city_id"),rules:[{required:!0,message:m("required")}],children:(0,E.jsx)(V._,{fetchOptions:function(e){var n=e.search,t=e.page;return A.Z.get({search:n,page:t,has_price:!0}).then((function(e){return e.data.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))}))}})})}),(0,E.jsx)(I.Z,{span:4,children:(0,E.jsx)(_.Z.Item,{label:m("active"),name:"active",valuePropName:"checked",children:(0,E.jsx)(u.Z,{defaultChecked:!0})})})]})}),(0,E.jsx)(c.Z,{type:"primary",htmlType:"submit",loading:T,children:m("submit")})]})})}var M=t(12019),z=t(47515),T=function(){var e=(0,p.$)().t,n=(0,v.I0)(),t=(0,y.lr)(),b=(0,r.Z)(t,2),_=b[0],S=(b[1],(0,l.useContext)(f._).setIsModalVisible),C=(0,v.v9)((function(e){return e.menu}),v.wU).activeMenu,w=null===C||void 0===C?void 0:C.data,I=_.get("city_id"),k=(0,v.v9)((function(e){return e.deliveryArea}),v.wU),O=k.list,P=k.meta,V=k.loading,A=(0,l.useState)(!1),q=(0,r.Z)(A,2),T=q[0],L=q[1],U=(0,l.useState)(!1),B=(0,r.Z)(U,2),H=B[0],N=B[1],$=(0,l.useState)(!1),G=(0,r.Z)($,2),K=G[0],D=G[1],J=(0,l.useState)(null),Q=(0,r.Z)(J,2),R=Q[0],W=Q[1],X=[{title:e("id"),dataIndex:"id",key:"id"},{title:e("name"),dataIndex:"translation",key:"translation",render:function(e,n){return(null===e||void 0===e?void 0:e.title)||"-"}},{title:e("active"),dataIndex:"active",key:"active",render:function(t,i){return(0,E.jsx)(u.Z,{onChange:function(){return function(t){L(t),j.Z.status(t).then((function(){S(!1),n((0,g.e)({city_id:I})),Z.Am.success(e("successfully.updated"))})).finally((function(){L(null)}))}(i.id)},checked:t,loading:Boolean(T===i.id)},i.id)}},{title:e("options"),dataIndex:"options",is_show:!0,render:function(t,i){return(0,E.jsxs)(o.Z,{children:[(0,E.jsx)(c.Z,{type:"primary",icon:(0,E.jsx)(M.Z,{}),onClick:function(){return function(e){N(!0),W(e)}(i.id)}}),(0,E.jsx)(c.Z,{loading:Boolean(K===i.id),icon:(0,E.jsx)(z.Z,{onClick:function(){return function(t){D(t),j.Z.delete(t).then((function(){n((0,g.e)()),Z.Am.success(e("successfully.deleted"))})).finally((function(){D(!1)}))}(i.id)}})})]})}}];(0,l.useEffect)((function(){C.refetch&&(n((0,g.e)({city_id:I})),n((0,h.A_)(C)))}),[C.refetch]),(0,x.Z)((function(){var e={search:null===w||void 0===w?void 0:w.search,city_id:I};n((0,g.e)(e))}),[null===C||void 0===C?void 0:C.data]);return(0,E.jsxs)(s.Z,{title:e("areas"),extra:(0,E.jsxs)(o.Z,{children:[(0,E.jsx)(m.Z,{placeholder:e("search"),handleChange:function(e){return t=e,r="search",void n((0,h.nc)({activeMenu:C,data:(0,a.Z)((0,a.Z)({},w),{},(0,i.Z)({},r,t))}));var t,r},defaultValue:null===w||void 0===w?void 0:w.search,resetSearch:!(null!==w&&void 0!==w&&w.search)}),(0,E.jsx)(c.Z,{type:"primary",onClick:function(){return N(!0)},children:e("add.area")})]}),children:[(0,E.jsx)(d.Z,{columns:X,dataSource:O,pagination:{pageSize:P.per_page,page:P.current_page,total:P.total},rowKey:function(e){return e.id},loading:V,onChange:function(e){var t=e.pageSize,i=e.current;n((0,g.e)({perPage:t,page:i,city_id:I}))}}),(0,E.jsx)(F,{visible:H,setVisible:N,id:R,setId:W})]})}}}]);