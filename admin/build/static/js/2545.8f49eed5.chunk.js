(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2545],{13944:function(e,t,n){"use strict";var r=n(1413),i=n(47313),a=n(77181),o=n(58446),s=n(27834),l=n(33533),c=n(46417),u={position:"absolute",zIndex:"1"},d={position:"absolute",zIndex:"1",right:"0",top:"-2px"},h=function(e){var t=e.title,n=e.series,h=e.width,f=e.height,v=e.xAxis,x=e.customOptions,m=e.card,p=e.type,g=e.extra,y=e.direction,Z=e.bodyClass,_=JSON.parse(JSON.stringify(function(e){switch(e){case"line":default:return l.jd;case"bar":return l.B0;case"area":return l.fT;case"pie":return l.LB}}(p))),j=window.innerWidth<768,b=function(){if(z.current){var e,t=z.current.querySelectorAll("div.apexcharts-legend")[0];t.style.marginRight="".concat(j?0:null===(e=w.current)||void 0===e?void 0:e.offsetWidth,"px"),"rtl"===y&&(t.style.right="auto",t.style.left="0"),j&&(t.style.position="relative",t.style.top=0,t.style.justifyContent="start",t.style.padding=0)}};(0,i.useEffect)((function(){b()}),[]);var w=(0,i.useRef)(null),z=(0,i.useRef)();_.xaxis={categories:v},x&&(_=(0,r.Z)((0,r.Z)({},_),x));var C=function(){return(0,c.jsx)(s.ZP,{onResize:void setTimeout((function(){b()}),600),children:(0,c.jsx)("div",{style:"rtl"===y?{direction:"ltr"}:{},className:"chartRef",ref:z,children:(0,c.jsx)(o.Z,{options:_,type:p,series:n,width:h,height:f})})})};return(0,c.jsx)(c.Fragment,{children:m?(0,c.jsx)(a.Z,{children:(0,c.jsxs)("div",{className:"position-relative ".concat(Z),children:[(0,c.jsx)("div",{style:j?{}:u,children:t})&&(0,c.jsx)("h4",{className:"font-weight-bold",style:j?{}:u,children:t}),g&&(0,c.jsx)("div",{ref:w,style:j?{}:d,children:g}),C()]})}):C()})};h.defaultProps={series:[],height:300,width:"100%",card:!0,type:"line"},t.Z=h},53233:function(e,t,n){"use strict";var r=n(1413),i=n(29439),a=n(47313),o=n(56140),s=n(67251),l=n(45705),c=n(86345),u=n(78267),d=n(37388),h=n(59491),f=n(99587),v=n(24511),x=n(46417),m=o.Z.Text;t.Z=function(e){var t=e.columns,n=void 0===t?[]:t,o=e.setColumns,p=e.style,g=e.size,y=void 0===g?"":g,Z=e.iconOnly,_=(0,v.$)().t,j=(0,a.useState)(!1),b=(0,i.Z)(j,2),w=b[0],z=b[1],C=(0,x.jsx)(s.Z,{children:null===n||void 0===n?void 0:n.map((function(e,t){return(0,x.jsx)(s.Z.Item,{children:(0,x.jsxs)(l.Z,{className:"d-flex justify-content-between",children:[(0,x.jsx)(m,{children:e.title}),(0,x.jsx)(c.Z,{defaultChecked:!0,onClick:function(){return function(e){var t=null===n||void 0===n?void 0:n.map((function(t){return t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t}));o(t)}(e)},disabled:1===t})]})},e+t)}))});return(0,x.jsx)(u.Z,{overlay:C,trigger:["click"],onVisibleChange:function(e){z(e)},visible:w,children:(0,x.jsx)(d.Z,{title:_("change.columns"),children:(0,x.jsx)(h.Z,{style:(0,r.Z)({},p),size:y,icon:(0,x.jsx)(f.Z,{}),children:Z?null:_("Columns")})})})}},22133:function(e,t,n){"use strict";var r=n(56140),i=n(68197),a=n(59624),o=n(77181),s=n(45705),l=n(74294),c=n(46155),u=n(47313),d=n(16034),h=n(88038),f=n(13944),v=n(33533),x=n(24511),m=n(93131),p=n(46417),g=r.Z.Title;t.Z=function(e){var t=e.reportData,n=void 0===t?{}:t,r=(0,u.useContext)(m.G),y=r.by_time,Z=r.options,_=r.handleByTime,j=r.chart_type,b=r.setChartType,w=(0,x.$)().t,z=(0,u.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.chart)||void 0===e?void 0:e.map((function(e){return e.time}))}),[null===n||void 0===n?void 0:n.chart]),C=(0,u.useMemo)((function(){var e;return Boolean(n.charts)?n.charts.map((function(e){var t;return{name:e.translation.title,data:(null===(t=e.stocks)||void 0===t?void 0:t.map((function(e){return e.total_order_quantity||e.avg_quantity||e.quantity||e.count||e.price||e.order_details_sum_quantity||0})))||[]}})):[{name:w("orders"),data:(null===n||void 0===n||null===(e=n.chart)||void 0===e?void 0:e.map((function(e){return parseInt(e.count||e.total_price||e.quantity||e.price||e.products_count||e.order_details_avg_quantity||e.order_details_avg_total_price||e.order_details_sum_quantity||e.avg_price||e.avg_quantity||0,10)})))||[]}]}),[null===n||void 0===n?void 0:n.chart]);return(0,p.jsx)(i.Z,{gutter:24,children:(0,p.jsx)(a.Z,{span:24,children:(0,p.jsxs)(o.Z,{children:[(0,p.jsx)(i.Z,{gutter:24,className:"w-100",children:(0,p.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,p.jsx)(s.Z,{size:"large",className:"d-flex",children:(0,p.jsx)(g,{level:3,className:"mb-0",children:w("item.sold")})}),(0,p.jsxs)("div",{className:"d-flex",children:[(0,p.jsx)(l.Z,{style:{width:100},onChange:_,options:Z,defaultValue:y}),(0,p.jsx)(c.Z,{type:"vertical",style:{height:"100%"}}),(0,p.jsxs)(s.Z,{children:[(0,p.jsx)(d.Z,{style:{fontSize:"22px",cursor:"pointer",color:"area"===j?"green":""},onClick:function(){return b("area")}}),(0,p.jsx)(h.Z,{style:{fontSize:"22px",cursor:"pointer",color:"bar"===j?"green":""},onClick:function(){return b("bar")}})]})]})]})}),(0,p.jsx)(c.Z,{}),(0,p.jsx)(f.Z,{type:j||"area",card:!1,series:C,xAxis:z,height:280,customOptions:{colors:[v.DM[1],v.DM[2],v.DM[3],v.DM[4],v.DM[5],v.DM[6],v.DM[0]],legend:{show:!1},stroke:{width:2.5,curve:"smooth"}}})]})})})}},33533:function(e,t,n){"use strict";n.d(t,{B0:function(){return s},DM:function(){return i},LB:function(){return l},fT:function(){return o},jd:function(){return a}});var r=n(1413),i=["#3e82f7","#04d182","#ff6b72","#ffc107","#a461d8","#fa8c16","#17bcff"],a={chart:{zoom:{enabled:!1},toolbar:{show:!1}},colors:[].concat(i),dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},legend:{position:"top",horizontalAlign:"right",offsetY:-15,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}}},o=(0,r.Z)({},a),s={chart:{zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"25px",startingShapre:"rounded",endingShape:"rounded"}},colors:[].concat(i),dataLabels:{enabled:!1},stroke:{show:!0,width:6,curve:"smooth",colors:["transparent"]},legend:{position:"top",horizontalAlign:"right",offsetY:-15,inverseOrder:!0,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},fill:{opacity:1},tooltip:{y:{formatter:function(e){return"".concat(e)}}}},l={colors:[].concat(i),plotOptions:{pie:{size:200,donut:{labels:{show:!0,total:{show:!1,showAlways:!0,label:"",fontSize:"18px",fontFamily:"Roboto",fontWeight:"bold",color:"#1a3353",formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)+"Orders count"}}},size:"100%"}}},labels:[],dataLabels:{enabled:!0},legend:{show:!0}}},84017:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after",r=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===n?"".concat(r," ").concat(t):"".concat(t," ").concat(r)}n.d(t,{Z:function(){return r}})},73585:function(e,t,n){"use strict";n.r(t);var r=n(29439),i=n(56140),a=n(99096),o=n(72652),s=n(68197),l=n(59624),c=n(45705),u=n(77181),d=n(59491),h=n(78508),f=n(47313),v=n(63243),x=n(93131),m=n(2717),p=n(2388),g=n(80314),y=n(74776),Z=n.n(y),_=n(97890),j=n(90954),b=n(70816),w=n.n(b),z=n(26441),C=n(53233),k=n(84017),N=n(22133),q=n(46417),M=i.Z.Title,I=i.Z.Text,H=a.Z.RangePicker;t.default=function(){var e=(0,_.TH)(),t=Z().parse(e.search,[])["?category_id"],n=Z().parse(e.search,[])["?product_id"],i=(0,f.useContext)(x.G),a=i.date_from,y=i.date_to,b=i.by_time,R=i.chart,D=i.handleDateRange,V=i.handleChart,O=(0,m.I0)(),S=(0,f.useState)(!1),T=(0,r.Z)(S,2),L=T[0],B=T[1],A=(0,m.v9)((function(e){return e.menu}),m.wU).activeMenu,E=(0,m.v9)((function(e){return e.currency}),m.wU).defaultCurrency,F=(0,m.v9)((function(e){return e.revenueReport}),m.wU),P=F.loading,W=F.revenueList,$=F.chartData,U=(0,f.useState)([{title:"Date",dataIndex:"time",key:"time",is_show:!0,sorter:function(e,t){return w()(e.time).unix()-w()(t.time).unix()}},{title:"Item sold",dataIndex:"count",key:"count",is_show:!0,sorter:function(e,t){return e.count-t.count}},{title:"Orders",dataIndex:"total_quantity",key:"total_quantity",is_show:!0,sorter:function(e,t){return e.total_quantity-t.total_quantity}},{title:"Shipping",key:"delivery_fee",dataIndex:"delivery_fee",render:function(e,t){return(0,k.Z)(t.delivery_fee,null===E||void 0===E?void 0:E.symbol)},is_show:!0,sorter:function(e,t){return e.delivery_fee-t.delivery_fee}},{title:"Returns",key:"canceled_sum",dataIndex:"canceled_sum",render:function(e,t){return(0,k.Z)(t.canceled_sum,null===E||void 0===E?void 0:E.symbol)},is_show:!0,sorter:function(e,t){return e.canceled_sum-t.canceled_sum}},{title:"Net sales",key:"total_price",dataIndex:"total_price",render:function(e,t){return(0,k.Z)(t.total_price,null===E||void 0===E?void 0:E.symbol)},is_show:!0,sorter:function(e,t){return e.total_price-t.total_price}},{title:"Tax",key:"tax",dataIndex:"tax",render:function(e,t){return(0,k.Z)(t.tax,null===E||void 0===E?void 0:E.symbol)},is_show:!0,sorter:function(e,t){return e.tax-t.tax}}]),G=(0,r.Z)(U,2),J=G[0],Y=G[1],K=function(){var e={date_from:a,date_to:y,type:b,chart:R};t&&(e.categories=[t]),n&&(e.products=[n]),X.find((function(e){return e.value===R}))&&O((0,p.eM)(e))},Q=function(){var e={date_from:a,date_to:y,type:b};t&&(e.categories=[t]),n&&(e.products=[n]),O((0,p.Wc)(e))},X=(0,f.useMemo)((function(){return[{label:"Total sales",value:"avg_quantity",qty:"quantity",price:!1},{label:"Net sales",value:"price",qty:"price",price:!0},{label:"Average order price",value:"avg_price",qty:"avg_price",price:!0},{label:"Orders",value:"count",qty:"count",price:!1}]}),[]);return(0,f.useEffect)((function(){X.every((function(e){return e.value!==R}))&&V(X[0].value)}),[]),(0,f.useEffect)((function(){A.refetch&&(Q(),K(),O((0,j.A_)(A)))}),[A.refetch]),(0,g.Z)((function(){Q()}),[y,b,R,t,n,a]),(0,g.Z)((function(){K()}),[y,b,R,a]),(0,q.jsxs)(o.Z,{size:"large",spinning:P,children:[(0,q.jsx)(s.Z,{gutter:24,className:"mb-4",children:(0,q.jsx)(l.Z,{span:12,children:(0,q.jsx)(c.Z,{size:"large",children:(0,q.jsx)(H,{defaultValue:[w()(a),w()(y)],onChange:D})})})}),(0,q.jsx)(s.Z,{gutter:24,className:"report-products",children:null===X||void 0===X?void 0:X.map((function(e,t){return(0,q.jsx)(l.Z,{span:6,onClick:function(){return V(e.value)},children:(0,q.jsxs)(u.Z,{className:R===e.value&&"active",children:[(0,q.jsx)(s.Z,{className:"mb-5",children:(0,q.jsx)(l.Z,{children:(0,q.jsx)(I,{children:e.label})})}),(0,q.jsx)(s.Z,{gutter:24,children:(0,q.jsx)(l.Z,{span:18,children:(0,q.jsx)(M,{level:2,children:e.price?(0,k.Z)($[e.qty],null===E||void 0===E?void 0:E.symbol):$[e.qty]})})})]})},e.label)}))}),(0,q.jsx)(N.Z,{reportData:$,chart_data:"quantities_sum"}),(0,q.jsx)(s.Z,{gutter:24,children:(0,q.jsx)(l.Z,{span:24,children:(0,q.jsxs)(u.Z,{children:[(0,q.jsx)(s.Z,{gutter:24,className:"align-items-center mb-2",children:(0,q.jsxs)(c.Z,{className:"w-100 mr-16 ml-16 justify-content-between",children:[(0,q.jsx)(M,{level:2,className:"mb-0",children:"Revenue"}),(0,q.jsxs)(c.Z,{align:"end",children:[(0,q.jsx)(d.Z,{onClick:function(){B(!0),z.Z.getRevenueReport({date_from:a,date_to:y,type:b,export:"excel"}).then((function(e){var t=e.data.link;t&&(window.location.href=t)})).finally((function(){return B(!1)}))},loading:L,icon:(0,q.jsx)(v.Z,{}),children:"Download"}),(0,q.jsx)(C.Z,{columns:J,setColumns:Y})]})]})}),(0,q.jsx)(h.Z,{columns:null===J||void 0===J?void 0:J.filter((function(e){return e.is_show})),loading:P,dataSource:null===W||void 0===W?void 0:W.paginate,pagination:!1})]})})})]})}},63243:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),i=n(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},o=n(17469),s=function(e,t){return i.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};s.displayName="CloudDownloadOutlined";var l=i.forwardRef(s)},16034:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),i=n(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"},o=n(17469),s=function(e,t){return i.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};s.displayName="LineChartOutlined";var l=i.forwardRef(s)},99587:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),i=n(47313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},o=n(17469),s=function(e,t){return i.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};s.displayName="TableOutlined";var l=i.forwardRef(s)},24654:function(){}}]);