"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5739],{4014:function(e,i,n){function l(e){var i,n,l=null===e||void 0===e?void 0:e.slice(0,1),d=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,d-1);s=null===(i=s)||void 0===i?void 0:i.replace(/./g,"*");var o=null===e||void 0===e?void 0:e.slice(d-1,e.length);return null===l||void 0===l||null===(n=l.concat(s))||void 0===n?void 0:n.concat(o)}n.d(i,{Z:function(){return l}})},84261:function(e,i,n){function l(e){var i="".concat(e),n="*".repeat(i.length-2);return(null===i||void 0===i?void 0:i[0])+n+(null===i||void 0===i?void 0:i[(null===i||void 0===i?void 0:i.length)-1])}n.d(i,{Z:function(){return l}})},31025:function(e,i,n){n.d(i,{Z:function(){return Z}});var l=n(15861),d=n(29439),s=n(87757),o=n.n(s),r=n(47313),t=n(24511),a=n(51095),c=n(23560),u=n(59491),v=n(66204),x=n(31881),h=n.n(x),m=n(97421),p=n(51282),j=n(46417),f="https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=".concat(m.$h);function Z(e){var i=e.orderId,n=e.showLink,s=void 0===n||n,x=e.size,Z=void 0===x?2:x,y=(0,t.$)().t,g=(0,r.useState)(""),b=(0,d.Z)(g,2),k=b[0],_=b[1],N=(0,r.useState)(!1),w=(0,d.Z)(N,2),I=w[0],C=w[1],z=(0,r.useState)(null),Y=(0,d.Z)(z,2),S=Y[0],q=Y[1],D=function(){var e=(0,l.Z)(o().mark((function e(){var n,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),n={dynamicLinkInfo:{domainUriPrefix:m.AC,link:"".concat(m.o6,"/orders/").concat(i),androidInfo:{androidPackageName:m.aG},iosInfo:{iosBundleId:m.Ir}}},e.prev=2,e.next=5,h().post(f,n);case 5:l=e.sent,d=l.data,q(null),_(null===d||void 0===d?void 0:d.shortLink),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),q(e.t0),c.Am.error(e.t0.message);case 15:return e.prev=15,C(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){D()}),[i]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("h3",{children:[y("qr_code"),":"]}),(0,j.jsx)("div",{children:I||S?S?(0,j.jsx)(v.Z,{color:"red",children:y("smth.went.wrong")}):(0,j.jsx)(p.Z,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{style:{width:"".concat(100*Z,"px"),height:"".concat(100*Z,"px"),borderRadius:"10px",overflow:S?"none":"hidden"},children:(0,j.jsx)(a.Qd,{size:500,id:"qrCode",includeMargin:!0,value:k,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,j.jsx)("br",{}),s&&(0,j.jsx)(u.Z,{type:"primary",href:k,target:"_blank",rel:"noreferrer",style:{width:"".concat(100*Z,"px")},children:y("link.to.order")})]})})]})}},64922:function(e,i,n){n.d(i,{t:function(){return c}});var l=n(10976),d=n(68197),s=n(59624),o=n(66672),r=n(59491),t=n(24511),a=n(46417),c=function(e){var i=e.onSubmit,n=e.initialData,c=e.isSubmitting,u=(0,t.$)().t;return(0,a.jsx)(l.Z,{layout:"vertical",initialValues:n,onFinish:i,children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:u("tracking.name"),name:"track_name",rules:[{required:!0,message:u("required")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:u("tracking.id"),name:"track_id",rules:[{required:!0,message:u("required")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:u("tracking.url"),name:"track_url",rules:[{type:"url",message:u("should.be.url")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(s.Z,{span:7,children:(0,a.jsx)(r.Z,{type:"primary",loading:c,htmlType:"submit",children:u("submit")})})]})})}},65739:function(e,i,n){n.r(i),n.d(i,{default:function(){return K}});var l=n(29439),d=n(47313),s=n(45705),o=n(66204),r=n(26824),t=n(78508),a=n(59491),c=n(77181),u=n(68197),v=n(59624),x=n(56140),h=n(14133),m=n(83999),p=n(72652),j=n(45334),f=n(41068),Z=n(46155),y=n(83685),g=n(12019),b=n(89720),k=n(97890),_=n(29466),N=n(7370),w=n(45464),I=n(2717),C=n(90954),z=n(7920),Y=n(24077),S=n(24511),q=n(84017),D=n(73270),H=n(22539),M=n(80355),B=n(32916),F=n(97421),T=n(58821),L=n(5958),R=n(70816),A=n.n(R),U=n(40197),O=n(79492),$=n(4014),E=n(31025),G=n(84261),P=n(60861),V=n(64922),Q=n(23560),J=n(46417);function K(){var e,i,n,R,K,W,X,ee,ie,ne,le,de,se,oe,re,te,ae,ce,ue,ve,xe,he,me,pe,je,fe,Ze,ye,ge,be,ke,_e,Ne,we,Ie,Ce,ze,Ye,Se,qe,De,He,Me,Be,Fe,Te,Le,Re,Ae,Ue,Oe=(0,I.v9)((function(e){return e.menu}),I.wU).activeMenu,$e=(0,I.v9)((function(e){return e.currency}),I.wU).defaultCurrency,Ee=(0,I.v9)((function(e){return e.formLang}),I.wU).defaultLang,Ge=Oe.data,Pe=(0,S.$)().t,Ve=(0,k.UO)().id,Qe=(0,I.I0)(),Je=(0,k.s0)(),Ke=(0,d.useRef)(),We=(0,d.useRef)(),Xe=((0,O.Z)().isDemo,(0,d.useState)(null)),ei=(0,l.Z)(Xe,2),ii=ei[0],ni=ei[1],li=(0,d.useState)(!1),di=(0,l.Z)(li,2),si=di[0],oi=di[1],ri=(0,d.useState)(!1),ti=(0,l.Z)(ri,2),ai=ti[0],ci=ti[1],ui=(0,d.useState)(null),vi=(0,l.Z)(ui,2),xi=vi[0],hi=vi[1],mi=(0,d.useState)(null),pi=(0,l.Z)(mi,2),ji=pi[0],fi=pi[1],Zi=(0,d.useState)(!1),yi=(0,l.Z)(Zi,2),gi=yi[0],bi=yi[1],ki=(0,I.v9)((function(e){return e.orderStatus}),I.wU).statusList,_i=[{title:Pe("id"),dataIndex:"id",key:"id",render:function(e,i){var n;return null===i||void 0===i||null===(n=i.stock)||void 0===n?void 0:n.id}},{title:Pe("product.name"),dataIndex:"product",key:"product",render:function(e,i){var n,l,d,r,t;return(0,J.jsxs)(s.Z,{direction:"vertical",className:"relative",children:[null===i||void 0===i||null===(n=i.stock)||void 0===n||null===(l=n.product)||void 0===l||null===(d=l.translation)||void 0===d?void 0:d.title,null===i||void 0===i||null===(r=i.stock)||void 0===r||null===(t=r.extras)||void 0===t?void 0:t.map((function(e){var i,n,l;return(0,J.jsxs)(o.Z,{children:[null===(i=e.group)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.title,": ",null===(l=e.value)||void 0===l?void 0:l.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Pe("image"),dataIndex:"img",key:"img",render:function(e,i){var n,l;return(0,J.jsx)(r.Z,{src:(0,w.Z)(null===i||void 0===i||null===(n=i.stock)||void 0===n||null===(l=n.product)||void 0===l?void 0:l.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Pe("price"),dataIndex:"origin_price",key:"origin_price",render:function(e,i){var n;return(0,q.Z)(null===i||void 0===i||null===(n=i.stock)||void 0===n?void 0:n.price,null===$e||void 0===$e?void 0:$e.symbol)}},{title:Pe("quantity"),dataIndex:"quantity",key:"quantity",render:function(e,i){var n,l;return null!==i&&void 0!==i&&i.bonus?(0,J.jsx)(o.Z,{color:"green",children:Pe("bonus")}):(0,J.jsx)("span",{children:e*((null===i||void 0===i||null===(n=i.stock)||void 0===n||null===(l=n.product)||void 0===l?void 0:l.interval)||1)})}},{title:Pe("discount"),dataIndex:"rate_discount",key:"rate_discount",render:function(e,i){var n;return(0,q.Z)(null===i||void 0===i||null===(n=i.stock)||void 0===n?void 0:n.discount,null===$e||void 0===$e?void 0:$e.symbol)}},{title:Pe("tax"),dataIndex:"tax",key:"tax",render:function(e,i){return(0,q.Z)(null===i||void 0===i?void 0:i.tax,null===$e||void 0===$e?void 0:$e.symbol)}},{title:Pe("total.price"),dataIndex:"total_price",key:"total_price",render:function(e,i){return(0,q.Z)(null===i||void 0===i?void 0:i.total_price,null===$e||void 0===$e?void 0:$e.symbol)}},{title:Pe("actions"),dataIndex:"actions",key:"actions",render:function(e,i){return(0,J.jsx)(s.Z,{children:(0,J.jsx)(a.Z,{type:"primary",icon:(0,J.jsx)(y.Z,{}),onClick:function(){return Yi(i)},disabled:"new"!==(null===Ge||void 0===Ge?void 0:Ge.status)&&"accepted"!==(null===Ge||void 0===Ge?void 0:Ge.status)||(null===i||void 0===i?void 0:i.bonus)})})}},{title:Pe("note"),dataIndex:"note",key:"note",render:function(e){return e||"--"}}],Ni=[{title:Pe("date"),dataIndex:"date",key:"date",render:function(e){return A()(e).format("YYYY-MM-DD HH:mm")}},{title:Pe("document"),dataIndex:"document",key:"document"},{title:Pe("number"),dataIndex:"number",key:"number"},{title:Pe("total.price"),dataIndex:"price",key:"price"}],wi=[{price:(0,q.Z)(null===Ge||void 0===Ge?void 0:Ge.total_price,$e.symbol),number:(0,J.jsxs)(_.rU,{to:"/orders/generate-invoice/".concat(null===Ge||void 0===Ge?void 0:Ge.id),children:["#",null===Ge||void 0===Ge?void 0:Ge.id]}),document:Pe("invoice"),date:A()(null===Ge||void 0===Ge?void 0:Ge.created_at).format("YYYY-MM-DD HH:mm")},{price:"-",number:(0,J.jsxs)(_.rU,{to:"/orders/generate-invoice/".concat(null===Ge||void 0===Ge?void 0:Ge.id),children:["#",null===Ge||void 0===Ge?void 0:Ge.id]}),document:Pe("delivery.receipt"),date:A()(null===Ge||void 0===Ge?void 0:Ge.created_at).format("YYYY-MM-DD HH:mm")}],Ii=function(){hi(null),fi(null),ni(null)};function Ci(){oi(!0),N.Z.getById(Ve).then((function(e){var i=e.data;Qe((0,C.nc)({activeMenu:Oe,data:i}))})).finally((function(){oi(!1),Qe((0,C.A_)(Oe))}))}var zi=(0,d.useCallback)((function(e){bi(!0),N.Z.updateTracking(null===Ge||void 0===Ge?void 0:Ge.id,e).then((function(){Q.Am.success(Pe("successfully.updated")),Ci()})).finally((function(){bi(!1)}))}),[null===Ge||void 0===Ge?void 0:Ge.id]),Yi=function(e){var i,n;Qe((0,C.bL)({url:"order/details/".concat(null===Ge||void 0===Ge?void 0:Ge.id,"/replace/").concat(null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.id),id:"replace_product",name:Pe("replace.product")})),Je("/order/details/".concat(null===Ge||void 0===Ge?void 0:Ge.id,"/replace/").concat(null===e||void 0===e||null===(n=e.stock)||void 0===n?void 0:n.id),{state:{data:Ge}})};return(0,d.useEffect)((function(){Oe.refetch&&(Ci(),0===ki.length&&Qe((0,U.dX)({})))}),[Oe.refetch]),(0,J.jsxs)("div",{className:"order_details",children:[(0,J.jsx)(c.Z,{className:"order-details-info",title:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(B.Qyq,{className:"mr-2 icon"}),"".concat(Pe("order")," ").concat(null!==Ge&&void 0!==Ge&&Ge.id?"#".concat(null===Ge||void 0===Ge?void 0:Ge.id," "):"")," ",Pe("from.order")," ",null===Ge||void 0===Ge||null===(e=Ge.user)||void 0===e?void 0:e.firstname," ",(null===Ge||void 0===Ge||null===(i=Ge.user)||void 0===i?void 0:i.lastname)||""]}),extra:"delivered"!==(null===Ge||void 0===Ge?void 0:Ge.status)&&"canceled"!==(null===Ge||void 0===Ge?void 0:Ge.status)?(0,J.jsxs)(s.Z,{children:["delivered"!==(null===Ge||void 0===Ge?void 0:Ge.status)&&"canceled"!==(null===Ge||void 0===Ge?void 0:Ge.status)?(0,J.jsx)(a.Z,{type:"primary",onClick:function(){return hi(null===Ge||void 0===Ge?void 0:Ge.id)},children:Pe("change.status")}):null,(0,J.jsx)(a.Z,{type:"primary",icon:(0,J.jsx)(g.Z,{}),onClick:function(){Qe((0,D.bn)()),Qe((0,C.bL)({url:"order/".concat(Ve),id:"order_edit",name:Pe("edit.order")})),Je("/order/".concat(Ve))},children:Pe("edit")})]}):""}),(0,J.jsxs)(u.Z,{gutter:24,children:[(0,J.jsx)(v.Z,{span:24,children:(0,J.jsx)(c.Z,{children:(0,J.jsxs)(s.Z,{className:"justify-content-between w-100",children:[(0,J.jsxs)(s.Z,{className:"align-items-start",children:[(0,J.jsx)(b.Z,{className:"order-card-icon"}),(0,J.jsxs)("div",{className:"d-flex flex-column",children:[(0,J.jsx)(x.Z.Text,{children:Pe("delivery.date")}),si?(0,J.jsx)(h.Z.Button,{size:16}):(0,J.jsxs)(x.Z.Text,{className:"order-card-title",children:[null===Ge||void 0===Ge?void 0:Ge.delivery_date," ",null===Ge||void 0===Ge?void 0:Ge.delivery_time]})]})]}),(0,J.jsxs)(s.Z,{className:"align-items-start",onClick:function(){return We.current.scrollIntoView({behavior:"smooth"})},children:[(0,J.jsx)(L.iFN,{className:"order-card-icon"}),(0,J.jsxs)("div",{className:"d-flex flex-column",children:[(0,J.jsx)(x.Z.Text,{children:Pe("total.price")}),si?(0,J.jsx)(h.Z.Button,{size:16,loading:si}):(0,J.jsx)(x.Z.Text,{className:"order-card-title",children:(0,q.Z)(null===Ge||void 0===Ge?void 0:Ge.total_price,null===$e||void 0===$e?void 0:$e.symbol)})]})]}),(0,J.jsxs)(s.Z,{className:"align-items-start",children:[(0,J.jsx)(L.Dij,{className:"order-card-icon"}),(0,J.jsxs)("div",{className:"d-flex flex-column",children:[(0,J.jsx)(x.Z.Text,{children:Pe("messages")}),si?(0,J.jsx)(h.Z.Button,{size:16}):(0,J.jsx)(x.Z.Text,{className:"order-card-title",children:null!==Ge&&void 0!==Ge&&Ge.review?1:0})]})]}),(0,J.jsxs)(s.Z,{className:"align-items-start",onClick:function(){return Ke.current.scrollIntoView({behavior:"smooth"})},children:[(0,J.jsx)(B.Qyq,{className:"order-card-icon"}),(0,J.jsxs)("div",{className:"d-flex flex-column",children:[(0,J.jsx)(x.Z.Text,{children:Pe("products")}),si?(0,J.jsx)(h.Z.Button,{size:16}):(0,J.jsx)(x.Z.Text,{className:"order-card-title",children:null===Ge||void 0===Ge||null===(n=Ge.details)||void 0===n?void 0:n.reduce((function(e,i){return e+(i.quantity||0)}),0)})]})]})]})})}),"canceled"!==(null===Ge||void 0===Ge?void 0:Ge.status)&&(0,J.jsx)(v.Z,{span:24,children:(0,J.jsx)(c.Z,{children:(0,J.jsx)(m.Z,{current:null===ki||void 0===ki?void 0:ki.findIndex((function(e){return e.name===(null===Ge||void 0===Ge?void 0:Ge.status)})),children:null===ki||void 0===ki||null===(R=ki.slice(0,-1))||void 0===R?void 0:R.filter((function(e){return null===e||void 0===e?void 0:e.active})).map((function(e){return(0,J.jsx)(m.Z.Step,{title:Pe(e.name)},e.id)}))})})}),(0,J.jsxs)(v.Z,{span:16,children:[(0,J.jsx)(p.Z,{spinning:si,children:(0,J.jsxs)(c.Z,{style:{minHeight:"200px"},children:[(0,J.jsxs)("h3",{children:[Pe("details"),":"]}),(0,J.jsxs)(u.Z,{hidden:si,className:"mb-3 order_detail",gutter:10,children:[(0,J.jsxs)(v.Z,{span:12,children:[(0,J.jsxs)("div",{children:[Pe("created.date.&.time"),":",(0,J.jsxs)("span",{className:"ml-2",children:[(0,J.jsx)(T.yoA,{className:"mr-1"})," ",A()(null===Ge||void 0===Ge?void 0:Ge.created_at).format("YYYY-MM-DD HH:mm")," "]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[Pe("delivery.date.&.time"),":",(0,J.jsxs)("span",{className:"ml-2",children:[(0,J.jsx)(T.yoA,{className:"mr-1"})," ",null===Ge||void 0===Ge?void 0:Ge.delivery_date," ",null===Ge||void 0===Ge?void 0:Ge.delivery_time]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[Pe("payment.status"),":",(0,J.jsxs)("span",{style:{cursor:"pointer"},className:"ml-2",onClick:function(){return ci(!0)},children:[Pe(null===Ge||void 0===Ge||null===(K=Ge.transaction)||void 0===K?void 0:K.status)," ",(0,J.jsx)(g.Z,{})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[Pe("note"),":",(0,J.jsx)("span",{className:"ml-2",children:Pe(null!==Ge&&void 0!==Ge&&Ge.note?null===Ge||void 0===Ge?void 0:Ge.note:"")})]})]}),(0,J.jsxs)(v.Z,{span:12,children:[(0,J.jsxs)("div",{children:[Pe("status"),":",(0,J.jsx)("span",{className:"ml-2",children:"new"===(null===Ge||void 0===Ge?void 0:Ge.status)?(0,J.jsx)(o.Z,{color:"blue",children:Pe(null===Ge||void 0===Ge?void 0:Ge.status)}):"canceled"===(null===Ge||void 0===Ge?void 0:Ge.status)?(0,J.jsx)(o.Z,{color:"error",children:Pe(null===Ge||void 0===Ge?void 0:Ge.status)}):(0,J.jsx)(o.Z,{color:"cyan",children:Pe(null===Ge||void 0===Ge?void 0:Ge.status)})})]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[Pe("delivery.type"),":",(0,J.jsx)("span",{className:"ml-2",children:null===Ge||void 0===Ge?void 0:Ge.delivery_type})]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[Pe("payment.type"),":",(0,J.jsx)("span",{className:"ml-2",children:Pe(null===Ge||void 0===Ge||null===(W=Ge.transaction)||void 0===W||null===(X=W.payment_system)||void 0===X?void 0:X.tag)})]}),(0,J.jsx)("br",{})]})]}),(0,J.jsxs)(u.Z,{hidden:si,className:"mb-3 order_detail",children:[(0,J.jsxs)(v.Z,{span:12,children:[(0,J.jsxs)("h3",{children:[Pe("delivery.address"),":"]}),(0,J.jsx)("div",{children:null!==Ge&&void 0!==Ge&&Ge.address?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)("div",{children:[Pe("street.house.number"),":"," ",null!==(ee=null===Ge||void 0===Ge||null===(ie=Ge.address)||void 0===ie?void 0:ie.street_house_number)&&void 0!==ee?ee:Pe("not.given")]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[Pe("zipcode"),":"," ",null!==(ne=null!==(le=null===Ge||void 0===Ge||null===(de=Ge.address)||void 0===de?void 0:de.zipcode)&&void 0!==le?le:null===Ge||void 0===Ge||null===(se=Ge.address)||void 0===se?void 0:se.zip_code)&&void 0!==ne?ne:Pe("not.given")]})]}):null!==Ge&&void 0!==Ge&&Ge.my_address?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)("div",{children:[Pe("street.house.number"),":"," ",null!==(oe=null===Ge||void 0===Ge||null===(re=Ge.my_address)||void 0===re?void 0:re.street_house_number)&&void 0!==oe?oe:Pe("not.given")]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[Pe("zipcode"),":"," ",null!==(te=null===Ge||void 0===Ge||null===(ae=Ge.my_address)||void 0===ae?void 0:ae.zipcode)&&void 0!==te?te:Pe("not.given")]})]}):null!==Ge&&void 0!==Ge&&Ge.delivery_point?(0,J.jsx)(J.Fragment,{children:(0,J.jsxs)("div",{children:[Pe("address"),":"," ",null!==(ce=null===Ge||void 0===Ge||null===(ue=Ge.delivery_point)||void 0===ue||null===(ve=ue.address)||void 0===ve?void 0:ve[Ee])&&void 0!==ce?ce:Pe("no.address")]})}):"digital"===(null===Ge||void 0===Ge?void 0:Ge.delivery_type)?(0,J.jsx)("div",{children:Pe("digital.delivery")}):(0,J.jsx)("div",{children:Pe("no.address")})}),(0,J.jsxs)(a.Z,{className:"map_show mt-3",onClick:function(){return ni(Ve)},children:[(0,J.jsx)(H.$0r,{style:{marginRight:"8px"}})," ",Pe("show.locations")]})]}),(0,J.jsx)(v.Z,{span:12,children:(0,J.jsx)(E.Z,{orderId:Ve})})]})]})}),(0,J.jsx)(c.Z,{title:Pe("documents"),children:(0,J.jsx)(t.Z,{columns:Ni,dataSource:wi,pagination:!1,loading:si})})]}),(0,J.jsxs)(v.Z,{span:8,className:"order_info",children:["delivery"===(null===Ge||void 0===Ge?void 0:Ge.delivery_type)&&(0,J.jsxs)(c.Z,{title:Pe("deliveryman"),extra:"ready"===(null===Ge||void 0===Ge?void 0:Ge.status)&&"pickup"!==(null===Ge||void 0===Ge?void 0:Ge.delivery_type)&&(0,J.jsxs)(a.Z,{onClick:function(){return fi(Ge)},children:[Pe("change"),(0,J.jsx)(g.Z,{})]}),children:["new"===(null===Ge||void 0===Ge?void 0:Ge.status)||"accepted"===(null===Ge||void 0===Ge?void 0:Ge.status)?(0,J.jsx)("p",{children:Pe("order_status_ready")}):"","new"===(null===Ge||void 0===Ge?void 0:Ge.status)||"accepted"===(null===Ge||void 0===Ge?void 0:Ge.status)||null!==Ge&&void 0!==Ge&&Ge.deliveryman?"":(0,J.jsx)("p",{children:Pe("The supplier is not assigned or delivery type pickup")}),(null===Ge||void 0===Ge?void 0:Ge.deliveryman)&&(0,J.jsxs)(s.Z,{children:[(0,J.jsx)(j.C,{shape:"square",size:64,src:F.bV+(null===Ge||void 0===Ge||null===(xe=Ge.deliveryman)||void 0===xe?void 0:xe.img)}),(0,J.jsxs)("div",{children:[(0,J.jsxs)("h5",{children:[null===Ge||void 0===Ge||null===(he=Ge.deliveryman)||void 0===he?void 0:he.firstname," ",(null===Ge||void 0===Ge||null===(me=Ge.deliveryman)||void 0===me?void 0:me.lastname)||""]}),(0,J.jsxs)("span",{className:"delivery-info",children:[(0,J.jsx)(T.lfG,{}),null!==Ge&&void 0!==Ge&&null!==(pe=Ge.deliveryman)&&void 0!==pe&&pe.phone?(0,G.Z)(null===Ge||void 0===Ge||null===(je=Ge.deliveryman)||void 0===je?void 0:je.phone):Pe("no.phone")]}),(0,J.jsxs)("div",{className:"delivery-info",children:[(0,J.jsx)("b",{children:(0,J.jsx)(H.ixJ,{size:16})}),(0,J.jsx)("span",{children:(0,$.Z)(null===Ge||void 0===Ge||null===(fe=Ge.deliveryman)||void 0===fe?void 0:fe.email)})]})]})]})]}),2===(null===Ge||void 0===Ge?void 0:Ge.type)&&"delivery"===(null===Ge||void 0===Ge?void 0:Ge.delivery_type)&&(0,J.jsx)(c.Z,{title:Pe("tracking.info"),children:(0,J.jsx)(V.t,{onSubmit:zi,isSubmitting:gi,initialData:{track_name:null===Ge||void 0===Ge?void 0:Ge.track_name,track_id:null===Ge||void 0===Ge?void 0:Ge.track_id,track_url:null===Ge||void 0===Ge?void 0:Ge.track_url}})}),!(null===Ge||void 0===Ge||!Ge.username)&&(0,J.jsxs)(c.Z,{title:Pe("order.receiver"),children:[(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:Pe("name")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(T.HHm,{}),null===Ge||void 0===Ge?void 0:Ge.username]})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:Pe("phone")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(T.lfG,{}),null===Ge||void 0===Ge?void 0:Ge.phone]})]})]}),!(null===Ge||void 0===Ge||!Ge.user)&&(0,J.jsx)(c.Z,{title:(0,J.jsxs)(s.Z,{children:[Pe("customer.info"),(0,J.jsx)(g.Z,{onClick:function(){return Qe((0,C.bL)({url:"users/user/".concat(null===Ge||void 0===Ge?void 0:Ge.user.uuid),id:"user_info",name:Pe("user.info")})),void Je("/users/user/".concat(null===Ge||void 0===Ge?void 0:Ge.user.uuid),{state:{user_id:null===Ge||void 0===Ge?void 0:Ge.user.id}})}})]}),children:(0,J.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[si?(0,J.jsx)(h.Z.Avatar,{size:64,shape:"square"}):(0,J.jsx)(j.C,{shape:"square",size:64,src:null===Ge||void 0===Ge||null===(Ze=Ge.user)||void 0===Ze?void 0:Ze.img}),(0,J.jsx)("h5",{className:"customer-name",children:si?(0,J.jsx)(h.Z.Button,{size:20,style:{width:70}}):(null===Ge||void 0===Ge||null===(ye=Ge.user)||void 0===ye?void 0:ye.firstname)+" "+((null===Ge||void 0===Ge||null===(ge=Ge.user)||void 0===ge?void 0:ge.lastname)||"")}),(0,J.jsxs)("div",{className:"customer-info-detail",children:[(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:Pe("phone")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(T.lfG,{}),si?(0,J.jsx)(h.Z.Button,{size:16}):null!==Ge&&void 0!==Ge&&null!==(be=Ge.user)&&void 0!==be&&be.phone?(0,G.Z)(null===Ge||void 0===Ge||null===(ke=Ge.user)||void 0===ke?void 0:ke.phone):Pe("no.phone")]})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:Pe("email")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(H.ixJ,{}),si?(0,J.jsx)(h.Z.Button,{size:16}):(0,$.Z)(null===Ge||void 0===Ge||null===(_e=Ge.user)||void 0===_e?void 0:_e.email)]})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:Pe("registration.date")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(T.yoA,{}),si?(0,J.jsx)(h.Z.Button,{size:16}):A()(null===Ge||void 0===Ge||null===(Ne=Ge.user)||void 0===Ne?void 0:Ne.created_at).format("DD-MM-YYYY, HH:mm")]})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:Pe("orders.count")}),(0,J.jsx)("span",{className:"description",children:si?(0,J.jsx)(h.Z.Button,{size:16}):(0,J.jsx)(f.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===Ge||void 0===Ge||null===(we=Ge.user)||void 0===we?void 0:we.orders_count)||0})})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:Pe("spent.since.registration")}),(0,J.jsx)("span",{className:"description",children:si?(0,J.jsx)(h.Z.Button,{size:16}):(0,J.jsx)(f.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,q.Z)(null===Ge||void 0===Ge||null===(Ie=Ge.user)||void 0===Ie?void 0:Ie.orders_sum_price,null===$e||void 0===$e?void 0:$e.symbol)})})]})]})]})}),(null===Ge||void 0===Ge?void 0:Ge.review)&&!si&&(0,J.jsx)(c.Z,{title:Pe("messages"),children:(0,J.jsxs)("div",{className:"order-message",children:[(0,J.jsx)("span",{className:"message",children:null===Ge||void 0===Ge||null===(Ce=Ge.review)||void 0===Ce?void 0:Ce.comment}),(0,J.jsx)(s.Z,{className:"w-100 justify-content-end",children:(0,J.jsx)("span",{className:"date",children:A()(null===Ge||void 0===Ge||null===(ze=Ge.review)||void 0===ze?void 0:ze.created_at).format("YYYY-MM-DD HH:mm")})})]})}),(null===Ge||void 0===Ge?void 0:Ge.shop)&&(0,J.jsx)(c.Z,{title:"".concat(Pe("shop.details"),": #").concat(null===Ge||void 0===Ge||null===(Ye=Ge.shop)||void 0===Ye?void 0:Ye.id),loading:si,children:(0,J.jsxs)(u.Z,{gutter:12,children:[(0,J.jsxs)(v.Z,{span:24,style:{display:"flex",columnGap:"20px",marginBottom:"20px"},children:[(0,J.jsx)("div",{style:{width:"100px",height:"100px",backgroundColor:"#f5f5f5",overflow:"hidden",borderRadius:"10px",position:"relative"},children:(0,J.jsx)(r.Z,{alt:Pe("shop.logo"),style:{objectFit:"contain"},src:(null===Ge||void 0===Ge||null===(Se=Ge.shop)||void 0===Se?void 0:Se.logo_img)||"https://via.placeholder.com/150",width:100,height:100,preview:!1})}),(0,J.jsxs)("div",{style:{width:"calc(100% - 100px - 20px)"},children:[(0,J.jsx)("h5",{style:{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(null===Ge||void 0===Ge||null===(qe=Ge.shop)||void 0===qe||null===(De=qe.translation)||void 0===De?void 0:De.title)||"--"}),(0,J.jsx)("p",{children:null!==Ge&&void 0!==Ge&&null!==(He=Ge.shop)&&void 0!==He&&He.open?(0,J.jsx)(o.Z,{color:"green",children:Pe("open")}):(0,J.jsx)(o.Z,{color:"red",children:Pe("closed")})})]})]}),(0,J.jsxs)(v.Z,{span:24,children:[(null===Ge||void 0===Ge||null===(Me=Ge.shop)||void 0===Me?void 0:Me.phone)&&(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[Pe("phone"),":"]})," ",null===Ge||void 0===Ge||null===(Be=Ge.shop)||void 0===Be?void 0:Be.phone]}),(null===Ge||void 0===Ge||null===(Fe=Ge.shop)||void 0===Fe||null===(Te=Fe.translation)||void 0===Te?void 0:Te.address)&&(0,J.jsxs)("p",{children:[(0,J.jsxs)("strong",{children:[Pe("address"),":"]})," ",null===Ge||void 0===Ge||null===(Le=Ge.shop)||void 0===Le||null===(Re=Le.translation)||void 0===Re?void 0:Re.address]})]})]})})]}),(0,J.jsx)(v.Z,{span:24,children:(0,J.jsxs)(c.Z,{className:"w-100 order-table",title:Pe("order.products"),children:[(0,J.jsx)(Z.Z,{}),(0,J.jsx)(t.Z,{ref:Ke,scroll:{x:!0},columns:_i,dataSource:(null===(Ae=Oe.data)||void 0===Ae?void 0:Ae.details)||[],loading:si,rowKey:function(e){return null===e||void 0===e?void 0:e.id},pagination:!1,expandable:{expandedRowRender:function(e){if(null!==e&&void 0!==e&&e.replace_stock){var i=[{title:Pe("id"),dataIndex:"id",key:"id",render:function(e,i){var n;return null===i||void 0===i||null===(n=i.replace_stock)||void 0===n?void 0:n.id}},{title:Pe("product.name"),dataIndex:"product",key:"product",render:function(e,i){var n,l,d,r,t;return(0,J.jsxs)(s.Z,{direction:"vertical",className:"relative",children:[null===i||void 0===i||null===(n=i.replace_stock)||void 0===n||null===(l=n.product)||void 0===l||null===(d=l.translation)||void 0===d?void 0:d.title,null===i||void 0===i||null===(r=i.replace_stock)||void 0===r||null===(t=r.extras)||void 0===t?void 0:t.map((function(e){var i,n,l;return(0,J.jsxs)(o.Z,{children:[null===e||void 0===e||null===(i=e.group)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.title,": ",null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Pe("image"),dataIndex:"img",key:"img",render:function(e,i){var n,l;return(0,J.jsx)(r.Z,{src:(0,w.Z)(null===i||void 0===i||null===(n=i.replace_stock)||void 0===n||null===(l=n.product)||void 0===l?void 0:l.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Pe("price"),dataIndex:"price",key:"price",render:function(e,i){var n;return(0,q.Z)(null===i||void 0===i||null===(n=i.replace_stock)||void 0===n?void 0:n.price,null===$e||void 0===$e?void 0:$e.symbol)}},{title:Pe("quantity"),dataIndex:"replace_quantity",key:"replace_quantity",render:function(e,i){var n,l;return(0,J.jsx)("span",{children:e*((null===i||void 0===i||null===(n=i.replace_stock)||void 0===n||null===(l=n.product)||void 0===l?void 0:l.interval)||1)})}},{title:Pe("discount"),dataIndex:"discount",key:"discount",render:function(e,i){var n,l;return(0,q.Z)(null!==(n=null===i||void 0===i||null===(l=i.replace_stock)||void 0===l?void 0:l.discount)&&void 0!==n?n:0,null===$e||void 0===$e?void 0:$e.symbol)}},{title:Pe("tax"),dataIndex:"tax",key:"tax",render:function(e,i){var n;return(0,q.Z)(null===i||void 0===i||null===(n=i.replace_stock)||void 0===n?void 0:n.tax,null===$e||void 0===$e?void 0:$e.symbol)}},{title:Pe("total.price"),dataIndex:"total_price",key:"total_price",render:function(e,i){var n;return(0,q.Z)(null===i||void 0===i||null===(n=i.replace_stock)||void 0===n?void 0:n.total_price,null===$e||void 0===$e?void 0:$e.symbol)}}];return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,J.jsx)(y.Z,{style:{padding:"10px",margin:"10px 0 50px 0",border:"2px solid #cad2de",borderRadius:"30%"},rotate:90})}),(0,J.jsx)(t.Z,{columns:i,dataSource:[e],pagination:!1})]})}},expandIcon:function(e){e.expanded;var i=e.onExpand,n=e.record;return(0,J.jsx)(y.Z,{onClick:function(e){return i(n,e)},rotate:90})},defaultExpandedRowKeys:["0"]}}),(0,J.jsxs)(s.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,J.jsxs)("div",{children:[(0,J.jsxs)("span",{children:[Pe("delivery.fee"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[Pe("order.tax"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[Pe("product"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[Pe("discount"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[Pe("service.fee"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[Pe("coupon.price"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("h3",{children:[Pe("total.price"),":"]})]}),(0,J.jsxs)("div",{children:[(0,J.jsx)("span",{children:(0,q.Z)(null!==(Ue=null===Ge||void 0===Ge?void 0:Ge.delivery_fee)&&void 0!==Ue?Ue:0,null===$e||void 0===$e?void 0:$e.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,q.Z)(null===Ge||void 0===Ge?void 0:Ge.tax,null===$e||void 0===$e?void 0:$e.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,q.Z)(null===Ge||void 0===Ge?void 0:Ge.origin_price,null===$e||void 0===$e?void 0:$e.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,q.Z)(null===Ge||void 0===Ge?void 0:Ge.total_discount,null===$e||void 0===$e?void 0:$e.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,q.Z)(null===Ge||void 0===Ge?void 0:Ge.service_fee,null===$e||void 0===$e?void 0:$e.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,q.Z)(null===Ge||void 0===Ge?void 0:Ge.coupon_price,null===$e||void 0===$e?void 0:$e.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("h3",{ref:We,children:(0,q.Z)(null===Ge||void 0===Ge?void 0:Ge.total_price,null===$e||void 0===$e?void 0:$e.symbol)})]})]})]})})]}),xi&&(0,J.jsx)(z.Z,{orderId:xi,handleCancel:Ii,refetchPage:Ci}),ji&&(0,J.jsx)(Y.Z,{orderDetails:ji,handleCancel:Ii}),ii&&(0,J.jsx)(M.Z,{id:ii,handleCancel:Ii}),ai&&(0,J.jsx)(P.Z,{orderId:Ve,handleCancel:function(){return ci(!1)},transactionDetails:null===Ge||void 0===Ge?void 0:Ge.transaction,fetchOrder:Ci})]})}},60861:function(e,i,n){n.d(i,{Z:function(){return p}});var l=n(29439),d=n(47313),s=n(10976),o=n(9274),r=n(59491),t=n(68197),a=n(59624),c=n(74294),u=n(24511),v=n(23560),x=n(1003),h=n(46417),m=["paid","canceled"];function p(e){var i=e.transactionDetails,n=e.handleCancel,p=e.fetchOrder,j=e.orderId,f=s.Z.useForm(),Z=(0,l.Z)(f,1)[0],y=(0,u.$)().t,g=(0,d.useState)(!1),b=(0,l.Z)(g,2),k=b[0],_=b[1];return(0,h.jsx)(o.Z,{visible:!!i,title:y("transaction.status"),closable:!1,footer:[(0,h.jsx)(r.Z,{type:"primary",onClick:function(){return Z.submit()},loading:k,children:y("save")},"save-form"),(0,h.jsx)(r.Z,{type:"default",onClick:n,children:y("cancel")},"cansel-modal")],children:(0,h.jsx)(s.Z,{form:Z,layout:"vertical",onFinish:function(e){_(!0),x.Z.updateStatus(j,e).then((function(){n(),p()})).catch((function(e){return v.Am.error(e.message)})).finally((function(){return _(!1)}))},initialValues:{status:i.status},children:(0,h.jsx)(t.Z,{gutter:12,children:(0,h.jsx)(a.Z,{span:24,children:(0,h.jsx)(s.Z.Item,{label:y("status"),name:"status",rules:[{validator:function(e,i){return"paid"===i||"canceled"===i?Promise.resolve():Promise.reject(new Error(y("required")))}}],children:(0,h.jsx)(c.Z,{children:m.map((function(e,i){return(0,h.jsx)(c.Z.Option,{value:e,children:y(e)},i)}))})})})})})})}}}]);