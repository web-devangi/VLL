"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3891],{73431:function(e,n,t){var r=t(47313),a=t(39180),i=t(2717),o=t(28830),l=t(60535),c=t(46417);n.Z=function(){var e=(0,i.I0)(),n=(0,i.v9)((function(e){return e.formLang}),i.wU),t=n.languages,u=n.defaultLang;(0,r.useEffect)((function(){l.Z.getAllActive().then((function(n){var t=n.data;e((0,o.dc)(t)),e((0,o.mh)(t.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(a.ZP.Group,{value:u,onChange:function(n){var t=n.target.value;e((0,o.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((function(e){return(0,c.jsx)(a.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},89281:function(e,n,t){t.d(n,{h:function(){return p}});var r=t(1413),a=t(29439),i=t(45987),o=t(47313),l=t(12279),c=t.n(l),u=t(74294),s=t(72652),d=t(46417),f=["fetchOptions","debounceTimeout","onClear","refetchOptions"],p=function(e){var n=e.fetchOptions,t=e.debounceTimeout,l=void 0===t?400:t,p=e.onClear,v=e.refetchOptions,m=void 0!==v&&v,h=(0,i.Z)(e,f),Z=(0,o.useState)(!1),x=(0,a.Z)(Z,2),y=x[0],b=x[1],j=(0,o.useState)([]),g=(0,a.Z)(j,2),k=g[0],C=g[1],w=(0,o.useMemo)((function(){return c()((function(e){C([]),b(!0),n(e).then((function(e){C(e),b(!1)}))}),l)}),[n,l]);return(0,d.jsx)(u.Z,(0,r.Z)((0,r.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:w,onClear:function(){w(""),p&&p()},notFoundContent:y?(0,d.jsx)(s.Z,{size:"small"}):"no results"},h),{},{options:k,onFocus:function(){k.length&&!m||w("")}}))}},39088:function(e,n,t){var r=t(1413),a=t(93433),i=t(4942),o=t(29439),l=t(47313),c=t(83371),u=t(45705),s=t(59491),d=t(72652),f=t(2717),p=t(97890),v=t(90954),m=t(24511),h=t(17101),Z=t(81890),x=t(46417);n.Z=function(e){var n,t,y,b=e.prev,j=(0,m.$)().t,g=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,k=(0,f.v9)((function(e){return e.formLang}),f.wU),C=k.defaultLang,w=k.languages,E=(0,p.s0)(),I=(0,f.I0)(),P=(0,l.useState)({}),O=(0,o.Z)(P,2),q=O[0],N=O[1],S=(0,l.useState)(null),F=(0,o.Z)(S,2),M=F[0],U=F[1],K=(0,p.UO)().uuid,L=(0,f.v9)((function(e){return e.addons}),f.wU).params;function _(e){U(!0),h.Z.getById(e).then((function(e){var n=(0,r.Z)((0,r.Z)((0,r.Z)({},e.data),function(e){if(null===e||void 0===e||!e.translations)return{};var n=e.translations,t=w.map((function(e){var t,r,a;return a={},(0,i.Z)(a,"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title),(0,i.Z)(a,"description[".concat(e.locale,"]"),null===(r=n.find((function(n){return n.locale===e.locale})))||void 0===r?void 0:r.description),a}));return Object.assign.apply(Object,[{}].concat((0,a.Z)(t)))}(e.data)),{},{properties:e.data.properties.map((function(e,n){var t;return t={id:n},(0,i.Z)(t,"key[".concat(e.locale,"]"),e.key),(0,i.Z)(t,"value[".concat(e.locale,"]"),e.value),t})),translation:void 0,translations:void 0});N(n)})).finally((function(){return U(!1)}))}return(0,l.useEffect)((function(){_(K)}),[]),M?(0,x.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,x.jsx)(d.Z,{size:"large",className:"py-5"})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(c.Z,{title:j("product.info"),bordered:!0,children:[(0,x.jsx)(c.Z.Item,{label:"".concat(j("title")," (").concat(C,")"),span:3,children:q["title[".concat(C,"]")]}),(0,x.jsx)(c.Z.Item,{label:"".concat(j("description")," (").concat(C,")"),span:3,children:q["description[".concat(C,"]")]}),(0,x.jsx)(c.Z.Item,{label:j("shop"),span:1.5,children:null===(n=q.shop)||void 0===n?void 0:n.translation.title}),(0,x.jsx)(c.Z.Item,{label:j("unit"),span:1.5,children:null===(t=q.unit)||void 0===t?void 0:t.translation.title}),(0,x.jsx)(c.Z.Item,{label:j("tax"),children:q.tax}),(0,x.jsx)(c.Z.Item,{label:j("min.quantity"),children:q.min_qty}),(0,x.jsx)(c.Z.Item,{label:j("max.quantity"),children:q.max_qty})]}),null===(y=q.stocks)||void 0===y?void 0:y.map((function(e,n){return e?(0,x.jsxs)(c.Z,{bordered:!0,className:"mt-4",children:[(0,x.jsx)(c.Z.Item,{label:j("price"),span:2,children:e.price}),(0,x.jsx)(c.Z.Item,{label:j("quantity"),span:2,children:e.quantity}),e.extras.map((function(e,n){var t,r;return(0,x.jsx)(c.Z.Item,{label:null===e||void 0===e||null===(t=e.group)||void 0===t||null===(r=t.translation)||void 0===r?void 0:r.title,children:null===e||void 0===e?void 0:e.value},"extra"+n)}))]},"desc"+n):""})),(0,x.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,x.jsxs)(u.Z,{wrap:!0,children:[(0,x.jsx)(s.Z,{onClick:b,children:j("prev")}),(0,x.jsx)(s.Z,{type:"primary",onClick:function(){var e=(0,r.Z)({status:void 0},L),n="catalog/addons";I((0,v.ph)((0,r.Z)((0,r.Z)({},g),{},{nextUrl:n}))),I((0,Z.QA)(e)),E("/".concat(n))},children:j("finish")})]})})]})}},18325:function(e,n,t){var r=t(15861),a=t(1413),i=t(29439),o=t(87757),l=t.n(o),c=t(47313),u=t(10976),s=t(68197),d=t(59624),f=t(77181),p=t(66672),v=t(16124),m=t(86345),h=t(74294),Z=t(59491),x=t(89281),y=t(53149),b=t(2717),j=t(17101),g=t(90954),k=t(31055),C=t(97890),w=t(24511),E=t(49080),I=t(46417);n.Z=function(e){var n=e.next,t=e.action_type,o=void 0===t?"":t,P=(0,w.$)().t,O=u.Z.useForm(),q=(0,i.Z)(O,1)[0],N=(0,b.I0)(),S=(0,C.UO)().uuid,F=(0,C.s0)(),M=(0,c.useState)(null),U=(0,i.Z)(M,2),K=(U[0],U[1]),L=(0,b.v9)((function(e){return e.menu}),b.wU).activeMenu,_=(0,b.v9)((function(e){return e.formLang}),b.wU),T=_.defaultLang,B=_.languages,D=(0,c.useState)(!1),V=(0,i.Z)(D,2),z=V[0],A=V[1],R=(0,c.useState)([]),W=(0,i.Z)(R,2),$=W[0],G=W[1];function Q(){return(Q=(0,r.Z)(l().mark((function e(n){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n},e.abrupt("return",y.Z.get(t).then((function(e){return e.data.map((function(e){return{label:e.translation?e.translation.title:"no name",value:e.id}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,c.useEffect)((function(){return function(){var e=q.getFieldsValue(!0);N((0,g.nc)({activeMenu:L,data:(0,a.Z)((0,a.Z)({},L.data),e)}))}}),[]);return(0,c.useEffect)((function(){k.Z.getAll({perPage:100,page:1,active:1}).then((function(e){var n=e.data;return G(function(e){return e.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))}(n))}))}),[]),(0,I.jsxs)(u.Z,{layout:"vertical",form:q,initialValues:(0,a.Z)({active:!0},L.data),onFinish:function(e){var t,r;A(!0);var i=(0,a.Z)((0,a.Z)({},e),{},{min_qty:1,max_qty:1e3,active:Number(e.active),shop_id:null===(t=e.shop)||void 0===t?void 0:t.value,unit_id:null===(r=e.unit)||void 0===r?void 0:r.value,unit:void 0,addon:Number(1),shop:void 0});"edit"===o?function(e,t){j.Z.update(S,t).then((function(){N((0,g.nc)({activeMenu:L,data:e})),n()})).catch((function(e){return K(e.response.data.params)})).finally((function(){return A(!1)}))}(e,i):function(e,n){j.Z.create(n).then((function(n){var t=n.data;N((0,g.SS)({id:"product-".concat(t.uuid),url:"product/".concat(t.uuid),name:P("add.product"),data:e,refetch:!1})),F("/addon/".concat(t.uuid,"?step=1"))})).catch((function(e){return K(e.response.data.params)})).finally((function(){return A(!1)}))}(e,i)},className:"addon-menu",children:[(0,I.jsxs)(s.Z,{gutter:12,children:[(0,I.jsx)(d.Z,{xs:24,sm:24,md:16,children:(0,I.jsx)(f.Z,{title:P("basic.info"),children:(0,I.jsxs)(s.Z,{gutter:24,children:[(0,I.jsx)(d.Z,{span:24,children:B.map((function(e){return(0,I.jsx)(u.Z.Item,{label:P("name"),name:"title[".concat(e.locale,"]"),rules:[{validator:function(n,t){return t||(null===e||void 0===e?void 0:e.locale)!==T?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(P("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(P("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(P("required")))}}],hidden:e.locale!==T,children:(0,I.jsx)(p.Z,{})},"name"+e.id)}))}),(0,I.jsx)(d.Z,{span:24,children:B.map((function(e){return(0,I.jsx)(u.Z.Item,{label:P("description"),name:"description[".concat(e.locale,"]"),rules:[{validator:function(n,t){return t||(null===e||void 0===e?void 0:e.locale)!==T?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(P("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<5?Promise.reject(new Error(P("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(P("required")))}}],hidden:e.locale!==T,children:(0,I.jsx)(E.Z,{rows:4,span:4})},"description"+e.id)}))}),(0,I.jsx)(d.Z,{span:12,children:(0,I.jsx)(u.Z.Item,{label:P("tax"),name:"tax",rules:[{validator:function(e,n){return n||0===n?n&&(n<0||n>100)?Promise.reject(new Error(P("must.be.between.0.and.100"))):Promise.resolve():Promise.reject(new Error(P("required")))}}],children:(0,I.jsx)(v.Z,{className:"w-100",addonAfter:"%"})})}),(0,I.jsx)(d.Z,{span:12,children:(0,I.jsx)(u.Z.Item,{label:P("active"),name:"active",valuePropName:"checked",children:(0,I.jsx)(m.Z,{})})})]})})}),(0,I.jsxs)(d.Z,{xs:24,sm:24,md:8,children:[(0,I.jsx)(f.Z,{title:P("shop/restaurant"),children:(0,I.jsx)(u.Z.Item,{name:"shop",rules:[{required:!0,message:P("required")}],children:(0,I.jsx)(x.h,{fetchOptions:function(e){return Q.apply(this,arguments)},disabled:"edit"===o})})}),(0,I.jsx)(f.Z,{title:P("addition"),children:(0,I.jsx)(u.Z.Item,{label:P("unit"),name:"unit",rules:[{required:!0,message:P("required")}],children:(0,I.jsx)(h.Z,{labelInValue:!0,filterOption:!1,options:$})})})]})]}),(0,I.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:z,children:P("next")})]})}},74911:function(e,n,t){var r=t(29439),a=t(47313),i=t(10976),o=t(68197),l=t(59624),c=t(16124),u=t(66672),s=t(45705),d=t(59491),f=t(2717),p=t(17101),v=t(24511),m=t(97890),h=t(90954),Z=t(46417);n.Z=function(e){var n=e.prev,t=e.next,x=(e.current,(0,v.$)().t),y=i.Z.useForm(),b=(0,r.Z)(y,1)[0],j=(0,m.UO)().uuid,g=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,k=(0,a.useState)(null),C=(0,r.Z)(k,2),w=C[0],E=C[1],I=(0,f.I0)();return(0,a.useEffect)((function(){var e,n,t,r,a,i;I((0,h.xo)(g)),b.setFieldsValue({price:null!==(e=g.data)&&void 0!==e&&null!==(n=e.stocks)&&void 0!==n&&n.length?g.data.stocks[0].price:[],quantity:null!==(t=g.data)&&void 0!==t&&null!==(r=t.stocks)&&void 0!==r&&r.length?g.data.stocks[0].quantity:[],sku:null!==(a=g.data)&&void 0!==a&&null!==(i=a.stocks)&&void 0!==i&&i.length?g.data.stocks[0].sku:[]})}),[]),(0,Z.jsxs)(i.Z,{layout:"vertical",form:b,onFinish:function(e){var n;E(!0),n=[{price:e.price,quantity:e.quantity,sku:e.sku}],p.Z.stocks(j,{extras:n}).then((function(){return t()})).finally((function(){return E(!1)}))},children:[(0,Z.jsxs)(o.Z,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},children:[(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(i.Z.Item,{label:x("price"),name:"price",rules:[{required:!0,message:x("required")}],children:(0,Z.jsx)(c.Z,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(i.Z.Item,{label:x("quantity"),name:"quantity",rules:[{required:!0,message:x("required")}],children:(0,Z.jsx)(c.Z,{min:1,className:"w-100",style:{minWidth:200}})})}),(0,Z.jsx)(l.Z,{children:(0,Z.jsx)(i.Z.Item,{label:x("sku"),name:"sku",children:(0,Z.jsx)(u.Z,{style:{minWidth:200}})})})]}),(0,Z.jsxs)(s.Z,{className:"mt-4",children:[(0,Z.jsx)(d.Z,{onClick:n,children:x("prev")}),(0,Z.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:!!w,children:x("next")})]})]})}},43205:function(e,n,t){t.d(n,{S:function(){return r}});var r=[{title:"addons",content:"First-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]},39180:function(e,n,t){t.d(n,{ZP:function(){return N}});var r=t(4942),a=t(87462),i=t(47313),o=t(56482),l=t(46123),c=t.n(l),u=t(16945),s=t(4431),d=t(91964),f=i.createContext(null),p=f.Provider,v=f,m=i.createContext(null),h=m.Provider,Z=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},x=function(e,n){var t,l=i.useContext(v),f=i.useContext(m),p=i.useContext(d.E_),h=p.getPrefixCls,x=p.direction,y=i.useRef(),b=(0,u.sQ)(n,y),j=(0,i.useContext)(s.aM).isFormItemInput,g=e.prefixCls,k=e.className,C=e.children,w=e.style,E=Z(e,["prefixCls","className","children","style"]),I=h("radio",g),P="button"===((null===l||void 0===l?void 0:l.optionType)||f)?"".concat(I,"-button"):I,O=(0,a.Z)({},E);l&&(O.name=l.name,O.onChange=function(n){var t,r;null===(t=e.onChange)||void 0===t||t.call(e,n),null===(r=null===l||void 0===l?void 0:l.onChange)||void 0===r||r.call(l,n)},O.checked=e.value===l.value,O.disabled=e.disabled||l.disabled);var q=c()("".concat(P,"-wrapper"),(t={},(0,r.Z)(t,"".concat(P,"-wrapper-checked"),O.checked),(0,r.Z)(t,"".concat(P,"-wrapper-disabled"),O.disabled),(0,r.Z)(t,"".concat(P,"-wrapper-rtl"),"rtl"===x),(0,r.Z)(t,"".concat(P,"-wrapper-in-form-item"),j),t),k);return i.createElement("label",{className:q,style:w,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},i.createElement(o.Z,(0,a.Z)({},O,{type:"radio",prefixCls:P,ref:b})),void 0!==C?i.createElement("span",null,C):null)},y=i.forwardRef(x);y.displayName="Radio";var b=y,j=t(29439),g=t(10288),k=t(21631),C=t(81176),w=i.forwardRef((function(e,n){var t=i.useContext(d.E_),o=t.getPrefixCls,l=t.direction,u=i.useContext(k.Z),s=(0,g.Z)(e.defaultValue,{value:e.value}),f=(0,j.Z)(s,2),v=f[0],m=f[1];return i.createElement(p,{value:{onChange:function(n){var t=v,r=n.target.value;"value"in e||m(r);var a=e.onChange;a&&r!==t&&a(n)},value:v,disabled:e.disabled,name:e.name,optionType:e.optionType}},function(){var t,s=e.prefixCls,d=e.className,f=void 0===d?"":d,p=e.options,m=e.buttonStyle,h=void 0===m?"outline":m,Z=e.disabled,x=e.children,y=e.size,j=e.style,g=e.id,k=e.onMouseEnter,w=e.onMouseLeave,E=o("radio",s),I="".concat(E,"-group"),P=x;p&&p.length>0&&(P=p.map((function(e){return"string"===typeof e||"number"===typeof e?i.createElement(b,{key:e.toString(),prefixCls:E,disabled:Z,value:e,checked:v===e},e):i.createElement(b,{key:"radio-group-value-options-".concat(e.value),prefixCls:E,disabled:e.disabled||Z,value:e.value,checked:v===e.value,style:e.style},e.label)})));var O=y||u,q=c()(I,"".concat(I,"-").concat(h),(t={},(0,r.Z)(t,"".concat(I,"-").concat(O),O),(0,r.Z)(t,"".concat(I,"-rtl"),"rtl"===l),t),f);return i.createElement("div",(0,a.Z)({},(0,C.Z)(e),{className:q,style:j,onMouseEnter:k,onMouseLeave:w,id:g,ref:n}),P)}())})),E=i.memo(w),I=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},P=function(e,n){var t=i.useContext(d.E_).getPrefixCls,r=e.prefixCls,o=I(e,["prefixCls"]),l=t("radio",r);return i.createElement(h,{value:"button"},i.createElement(b,(0,a.Z)({prefixCls:l},o,{type:"radio",ref:n})))},O=i.forwardRef(P),q=b;q.Button=O,q.Group=E;var N=q},56482:function(e,n,t){var r=t(87462),a=t(4942),i=t(45987),o=t(1413),l=t(15671),c=t(43144),u=t(60136),s=t(29388),d=t(47313),f=t(46123),p=t.n(f),v=function(e){(0,u.Z)(t,e);var n=(0,s.Z)(t);function t(e){var r;(0,l.Z)(this,t),(r=n.call(this,e)).handleChange=function(e){var n=r.props,t=n.disabled,a=n.onChange;t||("checked"in r.props||r.setState({checked:e.target.checked}),a&&a({target:(0,o.Z)((0,o.Z)({},r.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},r.saveInput=function(e){r.input=e};var a="checked"in e?e.checked:e.defaultChecked;return r.state={checked:a},r}return(0,c.Z)(t,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,n=this.props,t=n.prefixCls,o=n.className,l=n.style,c=n.name,u=n.id,s=n.type,f=n.disabled,v=n.readOnly,m=n.tabIndex,h=n.onClick,Z=n.onFocus,x=n.onBlur,y=n.onKeyDown,b=n.onKeyPress,j=n.onKeyUp,g=n.autoFocus,k=n.value,C=n.required,w=(0,i.Z)(n,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),E=Object.keys(w).reduce((function(e,n){return"aria-"!==n.substr(0,5)&&"data-"!==n.substr(0,5)&&"role"!==n||(e[n]=w[n]),e}),{}),I=this.state.checked,P=p()(t,o,(e={},(0,a.Z)(e,"".concat(t,"-checked"),I),(0,a.Z)(e,"".concat(t,"-disabled"),f),e));return d.createElement("span",{className:P,style:l},d.createElement("input",(0,r.Z)({name:c,id:u,type:s,required:C,readOnly:v,disabled:f,tabIndex:m,className:"".concat(t,"-input"),checked:!!I,onClick:h,onFocus:Z,onBlur:x,onKeyUp:j,onKeyDown:y,onKeyPress:b,onChange:this.handleChange,autoFocus:g,ref:this.saveInput,value:k},E)),d.createElement("span",{className:"".concat(t,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return"checked"in e?(0,o.Z)((0,o.Z)({},n),{},{checked:e.checked}):null}}]),t}(d.Component);v.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},n.Z=v}}]);