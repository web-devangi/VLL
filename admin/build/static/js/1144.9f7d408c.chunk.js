"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1144],{55940:(e,l,t)=>{t.d(l,{Z:()=>r});t(47313);var a=t(59491),n=t(47515),s=t(23560),d=t(24511),i=t(79492),o=t(46417);function r(e){let{size:l="",onClick:t,type:r="default",...c}=e;const{t:u}=(0,d.$)(),{isDemo:v}=(0,i.Z)();return(0,o.jsx)(a.Z,{size:l,icon:(0,o.jsx)(n.Z,{}),onClick:e=>{v?s.Am.warning(u("cannot.work.demo")):t(e)},type:r,...c})}},50402:(e,l,t)=>{t.d(l,{Z:()=>c});t(47313);var a=t(68197),n=t(59624),s=t(2717),d=t(24511),i=t(14637),o=t(29242),r=t(46417);const c=e=>{let{data:l}=e;const{t:t}=(0,d.$)(),{defaultCurrency:c}=(0,s.v9)((e=>e.currency),s.wU);return(0,r.jsxs)(a.Z,{gutter:16,className:"mt-3",children:[(0,r.jsx)(n.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("all.orders"),value:null===l||void 0===l?void 0:l.orders_count})}),(0,r.jsx)(n.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("ready.orders"),value:null===l||void 0===l?void 0:l.ready_orders_count})}),(0,r.jsx)(n.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("on.a.way.orders"),value:null===l||void 0===l?void 0:l.on_a_way_orders_count})}),(0,r.jsx)(n.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("cancelled.orders"),value:null===l||void 0===l?void 0:l.cancel_orders_count})}),(0,r.jsx)(n.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("delivered.orders"),value:null===l||void 0===l?void 0:l.delivered_orders_count})}),(0,r.jsx)(n.Z,{flex:"0 0 16.6%",children:(0,r.jsx)(i.Z,{title:t("total.price"),value:(0,o.p)(null===l||void 0===l?void 0:l.total_price,null===c||void 0===c?void 0:c.symbol)})})]})}},53233:(e,l,t)=>{t.d(l,{Z:()=>m});var a=t(47313),n=t(56140),s=t(67251),d=t(45705),i=t(86345),o=t(78267),r=t(37388),c=t(59491),u=t(99587),v=t(24511),h=t(46417);const{Text:x}=n.Z,m=e=>{let{columns:l=[],setColumns:t,style:n,size:m="",iconOnly:j}=e;const{t:Z}=(0,v.$)(),[p,f]=(0,a.useState)(!1),y=(0,h.jsx)(s.Z,{children:null===l||void 0===l?void 0:l.map(((e,a)=>(0,h.jsx)(s.Z.Item,{children:(0,h.jsxs)(d.Z,{className:"d-flex justify-content-between",children:[(0,h.jsx)(x,{children:e.title}),(0,h.jsx)(i.Z,{defaultChecked:!0,onClick:()=>function(e){const a=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(a)}(e),disabled:1===a})]})},e+a)))});return(0,h.jsx)(o.Z,{overlay:y,trigger:["click"],onVisibleChange:e=>{f(e)},visible:p,children:(0,h.jsx)(r.Z,{title:Z("change.columns"),children:(0,h.jsx)(c.Z,{style:{...n},size:m,icon:(0,h.jsx)(u.Z,{}),children:j?null:Z("Columns")})})})}},41481:(e,l,t)=>{t.d(l,{Z:()=>o});var a=t(47313),n=t(66672),s=t(16031),d=t(40765),i=t(46417);function o(e){let{handleChange:l,defaultValue:t,resetSearch:o,...r}=e;const[c,u]=(0,a.useState)(t),v=(0,a.useMemo)((()=>(0,s.debounce)((e=>{l(e)}),800)),[]);return(0,a.useEffect)((()=>{u(t)}),[o]),(0,i.jsx)(n.Z,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,i.jsx)(d.Z,{}),...r})}},13945:(e,l,t)=>{function a(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{Z:()=>a})},29242:(e,l,t)=>{function a(e,l){var t=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(l){return e>=l.value}));return t?"$"+(e/t.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+t.symbol:"0"}t.d(l,{p:()=>a})},36311:(e,l,t)=>{t.d(l,{Z:()=>n});var a=t(34344);const n={orderExport:(e,l)=>a.Z.get("dashboard/user/export/order/".concat(e,"/pdf"),{params:l,responseType:"blob"})}},14637:(e,l,t)=>{t.d(l,{Z:()=>s});t(47313);var a=t(77181),n=t(46417);function s(e){let{title:l="Orders",value:t=0,color:s="grey",onClick:d}=e;return(0,n.jsx)(a.Z,{className:"statistics-card",hoverable:!!d,onClick:d,children:(0,n.jsxs)("div",{className:"card-wrapper",children:[(0,n.jsx)("div",{className:"space"}),(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("h1",{className:"number",children:t})}),(0,n.jsx)("span",{className:"highlighter ".concat(s)}),l&&(0,n.jsx)("h4",{className:"title",children:l})]})})}},91144:(e,l,t)=>{t.r(l),t.d(l,{default:()=>q});var a=t(47313),n=t(99096),s=t(73591),d=t(66204),i=t(59491),o=t(45705),r=t(77181),c=t(78508),u=t(97890),v=t(1413);const h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var x=t(17469),m=function(e,l){return a.createElement(x.Z,(0,v.Z)((0,v.Z)({},e),{},{ref:l,icon:h}))};m.displayName="UploadOutlined";const j=a.forwardRef(m);var Z=t(12019),p=t(31741),f=t(47515),y=t(6986),g=t(15386),_=t(2717),w=t(90954),C=t(24511),k=t(89281),b=t(80314),S=t(22054),M=t(13945),N=t(41481),z=t(84017),V=t(7920),Y=t(24077),I=t(53233),H=t(5958),D=t(80355),$=t(24391),A=t(23560),P=t(55940),U=t(7370),E=t(74580),O=t(69658),T=t(97421),R=t(51282),B=t(50402),K=t(45321),F=t(70816),L=t.n(F),W=t(46417);const{RangePicker:G}=n.Z,{TabPane:J}=s.Z;function q(){var e,l,t,n;const v=(0,_.I0)(),h=(0,u.s0)(),{t:x}=(0,C.$)(),{defaultCurrency:m}=(0,_.v9)((e=>e.currency),_.wU),[F,q]=(0,a.useState)(null),[Q,X]=(0,a.useState)(null),[ee,le]=(0,a.useState)(null),[te,ae]=(0,a.useState)(null),ne=[{id:7,name:"all"},{id:8,name:"un_assigned_order"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],[se,de]=(0,a.useState)([{title:x("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:x("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,W.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:x("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,W.jsxs)("div",{className:"text-lowercase",children:[e||0," ",x("products")]})},{title:x("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,W.jsxs)("div",{children:["new"===e?(0,W.jsx)(d.Z,{color:"blue",children:x(e)}):"canceled"===e?(0,W.jsx)(d.Z,{color:"error",children:x(e)}):(0,W.jsx)(d.Z,{color:"cyan",children:x(e)}),"delivered"!==e&&"canceled"!==e?(0,W.jsx)(Z.Z,{onClick:()=>q(l)}):""]})},{title:x("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,l)=>(0,W.jsx)("div",{children:"ready"===l.status&&"pickup"!==l.delivery_type?(0,W.jsx)(i.Z,{type:"link",onClick:()=>ae(l),children:(0,W.jsxs)(o.Z,{children:[e?"".concat(e.firstname," ").concat(e.lastname):x("add.deliveryman"),(0,W.jsx)(Z.Z,{})]})}):(0,W.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:x("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,z.Z)(e,m.symbol)},{title:x("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return x(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:x("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:x("options"),is_show:!0,key:"options",render:(e,l)=>(0,W.jsxs)(o.Z,{children:[(0,W.jsx)(i.Z,{icon:(0,W.jsx)(H.Y4r,{}),onClick:()=>X(l.id)}),(0,W.jsx)(i.Z,{icon:(0,W.jsx)(p.Z,{}),onClick:()=>(e=>{v((0,w.bL)({url:"order/details/".concat(e.id),id:"order_details",name:x("order.details")})),h("/order/details/".concat(e.id))})(l)}),(0,W.jsx)(P.Z,{icon:(0,W.jsx)(f.Z,{}),onClick:()=>{me([l.id]),ie(!0),Ze(!0)}}),(0,W.jsx)(i.Z,{icon:(0,W.jsx)(y.Z,{}),onClick:()=>le(l.id)})]})}]),{setIsModalVisible:ie}=(0,a.useContext)(E._),[oe,re]=(0,a.useState)(!1),{activeMenu:ce}=(0,_.v9)((e=>e.menu),_.wU),[ue,ve]=(0,a.useState)("all"),he=(null===(e=ce.data)||void 0===e?void 0:e.role)||ue,[xe,me]=(0,a.useState)(null),[je,Ze]=(0,a.useState)(null),[pe,fe]=(0,a.useState)(!1),{orders:ye,meta:ge,loading:_e,params:we,statistic:Ce}=(0,_.v9)((e=>e.orders),_.wU),ke=null===ce||void 0===ce?void 0:ce.data;(0,b.Z)((()=>{var e;const l={search:null===ke||void 0===ke?void 0:ke.search,sort:null===ke||void 0===ke?void 0:ke.sort,column:null===ke||void 0===ke?void 0:ke.column,perPage:null===ke||void 0===ke?void 0:ke.perPage,page:null===ke||void 0===ke?void 0:ke.page,deliveryman:null===ke||void 0===ke||null===(e=ke.deliveryman)||void 0===e?void 0:e.value,date_from:null===ke||void 0===ke?void 0:ke.date_from,date_to:null===ke||void 0===ke?void 0:ke.date_to,status:"un_assigned_order"===(null===ke||void 0===ke?void 0:ke.status)||null===ke||void 0===ke?void 0:ke.status,"isset-deliveryman":"un_assigned_order"===(null===ke||void 0===ke?void 0:ke.status)?1:0};v((0,S.AU)(l))}),[null===ce||void 0===ce?void 0:ce.data]);const be=e=>{const l=ce.data;v((0,w.nc)({activeMenu:ce,data:{...l,...e}}))},Se=()=>{q(null),ae(null),X(null),le(null)};(0,a.useEffect)((()=>{if(null!==ce&&void 0!==ce&&ce.refetch){const e={status:null===ke||void 0===ke?void 0:ke.status,page:null===ke||void 0===ke?void 0:ke.page,perPage:10,type:"delivery"};v((0,S.AU)(e)),v((0,w.A_)(ce))}}),[null===ce||void 0===ce?void 0:ce.refetch]);const Me={selectedRowKeys:xe,onChange:e=>{me(e)}};return(0,W.jsxs)("div",{children:[(0,W.jsx)("div",{children:_e?(0,W.jsx)(R.Z,{}):(0,W.jsx)(B.Z,{data:Ce,orders:ye})}),(0,W.jsx)(r.Z,{className:"p-0",children:(0,W.jsxs)(o.Z,{wrap:!0,size:[12,20],children:[(0,W.jsx)(N.Z,{placeholder:x("search"),handleChange:e=>be({search:e}),defaultValue:null===(l=ce.data)||void 0===l?void 0:l.search,resetSearch:!(null!==(t=ce.data)&&void 0!==t&&t.search),style:{minWidth:300}}),(0,W.jsx)(G,{format:"YYYY-MM-DD",onChange:e=>{return l=e,void v((0,w.nc)({activeMenu:ce,data:{...ke,date_from:l?L()(null===l||void 0===l?void 0:l[0]).format("YYYY-MM-DD").toString():void 0,date_to:l?L()(null===l||void 0===l?void 0:l[1]).format("YYYY-MM-DD").toString():void 0}}));var l}}),(0,W.jsx)(k.h,{className:"w-100",debounceTimeout:500,placeholder:x("select.deliveryman"),fetchOptions:e=>{const l={search:e};return K.Z.getAll(l).then((e=>e.data.map((e=>({label:e.firstname+" "+e.lastname,value:e.id})))))},allowClear:!0,onChange:e=>be({deliveryman:e}),value:null===(n=ce.data)||void 0===n?void 0:n.deliveryman}),(0,W.jsxs)(i.Z,{onClick:()=>{re(!0),U.Z.export().then((e=>{const l=T.S0+e.data.file_name;window.location.href=l})).finally((()=>re(!1)))},loading:oe,children:[(0,W.jsx)(j,{}),x("export")]}),(0,W.jsx)(P.Z,{size:"",onClick:()=>{null===xe||0===xe.length?A.Am.warning(x("select.the.product")):(ie(!0),Ze(!1))},children:x("delete.selected")}),(0,W.jsx)(i.Z,{icon:(0,W.jsx)(g.Z,{}),onClick:()=>{v((0,w.nc)({activeMenu:ce,data:void 0}))},disabled:!ce.data,style:{minWidth:100}}),(0,W.jsx)(I.Z,{setColumns:de,columns:se})]})}),(0,W.jsxs)(r.Z,{title:x("orders"),children:[(0,W.jsx)(s.Z,{onChange:e=>{be({role:e,page:1}),ve(e)},type:"card",activeKey:he,children:ne.map((e=>(0,W.jsx)(J,{tab:x(e.name)},e.name)))}),(0,W.jsx)(c.Z,{scroll:{x:!0},rowSelection:Me,columns:null===se||void 0===se?void 0:se.filter((e=>e.is_show)),dataSource:ye,loading:_e,pagination:{pageSize:we.perPage,page:we.page,total:ge.total,defaultCurrent:we.page},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:a,current:n}=e,{field:s,order:d}=t,i=(0,M.Z)(d);v((0,w.nc)({activeMenu:ce,data:{...ce.data,perPage:a,page:n,column:s,sort:i}}))}})]}),(0,W.jsx)(O.Z,{click:()=>{fe(!0);const e={...Object.assign({},...xe.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};U.Z.delete(e).then((()=>{A.Am.success(x("successfully.deleted")),ie(!1),v((0,S.AU)()),Ze(null)})).finally((()=>fe(!1)))},text:x(je?"delete":"all.delete"),loading:pe,setText:me}),F&&(0,W.jsx)(V.Z,{orderDetails:F,handleCancel:Se,status:ne}),te&&(0,W.jsx)(Y.Z,{orderDetails:te,handleCancel:Se}),Q&&(0,W.jsx)(D.Z,{id:Q,handleCancel:Se}),ee&&(0,W.jsx)($.Z,{id:ee,handleCancel:Se})]})}},24391:(e,l,t)=>{t.d(l,{Z:()=>f});var a=t(47313),n=t(36311),s=t(83334),d=t.n(s),i=t(51282),o=t(77181),r=t(9274),c=t(59491),u=t(68197),v=t(59624),h=t(24511),x=t(58821),m=t(57864),j=t(97890),Z=t(46417);const p=o.Z.Meta,f=e=>{let{id:l,handleCancel:t}=e;const[s,f]=(0,a.useState)(null),{t:y}=(0,h.$)(),g=(0,j.s0)();return(0,Z.jsx)(Z.Fragment,{children:s?(0,Z.jsx)(i.Z,{}):(0,Z.jsx)(r.Z,{visible:!!l,title:y("selected.download"),closable:!1,handleCancel:t,footer:[(0,Z.jsx)(c.Z,{type:"default",onClick:t,children:y("cancel")},"cancelBtn")],children:(0,Z.jsxs)(u.Z,{children:[(0,Z.jsx)(v.Z,{span:12,children:(0,Z.jsx)(o.Z,{title:y("download.pdf"),onClick:()=>function(e){f(!0),n.Z.orderExport(e).then((l=>{d()(l,"invoice_".concat(e,".pdf"),"application/pdf"),t()})).finally((()=>f(!1)))}(l),className:"text-center cursor-pointer",children:(0,Z.jsx)(p,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(x._JY,{size:80})})})}),(0,Z.jsx)(v.Z,{span:12,children:(0,Z.jsx)(o.Z,{title:y("download.check"),onClick:()=>(e=>{g("/orders/generate-invoice/".concat(e))})(l),className:"text-center cursor-pointer",children:(0,Z.jsx)(p,{className:"d-flex align-items-center justify-content-center",title:(0,Z.jsx)(m.ih9,{size:85})})})})]})})})}},15386:(e,l,t)=>{t.d(l,{Z:()=>o});var a=t(1413),n=t(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var d=t(17469),i=function(e,l){return n.createElement(d.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:l,icon:s}))};i.displayName="ClearOutlined";const o=n.forwardRef(i)}}]);