"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9213],{99213:function(t,e,n){n.r(e);var i=n(1413),a=n(29439),u=n(47313),r=n(97890),c=n(23560),o=n(83999),l=n(10976),s=n(77181),d=n(2717),v=n(90954),m=n(24511),f=n(73431),p=n(14241),Z=n(65436),g=n(46417),h=o.Z.Step;e.default=function(){var t,e,n,x=(0,m.$)().t,S=(0,d.v9)((function(t){return t.menu}),d.wU).activeMenu,_=(0,d.I0)(),k=l.Z.useForm(),j=(0,a.Z)(k,1)[0],y=(0,r.s0)(),w=(0,u.useState)(null!==(t=S.data)&&void 0!==t&&t.image?[null===(e=S.data)||void 0===e?void 0:e.image]:[]),F=(0,a.Z)(w,2),b=F[0],q=F[1],z=(0,u.useState)((null===(n=S.data)||void 0===n?void 0:n.step)||0),C=(0,a.Z)(z,2),I=C[0],M=C[1],U=function(){M(I+1)},V=function(){M(I-1)},A=(0,u.useState)(!1),E=(0,a.Z)(A,2),N=E[0],$=E[1];(0,u.useEffect)((function(){return function(){var t=j.getFieldsValue(!0);_((0,v.nc)({activeMenu:S,data:t}))}}),[]);return(0,g.jsx)(s.Z,{title:x("add.recepe"),extra:(0,g.jsx)(f.Z,{}),children:(0,g.jsxs)(l.Z,{layout:"vertical",onFinish:function(t){var e,n;j.validateFields();var a=(0,i.Z)((0,i.Z)({},t),{},{total_time:t.total_time.toString(),active_time:t.active_time.toString(),images:null===b||void 0===b?void 0:b.map((function(t){return t.name})),category_id:t.category_id.value,stocks:null===(e=t.stocks)||void 0===e?void 0:e.map((function(t){return{min_quantity:t.min_quantity,stock_id:t.stock_id.value}})),nutrition:null===(n=t.nutrition)||void 0===n?void 0:n.map((function(t){return(0,i.Z)((0,i.Z)({},t),{},{percentage:t.percentage.toString(),weight:t.weight.toString()})}))});$(!0);var u="seller/recept";p.Z.create(a).then((function(){c.Am.success(x("successfully.created")),y("/".concat(u)),_((0,v.ph)((0,i.Z)((0,i.Z)({},S),{},{nextUrl:u})))})).finally((function(){return $(!1)}))},form:j,initialValues:(0,i.Z)({active:!0},S.data),children:[(0,g.jsx)(o.Z,{current:I,children:Z.S.map((function(t){return(0,g.jsx)(h,{title:x(t.title)},t.title)}))}),Z.S.map((function(t){var e=t.content;return(0,g.jsx)("div",{className:"steps-content ".concat(t.step!==I+1&&"hidden"),children:(0,g.jsx)(e,{next:U,prev:V,loading:N,image:b,setImage:q})},t.title)}))]})})}}}]);