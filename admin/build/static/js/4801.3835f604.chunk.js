"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4801],{89281:function(e,t,n){n.d(t,{h:function(){return v}});var u=n(1413),s=n(29439),r=n(45987),a=n(47313),o=n(12279),i=n.n(o),l=n(74294),c=n(72652),d=n(46417),m=["fetchOptions","debounceTimeout","onClear","refetchOptions"],v=function(e){var t=e.fetchOptions,n=e.debounceTimeout,o=void 0===n?400:n,v=e.onClear,p=e.refetchOptions,h=void 0!==p&&p,f=(0,r.Z)(e,m),x=(0,a.useState)(!1),Z=(0,s.Z)(x,2),b=Z[0],j=Z[1],k=(0,a.useState)([]),y=(0,s.Z)(k,2),q=y[0],_=y[1],g=(0,a.useMemo)((function(){return i()((function(e){_([]),j(!0),t(e).then((function(e){_(e),j(!1)}))}),o)}),[t,o]);return(0,d.jsx)(l.Z,(0,u.Z)((0,u.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:g,onClear:function(){g(""),v&&v()},notFoundContent:b?(0,d.jsx)(c.Z,{size:"small"}):"no results"},f),{},{options:q,onFocus:function(){q.length&&!h||g("")}}))}},24801:function(e,t,n){n.r(t);var u=n(1413),s=n(29439),r=(n(47313),n(97890)),a=n(23560),o=n(10976),i=n(77181),l=n(2717),c=n(90954),d=n(24511),m=n(96708),v=n(73346),p=n(77397),h=n(46417);t.default=function(){var e=(0,d.$)().t,t=(0,l.v9)((function(e){return e.menu}),l.wU).activeMenu,n=o.Z.useForm(),f=(0,s.Z)(n,1)[0],x=(0,l.I0)(),Z=(0,r.s0)();return(0,h.jsx)(i.Z,{title:e("add.bonus"),className:"h-100",children:(0,h.jsx)(p.Z,{form:f,handleSubmit:function(n){var s="seller/bonus/product";return v.Z.create(n).then((function(){a.Am.success(e("successfully.created")),(0,l.dC)((function(){x((0,c.ph)((0,u.Z)((0,u.Z)({},t),{},{nextUrl:s}))),x((0,m.k)({}))})),Z("/".concat(s))}))}})})}},77397:function(e,t,n){n.d(t,{Z:function(){return k}});var u=n(1413),s=n(29439),r=n(47313),a=n(24511),o=n(2717),i=n(10976),l=n(68197),c=n(59624),d=n(16124),m=n(99096),v=n(86345),p=n(59491),h=n(89281),f=n(18333),x=n(90954),Z=n(70816),b=n.n(Z),j=n(46417);function k(e){var t=e.form,n=e.handleSubmit,Z=(0,a.$)().t,k=(0,o.v9)((function(e){return e.menu}),o.wU).activeMenu,y=(0,o.I0)(),q=(0,r.useState)(!1),_=(0,s.Z)(q,2),g=_[0],w=_[1],I=function(e){var t={search:e,page:1,perPage:20};return f.Z.getStock(t).then((function(e){var t=e.data;return null===t||void 0===t?void 0:t.map((function(e){var t,n,u,s;return{label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title)+"".concat((null===e||void 0===e||null===(u=e.extras)||void 0===u?void 0:u.length)>0?": ".concat(null===e||void 0===e||null===(s=e.extras)||void 0===s?void 0:s.map((function(e){var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.value})).join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))};(0,r.useEffect)((function(){return function(){var e=t.getFieldsValue(!0),n=(0,u.Z)((0,u.Z)({},e),{},{expired_at:null===e||void 0===e?void 0:e.expired_at});y((0,x.nc)({activeMenu:k,data:n}))}}),[]);return(0,j.jsxs)(i.Z,{form:t,name:"product_bonus_form",layout:"vertical",onFinish:function(e){var t,u;w(!0);var s={stock_id:null===(t=e.stock)||void 0===t?void 0:t.value,value:e.stock_quantity,bonus_stock_id:null===(u=e.bonus_stock)||void 0===u?void 0:u.value,bonus_quantity:e.bonus_stock_quantity,expired_at:b()(e.expired_at).format("YYYY-MM-DD"),status:e.status,type:"count"};n(s).finally((function(){return w(!1)}))},initialValues:(0,u.Z)({status:!0},k.data),children:[(0,j.jsxs)(l.Z,{gutter:12,children:[(0,j.jsx)(c.Z,{span:12,children:(0,j.jsx)(i.Z.Item,{label:Z("products.stock"),name:"stock",rules:[{required:!0,message:Z("required")}],children:(0,j.jsx)(h.h,{fetchOptions:I,placeholder:Z("select.product.stock")})})}),(0,j.jsx)(c.Z,{span:12,children:(0,j.jsx)(i.Z.Item,{label:Z("product.stock.quantity"),name:"stock_quantity",rules:[{required:!0,message:Z("required")},{type:"number",min:0,message:Z("must.be.greater.than.0")}],children:(0,j.jsx)(d.Z,{className:"w-100",placeholder:Z("input.product.stock.quantity")})})}),(0,j.jsx)(c.Z,{span:12,children:(0,j.jsx)(i.Z.Item,{label:Z("bonus.product.stock"),name:"bonus_stock",rules:[{required:!0,message:Z("required")}],children:(0,j.jsx)(h.h,{fetchOptions:I,placeholder:Z("select.product.stock")})})}),(0,j.jsx)(c.Z,{span:12,children:(0,j.jsx)(i.Z.Item,{label:Z("bonus.product.stock.quantity"),name:"bonus_stock_quantity",rules:[{required:!0,message:Z("required")},{type:"number",min:0,message:Z("must.be.greater.than.0")}],children:(0,j.jsx)(d.Z,{className:"w-100",placeholder:Z("input.bonus.product.stock.quantity")})})}),(0,j.jsx)(c.Z,{span:12,children:(0,j.jsx)(i.Z.Item,{label:Z("expired.at"),name:"expired_at",rules:[{required:!0,message:Z("required")}],children:(0,j.jsx)(m.Z,{className:"w-100",placeholder:Z("select.expired.at"),disabledDate:function(e){return b()().add(-1,"days")>=e}})})}),(0,j.jsx)(c.Z,{span:8,children:(0,j.jsx)(i.Z.Item,{label:Z("active"),name:"status",valuePropName:"checked",children:(0,j.jsx)(v.Z,{})})})]}),(0,j.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,j.jsx)("div",{className:"pb-5",children:(0,j.jsx)(p.Z,{type:"primary",htmlType:"submit",loading:g,children:Z("submit")})})})]})}}}]);