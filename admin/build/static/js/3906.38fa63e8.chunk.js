"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3906],{49655:function(e,n,t){t.d(n,{_:function(){return g}});var i=t(1413),r=t(93433),a=t(15861),l=t(29439),o=t(45987),u=t(87757),c=t.n(u),s=t(47313),d=t(12279),f=t.n(d),v=t(74294),h=t(72652),Z=t(46417),p=["fetchOptions","debounceTimeout","hasMore"],g=function(e){var n=e.fetchOptions,t=e.debounceTimeout,u=void 0===t?400:t,d=e.hasMore,g=(0,o.Z)(e,p),m=(0,s.useState)(!1),j=(0,l.Z)(m,2),x=j[0],y=j[1],b=(0,s.useState)([]),S=(0,l.Z)(b,2),_=S[0],C=S[1],k=(0,s.useState)(!1),w=(0,l.Z)(k,2),I=w[0],O=w[1],P=(0,s.useState)(null),V=(0,l.Z)(P,2),z=V[0],A=V[1],E=(0,s.useState)(1),F=(0,l.Z)(E,2),M=F[0],L=F[1],T=(0,s.useMemo)((function(){return f()((function(e){C([]),A(e),y(!0),n({search:e}).then((function(e){C(e),L(2),y(!1)})).finally((function(){return O(!1)}))}),u)}),[n,u,M]),U=function(){var e=(0,a.Z)(c().mark((function e(t){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.target,I||i.scrollTop+i.offsetHeight!==i.scrollHeight||d&&(O(!0),i.scrollTo(0,i.scrollHeight),n({search:z,page:M}).then((function(e){L((function(e){return e+1})),C([].concat((0,r.Z)(_),(0,r.Z)(e)))})).finally((function(){return O(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsxs)(v.Z,(0,i.Z)((0,i.Z)({showSearch:!0,allowClear:!0,onPopupScroll:U,labelInValue:!0,filterOption:!1,onSearch:T,notFoundContent:x?(0,Z.jsx)(h.Z,{size:"small"}):"no results",onFocus:function(){_.length||T("")}},g),{},{children:[_.map((function(e,n){return(0,Z.jsx)(v.Z.Option,{value:e.value,children:e.label},n)})),I&&(0,Z.jsx)(v.Z.Option,{children:(0,Z.jsx)(h.Z,{size:"small"})})]}))}},73431:function(e,n,t){var i=t(47313),r=t(39180),a=t(2717),l=t(28830),o=t(60535),u=t(46417);n.Z=function(){var e=(0,a.I0)(),n=(0,a.v9)((function(e){return e.formLang}),a.wU),t=n.languages,c=n.defaultLang;(0,i.useEffect)((function(){o.Z.getAllActive().then((function(n){var t=n.data;e((0,l.dc)(t)),e((0,l.mh)(t.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.ZP.Group,{value:c,onChange:function(n){var t=n.target.value;e((0,l.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((function(e){return(0,u.jsx)(r.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},41481:function(e,n,t){t.d(n,{Z:function(){return f}});var i=t(1413),r=t(29439),a=t(45987),l=t(47313),o=t(66672),u=t(16031),c=t(40765),s=t(46417),d=["handleChange","defaultValue","resetSearch"];function f(e){var n=e.handleChange,t=e.defaultValue,f=e.resetSearch,v=(0,a.Z)(e,d),h=(0,l.useState)(t),Z=(0,r.Z)(h,2),p=Z[0],g=Z[1],m=(0,l.useMemo)((function(){return(0,u.debounce)((function(e){n(e)}),800)}),[]);return(0,l.useEffect)((function(){g(t)}),[f]),(0,s.jsx)(o.Z,(0,i.Z)({value:p,onChange:function(e){g(e.target.value),m(e.target.value)},prefix:(0,s.jsx)(c.Z,{})},v))}},43906:function(e,n,t){t.r(n),t.d(n,{default:function(){return L}});var i=t(4942),r=t(1413),a=t(29439),l=t(47313),o=t(86345),u=t(45705),c=t(59491),s=t(77181),d=t(78508),f=t(29466),v=t(97890),h=t(74580),Z=t(2717),p=t(90954),g=t(23560),m=t(24511),j=t(3225),x=t(41481),y=t(80314),b=t(47139),S=t(93433),_=t(10976),C=t(9274),k=t(72652),w=t(68197),I=t(59624),O=t(66672),P=t(73431),V=t(49655),z=t(27453),A=t(46417);function E(e){var n=e.visible,t=e.setVisible,u=e.id,s=e.setId,d=_.Z.useForm(),f=(0,a.Z)(d,1)[0],v=(0,Z.I0)(),h=(0,m.$)().t,p=(0,Z.v9)((function(e){return e.formLang}),Z.wU),x=p.defaultLang,y=p.languages,E=(0,l.useState)(!1),F=(0,a.Z)(E,2),M=F[0],L=F[1],T=(0,l.useState)(!1),U=(0,a.Z)(T,2),q=U[0],B=U[1],H=(0,l.useState)(null),N=(0,a.Z)(H,2),$=N[0],D=N[1],G=function(){D(null),t(!1),f.resetFields(),s(null)};return(0,l.useEffect)((function(){u&&(B(!0),b.Z.show(u).then((function(e){var n=e.data;D(n),f.setFieldsValue((0,r.Z)({active:null===n||void 0===n?void 0:n.active,code:null===n||void 0===n?void 0:n.code,region_id:{label:n.region.translation.title,value:n.region.id}},function(e){if(null===e||void 0===e||!e.translations)return{};var n=e.translations,t=y.map((function(e){var t;return(0,i.Z)({},"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title)}));return Object.assign.apply(Object,[{}].concat((0,S.Z)(t)))}(n)))})).finally((function(){return B(!1)})))}),[u]),(0,A.jsx)(C.Z,{visible:n,onCancel:G,onOk:G,footer:null,loading:q,title:h("add.country"),children:(0,A.jsxs)(_.Z,{form:f,onFinish:function(e){L(!0),null!==$&&void 0!==$&&$.id?function(e){var n;b.Z.update($.id,{region_id:null===e||void 0===e||null===(n=e.region_id)||void 0===n?void 0:n.value,active:e.active,code:e.code,title:(0,r.Z)({},Object.assign.apply(Object,[{}].concat((0,S.Z)(y.map((function(n){return(0,i.Z)({},n.locale,e["title[".concat(n.locale,"]")])}))))))}).then((function(){g.Am.success(h("successfully.updated")),(0,Z.dC)((function(){v((0,j.t)({}))})),G()})).finally((function(){return L(!1)}))}(e):function(e){var n;b.Z.create({active:e.active,code:e.code,region_id:null===e||void 0===e||null===(n=e.region_id)||void 0===n?void 0:n.value,title:(0,r.Z)({},Object.assign.apply(Object,[{}].concat((0,S.Z)(y.map((function(n){return(0,i.Z)({},n.locale,e["title[".concat(n.locale,"]")])}))))))}).then((function(){g.Am.success(h("successfully.added")),(0,Z.dC)((function(){v((0,j.t)({}))})),G()})).finally((function(){return L(!1)}))}(e)},layout:"vertical",initialValues:{active:!0},children:[(0,A.jsx)(k.Z,{spinning:q,children:(0,A.jsxs)(w.Z,{gutter:24,children:[(0,A.jsx)(I.Z,{span:24,children:(0,A.jsx)(P.Z,{})}),(0,A.jsx)(I.Z,{span:24,children:y.map((function(e){return(0,A.jsx)(_.Z.Item,{label:h("title"),name:"title[".concat(e.locale,"]"),hidden:e.locale!==x,rules:[{validator:function(n,t){return t||(null===e||void 0===e?void 0:e.locale)!==x?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(h("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(h("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(h("required")))}}],children:(0,A.jsx)(O.Z,{})},"title"+e.id)}))}),(0,A.jsx)(I.Z,{span:24,children:(0,A.jsx)(_.Z.Item,{name:"region_id",label:h("region_id"),rules:[{required:!0,message:h("required")}],children:(0,A.jsx)(V._,{fetchOptions:function(e){var n=e.search,t=e.page;return z.Z.get({search:n,page:t,has_price:!0}).then((function(e){return e.data.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))}))}})})}),(0,A.jsx)(I.Z,{span:24,children:(0,A.jsx)(_.Z.Item,{label:h("code"),name:"code",children:(0,A.jsx)(O.Z,{})})}),(0,A.jsx)(I.Z,{span:4,children:(0,A.jsx)(_.Z.Item,{label:h("active"),name:"active",valuePropName:"checked",children:(0,A.jsx)(o.Z,{defaultChecked:!0})})})]})}),(0,A.jsx)(c.Z,{type:"primary",htmlType:"submit",loading:M,children:h("submit")})]})})}var F=t(12019),M=t(47515),L=function(){var e=(0,m.$)().t,n=(0,Z.I0)(),t=(0,v.s0)(),S=(0,l.useContext)(h._).setIsModalVisible,_=(0,f.lr)(),C=(0,a.Z)(_,2),k=C[0],w=(C[1],(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu),I=null===w||void 0===w?void 0:w.data,O=k.get("region_id"),P=(0,Z.v9)((function(e){return e.deliveryCountries}),Z.wU),V=P.list,z=P.meta,L=P.loading,T=(0,l.useState)(!1),U=(0,a.Z)(T,2),q=U[0],B=U[1],H=(0,l.useState)(!1),N=(0,a.Z)(H,2),$=N[0],D=N[1],G=(0,l.useState)(!1),K=(0,a.Z)(G,2),J=K[0],Q=K[1],R=(0,l.useState)(null),W=(0,a.Z)(R,2),X=W[0],Y=W[1],ee=[{title:e("id"),dataIndex:"id",key:"id"},{title:e("name"),dataIndex:"translation",key:"translation",render:function(i,r){return(0,A.jsx)("div",{style:{cursor:"pointer",textDecoration:"underline"},onClick:function(){return function(i){n((0,p.bL)({url:"deliveryzone/city?country_id=".concat(i.id),id:"city",name:e("city")})),t("/deliveryzone/city?country_id=".concat(i.id))}(r)},children:(null===i||void 0===i?void 0:i.title)||"-"})}},{title:e("active"),dataIndex:"active",key:"active",render:function(t,i){return(0,A.jsx)(o.Z,{onChange:function(){return function(t){B(t),b.Z.status(t).then((function(){S(!1),n((0,j.t)({region_id:O})),g.Am.success(e("successfully.updated"))})).finally((function(){B(null)}))}(i.id)},checked:t,loading:Boolean(q===i.id)},i.id)}},{title:e("options"),dataIndex:"options",is_show:!0,render:function(t,i){return(0,A.jsxs)(u.Z,{children:[(0,A.jsx)(c.Z,{type:"primary",icon:(0,A.jsx)(F.Z,{}),onClick:function(){return function(e){D(!0),Y(e)}(i.id)}}),(0,A.jsx)(c.Z,{loading:Boolean(J===i.id),icon:(0,A.jsx)(M.Z,{onClick:function(){return function(t){Q(t),b.Z.delete(t).then((function(){n((0,j.t)()),g.Am.success(e("successfully.deleted"))})).finally((function(){Q(!1)}))}(i.id)}})})]})}}];(0,l.useEffect)((function(){w.refetch&&(n((0,j.t)({region_id:O})),n((0,p.A_)(w)))}),[w.refetch]),(0,y.Z)((function(){var e={search:null===I||void 0===I?void 0:I.search,region_id:O};n((0,j.t)(e))}),[null===w||void 0===w?void 0:w.data]);return(0,A.jsxs)(s.Z,{title:e("countries"),extra:(0,A.jsxs)(u.Z,{children:[(0,A.jsx)(x.Z,{placeholder:e("search"),handleChange:function(e){return t=e,a="search",void n((0,p.nc)({activeMenu:w,data:(0,r.Z)((0,r.Z)({},I),{},(0,i.Z)({},a,t))}));var t,a},defaultValue:null===I||void 0===I?void 0:I.search,resetSearch:!(null!==I&&void 0!==I&&I.search)}),(0,A.jsx)(c.Z,{type:"primary",onClick:function(){return D(!0)},children:e("add.country")})]}),children:[(0,A.jsx)(d.Z,{columns:ee,dataSource:V,pagination:{pageSize:z.per_page,page:z.current_page,total:z.total},rowKey:function(e){return e.id},loading:L,onChange:function(e){var t=e.pageSize,i=e.current;n((0,j.t)({perPage:t,page:i,region_id:O}))}}),(0,A.jsx)(E,{visible:$,setVisible:D,id:X,setId:Y})]})}}}]);