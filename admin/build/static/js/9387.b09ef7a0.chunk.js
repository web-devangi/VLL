"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9387],{89281:function(e,n,t){t.d(n,{h:function(){return m}});var a=t(1413),s=t(29439),i=t(45987),r=t(47313),u=t(12279),l=t.n(u),o=t(74294),c=t(72652),d=t(46417),f=["fetchOptions","debounceTimeout","onClear","refetchOptions"],m=function(e){var n=e.fetchOptions,t=e.debounceTimeout,u=void 0===t?400:t,m=e.onClear,h=e.refetchOptions,Z=void 0!==h&&h,g=(0,i.Z)(e,f),p=(0,r.useState)(!1),x=(0,s.Z)(p,2),v=x[0],b=x[1],j=(0,r.useState)([]),_=(0,s.Z)(j,2),y=_[0],w=_[1],q=(0,r.useMemo)((function(){return l()((function(e){w([]),b(!0),n(e).then((function(e){w(e),b(!1)}))}),u)}),[n,u]);return(0,d.jsx)(o.Z,(0,a.Z)((0,a.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:q,onClear:function(){q(""),m&&m()},notFoundContent:v?(0,d.jsx)(c.Z,{size:"small"}):"no results"},g),{},{options:y,onFocus:function(){y.length&&!Z||q("")}}))}},59387:function(e,n,t){t.r(n);var a=t(1413),s=t(29439),i=t(47313),r=t(97890),u=t(23560),l=t(10976),o=t(77181),c=t(68197),d=t(59624),f=t(66672),m=t(74294),h=t(99096),Z=t(59491),g=t(2717),p=t(90954),x=t(24511),v=t(7004),b=t(70816),j=t.n(b),_=t(71274),y=t(51282),w=t(18929),q=t(38758),F=t(89281),Y=t(46417),D=[{title:"order",value:"order"},{title:"subscribe",value:"subscribe"},{title:"verify",value:"verify"}];n.default=function(){var e=(0,x.$)().t,n=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,t=(0,g.I0)(),b=l.Z.useForm(),N=(0,s.Z)(b,1)[0],C=(0,r.s0)(),I=(0,i.useState)(!1),M=(0,s.Z)(I,2),O=M[0],S=M[1],V=(0,i.useState)(!1),E=(0,s.Z)(V,2),U=E[0],k=E[1],H=(0,r.UO)().id,T=(0,g.v9)((function(e){return e.formLang}),g.wU),z=T.defaultLang,A=T.languages;(0,i.useEffect)((function(){return function(){var e=N.getFieldsValue(!0),s=JSON.stringify(e.send_to),i=(0,a.Z)((0,a.Z)({},e),{},{send_to:s});t((0,p.nc)({activeMenu:n,data:i}))}}),[]);(0,i.useEffect)((function(){n.refetch&&function(e){k(!0),_.Z.getById(e).then((function(e){var n=(0,a.Z)((0,a.Z)({},e.data),{},{send_to:j()(e.data.send_to,"YYYY-MM-DD HH:mm:ss"),has_date:!0,email_setting_id:{label:e.data.email_setting.host,value:e.data.email_setting.id}});N.setFieldsValue(n)})).finally((function(){k(!1),t((0,p.A_)(n))}))}(H)}),[n.refetch]);return(0,Y.jsx)(Y.Fragment,{children:U?(0,Y.jsx)(y.Z,{}):(0,Y.jsx)(o.Z,{title:e("edit.subscriber"),className:"h-100",children:(0,Y.jsxs)(l.Z,{name:"subscriber-add",layout:"vertical",onFinish:function(s){console.log("data",s);var i=(0,a.Z)((0,a.Z)({},s),{},{send_to:j()(s.send_to).format("YYYY-MM-DD HH:mm:ss"),email_setting_id:s.email_setting_id.value});S(!0);var r="message/subscriber";_.Z.update(H,i).then((function(){u.Am.success(e("successfully.created")),t((0,p.ph)((0,a.Z)((0,a.Z)({},n),{},{nextUrl:r}))),C("/".concat(r)),t((0,w.F)())})).finally((function(){return S(!1)}))},form:N,initialValues:(0,a.Z)((0,a.Z)({},n.data),function(){var e=n.data;if(null===e||void 0===e||!e.send_to)return e;var t=e.send_to;return(0,a.Z)((0,a.Z)({},e),{},{send_to:j()(t,"YYYY-MM-DD")})}()),className:"d-flex flex-column h-100",children:[(0,Y.jsxs)(c.Z,{gutter:12,children:[(0,Y.jsx)(d.Z,{span:12,children:(0,Y.jsx)(l.Z.Item,{label:e("subject"),name:"subject",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(f.Z,{})})}),(0,Y.jsx)(d.Z,{span:12,children:(0,Y.jsx)(l.Z.Item,{label:e("type"),name:"type",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(m.Z,{disabled:!0,options:D,className:"w-100"})})}),(0,Y.jsx)(d.Z,{span:12,children:(0,Y.jsx)(l.Z.Item,{label:e("email.setting.id"),name:"email_setting_id",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(F.h,{fetchOptions:function(){return q.Z.get().then((function(e){return e.data.map((function(e){return{label:e.host,value:e.id}}))}))},className:"w-100",placeholder:e("email.setting.id")})})}),(0,Y.jsx)(d.Z,{span:24,children:(0,Y.jsx)(v.Z,{languages:A,form:N,lang:z})}),(0,Y.jsx)(d.Z,{span:12,children:(0,Y.jsx)(l.Z.Item,{label:e("alt.body"),name:"alt_body",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(f.Z,{})})}),(0,Y.jsx)(d.Z,{span:6,children:(0,Y.jsx)(l.Z.Item,{label:e("send.to"),name:"send_to",rules:[{required:!0,message:e("required")}],children:(0,Y.jsx)(h.Z,{showTime:!0,className:"w-100",disabledDate:function(e){return j()().add(-1,"days")>=e}})})})]}),(0,Y.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,Y.jsx)("div",{className:"pb-5",children:(0,Y.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:O,children:e("send")})})})]})})})}},7004:function(e,n,t){t.d(n,{Z:function(){return d}});t(47313);var a=t(10976),s=t(24511),i=t(68144),r=t(76733),u=t.n(r),l=t(97421),o=t(36104),c=t(46417);function d(e){var n=e.form,t=(e.lang,e.languages,(0,s.$)().t);return(0,c.jsx)("div",{className:"textEditor",children:(0,c.jsx)(a.Z.Item,{label:t("newsletter.content"),name:"body",valuePropName:"data",getValueFromEvent:function(e,n){return n.getData()},rules:[{required:!0,message:t("required")}],className:"description-editor",children:(0,c.jsx)(i.CKEditor,{editor:u(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return function(e){return{upload:function(){return new Promise((function(n,t){var a=new FormData;e.file.then((function(e){a.append("image",e),a.append("type","blogs"),o.Z.upload(a).then((function(e){var t=e.data;n({default:"".concat(l.bV+t.title)})})).catch((function(e){t(e)}))}))}))}}}(e)}}]},onChange:function(e,n){n.getData()},onBlur:function(e,t){var a=t.getData();n.setFieldsValue({body:a})}})})})}}}]);