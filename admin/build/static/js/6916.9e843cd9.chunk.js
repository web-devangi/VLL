"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6916],{46916:function(t,n,e){e.r(n);var i=e(1413),u=e(93433),a=e(4942),o=e(29439),l=e(47313),r=e(10976),c=e(77181),d=e(73431),s=e(97890),f=e(23861),v=e(70816),p=e.n(v),Z=e(2717),h=e(90954),m=e(24511),x=e(15366),b=e(83106),Y=e(23560),_=e(46417);n.default=function(){var t=(0,m.$)().t,n=r.Z.useForm(),e=(0,o.Z)(n,1)[0],v=(0,l.useState)(!1),g=(0,o.Z)(v,2),y=g[0],M=g[1],j=(0,Z.v9)((function(t){return t.formLang}),Z.wU).languages,k=(0,Z.I0)(),w=(0,s.s0)(),D=(0,s.UO)().id,O=(0,Z.v9)((function(t){return t.menu}),Z.wU).activeMenu;function U(t){M(!0),f.Z.getById(t).then((function(t){var n,o,l,r,c=t.data,d=(0,i.Z)((0,i.Z)((0,i.Z)({},c),{},{shop_id:{label:null===c||void 0===c||null===(n=c.shop)||void 0===n||null===(o=n.translation)||void 0===o?void 0:o.title,value:null===c||void 0===c||null===(l=c.shop)||void 0===l?void 0:l.id,key:null===c||void 0===c||null===(r=c.shop)||void 0===r?void 0:r.id}},function(t){if(null===t||void 0===t||!t.translations)return{};var n=t.translations,e=j.map((function(t){var e;return(0,a.Z)({},"title[".concat(t.locale,"]"),null===(e=n.find((function(n){return n.locale===t.locale})))||void 0===e?void 0:e.title)}));return Object.assign.apply(Object,[{}].concat((0,u.Z)(e)))}(c)),{},{expired_at:p()(c.expired_at,"YYYY-MM-DD")});e.setFieldsValue((0,i.Z)({},d)),k((0,h.nc)({activeMenu:O,data:(0,i.Z)((0,i.Z)({},d),{},{expired_at:JSON.stringify(null===d||void 0===d?void 0:d.expired_at)})}))})).finally((function(){M(!1),k((0,h.A_)(O))}))}return(0,l.useEffect)((function(){O.refetch&&U(D)}),[O.refetch]),(0,_.jsx)(c.Z,{title:t("edit.coupon"),extra:(0,_.jsx)(d.Z,{}),loading:y,children:(0,_.jsx)(b.Z,{form:e,handleSubmit:function(n){var e=(0,i.Z)((0,i.Z)({},n),{},{expired_at:p()(n.expired_at).format("YYYY-MM-DD"),qty:Number(n.qty),price:Number(n.price)}),u="coupons";f.Z.update(D,e).then((function(){Y.Am.success(t("toast.updated")),(0,Z.dC)((function(){k((0,h.ph)((0,i.Z)((0,i.Z)({},O),{},{nextUrl:u}))),k((0,x.v)({}))})),w("/".concat(u))}))}})})}}}]);