"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3858],{55940:(e,t,n)=>{n.d(t,{Z:()=>r});n(47313);var a=n(59491),s=n(47515),l=n(23560),i=n(24511),d=n(79492),o=n(46417);function r(e){let{size:t="",onClick:n,type:r="default",...c}=e;const{t:u}=(0,i.$)(),{isDemo:v}=(0,d.Z)();return(0,o.jsx)(a.Z,{size:t,icon:(0,o.jsx)(s.Z,{}),onClick:e=>{v?l.Am.warning(u("cannot.work.demo")):n(e)},type:r,...c})}},53233:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(47313),s=n(56140),l=n(67251),i=n(45705),d=n(86345),o=n(78267),r=n(37388),c=n(59491),u=n(99587),v=n(24511),h=n(46417);const{Text:x}=s.Z,p=e=>{let{columns:t=[],setColumns:n,style:s,size:p="",iconOnly:m}=e;const{t:Z}=(0,v.$)(),[j,g]=(0,a.useState)(!1),f=(0,h.jsx)(l.Z,{children:null===t||void 0===t?void 0:t.map(((e,a)=>(0,h.jsx)(l.Z.Item,{children:(0,h.jsxs)(i.Z,{className:"d-flex justify-content-between",children:[(0,h.jsx)(x,{children:e.title}),(0,h.jsx)(d.Z,{defaultChecked:!0,onClick:()=>function(e){const a=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));n(a)}(e),disabled:1===a})]})},e+a)))});return(0,h.jsx)(o.Z,{overlay:f,trigger:["click"],onVisibleChange:e=>{g(e)},visible:j,children:(0,h.jsx)(r.Z,{title:Z("change.columns"),children:(0,h.jsx)(c.Z,{style:{...s},size:p,icon:(0,h.jsx)(u.Z,{}),children:m?null:Z("Columns")})})})}},13945:(e,t,n)=>{function a(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(t,{Z:()=>a})},13858:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var a=n(47313),s=n(26824),l=n(66204),i=n(78508),d=n(59491),o=n(45705),r=n(77181),c=n(12019),u=n(47515),v=n(2717),h=n(69915),x=n(74580),p=n(24511),m=n(23560),Z=n(53233),j=n(90954),g=n(80314),f=n(55940),w=n(97890),y=n(69658),_=n(10976),b=n(9274),C=n(68197),k=n(59624),I=n(74294),z=n(82747),S=n(46417);const V=["new","approved","canceled"];function A(e){let{data:t,handleCancel:n,paramsData:s}=e;const{activeMenu:l}=(0,v.v9)((e=>e.menu),v.wU),[i]=_.Z.useForm(),o=(0,v.I0)(),{t:r}=(0,p.$)(),[c,u]=(0,a.useState)(null),[x,Z]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1);(0,a.useEffect)((()=>{f(!0),z.Z.getById(null===t||void 0===t?void 0:t.id).then((e=>{let t=e.data;const n={ads_package_id:null===t||void 0===t?void 0:t.ads_package_id,banner_id:null===t||void 0===t?void 0:t.banner_id,active:null===t||void 0===t?void 0:t.active,position_page:null===t||void 0===t?void 0:t.position_page};u(n)})).catch((e=>m.Am.error(e.message))).finally((()=>f(!1)))}),[null===t||void 0===t?void 0:t.id]);return(0,S.jsx)(b.Z,{visible:!!t,title:t.title,onCancel:n,footer:[(0,S.jsx)(d.Z,{type:"primary",onClick:()=>i.submit(),loading:x,children:r("save")}),(0,S.jsx)(d.Z,{type:"default",onClick:n,children:r("cancel")})],children:(0,S.jsx)(_.Z,{form:i,layout:"vertical",onFinish:e=>{Z(!0);const a={...e};console.log("shopAdData => ",c),!g&&z.Z.update(t.id,{...c,status:null===a||void 0===a?void 0:a.status}).then((()=>{n(),o((0,h.R)(s)),o((0,j.A_)(l))})).finally((()=>Z(!1)))},initialValues:{status:t.status},children:(0,S.jsx)(C.Z,{gutter:12,children:(0,S.jsx)(k.Z,{span:24,children:(0,S.jsx)(_.Z.Item,{label:r("status"),name:"status",rules:[{required:!0,message:r("required")}],children:(0,S.jsx)(I.Z,{children:V.map((e=>(0,S.jsx)(I.Z.Option,{children:r(e)},e)))})})})})})})}var R=n(13945),H=n(70816),F=n.n(H),D=n(97421);const M=["paid","canceled"];function E(e){let{data:t,handleCancel:n,paramsData:s,orderId:l}=e;const[i]=_.Z.useForm(),o=(0,v.I0)(),{t:r}=(0,p.$)(),[c,u]=(0,a.useState)(!1);console.log("data",t);return(0,S.jsx)(b.Z,{visible:!!t,title:r("transaction.status"),closable:!1,footer:[(0,S.jsx)(d.Z,{type:"primary",onClick:()=>i.submit(),loading:c,children:r("save")},"save-form"),(0,S.jsx)(d.Z,{type:"default",onClick:n,children:r("cancel")},"cansel-modal")],children:(0,S.jsx)(_.Z,{form:i,layout:"vertical",onFinish:e=>{u(!0),z.Z.transactionUpdate(null===t||void 0===t?void 0:t.payable_id,e).then((()=>{n(),o((0,h.R)(s))})).catch((e=>m.Am.error(e.message))).finally((()=>u(!1)))},initialValues:{status:t.status},children:(0,S.jsx)(C.Z,{gutter:12,children:(0,S.jsx)(k.Z,{span:24,children:(0,S.jsx)(_.Z.Item,{label:r("status"),name:"status",rules:[{validator:(e,t)=>"paid"===t||"canceled"===t?Promise.resolve():Promise.reject(new Error(r("required")))}],children:(0,S.jsx)(I.Z,{children:M.map(((e,t)=>(0,S.jsx)(I.Z.Option,{value:e,children:r(e)},t)))})})})})})})}function O(){const{t:e}=(0,p.$)(),t=(0,v.I0)(),n=(0,w.s0)(),{activeMenu:_}=(0,v.v9)((e=>e.menu),v.wU),{shopAdsList:b,loading:C,meta:k}=(0,v.v9)((e=>e.shopAds),v.wU),{setIsModalVisible:I}=(0,a.useContext)(x._),[V,H]=(0,a.useState)(null),[M,O]=(0,a.useState)(null),[P,$]=(0,a.useState)(null),[K,U]=(0,a.useState)(!1),[Y,q]=(0,a.useState)(null),[B,N]=(0,a.useState)([]),[T,L]=(0,a.useState)(!1),[G,J]=(0,a.useState)(null),[Q,W]=(0,a.useState)(null),X=_.data,ee={search:null===X||void 0===X?void 0:X.serach,perPage:null===X||void 0===X?void 0:X.perPage,page:null===X||void 0===X?void 0:X.page,sort:null===X||void 0===X?void 0:X.sort};(0,a.useEffect)((()=>{_.refetch&&(t((0,h.R)(ee)),t((0,j.A_)(_)))}),[_.refetch]),(0,g.Z)((()=>{t((0,h.R)(ee))}),[_.data]);const te=()=>{t((0,j.bL)({id:"transactions",url:"transactions",name:e("transactions")})),n("/transactions")},ne={selectedRowKeys:V,onChange:e=>{H(e)}},[ae,se]=(0,a.useState)([{title:e("id"),dataIndex:"id",is_show:!0,sorter:(e,t)=>e.id-t.id},{title:e("shop"),dataIndex:"title",is_show:!0,render:(e,t)=>{var n,a;return(0,S.jsx)("span",{children:null===t||void 0===t||null===(n=t.shop)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title})}},{title:e("expire.at"),dataIndex:"expire_at",is_show:!0,render:(t,n)=>(0,S.jsx)(S.Fragment,{children:null!==n&&void 0!==n&&n.expired_at?F()(null===n||void 0===n?void 0:n.expired_at).format("YYYY-MM-DD hh:mm"):(0,S.jsx)("span",{children:e("not.expired")})})},{title:e("status"),is_show:!0,dataIndex:"status",key:"status",render:(t,n)=>(0,S.jsxs)("div",{children:["new"===t?(0,S.jsx)(l.Z,{color:"blue",children:e(t)}):"canceled"===t?(0,S.jsx)(l.Z,{color:"error",children:e(t)}):(0,S.jsx)(l.Z,{color:"cyan",children:e(t)}),(0,S.jsx)(c.Z,{onClick:()=>q(n)})]})},{title:e("transaction"),dataIndex:"transaction",is_show:!0,render:(t,n)=>{var a;return(0,S.jsx)(S.Fragment,{children:t?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(d.Z,{onClick:te,color:"cyan",children:null===n||void 0===n||null===(a=n.transaction)||void 0===a?void 0:a.status}),"\xa0 \xa0 \xa0",(0,S.jsx)(c.Z,{onClick:()=>W(null===n||void 0===n?void 0:n.transaction)})]}):(0,S.jsx)(d.Z,{color:"error",children:e("not.paid")})})}},{title:e("options"),dataIndex:"options",is_show:!0,render:(e,t)=>(0,S.jsx)(o.Z,{children:(0,S.jsx)(f.Z,{icon:(0,S.jsx)(u.Z,{}),onClick:()=>{I(!0),H([t.id]),O(!0),$(!1)}})})}]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.Z,{className:"p-0",children:(0,S.jsxs)(o.Z,{wrap:!0,size:[14,20],children:[(0,S.jsx)(f.Z,{size:"",onClick:()=>{null===V||0===V.length?m.Am.warning(e("select.the.product")):(I(!0),O(!1))},children:e("delete.selected")}),(0,S.jsx)(Z.Z,{columns:ae,setColumns:se})]})}),(0,S.jsx)(r.Z,{children:(0,S.jsx)(i.Z,{onExpand:(e,t)=>(e=>{let{expanded:t,record:n}=e;N([]),t?(L(!0),J(null===n||void 0===n?void 0:n.id),z.Z.getById(null===n||void 0===n?void 0:n.id).then((e=>{var t;N(null===(t=e.data)||void 0===t?void 0:t.shop_ads_products)})).finally((()=>L(!1)))):J(null)})({expanded:e,record:t}),expandable:{expandedRowRender:()=>{const t=[{title:e("id"),dataIndex:"id",is_show:!0,sorter:(e,t)=>e.id-t.id},{title:e("image"),dataIndex:"img",is_show:!0,render:(e,t)=>{var n;return(0,S.jsx)(s.Z,{width:100,height:100,src:D.bV+(null===(n=t.product)||void 0===n?void 0:n.img),placeholder:!0,style:{borderRadius:4,objectFit:"cover"}})}},{title:e("name"),dataIndex:"name",is_show:!0,render:(e,t)=>{var n,a;return null===(n=t.product)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title}},{title:e("active"),dataIndex:"active",is_show:!0,render:(t,n)=>{var a;return null!==(a=n.product)&&void 0!==a&&a.active?e("active"):e("inactive")}},{title:e("status"),is_show:!0,dataIndex:"status",key:"status",render:(t,n)=>{var a,s,i,d,o;return(0,S.jsx)("div",{children:"pending"===(null===(a=n.product)||void 0===a?void 0:a.status)?(0,S.jsx)(l.Z,{color:"blue",children:e(null===(s=n.product)||void 0===s?void 0:s.status)}):"unpublished"===(null===(i=n.product)||void 0===i?void 0:i.status)?(0,S.jsx)(l.Z,{color:"error",children:e(null===(d=n.product)||void 0===d?void 0:d.status)}):(0,S.jsx)(l.Z,{color:"cyan",children:e(null===(o=n.product)||void 0===o?void 0:o.status)})})}}];return(0,S.jsx)(i.Z,{columns:t,dataSource:B,pagination:!1,loading:T})},defaultExpandedRowKeys:["0"],expandedRowKeys:[G]},scroll:{x:!0},dataSource:b,columns:null===ae||void 0===ae?void 0:ae.filter((e=>null===e||void 0===e?void 0:e.is_show)),rowSelection:ne,rowKey:e=>e.id,loading:K||C,pagination:{pageSize:k.per_page,page:k.current_page,total:k.total},onChange:(e,n,a)=>{const{pageSize:s,current:l}=e,{field:i,order:d}=a,o=(0,R.Z)(d);t((0,j.nc)({activeMenu:_,data:{..._.data,perPage:s,page:l,column:i,sort:o}}))}})}),Y&&(0,S.jsx)(A,{data:Y,handleCancel:()=>q(null),paramsData:ee}),(0,S.jsx)(y.Z,{click:P?()=>{U(!0),z.Z.setActive(V).then((()=>{I(!1),t((0,h.R)(ee)),m.Am.success(e("successfully.updated")),$(!1)})).finally((()=>U(!1)))}:()=>{U(!0);const n={...Object.assign({},...V.map(((e,t)=>({["ids[".concat(t,"]")]:e}))))};z.Z.delete(n).then((()=>{I(!1),m.Am.success(e("successfully.deleted")),t((0,h.R)(ee)),O(null),$(!1)})).finally((()=>{U(!1),H(null)}))},text:e(P?"set.active.advert":M?"delete":"all.delete"),setText:H,setActive:$}),Q&&(0,S.jsx)(E,{data:Q,handleCancel:()=>W(!1),paramsData:ee})]})}},99587:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(1413),s=n(47313);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=n(17469),d=function(e,t){return s.createElement(i.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:l}))};d.displayName="TableOutlined";const o=s.forwardRef(d)}}]);