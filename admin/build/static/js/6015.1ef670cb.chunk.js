"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6015],{4014:function(e,n,i){function l(e){var n,i,l=null===e||void 0===e?void 0:e.slice(0,1),d=null===e||void 0===e?void 0:e.lastIndexOf("@"),t=null===e||void 0===e?void 0:e.slice(1,d-1);t=null===(n=t)||void 0===n?void 0:n.replace(/./g,"*");var o=null===e||void 0===e?void 0:e.slice(d-1,e.length);return null===l||void 0===l||null===(i=l.concat(t))||void 0===i?void 0:i.concat(o)}i.d(n,{Z:function(){return l}})},84261:function(e,n,i){function l(e){var n="".concat(e),i="*".repeat(n.length-2);return(null===n||void 0===n?void 0:n[0])+i+(null===n||void 0===n?void 0:n[(null===n||void 0===n?void 0:n.length)-1])}i.d(n,{Z:function(){return l}})},73431:function(e,n,i){var l=i(47313),d=i(39180),t=i(2717),o=i(28830),s=i(60535),r=i(46417);n.Z=function(){var e=(0,t.I0)(),n=(0,t.v9)((function(e){return e.formLang}),t.wU),i=n.languages,a=n.defaultLang;(0,l.useEffect)((function(){s.Z.getAllActive().then((function(n){var i=n.data;e((0,o.dc)(i)),e((0,o.mh)(i.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d.ZP.Group,{value:a,onChange:function(n){var i=n.target.value;e((0,o.mh)(i))},className:"float-right",buttonStyle:"solid",children:null===i||void 0===i?void 0:i.map((function(e){return(0,r.jsx)(d.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},31025:function(e,n,i){i.d(n,{Z:function(){return Z}});var l=i(15861),d=i(29439),t=i(87757),o=i.n(t),s=i(47313),r=i(24511),a=i(51095),u=i(23560),c=i(59491),v=i(66204),x=i(31881),m=i.n(x),h=i(97421),p=i(51282),j=i(46417),f="https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=".concat(h.$h);function Z(e){var n=e.orderId,i=e.showLink,t=void 0===i||i,x=e.size,Z=void 0===x?2:x,y=(0,r.$)().t,g=(0,s.useState)(""),b=(0,d.Z)(g,2),_=b[0],k=b[1],N=(0,s.useState)(!1),w=(0,d.Z)(N,2),I=w[0],C=w[1],S=(0,s.useState)(null),Y=(0,d.Z)(S,2),z=Y[0],F=Y[1],D=function(){var e=(0,l.Z)(o().mark((function e(){var i,l,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),i={dynamicLinkInfo:{domainUriPrefix:h.AC,link:"".concat(h.o6,"/orders/").concat(n),androidInfo:{androidPackageName:h.aG},iosInfo:{iosBundleId:h.Ir}}},e.prev=2,e.next=5,m().post(f,i);case 5:l=e.sent,d=l.data,F(null),k(null===d||void 0===d?void 0:d.shortLink),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),F(e.t0),u.Am.error(e.t0.message);case 15:return e.prev=15,C(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){D()}),[n]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("h3",{children:[y("qr_code"),":"]}),(0,j.jsx)("div",{children:I||z?z?(0,j.jsx)(v.Z,{color:"red",children:y("smth.went.wrong")}):(0,j.jsx)(p.Z,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{style:{width:"".concat(100*Z,"px"),height:"".concat(100*Z,"px"),borderRadius:"10px",overflow:z?"none":"hidden"},children:(0,j.jsx)(a.Qd,{size:500,id:"qrCode",includeMargin:!0,value:_,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,j.jsx)("br",{}),t&&(0,j.jsx)(c.Z,{type:"primary",href:_,target:"_blank",rel:"noreferrer",style:{width:"".concat(100*Z,"px")},children:y("link.to.order")})]})})]})}},89281:function(e,n,i){i.d(n,{h:function(){return x}});var l=i(1413),d=i(29439),t=i(45987),o=i(47313),s=i(12279),r=i.n(s),a=i(74294),u=i(72652),c=i(46417),v=["fetchOptions","debounceTimeout","onClear","refetchOptions"],x=function(e){var n=e.fetchOptions,i=e.debounceTimeout,s=void 0===i?400:i,x=e.onClear,m=e.refetchOptions,h=void 0!==m&&m,p=(0,t.Z)(e,v),j=(0,o.useState)(!1),f=(0,d.Z)(j,2),Z=f[0],y=f[1],g=(0,o.useState)([]),b=(0,d.Z)(g,2),_=b[0],k=b[1],N=(0,o.useMemo)((function(){return r()((function(e){k([]),y(!0),n(e).then((function(e){k(e),y(!1)}))}),s)}),[n,s]);return(0,c.jsx)(a.Z,(0,l.Z)((0,l.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:N,onClear:function(){N(""),x&&x()},notFoundContent:Z?(0,c.jsx)(u.Z,{size:"small"}):"no results"},p),{},{options:_,onFocus:function(){_.length&&!h||N("")}}))}},64922:function(e,n,i){i.d(n,{t:function(){return u}});var l=i(10976),d=i(68197),t=i(59624),o=i(66672),s=i(59491),r=i(24511),a=i(46417),u=function(e){var n=e.onSubmit,i=e.initialData,u=e.isSubmitting,c=(0,r.$)().t;return(0,a.jsx)(l.Z,{layout:"vertical",initialValues:i,onFinish:n,children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(t.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:c("tracking.name"),name:"track_name",rules:[{required:!0,message:c("required")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(t.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:c("tracking.id"),name:"track_id",rules:[{required:!0,message:c("required")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(t.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:c("tracking.url"),name:"track_url",rules:[{type:"url",message:c("should.be.url")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(t.Z,{span:7,children:(0,a.jsx)(s.Z,{type:"primary",loading:u,htmlType:"submit",children:c("submit")})})]})})}},17649:function(e,n,i){i.d(n,{Z:function(){return l}});i(97421);function l(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};var n=e.location.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}},84017:function(e,n,i){function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after",l=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===i?"".concat(l," ").concat(n):"".concat(n," ").concat(l)}i.d(n,{Z:function(){return l}})},56015:function(e,n,i){i.r(n),i.d(n,{default:function(){return le}});var l=i(1413),d=i(29439),t=i(47313),o=i(45705),s=i(66204),r=i(26824),a=i(78508),u=i(59491),c=i(77181),v=i(68197),x=i(59624),m=i(56140),h=i(14133),p=i(83999),j=i(72652),f=i(45334),Z=i(41068),y=i(46155),g=i(83685),b=i(12019),_=i(89720),k=i(29466),N=i(97890),w=i(62412),I=i(45464),C=i(2717),S=i(90954),Y=i(27107),z=i(88852),F=i(94291),D=i(24511),q=i(84017),M=i(40197),B=i(72944),H=i(58821),L=i(22539),O=i(97421),T=i(5958),U=i(32916),A=i(70816),E=i.n(A),P=i(79492),R=i(4014),V=i(31025),$=i(64922),G=i(23560),Q=i(84261),K=i(10976),J=i(9274),W=i(74294),X=i(93161),ee=i(46417),ne=["paid","canceled"];function ie(e){var n=e.transactionDetails,i=e.handleCancel,l=e.fetchOrder,o=e.orderId,s=K.Z.useForm(),r=(0,d.Z)(s,1)[0],a=(0,D.$)().t,c=(0,t.useState)(!1),m=(0,d.Z)(c,2),h=m[0],p=m[1];return(0,ee.jsx)(J.Z,{visible:!!n,title:a("transaction.status"),closable:!1,footer:[(0,ee.jsx)(u.Z,{type:"primary",onClick:function(){return r.submit()},loading:h,children:a("save")},"save-form"),(0,ee.jsx)(u.Z,{type:"default",onClick:i,children:a("cancel")},"cansel-modal")],children:(0,ee.jsx)(K.Z,{form:r,layout:"vertical",onFinish:function(e){p(!0),X.Z.updateStatus(o,e).then((function(){i(),l()})).catch((function(e){return G.Am.error(e.message)})).finally((function(){return p(!1)}))},initialValues:{status:n.status},children:(0,ee.jsx)(v.Z,{gutter:12,children:(0,ee.jsx)(x.Z,{span:24,children:(0,ee.jsx)(K.Z.Item,{label:a("status"),name:"status",rules:[{validator:function(e,n){return"paid"===n||"canceled"===n?Promise.resolve():Promise.reject(new Error(a("required")))}}],children:(0,ee.jsx)(W.Z,{children:ne.map((function(e,n){return(0,ee.jsx)(W.Z.Option,{value:e,children:a(e)},n)}))})})})})})})}function le(){var e,n,i,A,K,J,W,X,ne,le,de,te,oe,se,re,ae,ue,ce,ve,xe,me,he,pe,je,fe,Ze,ye,ge,be,_e,ke,Ne,we,Ie,Ce,Se,Ye,ze,Fe,De,qe,Me=(0,C.v9)((function(e){return e.menu}),C.wU).activeMenu,Be=(0,C.v9)((function(e){return e.currency}),C.wU).defaultCurrency,He=(0,C.v9)((function(e){return e.orderStatus}),C.wU).statusList,Le=(0,N.s0)(),Oe=null===Me||void 0===Me||null===(e=Me.data)||void 0===e?void 0:e.data,Te=(0,D.$)().t,Ue=(0,N.UO)().id,Ae=(0,C.I0)(),Ee=(0,t.useRef)(),Pe=(0,t.useRef)(),Re=(0,P.Z)().isDemo,Ve=(0,t.useState)(!1),$e=(0,d.Z)(Ve,2),Ge=$e[0],Qe=$e[1],Ke=(0,t.useState)(null),Je=(0,d.Z)(Ke,2),We=Je[0],Xe=Je[1],en=(0,t.useState)(null),nn=(0,d.Z)(en,2),ln=nn[0],dn=nn[1],tn=(0,t.useState)(null),on=(0,d.Z)(tn,2),sn=on[0],rn=on[1],an=(0,C.v9)((function(e){return e.myShop}),C.wU).myShop,un=(0,C.v9)((function(e){return e.formLang}),C.wU).defaultLang,cn=(0,t.useState)(!1),vn=(0,d.Z)(cn,2),xn=vn[0],mn=vn[1],hn=(0,t.useState)(!1),pn=(0,d.Z)(hn,2),jn=pn[0],fn=pn[1],Zn=[{title:Te("id"),dataIndex:"id",key:"id",render:function(e,n){var i;return null===(i=n.stock)||void 0===i?void 0:i.id}},{title:Te("product.name"),dataIndex:"product",key:"product",render:function(e,n){var i,l,d,t,r;return(0,ee.jsxs)(o.Z,{direction:"vertical",className:"relative",children:[null===(i=n.stock)||void 0===i||null===(l=i.product)||void 0===l||null===(d=l.translation)||void 0===d?void 0:d.title,null===(t=n.stock)||void 0===t||null===(r=t.extras)||void 0===r?void 0:r.map((function(e){var n,i,l;return(0,ee.jsxs)(s.Z,{children:[null===(n=e.group)||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title,": ",null===(l=e.value)||void 0===l?void 0:l.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Te("image"),dataIndex:"img",key:"img",render:function(e,n){var i,l;return(0,ee.jsx)(r.Z,{src:(0,I.Z)(null===(i=n.stock)||void 0===i||null===(l=i.product)||void 0===l?void 0:l.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Te("price"),dataIndex:"origin_price",key:"origin_price",render:function(e,n){var i;return null!==n&&void 0!==n&&n.bonus?(0,ee.jsx)(s.Z,{color:"green",children:Te("bonus")}):(0,q.Z)(null===n||void 0===n||null===(i=n.stock)||void 0===i?void 0:i.price,null===Be||void 0===Be?void 0:Be.symbol)}},{title:Te("quantity"),dataIndex:"quantity",key:"quantity",render:function(e,n){var i,l;return(0,ee.jsx)("span",{children:e*((null===n||void 0===n||null===(i=n.stock)||void 0===i||null===(l=i.product)||void 0===l?void 0:l.interval)||1)})}},{title:Te("discount"),dataIndex:"rate_discount",key:"rate_discount",render:function(e,n){var i;return(0,q.Z)(null===n||void 0===n||null===(i=n.stock)||void 0===i?void 0:i.discount,null===Be||void 0===Be?void 0:Be.symbol)}},{title:Te("tax"),dataIndex:"tax",key:"tax",render:function(e,n){return(0,q.Z)(null===n||void 0===n?void 0:n.tax,null===Be||void 0===Be?void 0:Be.symbol)}},{title:Te("total.price"),dataIndex:"total_price",key:"total_price",render:function(e,n){return(0,q.Z)(null===n||void 0===n?void 0:n.total_price,null===Be||void 0===Be?void 0:Be.symbol)}},{title:Te("actions"),dataIndex:"actions",key:"actions",render:function(e,n){return(0,ee.jsx)(o.Z,{children:(0,ee.jsx)(u.Z,{type:"primary",icon:(0,ee.jsx)(g.Z,{}),onClick:function(){return kn(n)},disabled:"new"!==(null===Oe||void 0===Oe?void 0:Oe.status)&&"accepted"!==(null===Oe||void 0===Oe?void 0:Oe.status)||(null===n||void 0===n?void 0:n.bonus)})})}}],yn=[{title:Te("date"),dataIndex:"date",key:"date",render:function(e){return E()(e).format("YYYY-MM-DD HH:mm")}},{title:Te("document"),dataIndex:"document",key:"document"},{title:Te("number"),dataIndex:"number",key:"number"},{title:Te("total.price"),dataIndex:"price",key:"price"}],gn=[{price:(0,q.Z)(null===Oe||void 0===Oe?void 0:Oe.total_price,Be.symbol),number:(0,ee.jsxs)(k.rU,{to:"/orders/generate-invoice/".concat(null===Oe||void 0===Oe?void 0:Oe.id),children:["#",null===Oe||void 0===Oe?void 0:Oe.id]}),document:Te("invoice"),date:E()(null===Oe||void 0===Oe?void 0:Oe.created_at).format("YYYY-MM-DD HH:mm")},{price:"-",number:(0,ee.jsxs)(k.rU,{to:"/orders/generate-invoice/".concat(null===Oe||void 0===Oe?void 0:Oe.id),children:["#",null===Oe||void 0===Oe?void 0:Oe.id]}),document:Te("delivery.receipt"),date:E()(null===Oe||void 0===Oe?void 0:Oe.created_at).format("YYYY-MM-DD HH:mm")}],bn=function(){Xe(null),dn(null),rn(null)};function _n(){Qe(!0),w.Z.getById(Ue).then((function(e){var n=e.data,i=n.currency,d=n.user,t=n.id,o=n.price,s=n.created_at,r=n.details.map((function(e){var n,i;return(0,l.Z)((0,l.Z)({},e),{},{title:null===(n=e.shop)||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title})}));Ae((0,S.nc)({activeMenu:Me,data:{details:r,currency:i,user:d,id:t,createdAt:s,price:o,data:n}}))})).finally((function(){Qe(!1),Ae((0,S.A_)(Me))}))}var kn=function(e){var n,i;Ae((0,S.bL)({url:"seller/order/details/".concat(null===Oe||void 0===Oe?void 0:Oe.id,"/replace/").concat(null===e||void 0===e||null===(n=e.stock)||void 0===n?void 0:n.id),id:"seller_replace_product",name:Te("replace.product")})),Le("replace/".concat(null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.id),{state:{data:Oe}})},Nn=(0,t.useCallback)((function(e){mn(!0),w.Z.updateTracking(null===Oe||void 0===Oe?void 0:Oe.id,e).then((function(){G.Am.success(Te("successfully.updated")),_n()})).finally((function(){mn(!1)}))}),[null===Oe||void 0===Oe?void 0:Oe.id]);(0,t.useEffect)((function(){var e={shop_id:an.id};Me.refetch&&(_n(),(0,C.dC)((function(){Ae((0,M.ZL)({})),Ae((0,F.EH)(e))})))}),[Me.refetch]);return(0,ee.jsxs)("div",{className:"order_details",children:[(0,ee.jsx)(c.Z,{className:"order-details-info",title:(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(U.Qyq,{className:"mr-2 icon"}),"".concat(Te("order")," ").concat(null!==Oe&&void 0!==Oe&&Oe.id?"#".concat(null===Oe||void 0===Oe?void 0:Oe.id," "):"")," ",Te("from.order")," ",null===Oe||void 0===Oe||null===(n=Oe.user)||void 0===n?void 0:n.firstname," ",(null===Oe||void 0===Oe||null===(i=Oe.user)||void 0===i?void 0:i.lastname)||""]}),extra:"delivered"!==(null===Oe||void 0===Oe?void 0:Oe.status)&&"canceled"!==(null===Oe||void 0===Oe?void 0:Oe.status)&&2===(null===Oe||void 0===Oe?void 0:Oe.type)?(0,ee.jsxs)(o.Z,{children:["delivered"!==(null===Oe||void 0===Oe?void 0:Oe.status)&&"canceled"!==(null===Oe||void 0===Oe?void 0:Oe.status)&&1!==(null===Oe||void 0===Oe?void 0:Oe.type)?(0,ee.jsx)(u.Z,{type:"primary",onClick:function(){return Xe(null===Oe||void 0===Oe?void 0:Oe.id)},children:Te("change.status")}):null,(0,ee.jsx)(u.Z,{type:"primary",icon:(0,ee.jsx)(b.Z,{}),onClick:function(){Ae((0,S.bL)({url:"seller/order/".concat(Ue),id:"order_edit",name:Te("edit.order")})),Le("/seller/order/".concat(Ue))},children:Te("edit")})]}):""}),(0,ee.jsxs)(v.Z,{gutter:24,children:[(0,ee.jsx)(x.Z,{span:24,children:(0,ee.jsx)(c.Z,{children:(0,ee.jsxs)(o.Z,{className:"justify-content-between w-100",children:[(0,ee.jsxs)(o.Z,{className:"align-items-start",children:[(0,ee.jsx)(_.Z,{className:"order-card-icon"}),(0,ee.jsxs)("div",{className:"d-flex flex-column",children:[(0,ee.jsx)(m.Z.Text,{children:Te("delivery.date")}),Ge?(0,ee.jsx)(h.Z.Button,{size:16}):(0,ee.jsxs)(m.Z.Text,{className:"order-card-title",children:[null===Oe||void 0===Oe?void 0:Oe.delivery_date," ",null===Oe||void 0===Oe?void 0:Oe.delivery_time]})]})]}),(0,ee.jsxs)(o.Z,{className:"align-items-start",onClick:function(){return Ee.current.scrollIntoView({behavior:"smooth"})},children:[(0,ee.jsx)(T.iFN,{className:"order-card-icon"}),(0,ee.jsxs)("div",{className:"d-flex flex-column",children:[(0,ee.jsx)(m.Z.Text,{children:Te("total.price")}),Ge?(0,ee.jsx)(h.Z.Button,{size:16,loading:Ge}):(0,ee.jsx)(m.Z.Text,{className:"order-card-title",children:(0,q.Z)(null===Oe||void 0===Oe?void 0:Oe.total_price,null===Be||void 0===Be?void 0:Be.symbol)})]})]}),(0,ee.jsxs)(o.Z,{className:"align-items-start",children:[(0,ee.jsx)(T.Dij,{className:"order-card-icon"}),(0,ee.jsxs)("div",{className:"d-flex flex-column",children:[(0,ee.jsx)(m.Z.Text,{children:Te("messages")}),Ge?(0,ee.jsx)(h.Z.Button,{size:16}):(0,ee.jsx)(m.Z.Text,{className:"order-card-title",children:null!==Oe&&void 0!==Oe&&Oe.review?1:0})]})]}),(0,ee.jsxs)(o.Z,{className:"align-items-start",onClick:function(){return Pe.current.scrollIntoView({behavior:"smooth"})},children:[(0,ee.jsx)(U.Qyq,{className:"order-card-icon"}),(0,ee.jsxs)("div",{className:"d-flex flex-column",children:[(0,ee.jsx)(m.Z.Text,{children:Te("products")}),Ge?(0,ee.jsx)(h.Z.Button,{size:16}):(0,ee.jsx)(m.Z.Text,{className:"order-card-title",children:null===Oe||void 0===Oe||null===(A=Oe.details)||void 0===A?void 0:A.reduce((function(e,n){return e+n.quantity}),0)})]})]})]})})}),"canceled"!==(null===Oe||void 0===Oe?void 0:Oe.status)&&(0,ee.jsx)(x.Z,{span:24,children:(0,ee.jsx)(c.Z,{children:(0,ee.jsx)(p.Z,{current:null===He||void 0===He?void 0:He.findIndex((function(e){return e.name===(null===Oe||void 0===Oe?void 0:Oe.status)})),children:null===He||void 0===He||null===(K=He.slice(0,-1))||void 0===K?void 0:K.filter((function(e){return null===e||void 0===e?void 0:e.active})).map((function(e){return(0,ee.jsx)(p.Z.Step,{title:Te(e.name)},e.id)}))})})}),(0,ee.jsxs)(x.Z,{span:16,children:[(0,ee.jsx)(j.Z,{spinning:Ge,children:(0,ee.jsxs)(c.Z,{style:{minHeight:"200px"},children:[(0,ee.jsxs)("h3",{children:[Te("details"),":"]}),(0,ee.jsxs)(v.Z,{hidden:Ge,className:"mb-3 order_detail",gutter:10,children:[(0,ee.jsxs)(x.Z,{span:12,children:[(0,ee.jsxs)("div",{children:[Te("created.date.&.time"),":",(0,ee.jsxs)("span",{className:"ml-2",children:[(0,ee.jsx)(H.yoA,{className:"mr-1"})," ",E()(null===Oe||void 0===Oe?void 0:Oe.created_at).format("YYYY-MM-DD HH:mm")," "]})]}),(0,ee.jsx)("br",{}),"dine_in"===(null===Oe||void 0===Oe?void 0:Oe.delivery_type)&&(0,ee.jsxs)("div",{children:[Te("table"),":",(0,ee.jsx)("span",{className:"ml-2",children:null===Oe||void 0===Oe||null===(J=Oe.table)||void 0===J?void 0:J.name})]}),"dine_in"!==(null===Oe||void 0===Oe?void 0:Oe.delivery_type)&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)("div",{children:[Te("delivery.date.&.time"),":",(0,ee.jsxs)("span",{className:"ml-2",children:[(0,ee.jsx)(H.yoA,{className:"mr-1"})," ",null===Oe||void 0===Oe?void 0:Oe.delivery_date," ",null===Oe||void 0===Oe?void 0:Oe.delivery_time]})]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("div",{children:[Te("payment.status"),":",(0,ee.jsxs)("span",{style:{cursor:"pointer"},className:"ml-2",onClick:function(){return fn(!0)},children:[Te(null===Oe||void 0===Oe||null===(W=Oe.transaction)||void 0===W?void 0:W.status)," ",(0,ee.jsx)(b.Z,{})]})]})]})]}),(0,ee.jsxs)(x.Z,{span:12,children:[(0,ee.jsxs)("div",{children:[Te("status"),":",(0,ee.jsx)("span",{className:"ml-2",children:"new"===(null===Oe||void 0===Oe?void 0:Oe.status)?(0,ee.jsx)(s.Z,{color:"blue",children:Te(null===Oe||void 0===Oe?void 0:Oe.status)}):"canceled"===(null===Oe||void 0===Oe?void 0:Oe.status)?(0,ee.jsx)(s.Z,{color:"error",children:Te(null===Oe||void 0===Oe?void 0:Oe.status)}):(0,ee.jsx)(s.Z,{color:"cyan",children:Te(null===Oe||void 0===Oe?void 0:Oe.status)})})]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("div",{children:[Te("delivery.type"),":",(0,ee.jsx)("span",{className:"ml-2",children:null===Oe||void 0===Oe?void 0:Oe.delivery_type})]}),"dine_in"!==(null===Oe||void 0===Oe?void 0:Oe.delivery_type)&&(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)("br",{}),(0,ee.jsxs)("div",{children:[Te("payment.type"),":",(0,ee.jsx)("span",{className:"ml-2",children:Te(null===Oe||void 0===Oe||null===(X=Oe.transaction)||void 0===X||null===(ne=X.payment_system)||void 0===ne?void 0:ne.tag)})]})]})]})]}),(0,ee.jsxs)(v.Z,{hidden:Ge,className:"mb-3 order_detail",children:[(0,ee.jsxs)(x.Z,{span:12,children:[(0,ee.jsxs)("h3",{children:[Te("delivery.address"),":"]}),(0,ee.jsx)("div",{children:null!==Oe&&void 0!==Oe&&Oe.address?(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)("div",{children:[Te("street.house.number"),":"," ",null!==(le=null===Oe||void 0===Oe||null===(de=Oe.address)||void 0===de?void 0:de.street_house_number)&&void 0!==le?le:Te("not.given")]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("div",{children:[Te("zipcode"),":"," ",null!==(te=null!==(oe=null===Oe||void 0===Oe||null===(se=Oe.address)||void 0===se?void 0:se.zipcode)&&void 0!==oe?oe:null===Oe||void 0===Oe||null===(re=Oe.address)||void 0===re?void 0:re.zip_code)&&void 0!==te?te:Te("not.given")]})]}):null!==Oe&&void 0!==Oe&&Oe.my_address?(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)("div",{children:[Te("street.house.number"),":"," ",null!==(ae=null===Oe||void 0===Oe||null===(ue=Oe.my_address)||void 0===ue?void 0:ue.street_house_number)&&void 0!==ae?ae:Te("not.given")]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("div",{children:[Te("zipcode"),":"," ",null!==(ce=null===Oe||void 0===Oe||null===(ve=Oe.my_address)||void 0===ve?void 0:ve.zipcode)&&void 0!==ce?ce:Te("not.given")]})]}):null!==Oe&&void 0!==Oe&&Oe.delivery_point?(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsxs)("div",{children:[Te("address"),":"," ",null!==(xe=null===Oe||void 0===Oe||null===(me=Oe.delivery_point)||void 0===me||null===(he=me.address)||void 0===he?void 0:he[un])&&void 0!==xe?xe:Te("no.address")]})}):"digital"===(null===Oe||void 0===Oe?void 0:Oe.delivery_type)?(0,ee.jsx)("div",{children:Te("digital.delivery")}):(0,ee.jsx)("div",{children:Te("no.address")})}),(0,ee.jsxs)(u.Z,{className:"map_show mt-3",onClick:function(){return rn(Ue)},children:[(0,ee.jsx)(L.$0r,{style:{marginRight:"8px"}})," ",Te("show.locations")]})]}),(0,ee.jsx)(x.Z,{span:12,children:(0,ee.jsx)(V.Z,{orderId:Ue})})]})]})}),"dine_in"!==(null===Oe||void 0===Oe?void 0:Oe.delivery_type)&&(0,ee.jsx)(c.Z,{title:Te("documents"),children:(0,ee.jsx)(a.Z,{columns:yn,dataSource:gn,pagination:!1,loading:Ge})})]}),(0,ee.jsx)(x.Z,{span:8,className:"order_info",children:"delivery"===(null===Oe||void 0===Oe?void 0:Oe.delivery_type)&&(0,ee.jsxs)(ee.Fragment,{children:["dine_in"!==(null===Oe||void 0===Oe?void 0:Oe.delivery_type)&&1===(null===Oe||void 0===Oe?void 0:Oe.type)&&(0,ee.jsxs)(c.Z,{title:Te("deliveryman"),extra:"ready"===(null===Oe||void 0===Oe?void 0:Oe.status)&&"pickup"!==(null===Oe||void 0===Oe?void 0:Oe.delivery_type)&&(0,ee.jsxs)(u.Z,{onClick:function(){return dn(Oe)},children:[Te("change"),(0,ee.jsx)(b.Z,{})]}),children:["new"===(null===Oe||void 0===Oe?void 0:Oe.status)||"accepted"===(null===Oe||void 0===Oe?void 0:Oe.status)?(0,ee.jsx)("p",{children:Te("order_status_ready")}):"","new"===(null===Oe||void 0===Oe?void 0:Oe.status)||"accepted"===(null===Oe||void 0===Oe?void 0:Oe.status)||null!==Oe&&void 0!==Oe&&Oe.deliveryman?"":(0,ee.jsx)("p",{children:Te("The supplier is not assigned or delivery type pickup")}),(null===Oe||void 0===Oe?void 0:Oe.deliveryman)&&(0,ee.jsxs)(o.Z,{children:[(0,ee.jsx)(f.C,{shape:"square",size:64,src:O.bV+(null===Oe||void 0===Oe||null===(pe=Oe.deliveryman)||void 0===pe?void 0:pe.img)}),(0,ee.jsxs)("div",{children:[(0,ee.jsx)("h5",{children:(null===Oe||void 0===Oe||null===(je=Oe.deliveryman)||void 0===je?void 0:je.firstname)+" "+(null===Oe||void 0===Oe||null===(fe=Oe.deliveryman)||void 0===fe?void 0:fe.lastname)}),(0,ee.jsxs)("span",{className:"delivery-info",children:[(0,ee.jsx)(H.lfG,{}),null===Oe||void 0===Oe||null===(Ze=Oe.deliveryman)||void 0===Ze?void 0:Ze.phone]}),(0,ee.jsxs)("div",{className:"delivery-info",children:[(0,ee.jsx)("b",{children:(0,ee.jsx)(L.ixJ,{size:16})}),(0,ee.jsx)("span",{children:Re?(0,R.Z)(null===Oe||void 0===Oe||null===(ye=Oe.deliveryman)||void 0===ye?void 0:ye.email):null===Oe||void 0===Oe||null===(ge=Oe.deliveryman)||void 0===ge?void 0:ge.email})]})]})]})]}),2===(null===Oe||void 0===Oe?void 0:Oe.type)&&"delivery"===(null===Oe||void 0===Oe?void 0:Oe.delivery_type)&&(0,ee.jsx)(c.Z,{title:Te("tracking.info"),children:(0,ee.jsx)($.t,{onSubmit:Nn,isSubmitting:xn,initialData:{track_name:null===Oe||void 0===Oe?void 0:Oe.track_name,track_id:null===Oe||void 0===Oe?void 0:Oe.track_id,track_url:null===Oe||void 0===Oe?void 0:Oe.track_url}})}),!(null===Oe||void 0===Oe||!Oe.username)&&(0,ee.jsxs)(c.Z,{title:Te("order.receiver"),children:[(0,ee.jsxs)("div",{className:"customer-info",children:[(0,ee.jsx)("span",{className:"title",children:Te("name")}),(0,ee.jsxs)("span",{className:"description",children:[(0,ee.jsx)(H.HHm,{}),null===Oe||void 0===Oe?void 0:Oe.username]})]}),(0,ee.jsxs)("div",{className:"customer-info",children:[(0,ee.jsx)("span",{className:"title",children:Te("phone")}),(0,ee.jsxs)("span",{className:"description",children:[(0,ee.jsx)(H.lfG,{}),null===Oe||void 0===Oe?void 0:Oe.phone]})]})]}),!(null===Oe||void 0===Oe||!Oe.user)&&(0,ee.jsx)(c.Z,{children:(0,ee.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[Ge?(0,ee.jsx)(h.Z.Avatar,{size:64,shape:"square"}):(0,ee.jsx)(f.C,{shape:"square",size:64,src:null===Oe||void 0===Oe||null===(be=Oe.user)||void 0===be?void 0:be.img}),(0,ee.jsx)("h5",{className:"customer-name",children:Ge?(0,ee.jsx)(h.Z.Button,{size:20,style:{width:70}}):(null===Oe||void 0===Oe||null===(_e=Oe.user)||void 0===_e?void 0:_e.firstname)+" "+((null===Oe||void 0===Oe||null===(ke=Oe.user)||void 0===ke?void 0:ke.lastname)||"")}),(0,ee.jsxs)("div",{className:"customer-info-detail",children:[(0,ee.jsxs)("div",{className:"customer-info",children:[(0,ee.jsx)("span",{className:"title",children:Te("phone")}),(0,ee.jsxs)("span",{className:"description",children:[(0,ee.jsx)(H.lfG,{}),Ge?(0,ee.jsx)(h.Z.Button,{size:16}):null!==Oe&&void 0!==Oe&&null!==(Ne=Oe.user)&&void 0!==Ne&&Ne.phone?(0,Q.Z)(null===Oe||void 0===Oe||null===(we=Oe.user)||void 0===we?void 0:we.phone):"none"]})]}),(0,ee.jsxs)("div",{className:"customer-info",children:[(0,ee.jsx)("span",{className:"title",children:Te("email")}),(0,ee.jsxs)("span",{className:"description",children:[(0,ee.jsx)(L.ixJ,{}),Ge?(0,ee.jsx)(h.Z.Button,{size:16}):(0,R.Z)(null===Oe||void 0===Oe||null===(Ie=Oe.user)||void 0===Ie?void 0:Ie.email)]})]}),(0,ee.jsxs)("div",{className:"customer-info",children:[(0,ee.jsx)("span",{className:"title",children:Te("registration.date")}),(0,ee.jsxs)("span",{className:"description",children:[(0,ee.jsx)(H.yoA,{}),Ge?(0,ee.jsx)(h.Z.Button,{size:16}):E()(null===Oe||void 0===Oe||null===(Ce=Oe.user)||void 0===Ce?void 0:Ce.created_at).format("DD-MM-YYYY, hh:mm")]})]}),(0,ee.jsxs)("div",{className:"customer-info",children:[(0,ee.jsx)("span",{className:"title",children:Te("orders.count")}),(0,ee.jsx)("span",{className:"description",children:Ge?(0,ee.jsx)(h.Z.Button,{size:16}):(0,ee.jsx)(Z.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===Oe||void 0===Oe||null===(Se=Oe.user)||void 0===Se?void 0:Se.orders_count)||0})})]}),(0,ee.jsxs)("div",{className:"customer-info",children:[(0,ee.jsx)("span",{className:"title",children:Te("spent.since.registration")}),(0,ee.jsx)("span",{className:"description",children:Ge?(0,ee.jsx)(h.Z.Button,{size:16}):(0,ee.jsx)(Z.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,q.Z)(null===Oe||void 0===Oe||null===(Ye=Oe.user)||void 0===Ye?void 0:Ye.orders_sum_price,null===Be||void 0===Be?void 0:Be.symbol)})})]})]})]})}),(null===Oe||void 0===Oe?void 0:Oe.review)&&!Ge&&(0,ee.jsx)(c.Z,{title:Te("messages"),children:(0,ee.jsxs)("div",{className:"order-message",children:[(0,ee.jsx)("span",{className:"message",children:null===Oe||void 0===Oe||null===(ze=Oe.review)||void 0===ze?void 0:ze.comment}),(0,ee.jsx)(o.Z,{className:"w-100 justify-content-end",children:(0,ee.jsx)("span",{className:"date",children:E()(null===Oe||void 0===Oe||null===(Fe=Oe.review)||void 0===Fe?void 0:Fe.created_at).format("YYYY-MM-DD HH:mm")})})]})})]})}),(0,ee.jsx)(x.Z,{span:24,children:(0,ee.jsxs)(c.Z,{className:"w-100 order-table",title:Te("order.products"),children:[(0,ee.jsx)(y.Z,{}),(0,ee.jsx)(a.Z,{ref:Pe,scroll:{x:!0},columns:Zn,dataSource:(null===(De=Me.data)||void 0===De?void 0:De.details)||[],loading:Ge,rowKey:function(e){return e.id},pagination:!1,expandable:{expandedRowRender:function(e){if(null!==e&&void 0!==e&&e.replace_stock){var n=[{title:Te("id"),dataIndex:"id",key:"id",render:function(e,n){var i;return null===n||void 0===n||null===(i=n.replace_stock)||void 0===i?void 0:i.id}},{title:Te("product.name"),dataIndex:"product",key:"product",render:function(e,n){var i,l,d,t,r;return(0,ee.jsxs)(o.Z,{direction:"vertical",className:"relative",children:[null===n||void 0===n||null===(i=n.replace_stock)||void 0===i||null===(l=i.product)||void 0===l||null===(d=l.translation)||void 0===d?void 0:d.title,null===n||void 0===n||null===(t=n.replace_stock)||void 0===t||null===(r=t.extras)||void 0===r?void 0:r.map((function(e){var n,i,l;return(0,ee.jsxs)(s.Z,{children:[null===(n=e.group)||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title,": ",null===(l=e.value)||void 0===l?void 0:l.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Te("image"),dataIndex:"img",key:"img",render:function(e,n){var i,l;return(0,ee.jsx)(r.Z,{src:(0,I.Z)(null===n||void 0===n||null===(i=n.replace_stock)||void 0===i||null===(l=i.product)||void 0===l?void 0:l.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Te("price"),dataIndex:"price",key:"price",render:function(e,n){var i;return(0,q.Z)(null===n||void 0===n||null===(i=n.replace_stock)||void 0===i?void 0:i.price,null===Be||void 0===Be?void 0:Be.symbol)}},{title:Te("quantity"),dataIndex:"replace_quantity",key:"replace_quantity",render:function(e,n){var i,l;return(0,ee.jsx)("span",{children:e*((null===n||void 0===n||null===(i=n.replace_stock)||void 0===i||null===(l=i.product)||void 0===l?void 0:l.interval)||1)})}},{title:Te("discount"),dataIndex:"discount",key:"discount",render:function(e,n){var i,l;return(0,q.Z)(null!==(i=null===n||void 0===n||null===(l=n.replace_stock)||void 0===l?void 0:l.discount)&&void 0!==i?i:0,null===Be||void 0===Be?void 0:Be.symbol)}},{title:Te("tax"),dataIndex:"tax",key:"tax",render:function(e,n){var i;return(0,q.Z)(null===n||void 0===n||null===(i=n.replace_stock)||void 0===i?void 0:i.tax,null===Be||void 0===Be?void 0:Be.symbol)}},{title:Te("total.price"),dataIndex:"total_price",key:"total_price",render:function(e,n){var i;return(0,q.Z)(null===n||void 0===n||null===(i=n.replace_stock)||void 0===i?void 0:i.total_price,null===Be||void 0===Be?void 0:Be.symbol)}},{title:Te("note"),dataIndex:"note",key:"note",render:function(e){return e||"--"}}];return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,ee.jsx)(g.Z,{style:{padding:"10px",margin:"10px 0 50px 0",border:"2px solid #cad2de",borderRadius:"30%"},rotate:90})}),(0,ee.jsx)(a.Z,{columns:n,dataSource:[e],pagination:!1})]})}},expandIcon:function(e){e.expanded;var n=e.onExpand,i=e.record;return(0,ee.jsx)(g.Z,{onClick:function(e){return n(i,e)},rotate:90})},defaultExpandedRowKeys:["0"]}}),(0,ee.jsxs)(o.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("span",{children:[Te("delivery.fee"),":"]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("span",{children:[Te("order.tax"),":"]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("span",{children:[Te("product"),":"]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("span",{children:[Te("service.fee"),":"]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("span",{children:[Te("discount"),":"]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("span",{children:[Te("coupon.price"),":"]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("span",{children:[Te("tax"),":"]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("h3",{children:[Te("total.price"),":"]})]}),(0,ee.jsxs)("div",{children:[(0,ee.jsx)("span",{children:(0,q.Z)(null!==(qe=null===Oe||void 0===Oe?void 0:Oe.delivery_fee)&&void 0!==qe?qe:0,null===Be||void 0===Be?void 0:Be.symbol)}),(0,ee.jsx)("br",{}),(0,ee.jsx)("span",{children:(0,q.Z)(null===Oe||void 0===Oe?void 0:Oe.total_tax,null===Be||void 0===Be?void 0:Be.symbol)}),(0,ee.jsx)("br",{}),(0,ee.jsx)("span",{children:(0,q.Z)(null===Oe||void 0===Oe?void 0:Oe.origin_price,null===Be||void 0===Be?void 0:Be.symbol)}),(0,ee.jsx)("br",{}),(0,ee.jsx)("span",{children:(0,q.Z)(null===Oe||void 0===Oe?void 0:Oe.service_fee,null===Be||void 0===Be?void 0:Be.symbol)}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("span",{children:["-"," ",(0,q.Z)(null===Oe||void 0===Oe?void 0:Oe.total_discount,null===Be||void 0===Be?void 0:Be.symbol)]}),(0,ee.jsx)("br",{}),(0,ee.jsxs)("span",{children:["- ",(0,q.Z)(null===Oe||void 0===Oe?void 0:Oe.coupon_price,null===Be||void 0===Be?void 0:Be.symbol)]}),(0,ee.jsx)("br",{}),(0,ee.jsx)("span",{children:(0,q.Z)(null===Oe||void 0===Oe?void 0:Oe.tax,null===Be||void 0===Be?void 0:Be.symbol)}),(0,ee.jsx)("br",{}),(0,ee.jsx)("h3",{ref:Ee,children:(0,q.Z)(null===Oe||void 0===Oe?void 0:Oe.total_price,null===Be||void 0===Be?void 0:Be.symbol)})]})]})]})})]}),We&&(0,ee.jsx)(Y.Z,{orderId:We,handleCancel:bn,refetchPage:_n}),ln&&(0,ee.jsx)(z.Z,{orderDetails:ln,handleCancel:bn}),sn&&(0,ee.jsx)(B.Z,{id:sn,handleCancel:bn}),jn&&(0,ee.jsx)(ie,{orderId:Ue,handleCancel:function(){return fn(!1)},transactionDetails:null===Oe||void 0===Oe?void 0:Oe.transaction,fetchOrder:_n})]})}},88852:function(e,n,i){i.d(n,{Z:function(){return f}});var l=i(29439),d=i(47313),t=i(10976),o=i(9274),s=i(59491),r=i(68197),a=i(59624),u=i(2717),c=i(62412),v=i(90954),x=i(24511),m=i(94291),h=i(89281),p=i(58328),j=i(46417);function f(e){var n,i=e.orderDetails,f=e.handleCancel,Z=(0,x.$)().t,y=(0,u.v9)((function(e){return e.menu}),u.wU).activeMenu,g=((0,u.v9)((function(e){return e.deliveryman}),u.wU).deliverymans,t.Z.useForm()),b=(0,l.Z)(g,1)[0],_=(0,u.I0)(),k=(0,d.useState)(!1),N=(0,l.Z)(k,2),w=N[0],I=N[1];(0,d.useEffect)((function(){_((0,m.EH)())}),[]);return(0,j.jsx)(o.Z,{visible:!!i,title:i.title,onCancel:f,footer:[(0,j.jsx)(s.Z,{type:"primary",onClick:function(){return b.submit()},loading:w,children:Z("save")}),(0,j.jsx)(s.Z,{type:"default",onClick:f,children:Z("cancel")})],children:(0,j.jsx)(t.Z,{form:b,layout:"vertical",onFinish:function(e){var n={deliveryman:e.deliveryman.value};I(!0),c.Z.updateDelivery(i.id,n).then((function(){f(),_((0,v.xo)(y))})).finally((function(){return I(!1)}))},initialValues:{deliveryman:null===(n=i.deliveryman)||void 0===n?void 0:n.id},children:(0,j.jsx)(r.Z,{gutter:12,children:(0,j.jsx)(a.Z,{span:24,children:(0,j.jsx)(t.Z.Item,{label:Z("deliveryman"),name:"deliveryman",rules:[{required:!0,message:Z("required")}],children:(0,j.jsx)(h.h,{fetchOptions:function(e){var n={perPage:10,page:1,search:e};return p.Z.getDeliverymans(n).then((function(e){return e.data.map((function(e){return{label:e.firstname,value:e.id}}))}))}})})})})})})}},27107:function(e,n,i){i.d(n,{Z:function(){return C}});var l=i(4942),d=i(93433),t=i(1413),o=i(29439),s=i(47313),r=i(35432),a=i(10976),u=i(9274),c=i(59491),v=i(68197),x=i(59624),m=i(66672),h=i(46155),p=i(74294),j=i(2717),f=i(24511),Z=i(62412),y=i(51282),g=i(73431),b=i(20052),_=i(12019),k=i(70816),N=i.n(k),w=i(46417),I=r.Z.Panel;function C(e){var n,i=e.orderId,k=e.handleCancel,C=e.refetchPage,S=(0,j.v9)((function(e){return e.orderStatus}),j.wU).statusList,Y=(0,j.v9)((function(e){return e.formLang}),j.wU),z=Y.defaultLang,F=Y.languages,D=a.Z.useForm(),q=(0,o.Z)(D,1)[0],M=(0,f.$)().t,B=(0,s.useRef)(null),H=(0,s.useState)(!1),L=(0,o.Z)(H,2),O=L[0],T=L[1],U=(0,s.useState)(!1),A=(0,o.Z)(U,2),E=A[0],P=A[1],R=(0,s.useState)(null!==S&&void 0!==S&&S.length?S.map((function(e){return{value:null===e||void 0===e?void 0:e.name,label:M(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}})):[]),V=(0,o.Z)(R,2),$=V[0],G=V[1],Q=(0,s.useState)(null),K=(0,o.Z)(Q,2),J=K[0],W=K[1],X=(0,s.useState)(null),ee=(0,o.Z)(X,2),ne=ee[0],ie=ee[1],le=(0,s.useState)(null),de=(0,o.Z)(le,2),te=de[0],oe=de[1],se=(0,s.useState)(null),re=(0,o.Z)(se,2),ae=re[0],ue=re[1];(0,s.useEffect)((function(){T(!0),Z.Z.getById(i).then((function(e){var n,i,l,d;W(e.data),ie(null===(n=e.data)||void 0===n||null===(i=n.notes)||void 0===i?void 0:i.filter((function(e){var n;return!(null===e||void 0===e||null===(n=e.notes)||void 0===n||!n.length)}))),ue(null===(l=e.data)||void 0===l?void 0:l.status),q.setFieldsValue({status:null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.status})})).finally((function(){return T(!1)}))}),[i]),(0,s.useEffect)((function(){var e,n;if("pause"!==(null===J||void 0===J?void 0:J.status)){var i,l=S.findIndex((function(e){return e.name===(null===J||void 0===J?void 0:J.status)})),d=l>=0?[S[l],l<S.length-1?"pause"===(null===(e=S[l+1])||void 0===e?void 0:e.name)?S[l+2]:S[l+1]:null]:[l<S.length-1?S[l+1]:null];if("on_a_way"===(null===(n=S[l])||void 0===n?void 0:n.name)&&d.push(S[l+3]),null!==S&&void 0!==S&&S.filter((function(e){return"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active)})))null===d||void 0===d||d.push(null===S||void 0===S||null===(i=S.filter((function(e){return"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active)})))||void 0===i?void 0:i[0]);d.push({name:"canceled",id:8,active:!0,sort:(null===S||void 0===S?void 0:S.length)+1}),G(d.filter(Boolean).map((function(e){return{value:null===e||void 0===e?void 0:e.name,label:M(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}})))}else G(null===S||void 0===S?void 0:S.map((function(e){return{value:null===e||void 0===e?void 0:e.name,label:M(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}})))}),[J]);var ce=function(e){var n=Object.entries(e).filter((function(e){var n=(0,o.Z)(e,2);n[0];return!!n[1]}));if(0!==(null===n||void 0===n?void 0:n.length))return Object.fromEntries(n)};return(0,s.useEffect)((function(){var e;q.setFieldsValue((0,l.Z)({},"title[".concat(z||"en","]"),null===te||void 0===te||null===(e=te.title)||void 0===e?void 0:e[z||"en"]))}),[z]),(0,w.jsx)(u.Z,{visible:!!i,title:[M("order.status")],onCancel:k,footer:[(0,w.jsx)(c.Z,{type:"primary",onClick:function(){return q.submit()},loading:E,children:M("save")},"save-form"),(0,w.jsx)(c.Z,{type:"default",onClick:k,children:M("cancel")},"cansel-modal")],children:O?(0,w.jsx)(y.Z,{}):(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(a.Z,{form:q,layout:"vertical",onFinish:function(e){var n,i=null;P(!0),te&&(null===e||void 0===e?void 0:e.status)===(null===J||void 0===J?void 0:J.status)&&(i=(0,t.Z)({},Object.assign.apply(Object,[{}].concat((0,d.Z)(F.map((function(n){return(0,l.Z)({},n.locale,e["title[".concat(n.locale,"]")])})))))),i=ce(i));var o=ce((0,t.Z)({},Object.assign.apply(Object,[{}].concat((0,d.Z)(F.map((function(n){return(0,l.Z)({},n.locale,e["note[".concat(n.locale,"]")])}))))))),s=o?{title:o}:null,r=(null===J||void 0===J?void 0:J.status)===(null===e||void 0===e?void 0:e.status)?null===J||void 0===J||null===(n=J.notes)||void 0===n?void 0:n.filter((function(n){return(null===n||void 0===n?void 0:n.status)===(null===e||void 0===e?void 0:e.status)})).flatMap((function(e){var n;return null===e||void 0===e||null===(n=e.notes)||void 0===n?void 0:n.map((function(e,n){return n===(null===te||void 0===te?void 0:te.index)?(0,t.Z)((0,t.Z)({},e),{},{title:(0,t.Z)((0,t.Z)({},null===e||void 0===e?void 0:e.title),i)}):e}))})).filter(Boolean):[],a={status:null===e||void 0===e?void 0:e.status,notes:[].concat((0,d.Z)(r),[s]).filter(Boolean)};Z.Z.updateStatus(J.id,a).then((function(){k(),C()})).finally((function(){return P(!1)}))},name:"order-status-change-form",children:[(0,w.jsx)(v.Z,{gutter:12,style:{marginBottom:"20px"},children:(0,w.jsx)(x.Z,{span:24,children:(0,w.jsx)(g.Z,{})})}),!(null===J||void 0===J||null===(n=J.notes)||void 0===n||!n.some((function(e){var n;return!(null===e||void 0===e||null===(n=e.notes)||void 0===n||!n.length)})))&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(r.Z,{children:null===ne||void 0===ne?void 0:ne.map((function(e){var n;return(0,w.jsx)(I,{header:M(null===e||void 0===e?void 0:e.status),children:(null===e||void 0===e||null===(n=e.notes)||void 0===n?void 0:n.map((function(n,i){var d,t,o;return(0,w.jsxs)(v.Z,{style:{marginBottom:"15px",display:"flex",justifyContent:"space-between"},gutter:12,children:[(0,w.jsxs)(x.Z,{span:(null===e||void 0===e?void 0:e.status)===(null===J||void 0===J?void 0:J.status)&&ae===(null===J||void 0===J?void 0:J.status)?22:24,children:[(0,w.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,w.jsxs)("span",{style:{marginTop:"3px"},children:[i+1,"."," "]}),(0,w.jsxs)("div",{style:{width:"100%"},children:[(0,w.jsx)("p",{style:{margin:0,fontSize:"15px",wordBreak:"break-all"},hidden:(null===te||void 0===te?void 0:te.orderId)===(null===e||void 0===e?void 0:e.id)&&(null===te||void 0===te?void 0:te.index)===i&&(null===J||void 0===J?void 0:J.status)===ae,children:(null===n||void 0===n||null===(d=n.title)||void 0===d?void 0:d[z||"en"])||"--"}),(0,w.jsx)(a.Z.Item,{name:"title[".concat(z||"en","]"),hidden:(null===te||void 0===te?void 0:te.orderId)!==(null===e||void 0===e?void 0:e.id)||(null===te||void 0===te?void 0:te.index)!==i||(null===J||void 0===J?void 0:J.status)!==ae,children:(0,w.jsx)(m.Z.TextArea,{maxLength:200,style:{width:"100%"},rows:Math.floor((null===n||void 0===n||null===(t=n.title)||void 0===t||null===(o=t[z||"en"])||void 0===o?void 0:o.length)/41||0)+1,ref:B},i)})]})]}),(0,w.jsx)("p",{style:{fontSize:"12px",margin:0,float:"right"},children:N()(null===n||void 0===n?void 0:n.created_at).format("DD-MM-YYYY HH:mm")})]}),(null===e||void 0===e?void 0:e.status)===(null===J||void 0===J?void 0:J.status)&&(null===J||void 0===J?void 0:J.status)===ae&&(0,w.jsx)(x.Z,{span:2,children:(null===te||void 0===te?void 0:te.orderId)===(null===e||void 0===e?void 0:e.id)&&i===(null===te||void 0===te?void 0:te.index)?(0,w.jsx)(c.Z,{type:"primary",icon:(0,w.jsx)(b.Z,{}),size:"small",onClick:function(){return q.submit()},loading:E}):(null===e||void 0===e?void 0:e.status)===(null===J||void 0===J?void 0:J.status)&&(0,w.jsx)(c.Z,{icon:(0,w.jsx)(_.Z,{}),size:"small",onClick:function(){var d;B.current.focus(),oe({orderId:null===e||void 0===e?void 0:e.id,index:i,title:null===n||void 0===n?void 0:n.title}),q.setFieldsValue((0,l.Z)({},"title[".concat(z||"en","]"),null===n||void 0===n||null===(d=n.title)||void 0===d?void 0:d[z||"en"]))}})})]},i)})))||"--"},null===e||void 0===e?void 0:e.id)}))}),(0,w.jsx)(h.Z,{})]}),(0,w.jsxs)(v.Z,{gutter:12,children:[(0,w.jsx)(x.Z,{span:24,children:(0,w.jsx)(a.Z.Item,{label:M("status"),name:"status",rules:[{required:!0,message:M("required")}],children:(0,w.jsx)(p.Z,{options:$,onSelect:function(e){return ue(e)}})})}),(0,w.jsx)(x.Z,{span:24,children:F.map((function(e){return(0,w.jsx)(a.Z.Item,{name:"note[".concat(null===e||void 0===e?void 0:e.locale,"]"),label:M("note"),hidden:(null===e||void 0===e?void 0:e.locale)!==z,children:(0,w.jsx)(m.Z.TextArea,{maxLength:200})},"note_".concat(null===e||void 0===e?void 0:e.id))}))})]})]})})})}},72944:function(e,n,i){var l=i(29439),d=i(84697),t=i(83999),o=i(9274),s=i(59491),r=i(77181),a=i(68197),u=i(59624),c=i(66204),v=i(47313),x=i(24511),m=i(62412),h=i(51282),p=i(58821),j=i(2717),f=i(97421),Z=i(18478),y=i(17649),g=i(66461),b=i(22539),_=i(3394),k=i(57864),N=i(70816),w=i.n(N),I=i(46417),C=t.Z.Step,S=function(){return(0,I.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,I.jsx)("img",{src:Z,width:"50",alt:"Pin"})})};n.Z=function(e){var n,i,Z,N=e.id,Y=e.handleCancel,z=(0,x.$)().t,F=(0,v.useState)(null),D=(0,l.Z)(F,2),q=D[0],M=D[1],B=(0,v.useState)(null),H=(0,l.Z)(B,2),L=H[0],O=H[1],T=(0,v.useState)(null),U=(0,l.Z)(T,2),A=U[0],E=U[1],P=(0,j.v9)((function(e){return e.globalSettings}),j.wU).settings,R=(0,y.Z)(P),V=(0,v.useState)(0),$=(0,l.Z)(V,2),G=$[0],Q=$[1],K=(0,v.useState)({lat:null===R||void 0===R?void 0:R.lat,lng:null===R||void 0===R?void 0:R.lng}),J=(0,l.Z)(K,2),W=J[0],X=J[1],ee=(0,v.useState)([{id:0,name:"new",icon:(0,I.jsx)(g.Z,{})},{id:1,name:"accepted",icon:(0,I.jsx)(p.IQF,{})},{id:2,name:"ready",icon:(0,I.jsx)(b.TkG,{})},{id:3,name:"on_a_way",icon:(0,I.jsx)(_.Akc,{})},{id:4,name:"delivered",icon:(0,I.jsx)(_.kme,{})}]),ne=(0,l.Z)(ee,2),ie=ne[0],le=ne[1];var de=(0,j.v9)((function(e){return e.globalSettings.settings}),j.wU).google_map_key;return(0,v.useEffect)((function(){M(!0),m.Z.getById(N).then((function(e){var n,i,l,d,t,o,s,r=e.data;le("canceled"===r.status?[{id:1,name:"new",icon:(0,I.jsx)(g.Z,{})},{id:5,name:"canceled",icon:(0,I.jsx)(k.SV5,{})}]:ie),Q("canceled"===r.status?1:null===(n=ie.find((function(e){return e.name===r.status})))||void 0===n?void 0:n.id);var a=null!==(i=null!==(l=null!==(d=null===r||void 0===r||null===(t=r.address)||void 0===t?void 0:t.location)&&void 0!==d?d:null===r||void 0===r||null===(o=r.my_address)||void 0===o?void 0:o.location)&&void 0!==l?l:null===r||void 0===r||null===(s=r.delivery_point)||void 0===s?void 0:s.location)&&void 0!==i?i:{latitude:null===R||void 0===R?void 0:R.lat,longitude:null===R||void 0===R?void 0:R.lng};X({lat:Number(null===a||void 0===a?void 0:a.latitude),lng:Number(null===a||void 0===a?void 0:a.longitude)}),E("canceled"===r.status?"error":"success"),O(r)})).finally((function(){M(!1)}))}),[]),(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(o.Z,{visible:!!N,title:z("show.locations"),closable:!0,onCancel:Y,style:{minWidth:"80vw"},footer:[(0,I.jsx)(s.Z,{type:"default",onClick:Y,children:z("cancel")},"cancelBtn")],children:q?(0,I.jsx)(h.Z,{}):(0,I.jsxs)(r.Z,{children:[(0,I.jsx)(t.Z,{current:G,status:A,className:"mb-5",children:null===ie||void 0===ie?void 0:ie.map((function(e,n){return(0,I.jsx)(C,{title:z(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+n)}))}),(0,I.jsxs)(a.Z,{gutter:12,children:[(0,I.jsxs)(u.Z,{span:12,children:[(0,I.jsxs)("h3",{children:[z("order.id")," #",null===L||void 0===L?void 0:L.id]}),(0,I.jsxs)("p",{children:[(0,I.jsx)(p.D73,{})," ",w()(null===L||void 0===L?void 0:L.created_at).format("YYYY-MM-DD HH:mm")]}),(0,I.jsxs)("p",{children:[z("scheduled.at")," ",null===L||void 0===L?void 0:L.delivery_date]})]}),(0,I.jsxs)(u.Z,{span:12,children:[(0,I.jsxs)("p",{children:[z("status")," ","new"===(null===L||void 0===L?void 0:L.status)?(0,I.jsx)(c.Z,{color:"blue",children:z(null===L||void 0===L?void 0:L.status)}):"canceled"===(null===L||void 0===L?void 0:L.status)?(0,I.jsx)(c.Z,{color:"error",children:z(null===L||void 0===L?void 0:L.status)}):(0,I.jsx)(c.Z,{color:"cyan",children:z(null===L||void 0===L?void 0:L.status)})]}),(0,I.jsxs)("p",{children:[z("payment.method")," ",(0,I.jsx)("strong",{children:null===L||void 0===L||null===(n=L.transaction)||void 0===n||null===(i=n.payment_system)||void 0===i?void 0:i.tag})]}),(0,I.jsxs)("p",{children:[z("order.type")," ",(0,I.jsx)("strong",{children:null===L||void 0===L?void 0:L.delivery_type})]}),(0,I.jsxs)("p",{children:[z("payment.type")," ",(0,I.jsx)("strong",{children:null===L||void 0===L||null===(Z=L.transaction)||void 0===Z?void 0:Z.status})]})]}),(0,I.jsxs)(u.Z,{span:24,className:"mt-5",children:[(0,I.jsx)("h4",{children:z("map")}),(0,I.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,I.jsx)(d.ZP,{bootstrapURLKeys:{key:de?f.kr:de},defaultZoom:10,center:null!==W&&void 0!==W?W:R,options:{fullscreenControl:!1},children:(0,I.jsx)(S,{lat:null===W||void 0===W?void 0:W.lat,lng:null===W||void 0===W?void 0:W.lng})})})]})]})]})})})}},18478:function(e,n,i){e.exports=i.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);