"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1499],{61499:function(t,e,n){n.r(e);var i=n(1413),a=n(93433),u=n(29439),l=n(47313),r=n(97890),c=n(23560),o=n(83999),s=n(10976),d=n(77181),v=n(2717),f=n(90954),m=n(24511),p=n(73431),Z=n(10596),g=n(12545),h=n(97421),_=n(46417),S=o.Z.Step;e.default=function(){var t,e,n,k,x,j,y,w,b,F=(0,m.$)().t,V=(0,v.v9)((function(t){return t.menu}),v.wU).activeMenu,q=(0,v.I0)(),z=s.Z.useForm(),C=(0,u.Z)(z,1)[0],I=(0,r.s0)(),M=function(t){return{name:t,url:h.bV+t}},U=(0,l.useState)(null!==(t=V.data)&&void 0!==t&&null!==(e=t.galleries)&&void 0!==e&&e[0]?[M(null===(n=V.data)||void 0===n||null===(k=n.galleries)||void 0===k?void 0:k[0].path)]:[]),A=(0,u.Z)(U,2),B=A[0],E=A[1],N=(0,l.useState)(null!==(x=V.data)&&void 0!==x&&null!==(j=x.galleries)&&void 0!==j&&j[1]?[M(null===(y=V.data)||void 0===y||null===(w=y.galleries)||void 0===w?void 0:w[1].path)]:[]),$=(0,u.Z)(N,2),D=$[0],G=$[1],H=[].concat((0,a.Z)(B),(0,a.Z)(D)),J=(0,l.useState)((null===(b=V.data)||void 0===b?void 0:b.step)||0),K=(0,u.Z)(J,2),L=K[0],O=K[1],P=function(){O(L+1)},Q=function(){O(L-1)},R=(0,l.useState)(!1),T=(0,u.Z)(R,2),W=T[0],X=T[1];(0,l.useEffect)((function(){return function(){var t=C.getFieldsValue(!0);q((0,f.nc)({activeMenu:V,data:t}))}}),[]);return(0,_.jsx)(d.Z,{title:F("add.recepe"),extra:(0,_.jsx)(p.Z,{}),children:(0,_.jsxs)(s.Z,{layout:"vertical",onFinish:function(t){var e;C.validateFields();var n=(0,i.Z)((0,i.Z)({},t),{},{images:H.map((function(t){return t.name})),category_id:t.category_id.value,shop_id:t.shop_id.value,active_time:t.active_time.toString(),total_time:t.total_time.toString(),nutrition:t.nutrition.map((function(t){return(0,i.Z)((0,i.Z)({},t),{},{percentage:String(t.percentage),weight:String(t.weight)})})),stocks:null===(e=t.stocks)||void 0===e?void 0:e.map((function(t){return{min_quantity:t.min_quantity,stock_id:t.stock_id.value}}))});X(!0);var a="catalog/recept";g.Z.create(n).then((function(){c.Am.success(F("successfully.created")),I("/".concat(a)),q((0,f.ph)((0,i.Z)((0,i.Z)({},V),{},{nextUrl:a})))})).finally((function(){return X(!1)}))},form:C,initialValues:(0,i.Z)({active:!0},V.data),children:[(0,_.jsx)(o.Z,{current:L,children:Z.S.map((function(t){return(0,_.jsx)(S,{title:F(t.title)},t.title)}))}),Z.S.map((function(t){var e=t.content;return(0,_.jsx)("div",{className:"steps-content ".concat(t.step!==L+1&&"hidden"),children:(0,_.jsx)(e,{next:P,prev:Q,loading:W,image:B,setImage:E,back:D,setBack:G})},t.title)}))]})})}}}]);