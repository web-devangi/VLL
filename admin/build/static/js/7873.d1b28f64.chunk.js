(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7873],{55940:(e,l,t)=>{"use strict";t.d(l,{Z:()=>r});t(47313);var n=t(59491),a=t(47515),s=t(23560),i=t(24511),d=t(79492),o=t(46417);function r(e){let{size:l="",onClick:t,type:r="default",...c}=e;const{t:u}=(0,i.$)(),{isDemo:v}=(0,d.Z)();return(0,o.jsx)(n.Z,{size:l,icon:(0,o.jsx)(a.Z,{}),onClick:e=>{v?s.Am.warning(u("cannot.work.demo")):t(e)},type:r,...c})}},53233:(e,l,t)=>{"use strict";t.d(l,{Z:()=>p});var n=t(47313),a=t(56140),s=t(67251),i=t(45705),d=t(86345),o=t(78267),r=t(37388),c=t(59491),u=t(99587),v=t(24511),h=t(46417);const{Text:m}=a.Z,p=e=>{let{columns:l=[],setColumns:t,style:a,size:p="",iconOnly:x}=e;const{t:j}=(0,v.$)(),[Z,f]=(0,n.useState)(!1),g=(0,h.jsx)(s.Z,{children:null===l||void 0===l?void 0:l.map(((e,n)=>(0,h.jsx)(s.Z.Item,{children:(0,h.jsxs)(i.Z,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(d.Z,{defaultChecked:!0,onClick:()=>function(e){const n=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,h.jsx)(o.Z,{overlay:g,trigger:["click"],onVisibleChange:e=>{f(e)},visible:Z,children:(0,h.jsx)(r.Z,{title:j("change.columns"),children:(0,h.jsx)(c.Z,{style:{...a},size:p,icon:(0,h.jsx)(u.Z,{}),children:x?null:j("Columns")})})})}},41481:(e,l,t)=>{"use strict";t.d(l,{Z:()=>o});var n=t(47313),a=t(66672),s=t(16031),i=t(40765),d=t(46417);function o(e){let{handleChange:l,defaultValue:t,resetSearch:o,...r}=e;const[c,u]=(0,n.useState)(t),v=(0,n.useMemo)((()=>(0,s.debounce)((e=>{l(e)}),800)),[]);return(0,n.useEffect)((()=>{u(t)}),[o]),(0,d.jsx)(a.Z,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(i.Z,{}),...r})}},89281:(e,l,t)=>{"use strict";t.d(l,{h:()=>r});var n=t(47313),a=t(12279),s=t.n(a),i=t(74294),d=t(72652),o=t(46417);const r=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:a,refetchOptions:r=!1,...c}=e;const[u,v]=(0,n.useState)(!1),[h,m]=(0,n.useState)([]),p=(0,n.useMemo)((()=>s()((e=>{m([]),v(!0),l(e).then((e=>{m(e),v(!1)}))}),t)),[l,t]);return(0,o.jsx)(i.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),a&&a()},notFoundContent:u?(0,o.jsx)(d.Z,{size:"small"}):"no results",...c,options:h,onFocus:()=>{h.length&&!r||p("")}})}},13945:(e,l,t)=>{"use strict";function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{Z:()=>n})},17649:(e,l,t)=>{"use strict";t.d(l,{Z:()=>n});t(97421);function n(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},84017:(e,l,t)=>{"use strict";function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const n=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(n," ").concat(l):"".concat(l," ").concat(n)}t.d(l,{Z:()=>n})},33834:(e,l,t)=>{"use strict";t.d(l,{K:()=>i});var n=t(97890),a=t(74776),s=t.n(a);const i=()=>{const e=(0,n.s0)(),l=(0,n.TH)(),t=s().parse(l.search,{ignoreQueryPrefix:!0});return{values:t,set:(l,n)=>e({search:s().stringify({...t,[l]:n})}),reset:l=>{const n={...t};n[l]&&delete n[l],e({search:s().stringify({...n})})},clear:()=>e({search:s().stringify({})}),merge:l=>e({search:s().stringify({...t,...l})})}}},94576:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>we});var n=t(47313),a=t(73591),s=t(99096),i=t(66204),d=t(59491),o=t(45705),r=t(77181),c=t(37388),u=t(78508),v=t(97890),h=t(12019),m=t(31741),p=t(47515),x=t(55768),j=t(15386),Z=t(2717),f=t(90954),g=t(24511),y=t(80314),b=t(22054),C=t(70250),w=t(13945),_=t(41481),k=t(73270),S=t(89281),I=t(49986),H=t(53233),M=t(23560),z=t(55940),V=t(90486),Y=t(74580),D=t(69658),P=t(70816),N=t.n(P),F=t(97421),O=t(5958),B=t(3925),E=t(33834),L=t(10976),U=t(9274),$=t(68197),A=t(59624),T=t(74294),R=t(46417);function q(e){let{orderDetails:l,handleCancel:t,status:a}=e;const{activeMenu:s}=(0,Z.v9)((e=>e.menu),Z.wU),[i]=L.Z.useForm(),o=(0,Z.I0)(),{t:r}=(0,g.$)(),[c,u]=(0,n.useState)(!1),[v,h]=(0,n.useState)(a);(0,n.useEffect)((()=>{const e=a.findIndex((e=>e.name===l.status));let t=[a[e],a[e+1],{name:"canceled",id:8,active:!0}];e<0&&(t=[a[e+1],"canceled"]),h(t)}),[l]);return(0,R.jsx)(U.Z,{visible:!!l,title:l.title,onCancel:t,footer:[(0,R.jsx)(d.Z,{type:"primary",onClick:()=>i.submit(),loading:c,children:r("save")},"save-form"),(0,R.jsx)(d.Z,{type:"default",onClick:t,children:r("cancel")},"cansel-modal")],children:(0,R.jsx)(L.Z,{form:i,layout:"vertical",onFinish:e=>{u(!0);const n={...e};V.Z.updateStatus(l.id,n).then((()=>{t(),o((0,f.xo)(s))})).finally((()=>u(!1)))},initialValues:{status:l.status},children:(0,R.jsx)($.Z,{gutter:12,children:(0,R.jsx)(A.Z,{span:24,children:(0,R.jsx)(L.Z.Item,{label:r("status"),name:"status",rules:[{required:!0,message:r("required")}],children:(0,R.jsx)(T.Z,{children:null===v||void 0===v?void 0:v.map((e=>(0,R.jsx)(T.Z.Option,{value:null===e||void 0===e?void 0:e.name,children:r(null===e||void 0===e?void 0:e.name)},null===e||void 0===e?void 0:e.name)))})})})})})})}var K=t(83999),Q=t(84697),G=t(51282),W=t(58821),X=t(18478),J=t(84618),ee=t(17649),le=t(66461),te=t(1413);const ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"};var ae=t(17469),se=function(e,l){return n.createElement(ae.Z,(0,te.Z)((0,te.Z)({},e),{},{ref:l,icon:ne}))};se.displayName="FileDoneOutlined";const ie=n.forwardRef(se);var de=t(3394),oe=t(57864);function re(e){return e?N()(e).format("DD-MM-YYYY, HH:mm"):""}const{Step:ce}=K.Z,ue=()=>(0,R.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,R.jsx)("img",{src:X,width:"50",alt:"Pin"})}),ve=()=>(0,R.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,R.jsx)("img",{src:J,width:"50",alt:"Pin"})}),he=["blue","red","gold","volcano","cyan","lime"],me=e=>{var l,t,a,s,o,c;let{id:u,handleCancel:v}=e;const{t:h}=(0,g.$)(),[m,p]=(0,n.useState)(null),[x,j]=(0,n.useState)(null),[f,y]=(0,n.useState)(null),{settings:b}=(0,Z.v9)((e=>e.globalSettings),Z.wU),C=(0,ee.Z)(b),[w,_]=(0,n.useState)(0),[k,S]=(0,n.useState)((0,ee.Z)(b)),[I,H]=(0,n.useState)((0,ee.Z)(b)),[M,z]=(0,n.useState)([{id:0,name:"new",icon:(0,R.jsx)(le.Z,{})},{id:1,name:"accepted",icon:(0,R.jsx)(ie,{})},{id:3,name:"ready",icon:(0,R.jsx)(W.IQF,{})},{id:4,name:"on_a_way",icon:(0,R.jsx)(W.qaI,{})},{id:5,name:"delivered",icon:(0,R.jsx)(de.kme,{})}]);const{google_map_key:Y}=(0,Z.v9)((e=>e.globalSettings.settings),Z.wU);(0,n.useEffect)((()=>{p(!0),V.Z.getById(u).then((e=>{var l;let{data:t}=e;z("canceled"===t.status?[{id:1,name:"new",icon:(0,R.jsx)(le.Z,{})},{id:5,name:"canceled",icon:(0,R.jsx)(oe.SV5,{})}]:M),_("canceled"===t.status?1:null===(l=M.find((e=>e.name===t.status)))||void 0===l?void 0:l.id),y("canceled"===t.status?"error":"success"),j(t),H({lat:t.address_from.latitude,lng:t.address_from.longitude}),S({lat:t.address_to.latitude,lng:t.address_to.longitude})})).finally((()=>{p(!1)}))}),[]);return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(U.Z,{visible:!!u,title:h("show.locations"),onCancel:()=>v(),style:{minWidth:"80vw"},footer:[(0,R.jsx)(d.Z,{type:"default",onClick:v,children:h("cancel")},"cancelBtn")],children:m?(0,R.jsx)(G.Z,{}):(0,R.jsxs)(r.Z,{children:[(0,R.jsx)(K.Z,{current:w,status:f,className:"mb-5",children:null===M||void 0===M?void 0:M.map(((e,l)=>(0,R.jsx)(ce,{title:h(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+l)))}),(0,R.jsxs)($.Z,{gutter:12,children:[(0,R.jsxs)(A.Z,{span:12,children:[(0,R.jsxs)("h3",{children:[h("order.id")," #",null===x||void 0===x?void 0:x.id]}),(0,R.jsxs)("p",{children:[(0,R.jsx)(W.D73,{})," ",re(null===x||void 0===x?void 0:x.created_at)]}),(0,R.jsxs)("p",{children:[h("delivery.time"),": ",re(null===x||void 0===x?void 0:x.delivery_date)]}),(0,R.jsxs)("span",{children:[(0,R.jsx)("strong",{children:null===x||void 0===x||null===(l=x.shop)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title})," ",null===x||void 0===x||null===(a=x.details)||void 0===a?void 0:a.map(((e,l)=>{var t;return(0,R.jsx)(i.Z,{color:he[l],children:null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.product.translation.title})}))]})]}),(0,R.jsxs)(A.Z,{span:12,children:[(0,R.jsxs)("p",{children:[h("status"),": ","new"===(null===x||void 0===x?void 0:x.status)?(0,R.jsx)(i.Z,{color:"blue",children:h(null===x||void 0===x?void 0:x.status)}):"canceled"===(null===x||void 0===x?void 0:x.status)?(0,R.jsx)(i.Z,{color:"error",children:h(null===x||void 0===x?void 0:x.status)}):(0,R.jsx)(i.Z,{color:"cyan",children:h(null===x||void 0===x?void 0:x.status)})]}),(0,R.jsxs)("p",{children:[h("order.type"),": ",(0,R.jsx)("strong",{children:h("parcel")})]}),(0,R.jsxs)("p",{children:[h("payment.method"),": ",(0,R.jsx)("strong",{children:null===x||void 0===x||null===(s=x.transaction)||void 0===s||null===(o=s.payment_system)||void 0===o?void 0:o.tag})]}),(0,R.jsxs)("p",{children:[h("payment.status"),": ",(0,R.jsx)("strong",{children:null===x||void 0===x||null===(c=x.transaction)||void 0===c?void 0:c.status})]})]}),(0,R.jsxs)(A.Z,{span:24,className:"mt-5",children:[(0,R.jsx)("h4",{children:h("map")}),(0,R.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,R.jsxs)(Q.ZP,{bootstrapURLKeys:{key:F.kr||Y},defaultZoom:15,center:C,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:e=>{let{map:l,maps:t}=e;const n=[k,I].map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));let a=new t.LatLngBounds;for(var s=0;s<n.length;s++)a.extend(n[s]);l.fitBounds(a)},children:[(0,R.jsx)(ve,{lat:null===k||void 0===k?void 0:k.lat,lng:null===k||void 0===k?void 0:k.lng}),(0,R.jsx)(ue,{lat:null===I||void 0===I?void 0:I.lat,lng:null===I||void 0===I?void 0:I.lng})]})})]})]})]})})})};var pe=t(83371),xe=t(84017);const je=["paid","canceled"];function Ze(e){let{data:l,handleCancel:t,fetchParcelDetails:a,orderId:s}=e;const[i]=L.Z.useForm(),{t:o}=(0,g.$)(),[r,c]=(0,n.useState)(!1);return(0,R.jsx)(U.Z,{visible:!!l,title:o("transaction.status"),closable:!1,footer:[(0,R.jsx)(d.Z,{type:"primary",onClick:()=>i.submit(),loading:r,children:o("save")},"save-form"),(0,R.jsx)(d.Z,{type:"default",onClick:t,children:o("cancel")},"cansel-modal")],children:(0,R.jsx)(L.Z,{form:i,layout:"vertical",onFinish:e=>{c(!0),V.Z.transactionStatus(null===l||void 0===l?void 0:l.id,e).then((()=>{t(),a()})).catch((e=>M.Am.error(e.message))).finally((()=>c(!1)))},initialValues:{status:l.transaction.status},children:(0,R.jsx)($.Z,{gutter:12,children:(0,R.jsx)(A.Z,{span:24,children:(0,R.jsx)(L.Z.Item,{label:o("status"),name:"status",rules:[{validator:(e,l)=>"paid"===l||"canceled"===l?Promise.resolve():Promise.reject(new Error(o("required")))}],children:(0,R.jsx)(T.Z,{children:je.map(((e,l)=>(0,R.jsx)(T.Z.Option,{value:e,children:o(e)},l)))})})})})})})}const fe=e=>{var l,t,a,s,i,o,r,c,u,v,m,p;let{id:x,handleCancel:j}=e;const{t:Z}=(0,g.$)(),[f,y]=(0,n.useState)(null),[b,C]=(0,n.useState)(null),[w,_]=(0,n.useState)(!1);function k(){y(!0),V.Z.getById(x).then((e=>{let{data:l}=e;C(l)})).finally((()=>{y(!1)}))}return(0,n.useEffect)((()=>{k()}),[]),(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(U.Z,{visible:!!x,title:"".concat(Z("parcel.id")," #").concat(x),onCancel:()=>j(),footer:[(0,R.jsx)(d.Z,{type:"default",onClick:j,children:Z("cancel")},"cancelBtn")],className:"large-modal",children:f?(0,R.jsx)(G.Z,{}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)($.Z,{gutter:24,children:[(0,R.jsx)(A.Z,{span:12,children:(0,R.jsxs)(pe.Z,{title:Z("sender.details"),bordered:!0,children:[(0,R.jsx)(pe.Z.Item,{label:Z("username"),span:3,children:null===b||void 0===b?void 0:b.username_from}),(0,R.jsx)(pe.Z.Item,{label:Z("phone"),span:3,children:null===b||void 0===b?void 0:b.phone_from}),(0,R.jsx)(pe.Z.Item,{label:Z("address"),span:3,children:null===b||void 0===b||null===(l=b.address_from)||void 0===l?void 0:l.address}),(0,R.jsx)(pe.Z.Item,{label:Z("house"),span:3,children:null===b||void 0===b||null===(t=b.address_from)||void 0===t?void 0:t.house}),(0,R.jsx)(pe.Z.Item,{label:Z("stage"),span:3,children:null===b||void 0===b||null===(a=b.address_from)||void 0===a?void 0:a.stage}),(0,R.jsx)(pe.Z.Item,{label:Z("room"),span:3,children:null===b||void 0===b||null===(s=b.address_from)||void 0===s?void 0:s.room})]})}),(0,R.jsx)(A.Z,{span:12,children:(0,R.jsxs)(pe.Z,{title:Z("receiver.details"),bordered:!0,children:[(0,R.jsx)(pe.Z.Item,{label:Z("username"),span:3,children:null===b||void 0===b?void 0:b.username_to}),(0,R.jsx)(pe.Z.Item,{label:Z("phone"),span:3,children:null===b||void 0===b?void 0:b.phone_to}),(0,R.jsx)(pe.Z.Item,{label:Z("address"),span:3,children:null===b||void 0===b||null===(i=b.address_to)||void 0===i?void 0:i.address}),(0,R.jsx)(pe.Z.Item,{label:Z("house"),span:3,children:null===b||void 0===b||null===(o=b.address_to)||void 0===o?void 0:o.house}),(0,R.jsx)(pe.Z.Item,{label:Z("stage"),span:3,children:null===b||void 0===b||null===(r=b.address_to)||void 0===r?void 0:r.stage}),(0,R.jsx)(pe.Z.Item,{label:Z("room"),span:3,children:null===b||void 0===b||null===(c=b.address_to)||void 0===c?void 0:c.room})]})}),(0,R.jsx)(A.Z,{span:24,children:(0,R.jsxs)(pe.Z,{bordered:!0,className:"mt-4",children:[(0,R.jsxs)(pe.Z.Item,{label:Z("client"),span:3,children:[null===b||void 0===b||null===(u=b.user)||void 0===u?void 0:u.firstname," ",null===b||void 0===b||null===(v=b.user)||void 0===v?void 0:v.lastname]}),(0,R.jsx)(pe.Z.Item,{label:Z("delivery.date.&.time"),span:3,children:null===b||void 0===b?void 0:b.delivery_date}),(0,R.jsx)(pe.Z.Item,{label:Z("price"),span:3,children:(0,xe.Z)(null===b||void 0===b?void 0:b.total_price)}),(0,R.jsx)(pe.Z.Item,{label:Z("created.at"),span:3,children:N()(null===b||void 0===b?void 0:b.created_at).format("YYYY-MM-DD HH:mm")}),(0,R.jsx)(pe.Z.Item,{label:Z("note"),span:3,children:null!==(m=null===b||void 0===b?void 0:b.note)&&void 0!==m?m:"---"}),(0,R.jsx)(pe.Z.Item,{label:Z("transaction"),span:3,children:(0,R.jsxs)("span",{style:{cursor:"pointer"},onClick:()=>_(!0),children:[null===b||void 0===b||null===(p=b.transaction)||void 0===p?void 0:p.status," ",(0,R.jsx)(h.Z,{})]})})]})})]}),w&&(0,R.jsx)(Ze,{handleCancel:()=>_(!1),data:b,fetchParcelDetails:k})]})})})};function ge(e){var l,t,a;let{orderDetails:s,handleCancel:i}=e;const{t:o}=(0,g.$)(),{activeMenu:r}=(0,Z.v9)((e=>e.menu),Z.wU),[c]=L.Z.useForm(),u=(0,Z.I0)(),[v,h]=(0,n.useState)(!1);return(0,R.jsx)(U.Z,{visible:!!s,onCancel:i,footer:[(0,R.jsx)(d.Z,{type:"primary",onClick:()=>c.submit(),loading:v,children:o("save")},"saveBtn"),(0,R.jsx)(d.Z,{type:"default",onClick:i,children:o("cancel")},"cancelBtn")],children:(0,R.jsx)(L.Z,{form:c,layout:"vertical",onFinish:e=>{const l={deliveryman_id:e.deliveryman.value};h(!0),V.Z.updateDelivery(s.id,l).then((()=>{i(),u((0,f.xo)(r))})).finally((()=>h(!1)))},initialValues:{deliveryman:{label:s.deliveryman?(null===s||void 0===s||null===(l=s.deliveryman)||void 0===l?void 0:l.firstname)+" "+(null===s||void 0===s||null===(t=s.deliveryman)||void 0===t?void 0:t.lastname):null,value:s.deliveryman?null===s||void 0===s||null===(a=s.deliveryman)||void 0===a?void 0:a.id:null}},children:(0,R.jsx)($.Z,{gutter:12,children:(0,R.jsx)(A.Z,{span:24,children:(0,R.jsx)(L.Z.Item,{label:o("deliveryman"),name:"deliveryman",rules:[{required:!0,message:o("required")}],children:(0,R.jsx)(S.h,{className:"w-100",debounceTimeout:500,placeholder:o("select.shop"),fetchOptions:async function(e){const l={search:e.length?e:void 0,page:1,perPage:10,role:"deliveryman",exist_token:1};return I.Z.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>({label:[e.firstname,e.lastname].join(" "),value:e.id})))}))},allowClear:!0})})})})})})}var ye=t(40197);const{TabPane:be}=a.Z,{RangePicker:Ce}=s.Z;function we(){var e,l,t,s,P,L,U,$;const{type:A}=(0,v.UO)(),T=(0,Z.I0)(),K=(0,v.s0)(),{t:Q}=(0,g.$)(),{statusList:G,loading:W}=(0,Z.v9)((e=>e.orderStatus),Z.wU),[X,J]=(0,n.useState)(null),[ee,le]=(0,n.useState)(null),[te,ne]=(0,n.useState)(null),[ae,se]=(0,n.useState)(null),ie=[{name:"all",id:"0",active:!0,sort:0},...G],[de,oe]=(0,n.useState)([{title:Q("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:Q("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,R.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:Q("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,R.jsxs)("div",{className:"cursor-pointer",children:["new"===e?(0,R.jsx)(i.Z,{color:"blue",children:Q(e)}):"canceled"===e?(0,R.jsx)(i.Z,{color:"error",children:Q(e)}):(0,R.jsx)(i.Z,{color:"cyan",children:Q(e)}),"delivered"!==e&&"canceled"!==e?(0,R.jsx)(h.Z,{onClick:e=>{e.stopPropagation(),J(l)}}):""]})},{title:Q("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,l)=>(0,R.jsx)("div",{children:"ready"===(null===l||void 0===l?void 0:l.status)&&"pickup"!==(null===l||void 0===l?void 0:l.delivery_type)?(0,R.jsx)(d.Z,{type:"link",onClick:()=>ne(l),children:(0,R.jsxs)(o.Z,{children:[e?"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname):Q("add.deliveryman"),(0,R.jsx)(h.Z,{})]})}):(0,R.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:Q("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return Q(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:Q("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:e=>N()(e).format("YYYY-MM-DD HH:mm")},{title:Q("delivery.date"),is_show:!0,dataIndex:"delivery_date",key:"delivery_date",render:e=>N()(e).format("YYYY-MM-DD")},{title:Q("options"),is_show:!0,key:"options",render:(e,l)=>(0,R.jsxs)(o.Z,{children:[(0,R.jsx)(d.Z,{icon:(0,R.jsx)(O.Y4r,{}),onClick:e=>{e.stopPropagation(),le(l.id)}}),(0,R.jsx)(d.Z,{icon:(0,R.jsx)(m.Z,{}),onClick:e=>{e.stopPropagation(),(e=>{se(e.id)})(l)}}),(0,R.jsx)(d.Z,{type:"primary",icon:(0,R.jsx)(h.Z,{}),onClick:e=>{e.stopPropagation(),(e=>{T((0,k.bn)()),T((0,f.bL)({url:"parcel-orders/".concat(e.id),id:"edit_parcel_order",name:Q("edit.parcel.order")})),K("/parcel-orders/".concat(e.id))})(l)},disabled:"delivered"===l.status||"canceled"===l.status}),(0,R.jsx)(z.Z,{icon:(0,R.jsx)(p.Z,{}),onClick:e=>{e.stopPropagation(),_e([l.id]),re(!0),Se(!0)}})]})}]),{setIsModalVisible:re}=(0,n.useContext)(Y._),[ce,ue]=(0,n.useState)(!1),{activeMenu:ve}=(0,Z.v9)((e=>e.menu),Z.wU),he=(0,E.K)(),[pe,xe]=(0,n.useState)(he.values.status||"all"),je=(null===(e=ve.data)||void 0===e?void 0:e.role)||pe,Ze=ve.data,[we,_e]=(0,n.useState)(null),[ke,Se]=(0,n.useState)(null),[Ie,He]=(0,n.useState)(!1),[Me,ze]=(0,n.useState)(N()().subtract(1,"months"),N()()),{data:Ve,loading:Ye,params:De,meta:Pe}=(0,Z.v9)((e=>e.parcelOrders),Z.wU),Ne={search:null===Ze||void 0===Ze?void 0:Ze.search,sort:null===Ze||void 0===Ze?void 0:Ze.sort,column:null===Ze||void 0===Ze?void 0:Ze.column,perPage:null===Ze||void 0===Ze?void 0:Ze.perPage,page:null===Ze||void 0===Ze?void 0:Ze.page,user_id:null===Ze||void 0===Ze?void 0:Ze.user_id,status:"all"===je?void 0:je,shop_id:null!==(null===(l=ve.data)||void 0===l?void 0:l.shop_id)?null===(t=ve.data)||void 0===t?void 0:t.shop_id:null,delivery_type:"scheduled"!==A?A:void 0,delivery_date_from:"scheduled"===A?N()().add(1,"day").format("YYYY-MM-DD"):void 0,date_from:Me?null===(s=Me[0])||void 0===s?void 0:s.format("YYYY-MM-DD"):null,date_to:Me?null===(P=Me[1])||void 0===P?void 0:P.format("YYYY-MM-DD"):null};(0,y.Z)((()=>{T((0,C.LF)(Ne))}),[Ze,Me,A]);const Fe=(e,l)=>{T((0,f.nc)({activeMenu:ve,data:{...Ze,[l]:e}}))};const Oe=()=>{J(null),ne(null),le(null),se(null)};(0,n.useEffect)((()=>{null!==ve&&void 0!==ve&&ve.refetch&&(0,Z.dC)((()=>{T((0,C.LF)(Ne)),T((0,f.A_)(ve))}))}),[null===ve||void 0===ve?void 0:ve.refetch]),(0,n.useEffect)((()=>{T((0,ye.dX)({}))}),[]);const Be={selectedRowKeys:we,onChange:e=>{_e(e)}};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(o.Z,{className:"justify-content-end w-100 mb-3",children:(0,R.jsx)(d.Z,{type:"primary",icon:(0,R.jsx)(x.Z,{}),onClick:()=>{(0,Z.dC)((()=>{T((0,k.bn)()),T((0,f.bL)({id:"parcel-orders/add",url:"parcel-orders/add",name:"add.parcel.order"}))})),K("/parcel-orders/add")},style:{width:"100%"},children:Q("add.parcel.order")})}),(0,R.jsx)(r.Z,{children:(0,R.jsxs)(o.Z,{wrap:!0,className:"order-filter",children:[(0,R.jsx)(_.Z,{defaultValue:null===Ze||void 0===Ze?void 0:Ze.search,resetSearch:!(null!==Ze&&void 0!==Ze&&Ze.search),placeholder:Q("search"),handleChange:e=>Fe(e,"search")}),(0,R.jsx)(S.h,{placeholder:Q("select.client"),fetchOptions:async function(e){const l={search:e,perPage:10};return I.Z.search(l).then((e=>{let{data:l}=e;return l.map((e=>({label:"".concat(null===e||void 0===e?void 0:e.firstname," ").concat(null===e||void 0===e?void 0:e.lastname),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))},onSelect:e=>Fe(e.value,"user_id"),onDeselect:()=>Fe(null,"user_id"),style:{width:"100%"},value:null===Ze||void 0===Ze?void 0:Ze.user_id}),(0,R.jsx)(Ce,{value:Me,onChange:e=>ze(e),disabledDate:e=>e&&e>N()().endOf("day"),style:{width:"100%"}}),(0,R.jsxs)(d.Z,{onClick:()=>{ue(!0);const e="all"!==pe?{status:pe}:null;V.Z.export(e).then((e=>{var l;window.location.href=F.S0+(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.file_name)})).finally((()=>ue(!1)))},loading:ce,style:{width:"100%"},children:[(0,R.jsx)(B.bwQ,{className:"mr-2"}),Q("export")]}),(0,R.jsx)(d.Z,{onClick:()=>{(0,Z.dC)((()=>{T((0,b.H5)()),T((0,f.nc)({activeMenu:ve,data:null})),T((0,C.LF)({status:void 0,page:null===Ze||void 0===Ze?void 0:Ze.page,perPage:20}))})),ze(void 0)},style:{width:"100%"},icon:(0,R.jsx)(j.Z,{}),children:Q("clear")})]})}),(0,R.jsxs)(r.Z,{loading:W,children:[(0,R.jsxs)(o.Z,{className:"justify-content-between align-items-start w-100",children:[(0,R.jsx)(a.Z,{onChange:e=>{const l=e;T((0,f.nc)({activeMenu:ve,data:{role:l,page:1}})),xe(e),K("?status=".concat(l))},type:"card",activeKey:je,children:ie.filter((e=>!0===e.active)).map((e=>(0,R.jsx)(be,{tab:Q(e.name)},e.name)))}),(0,R.jsxs)(o.Z,{children:[null!==we&&0!==we.length&&(0,R.jsx)(c.Z,{title:Q("delete.selected"),children:(0,R.jsx)(z.Z,{type:"primary",onClick:()=>{null===we||0===we.length?M.Am.warning(Q("select.the.product")):(re(!0),Se(!1))},danger:!0})}),(0,R.jsx)(H.Z,{setColumns:oe,columns:de,iconOnly:!0})]})]}),(0,R.jsx)(u.Z,{scroll:{x:!0},rowSelection:Be,columns:null===de||void 0===de?void 0:de.filter((e=>e.is_show)),dataSource:Ve,loading:Ye,pagination:{pageSize:De.perPage,page:(null===(L=ve.data)||void 0===L?void 0:L.page)||1,total:Pe.total,defaultCurrent:null===(U=ve.data)||void 0===U?void 0:U.page,current:null===($=ve.data)||void 0===$?void 0:$.page},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:n,current:a}=e,{field:s,order:i}=t,d=(0,w.Z)(i);T((0,f.nc)({activeMenu:ve,data:{...Ze,perPage:n,page:a,column:s,sort:d}}))}})]}),X&&(0,R.jsx)(q,{orderDetails:X,handleCancel:Oe,status:G}),te&&(0,R.jsx)(ge,{orderDetails:te,handleCancel:Oe}),ee&&(0,R.jsx)(me,{id:ee,handleCancel:Oe}),!!ae&&(0,R.jsx)(fe,{id:ae,handleCancel:Oe}),(0,R.jsx)(D.Z,{click:()=>{He(!0);const e={...Object.assign({},...we.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};V.Z.delete(e).then((()=>{M.Am.success(Q("successfully.deleted")),re(!1),T((0,C.LF)(Ne)),Se(null),_e(null)})).finally((()=>{He(!1)}))},text:Q(ke?"delete":"all.delete"),loading:Ie,setText:_e})]})}},15386:(e,l,t)=>{"use strict";t.d(l,{Z:()=>o});var n=t(1413),a=t(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var i=t(17469),d=function(e,l){return a.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:l,icon:s}))};d.displayName="ClearOutlined";const o=a.forwardRef(d)},55768:(e,l,t)=>{"use strict";t.d(l,{Z:()=>o});var n=t(1413),a=t(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var i=t(17469),d=function(e,l){return a.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:l,icon:s}))};d.displayName="PlusCircleOutlined";const o=a.forwardRef(d)},99587:(e,l,t)=>{"use strict";t.d(l,{Z:()=>o});var n=t(1413),a=t(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=t(17469),d=function(e,l){return a.createElement(i.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:l,icon:s}))};d.displayName="TableOutlined";const o=a.forwardRef(d)},84618:(e,l,t)=>{"use strict";e.exports=t.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:(e,l,t)=>{"use strict";e.exports=t.p+"static/media/user.fbe7078c52acde79652d.jpg"},24654:()=>{}}]);