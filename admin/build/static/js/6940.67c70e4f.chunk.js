"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6940],{79578:function(e,n,t){t.r(n),t.d(n,{default:function(){return Se}});var i=t(1413),r=t(29439),l=t(47313),o=t(10976),d=t(256),u=t(59491),a=t(68197),s=t(59624),c=t(72652),v=t(15861),p=t(87757),f=t.n(p),y=t(77181),m=t(74294),h=t(66672),x=t(16031),j=t(49986),g=t(89281),Z=t(2717),b=t(73270),_=t(24511),k=t(55768),w=t(90954),S=t(97890),O=t(23560),q=t(89802),M=t(20637),N=t(4942),I=t(9274),P=t(97388),C=t(17649),D=t(47168),U=t(97421),E=t(56814),Y=t(46417);function A(e){var n,t,d,c=e.uuid,v=e.handleCancel,p=(0,_.$)().t,f=o.Z.useForm(),y=(0,r.Z)(f,1)[0],m=(0,Z.I0)(),h=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu,x=(0,Z.v9)((function(e){return e.globalSettings}),Z.wU).settings,j=(0,Z.v9)((function(e){return e.formLang}),Z.wU).defaultLang,g=(0,Z.v9)((function(e){return e.globalSettings.settings}),Z.wU).google_map_key,k=(0,Z.v9)((function(e){return e.order}),Z.wU).data,S=(0,D.usePlacesWidget)({apiKey:g||U.kr,onPlaceSelected:function(e){var n={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};A(n)}}),O=(S.ref,(0,l.useState)(k.address?{lat:k.address.lat,lng:k.address.lng}:(0,C.Z)(x))),q=(0,r.Z)(O,2),M=q[0],A=q[1],B=(0,l.useState)(null===k||void 0===k||null===(n=k.address)||void 0===n?void 0:n.address),H=(0,r.Z)(B,2),F=H[0],L=H[1];return(0,Y.jsx)(I.Z,{visible:!!c,title:p("create.address"),onCancel:v,footer:[(0,Y.jsx)(u.Z,{type:"primary",onClick:function(){return y.submit()},children:p("save")},"saveBtn"),(0,Y.jsx)(u.Z,{type:"default",onClick:v,children:p("cancel")},"cancelBtn")],children:(0,Y.jsxs)(o.Z,{layout:"vertical",name:"user-address",form:y,onFinish:function(e){var n=(0,i.Z)((0,i.Z)({},e),{},{active:1,address:null===e||void 0===e?void 0:e["address[".concat(j,"]")],lat:M.lat,lng:M.lng});m((0,b.oM)({address:n})),m((0,w.nc)({activeMenu:h,data:(0,i.Z)((0,i.Z)({},h.data),{},{addressData:n})})),v()},initialValues:(0,N.Z)({},"address[".concat(j,"]"),null===h||void 0===h||null===(t=h.data)||void 0===t||null===(d=t.addressData)||void 0===d?void 0:d.address),children:[(0,Y.jsx)(a.Z,{gutter:12,children:(0,Y.jsx)(s.Z,{span:24,children:(0,Y.jsx)(E.Z,{value:F,setValue:L,setLocation:A})})}),(0,Y.jsx)(s.Z,{span:24,children:(0,Y.jsx)(o.Z.Item,{label:p("map"),children:(0,Y.jsx)(P.Z,{location:M,setLocation:A,setAddress:function(e){return y.setFieldsValue((0,N.Z)({},"address[".concat(j,"]"),e))}})})})]})})}var B=function(e){var n,t,i=e.form,d=(0,_.$)().t,c=(0,Z.I0)(),p=(0,S.s0)(),N=(0,Z.v9)((function(e){return e.order}),Z.wU).data,I=(0,Z.v9)((function(e){return e.currency}),Z.wU).currencies,P=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu,C=(0,l.useState)(null),D=(0,r.Z)(C,2),U=D[0],E=D[1],B=(0,l.useState)([]),H=(0,r.Z)(B,2),F=H[0],L=H[1],V=(0,l.useState)(!1),R=(0,r.Z)(V,2),W=R[0],T=R[1],$=(0,Z.v9)((function(e){return e.globalSettings.settings}),Z.wU).payment_type;function z(){return z=(0,v.Z)(f().mark((function e(n){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,perPage:10},e.abrupt("return",j.Z.search(t).then((function(e){var n=e.data;return L(n),J(n)})));case 2:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function K(){return(K=(0,v.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M.Z.getAll().then((function(e){return e.data.filter((function(e){return"cash"===e.tag||"wallet"===e.tag})).map((function(e){return{label:e.tag||"no name",value:e.id,key:e.id}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=(0,v.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M.Z.getById(N.shop.value).then((function(e){return e.data.filter((function(e){return"cash"===e.tag||"wallet"===e.tag})).map((function(e){return{label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){if(e)return(0,x.isArray)(e)?e.map((function(e){return{label:"".concat(e.firstname," ").concat(e.lastname||""),value:e.id,key:e.id}})):{label:"".concat(e.firstname," ").concat(e.lastname||""),value:e.id,key:e.id}}(0,l.useEffect)((function(){T(!0)}),[N.shop]);return(0,Y.jsxs)(y.Z,{title:d("customer.details"),children:[(0,Y.jsxs)(a.Z,{gutter:12,children:[(0,Y.jsx)(s.Z,{span:16,children:(0,Y.jsx)(o.Z.Item,{label:d("client"),name:"user",rules:[{required:!0,message:d("required")}],children:(0,Y.jsx)(g.h,{placeholder:d("select.client"),fetchOptions:function(e){return z.apply(this,arguments)},onSelect:function(e){var n=F.find((function(n){return n.id===e.value}));c((0,b.oM)({user:e,userUuid:n.uuid,userOBJ:n})),i.setFieldsValue({address:null})}})})}),(0,Y.jsx)(s.Z,{span:8,children:(0,Y.jsx)(o.Z.Item,{label:d("add"),className:"label-hidden",children:(0,Y.jsx)(u.Z,{icon:(0,Y.jsx)(k.Z,{}),onClick:function(){c((0,w.bL)({url:"user/add",id:"user_add",name:d("add.user")})),p("/user/add")},children:d("add")})})}),(0,Y.jsx)(s.Z,{span:24,children:(0,Y.jsx)(o.Z.Item,{label:d("address"),name:"address",rules:[{required:!1,message:d("required")}],children:(0,Y.jsx)("div",{className:"address w-100",onClick:function(){N.userUuid?E(N.userUuid):O.Am.warning(d("please.select.client"))},children:null===(n=P.data)||void 0===n||null===(t=n.addressData)||void 0===t?void 0:t.address})})}),(0,Y.jsx)(s.Z,{span:12,children:(0,Y.jsx)(o.Z.Item,{label:d("currency"),name:"currency_id",rules:[{required:!0,message:d("required")}],children:(0,Y.jsx)(m.Z,{placeholder:d("select.currency"),onSelect:function(e){var n=I.find((function(n){return n.id===e}));c((0,b.dY)(n))},children:I.map((function(e,n){return(0,Y.jsxs)(m.Z.Option,{value:e.id,children:[e.title," (",e.symbol,")"]},n)}))})})}),(0,Y.jsx)(s.Z,{span:12,children:(0,Y.jsx)(o.Z.Item,{label:d("payment.type"),name:"payment_type",rules:[{required:!0,message:d("required")}],children:(0,Y.jsx)(q.q,{refetch:W,fetchOptions:"admin"===$?function(){return K.apply(this,arguments)}:function(){return G.apply(this,arguments)},className:"w-100",placeholder:d("select.payment.type"),onSelect:function(e){return c((0,b.oM)({paymentType:e}))},disabled:!0})})}),(0,Y.jsx)(s.Z,{span:24,children:(0,Y.jsx)(o.Z.Item,{label:d("note"),name:"note",children:(0,Y.jsx)(h.Z,{})})})]}),U&&(0,Y.jsx)(A,{uuid:U,handleCancel:function(){return E(null)}})]})},H=t(99096),F=t(70816),L=t.n(F),V=t(53149),R=[{title:"sunday"},{title:"monday"},{title:"tuesday"},{title:"wednesday"},{title:"thursday"},{title:"friday"},{title:"saturday"}],W=function(){var e,n,t,r,d,u,c=(0,_.$)().t,v=(0,Z.I0)(),p=(0,Z.v9)((function(e){return e.order}),Z.wU).data,f=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu,m=new Date(null===p||void 0===p?void 0:p.delivery_date),h=null===(e=f.data)||void 0===e||null===(n=e.CurrentShop)||void 0===n||null===(t=n.shop_working_days)||void 0===t?void 0:t.filter((function(e){return!0!==e.disabled})).find((function(e){var n;return(null===e||void 0===e?void 0:e.day)===(null===(n=R[m.getDay()])||void 0===n?void 0:n.title)})),x=null===(r=f.data)||void 0===r||null===(d=r.CurrentShop)||void 0===d||null===(u=d.shop_closed_date)||void 0===u?void 0:u.map((function(e){return e.day}));var j=function(e,n){for(var t=[],i=e;i<n;i++)t.push(i);return t};return(0,l.useEffect)((function(){var e,n,t;null!==p&&void 0!==p&&null!==(e=p.shop)&&void 0!==e&&e.value&&(t=null===p||void 0===p||null===(n=p.shop)||void 0===n?void 0:n.value,V.Z.getById(t).then((function(e){var n=null===e||void 0===e?void 0:e.data;v((0,b.oM)({currency_shop:n})),v((0,w.nc)({activeMenu:f,data:(0,i.Z)((0,i.Z)({},null===f||void 0===f?void 0:f.data),{},{CurrentShop:null===e||void 0===e?void 0:e.data})}))})))}),[null===p||void 0===p?void 0:p.shop]),(0,Y.jsx)(y.Z,{title:c("shipping.info"),children:(0,Y.jsx)(a.Z,{gutter:12,children:(0,Y.jsx)(s.Z,{span:24,children:(0,Y.jsxs)(a.Z,{gutter:12,children:[(0,Y.jsx)(s.Z,{span:12,children:(0,Y.jsx)(o.Z.Item,{name:"delivery_date",label:c("delivery.date"),rules:[{required:!0,message:c("required")}],children:(0,Y.jsx)(H.Z,{placeholder:c("delivery.date"),className:"w-100",format:"YYYY-MM-DD",disabledDate:function(e){var n=null===x||void 0===x?void 0:x.find((function(n){return n===L()(e).format("YYYY-MM-DD")})),t=L()().add(-1,"days")>=e;return n||t},onChange:function(e){var n=L()(e).format("YYYY-MM-DD");v((0,b.oM)({delivery_date:n}))}})})}),(0,Y.jsx)(s.Z,{span:12,children:(0,Y.jsx)(o.Z.Item,{label:"".concat(c("delivery.time")," (").concat(c("up.to"),")"),name:"delivery_time",rules:[{required:!1,message:c("required")}],children:(0,Y.jsx)(H.Z,{disabled:!(null!==p&&void 0!==p&&p.delivery_date),picker:"time",placeholder:c("start.time"),className:"w-100",format:"HH:mm:ss",showNow:!1,disabledTime:function(){return{disabledHours:function(){return function(e,n){for(var t=parseInt(e),i=parseInt(n),r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],l=t;l<=i;l++)delete r[l];return r}((null===h||void 0===h?void 0:h.from.substring(0,2))>=L()(new Date).format("HH")?null===h||void 0===h?void 0:h.from.substring(0,2):L()(new Date).format("HH"),null===h||void 0===h?void 0:h.to.substring(0,2))},disabledMinutes:function(){return j(0,60)},disabledSeconds:function(){return j(0,60)}}},onChange:function(e){var n=L()(e).format("HH:mm:ss");v((0,b.oM)({delivery_time:n}))}})})})]})})})})},T=t(45705),$=t(11216),z=t(30763),K=t(11875),G=t(45464),J=t(82138),Q=t(11829),X=t(12019),ee=t(8846),ne=t(7370),te=t(93433),ie=t(26824),re=t(83371),le=t(84017),oe=t(91220),de=t(77370),ue=t(28939),ae=t(80314),se=t(17101);function ce(e){var n,t,o,d,v,p,f,y=e.extrasModal,m=e.setExtrasModal,h=(0,l.useState)(!1),x=(0,r.Z)(h,2),j=x[0],g=x[1],k=(0,l.useState)({}),w=(0,r.Z)(k,2),S=w[0],q=w[1],M=(0,_.$)().t,N=(0,l.useState)(y.quantity||S.quantity||S.min_qty),P=(0,r.Z)(N,2),C=P[0],D=P[1],U=(0,l.useState)({}),E=(0,r.Z)(U,2),A=E[0],B=E[1],H=(0,Z.v9)((function(e){return e.order.data}),Z.wU).currency,F=(0,Z.I0)(),L=(0,l.useState)([]),V=(0,r.Z)(L,2),R=V[0],W=V[1],$=(0,l.useState)([]),z=(0,r.Z)($,2),K=z[0],Q=z[1],X=(0,l.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),ne=(0,r.Z)(X,2),ce=ne[0],ve=ne[1],pe=(0,l.useState)([]),fe=(0,r.Z)(pe,2),ye=fe[0],me=fe[1],he=(0,l.useState)([]),xe=(0,r.Z)(he,2),je=xe[0],ge=xe[1],Ze=(0,l.useState)([]),be=(0,r.Z)(Ze,2),_e=be[0],ke=be[1],we=function(){return m(!1)};var Se=function(e){var n,t=ye.findIndex((function(n){return n.extra_group_id===e.extra_group_id})),i=ye;t>-1&&(i=i.slice(0,t)),i.push(e);var r=i.map((function(e){return e.extra_value_id})).join(","),l=(0,de.y)(r,R,K);ve(l),null===(n=l.extras)||void 0===n||n.forEach((function(n){var t=ye.findIndex((function(t){return n[0].extra_group_id!==e.extra_group_id?t.extra_group_id===n[0].extra_group_id:t.extra_group_id===e.extra_group_id}));if(n[0].level>=e.level){var r=n[0].extra_group_id!==e.extra_group_id?n[0]:e;-1===t?i.push(r):i[t]=r}})),me(i)};(0,l.useEffect)((function(){null!==ce&&void 0!==ce&&ce.stock&&B((0,i.Z)((0,i.Z)({},ce.stock),{},{extras:ye}))}),[ce]);function Oe(e){var n;return(null===je||void 0===je?void 0:je.reduce((function(e,n){return e+n.product.stock.price*(n.product.quantity||n.product.min_qty)}),0))+(null===ce||void 0===ce||null===(n=ce.stock)||void 0===n?void 0:n[e||"price"])*C}function qe(e,n){ve((function(t){return(0,i.Z)((0,i.Z)({},t),{},{stock:(0,i.Z)((0,i.Z)({},t.stock),{},{addons:t.stock.addons.map((function(t){return t.addon_id===e?(0,i.Z)((0,i.Z)({},t),{},{product:(0,i.Z)((0,i.Z)({},t.product),{},{quantity:n})}):t}))})})})),ge((function(t){return t.map((function(t){return t.addon_id===e?(0,i.Z)((0,i.Z)({},t),{},{product:(0,i.Z)((0,i.Z)({},t.product),{},{quantity:n})}):t}))}))}return(0,ae.Z)((function(){var e,n,t=null===ce||void 0===ce||null===(e=ce.stock)||void 0===e||null===(n=e.addons)||void 0===n?void 0:n.filter((function(e){return _e.includes(String(e.addon_id))}));ge(t)}),[_e]),(0,l.useEffect)((function(){g(!0),se.Z.getById(y.uuid).then((function(e){var n,t=e.data;q(t);var i,r=(0,de.o)(t,null===y||void 0===y?void 0:y.addons);(W(r.extras),D(y.quantity||t.quantity||t.min_qty),Q(r.stock),ve((0,de.y)("",r.extras,r.stock)),null===(n=(0,de.y)("",r.extras,r.stock).extras)||void 0===n||n.forEach((function(e){me((function(n){return[].concat((0,te.Z)(n),[e[0]])}))})),null!==y&&void 0!==y&&y.addons)&&ke((null===y||void 0===y||null===(i=y.addons)||void 0===i?void 0:i.map((function(e){var n,t;return String((null===e||void 0===e||null===(n=e.stock)||void 0===n||null===(t=n.product)||void 0===t?void 0:t.id)||e.addon_id)})))||[])})).finally((function(){return g(!1)}))}),[y.uuid]),(0,Y.jsx)(I.Z,{visible:!!S,title:null===S||void 0===S||null===(n=S.translation)||void 0===n?void 0:n.title,onCancel:we,footer:[j?null:(0,Y.jsx)(u.Z,{type:"primary",onClick:function(){F((0,b.oM)({calculate:!1}));var e=je.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{quantity:e.product.quantity||e.product.min_qty,stock_id:e.product.stock.id})})),n=(0,i.Z)((0,i.Z)({},S),{},{stock:A,quantity:C,id:A.id,img:(0,ue.Z)(A)||S.img,stockID:A,addons:e,price:A.price});n.quantity>A.quantity?O.Am.warning("".concat(M("you.cannot.order.more.than")," ").concat(A.quantity)):(F((0,b.x$)(n)),m(null))},children:M("add")},"add-product"),(0,Y.jsx)(u.Z,{type:"default",onClick:we,children:M("cancel")},"cancel-modal")],children:(0,Y.jsxs)(c.Z,{spinning:j,children:[(0,Y.jsxs)(a.Z,{gutter:24,children:[(0,Y.jsx)(s.Z,{span:8,children:(0,Y.jsx)(ie.Z,{src:(0,G.Z)((0,ue.Z)(A)||S.img),alt:S.name,height:200,style:{objectFit:"contain"}})}),(0,Y.jsx)(s.Z,{span:16,children:(0,Y.jsxs)(re.Z,{title:null===(t=S.translation)||void 0===t?void 0:t.title,children:[(0,Y.jsxs)(re.Z.Item,{label:M("price"),span:3,children:[(0,Y.jsx)("div",{className:null!==A&&void 0!==A&&A.discount?"strike":"",children:(0,le.Z)(Oe(),H.symbol)}),null!==A&&void 0!==A&&A.discount?(0,Y.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,le.Z)(Oe("total_price"),H.symbol)}):""]}),(0,Y.jsx)(re.Z.Item,{label:M("in.stock"),span:3,children:(0,oe.Z)(null===A||void 0===A?void 0:A.quantity,S.unit)}),(0,Y.jsx)(re.Z.Item,{label:M("tax"),span:3,children:(0,le.Z)(null===A||void 0===A?void 0:A.tax,H.symbol)})]})})]}),null!==ce&&void 0!==ce&&ce.extras?null===ce||void 0===ce||null===(o=ce.extras)||void 0===o?void 0:o.map((function(e,n){return(0,Y.jsx)("div",{className:"extra-group",children:(0,Y.jsx)(T.Z,{className:"extras-select",wrap:!0,children:null===e||void 0===e?void 0:e.map((function(e,n){var t,i,r,l;return"color"===(null===e||void 0===e||null===(t=e.group)||void 0===t?void 0:t.type)?(0,Y.jsx)("span",{className:"extras-color-wrapper ".concat(ye.find((function(n){return n.id===e.id}))?"selected":""),onClick:function(){return Se(e)},children:(0,Y.jsx)("i",{className:"extras-color",style:{backgroundColor:null===e||void 0===e||null===(r=e.value)||void 0===r?void 0:r.value}})},"color"+n):"text"===(null===e||void 0===e||null===(i=e.group)||void 0===i?void 0:i.type)?(0,Y.jsx)("span",{className:"extras-text rounded ".concat(ye.find((function(n){return n.id===e.id}))?"selected":""),onClick:function(){return Se(e)},children:null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.value},"text"+n):null}))})},"extra-group"+n)})):null,(0,Y.jsx)(T.Z,{direction:"vertical",size:"middle",children:null===(d=ce.stock)||void 0===d||null===(v=d.addons)||void 0===v?void 0:v.filter((function(e){return!!e.product})).map((function(e){var n,t,i=_e.includes(String(e.addon_id));return(0,Y.jsx)("div",{children:(0,Y.jsxs)("label",{htmlFor:String(e.id),children:[i&&(0,Y.jsxs)(T.Z,{size:0,children:[(0,Y.jsx)(u.Z,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,Y.jsx)(ee.Z,{}),disabled:1===e.product.quantity,onClick:function(n){n.stopPropagation(),qe(e.addon_id,e.product.quantity-1)}}),(0,Y.jsxs)("span",{className:"ml-2",children:[(e.product.quantity||e.product.min_qty)*((null===e||void 0===e?void 0:e.interval)||1),null===(n=e.unit)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title]}),(0,Y.jsx)(u.Z,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,Y.jsx)(J.Z,{}),onClick:function(n){n.stopPropagation(),qe(e.addon_id,e.product.quantity?e.product.quantity+1:e.product.min_qty+1)}})]}),(0,Y.jsx)("span",{className:"ml-2",children:e.product.translation.title})]})},e.id)}))}),(0,Y.jsx)(a.Z,{gutter:12,className:"mt-3",children:(0,Y.jsx)(s.Z,{span:24,children:(0,Y.jsxs)(T.Z,{children:[(0,Y.jsx)(u.Z,{type:"primary",icon:(0,Y.jsx)(ee.Z,{}),onClick:function(){1!==C&&(C<=S.min_qty||D((function(e){return e-1})))}},"plus"),(C||1)*((null===S||void 0===S?void 0:S.interval)||1),null===S||void 0===S||null===(p=S.unit)||void 0===p||null===(f=p.translation)||void 0===f?void 0:f.title,(0,Y.jsx)(u.Z,{type:"primary",icon:(0,Y.jsx)(J.Z,{}),onClick:function(){C!==S.max_qty&&D((function(e){return e+1}))}},"minus")]})})})]})})}t(21448);var ve=t(74776),pe=t.n(ve),fe=t(58821);function ye(){var e,n,t,i,o,d,v,p,f,m=(0,_.$)().t,h=(0,Z.I0)(),x=(0,S.s0)(),j=(0,Z.v9)((function(e){return e.order}),Z.wU),g=j.orderItems,k=j.data,O=j.total,q=(j.coupon,j.orderProducts),M=(0,l.useState)(!1),N=(0,r.Z)(M,2),I=N[0],P=N[1],C=(0,l.useState)(null),D=(0,r.Z)(C,2),U=D[0],E=D[1],A=(0,l.useState)(""),B=(0,r.Z)(A,2),H=(B[0],B[1],(0,l.useState)(!1)),F=(0,r.Z)(H,2);F[0],F[1],(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu;(0,ae.Z)((function(){g.length?function(){var e;if(null!==k&&void 0!==k&&null!==(e=k.deliveries)&&void 0!==e&&e.label){var n=function(e){var n,t,i,r,l,o,d,u=null===e||void 0===e?void 0:e.map((function(e){var n,t;return{quantity:e.quantity,stock_id:e.stockID?null===(n=e.stockID)||void 0===n?void 0:n.id:null===(t=e.stock)||void 0===t?void 0:t.id}})),a=null===e||void 0===e?void 0:e.flatMap((function(e){var n;return null===(n=e.addons)||void 0===n?void 0:n.map((function(n){var t,i;return{quantity:n.quantity,stock_id:n.stock_id,parent_id:e.stockID?null===(t=e.stockID)||void 0===t?void 0:t.id:null===(i=e.stock)||void 0===i?void 0:i.id}}))})),s={products:u.concat(a),currency_id:null===k||void 0===k||null===(n=k.currency)||void 0===n?void 0:n.id,coupon:null===k||void 0===k||null===(t=k.coupon)||void 0===t?void 0:t.name,shop_id:null===k||void 0===k||null===(i=k.shop)||void 0===i?void 0:i.value,type:null===k||void 0===k||null===(r=k.deliveries)||void 0===r||null===(l=r.label)||void 0===l?void 0:l.toLowerCase(),address:{latitude:null===k||void 0===k||null===(o=k.address)||void 0===o?void 0:o.lat,longitude:null===k||void 0===k||null===(d=k.address)||void 0===d?void 0:d.lng}};return pe().stringify(s,{addQueryPrefix:!0})}(g);P(!0),ne.Z.calculate(n).then((function(e){var n=e.data,t={product_tax:null===n||void 0===n?void 0:n.total_tax,shop_tax:null===n||void 0===n?void 0:n.total_shop_tax,order_total:null===n||void 0===n?void 0:n.total_price,delivery_fee:null===n||void 0===n?void 0:n.delivery_fee,coupon:null===n||void 0===n?void 0:n.coupon_price,discount:null===n||void 0===n?void 0:n.total_discount,service_fee:null===n||void 0===n?void 0:n.service_fee};h((0,b.rU)(t))})).catch((function(){return h((0,b.r3)(q))})).finally((function(){return P(!1)}))}}():h((0,b.pX)())}),[g,k.currency,k.address,null===k||void 0===k?void 0:k.coupon]);var L=function(e){h((0,w.bL)({id:"product-".concat(e.uuid),url:"product/".concat(e.uuid),name:m("edit.product")})),x("/product/".concat(e.uuid))};var V=function(e,n){h((0,b.OQ)({quantity:e,id:n}))};return(0,Y.jsxs)("div",{className:"order-items",children:[I&&(0,Y.jsx)("div",{className:"loader",children:(0,Y.jsx)(c.Z,{})}),(0,Y.jsx)(a.Z,{gutter:24,className:"mt-4",children:(0,Y.jsx)(s.Z,{span:24,children:(0,Y.jsxs)(y.Z,{className:"shop-card",children:[null===g||void 0===g?void 0:g.map((function(e,n){var t,i,r,l,o,d,a,s,c,v,p,f,m,x,j,g,Z,_;return void 0===(null===e||void 0===e?void 0:e.bonus)||!1===(null===e||void 0===e?void 0:e.bonus)?(0,Y.jsx)("div",{children:(0,Y.jsxs)(y.Z,{className:"position-relative",children:[(0,Y.jsx)(Q.Z,{className:"close-order",onClick:function(){return h((0,b.Sg)(e))}}),(0,Y.jsxs)(T.Z,{className:"mr-3",children:[(0,Y.jsx)("div",{className:"order-item-img",style:{marginRight:"20px"},children:(0,Y.jsx)("img",{src:(0,G.Z)((null===e||void 0===e||null===(t=e.stock)||void 0===t||null===(i=t.product)||void 0===i?void 0:i.img)||(null===e||void 0===e?void 0:e.img)),alt:null===e||void 0===e||null===(r=e.stock)||void 0===r||null===(l=r.product)||void 0===l||null===(o=l.translation)||void 0===o?void 0:o.title})}),(0,Y.jsx)(K.Z,{title:(0,Y.jsxs)("div",{children:[(0,Y.jsxs)(T.Z,{children:[(0,Y.jsx)("div",{className:"cursor-pointer white-space-wrap",onClick:function(){return L(e)},children:(null===e||void 0===e||null===(d=e.stock)||void 0===d||null===(a=d.product)||void 0===a||null===(s=a.translation)||void 0===s?void 0:s.title)||(null===e||void 0===e||null===(c=e.translation)||void 0===c?void 0:c.title)}),(0,Y.jsx)(u.Z,{icon:(0,Y.jsx)(X.Z,{}),type:"text",size:"small",onClick:function(){return E(e)}})]}),(0,Y.jsx)("div",{className:"product-price",children:(0,le.Z)((null===e||void 0===e?void 0:e.price)*(null===e||void 0===e?void 0:e.quantity),null===k||void 0===k||null===(v=k.currency)||void 0===v?void 0:v.symbol)})]}),description:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(T.Z,{children:[(0,Y.jsx)(u.Z,{disabled:(null===e||void 0===e?void 0:e.quantity)<(null===e||void 0===e||null===(p=e.stock)||void 0===p||null===(f=p.product)||void 0===f?void 0:f.min_qty)+1||1===(null===e||void 0===e?void 0:e.quantity),onClick:function(){return V(e.quantity-1,e.id)},type:"primary",icon:(0,Y.jsx)(ee.Z,{})})," ",(0,Y.jsxs)("span",{children:[(null===e||void 0===e?void 0:e.quantity)*((null===e||void 0===e?void 0:e.interval)||1),null===e||void 0===e||null===(m=e.unit)||void 0===m||null===(x=m.translation)||void 0===x?void 0:x.title]}),(0,Y.jsx)(u.Z,{onClick:function(){return V(e.quantity+1,e.id)},type:"primary",disabled:(null===e||void 0===e?void 0:e.quantity)===(null===e||void 0===e?void 0:e.max_qty),icon:(0,Y.jsx)(J.Z,{})})]}),(0,Y.jsx)("div",{className:"mt-2",children:(0,Y.jsx)(T.Z,{wrap:!0,children:null===e||void 0===e||null===(j=e.addons)||void 0===j?void 0:j.map((function(e){var n,t,i,r;return(0,Y.jsxs)("span",{className:"extras-text rounded",children:[(null===e||void 0===e||null===(n=e.stock)||void 0===n||null===(t=n.product)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title)||(null===e||void 0===e||null===(r=e.product.translation)||void 0===r?void 0:r.title)," ","x ",null===e||void 0===e?void 0:e.quantity]},e.id)}))})})]})})]})]})},n):(0,Y.jsx)("div",{children:(0,Y.jsx)("div",{children:(0,Y.jsx)(y.Z,{className:"position-relative",children:(0,Y.jsxs)(T.Z,{className:"mr-3 w-100 justify-content-between align-items-start",children:[(0,Y.jsxs)(T.Z,{children:[(0,Y.jsx)("div",{className:"order-item-img",children:(0,Y.jsx)("img",{src:(0,G.Z)(null===e||void 0===e?void 0:e.img),alt:null===(g=e.translation)||void 0===g?void 0:g.title})}),(0,Y.jsx)(K.Z,{title:(0,Y.jsxs)("div",{children:[(0,Y.jsx)("div",{className:"cursor-pointer white-space-wrap",onClick:function(){return L(e)},children:null===(Z=e.translation)||void 0===Z?void 0:Z.title}),(0,Y.jsx)("div",{className:"product-price",children:(0,le.Z)(e.price,null===(_=k.currency)||void 0===_?void 0:_.symbol)})]})})]}),(0,Y.jsxs)("div",{className:"bonus",children:[(0,Y.jsx)(fe.ojn,{})," Bonus"]})]})})})},n)})),(0,Y.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:(0,Y.jsxs)("div",{className:"mt-2 text-right shop-total",children:[(0,Y.jsxs)(T.Z,{children:[(0,Y.jsxs)("p",{className:"font-weight-bold",children:[m("product.tax"),":"]}),(0,Y.jsx)("p",{children:(0,le.Z)(O.product_tax,null===(e=k.currency)||void 0===e?void 0:e.symbol)})]}),(0,Y.jsx)("div",{}),(0,Y.jsxs)(T.Z,{children:[(0,Y.jsxs)("p",{className:"font-weight-bold",children:[m("shop.tax"),":"]}),(0,Y.jsx)("p",{children:(0,le.Z)(O.shop_tax,null===(n=k.currency)||void 0===n?void 0:n.symbol)})]}),(0,Y.jsx)("div",{}),(0,Y.jsxs)(T.Z,{children:[(0,Y.jsxs)("p",{className:"font-weight-bold",children:[m("delivery.fee"),":"]}),(0,Y.jsx)("p",{children:(0,le.Z)(null===(t=O.delivery_fee)||void 0===t?void 0:t.reduce((function(e,n){return e+n}),0),null===(i=k.currency)||void 0===i?void 0:i.symbol)})]}),(0,Y.jsx)("div",{}),(0,Y.jsxs)(T.Z,{children:[(0,Y.jsxs)("p",{className:"font-weight-bold",children:[m("discount"),":"]}),(0,Y.jsxs)("p",{children:["-",(0,le.Z)(O.discount,null===(o=k.currency)||void 0===o?void 0:o.symbol)]})]}),(0,Y.jsx)("div",{}),(0,Y.jsxs)(T.Z,{children:[(0,Y.jsxs)("p",{className:"font-weight-bold",children:[m("coupon"),":"]}),(0,Y.jsxs)("p",{children:["-",(0,le.Z)(null===(d=O.coupon)||void 0===d?void 0:d.reduce((function(e,n){return e+n}),0),null===(v=k.currency)||void 0===v?void 0:v.symbol)]})]}),(0,Y.jsx)("div",{}),(0,Y.jsxs)(T.Z,{children:[(0,Y.jsxs)("p",{className:"font-weight-bold",children:[m("service.fee"),":"]}),(0,Y.jsx)("p",{children:(0,le.Z)(null===O||void 0===O?void 0:O.service_fee,null===(p=k.currency)||void 0===p?void 0:p.symbol)})]}),(0,Y.jsx)("div",{}),(0,Y.jsxs)(T.Z,{children:[(0,Y.jsxs)("p",{className:"font-weight-bold",children:[m("total"),":"]}),(0,Y.jsx)("p",{children:(0,le.Z)(O.order_total,null===(f=k.currency)||void 0===f?void 0:f.symbol)})]})]})})]})})}),U&&(0,Y.jsx)(ce,{extrasModal:U,setExtrasModal:E})]})}var me=t(41481),he=t(95882),xe=t(49067),je=t(51988),ge=function(e){var n=e.form,t=(0,_.$)().t,i=(0,l.useState)(null),o=(0,r.Z)(i,2),d=o[0],u=o[1],p=(0,l.useState)(null),m=(0,r.Z)(p,2),h=m[0],x=m[1],j=(0,l.useState)(null),k=(0,r.Z)(j,2),w=k[0],q=k[1],M=(0,l.useState)(null),N=(0,r.Z)(M,2),I=N[0],P=N[1],C=(0,S.UO)().id,D=(0,Z.I0)(),U=(0,Z.v9)((function(e){return e.order}),Z.wU).data,E=(0,Z.v9)((function(e){return e.product}),Z.wU),A=E.products,B=E.loading;function H(){return H=(0,v.Z)(f().mark((function e(n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.Z.search(n).then((function(e){return e.data.map((function(e){return{label:e.title,value:e.id}}))})));case 1:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function F(){return F=(0,v.Z)(f().mark((function e(n){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,type:"main"},e.abrupt("return",z.Z.search(t).then((function(e){return e.data.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}(0,l.useEffect)((function(){var e,n={perPage:10,page:1,brand_id:null===d||void 0===d?void 0:d.value,category_id:null===h||void 0===h?void 0:h.value,search:w,shop_id:null===(e=U.shop)||void 0===e?void 0:e.value,active:1};D((0,he.q1)(n))}),[d,h,w,U.shop]);function L(){return L=(0,v.Z)(f().mark((function e(n){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:n,status:"approved"},e.abrupt("return",xe.Z.getAll(t).then((function(e){return e.data.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}return(0,Y.jsxs)(y.Z,{title:t("order.details"),extra:(0,Y.jsxs)(T.Z,{wrap:!0,children:[(0,Y.jsx)(g.h,{placeholder:t("select.shop"),fetchOptions:function(e){return L.apply(this,arguments)},style:{minWidth:150},onChange:function(e){D((0,b.HL)(e)),D((0,b.mf)()),n.setFieldsValue({delivery:null,delivery_date:null,delivery_time:null})},allowClear:!1,value:null===U||void 0===U?void 0:U.shop,disabled:C}),(0,Y.jsx)(g.h,{placeholder:t("select.category"),fetchOptions:function(e){return F.apply(this,arguments)},style:{minWidth:150},onChange:function(e){return x(e)},value:h}),(0,Y.jsx)(g.h,{placeholder:t("select.brand"),fetchOptions:function(e){return H.apply(this,arguments)},style:{minWidth:150},onChange:function(e){return u(e)},value:d})]}),children:[(0,Y.jsx)("div",{className:"d-flex justify-content-end mb-4",children:(0,Y.jsx)(me.Z,{placeholder:t("search"),handleChange:q,defaultValue:null===w||void 0===w?void 0:w.search})}),(0,Y.jsxs)("div",{className:"products-row order-items",children:[A.length?A.map((function(e){var n,i,r,l;return(0,Y.jsxs)(y.Z,{className:"products-col",cover:(0,Y.jsx)("img",{alt:null===(n=e.product)||void 0===n||null===(i=n.translation)||void 0===i?void 0:i.title,src:(0,G.Z)(null===e||void 0===e?void 0:e.img)}),onClick:function(){return function(e){U.currency?U.address?U.deliveries?P(e):O.Am.warning(t("please.select.delivery")):O.Am.warning(t("please.select.address")):O.Am.warning(t("please.select.currency"))}(e)},children:[(0,Y.jsx)(K.Z,{title:null===e||void 0===e||null===(r=e.product)||void 0===r||null===(l=r.translation)||void 0===l?void 0:l.title}),(0,Y.jsx)("div",{className:"preview",children:(0,Y.jsx)(J.Z,{})}),e.stocks.map((function(e,n){var t,i;return(0,Y.jsxs)("span",{className:e.bonus?"show-bonus":"d-none",children:[(0,Y.jsx)(fe.ojn,{})," ",null===(t=e.bonus)||void 0===t?void 0:t.value,"+",null===(i=e.bonus)||void 0===i?void 0:i.bonus_quantity]},n)}))]},e.id)})):(0,Y.jsx)(a.Z,{children:(0,Y.jsx)(s.Z,{span:24,children:(0,Y.jsx)(je.Z,{id:"nosell"})})}),B&&(0,Y.jsx)("div",{className:"loader",children:(0,Y.jsx)(c.Z,{})})]}),I&&(0,Y.jsx)(ce,{extrasModal:I,setExtrasModal:P}),(0,Y.jsx)(ye,{form:n})]})},Ze=t(16233),be=t(22054),_e=t(1003),ke=[{label:"progress",value:"progress",key:1},{label:"paid",value:"paid",key:2},{label:"canceled",value:"canceled",key:3},{label:"rejected",value:"rejected",key:4},{label:"refund",value:"refund",key:5}];var we=function(e){var n=e.form,t=(0,_.$)().t,i=(0,S.UO)().id,d=(0,l.useState)((function(){return n.getFieldValue("transactionStatus")})),u=(0,r.Z)(d,2),a=u[0],s=u[1],c=(0,l.useState)(!1),v=(0,r.Z)(c,2),p=v[0],f=v[1];return(0,Y.jsx)(y.Z,{title:t("transaction.details"),children:(0,Y.jsx)(o.Z.Item,{name:"transactionStatus",label:t("transaction.status"),rules:[{required:!0,message:t("required")}],children:(0,Y.jsx)(m.Z,{loading:p,options:ke,onChange:function(e){f(!0),_e.Z.updateStatus(i,{status:e}).then((function(e){s(e.data.transaction.status)})).catch((function(){n.setFieldsValue({transactionStatus:a})})).finally((function(){return f(!1)}))}})})})};function Se(){var e,n=(0,_.$)().t,t=o.Z.useForm(),v=(0,r.Z)(t,1)[0],p=(0,Z.I0)(),f=(0,S.UO)().id,y=(0,S.s0)(),m=(0,l.useState)(!1),h=(0,r.Z)(m,2),x=h[0],j=h[1],g=(0,l.useState)(null),k=(0,r.Z)(g,2),O=k[0],q=k[1],M=(0,l.useState)(!1),N=(0,r.Z)(M,2),I=N[0],P=N[1],C=(0,Z.v9)((function(e){return e.order}),Z.wU),D=C.data,U=C.total,E=C.coupon,A=C.orderProducts,H=C.orderItems,F=(0,Z.v9)((function(e){return e.currency}),Z.wU).currencies,V=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu,R=(0,Z.v9)((function(e){return e.formLang}),Z.wU).defaultLang;function T(e){return{label:e.firstname+" "+(e.lastname||""),value:e.id,uuid:e.uuid,key:e.id}}function $(e){var n,t,i,r,l,o,d,u,a,s,c,v,p,f,y,m,h,x,j,g;return null!==e&&void 0!==e&&e.address?{address:null===e||void 0===e||null===(n=e.address)||void 0===n?void 0:n.address,lat:(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)||(null===e||void 0===e||null===(i=e.address)||void 0===i||null===(r=i.location)||void 0===r?void 0:r.latitude),lng:(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.longitude)||(null===e||void 0===e||null===(o=e.address)||void 0===o||null===(d=o.location)||void 0===d?void 0:d.longitude)}:null!==e&&void 0!==e&&e.delivery_point?{address:null===e||void 0===e||null===(u=e.delivery_point)||void 0===u||null===(a=u.address)||void 0===a?void 0:a[R],lat:null===e||void 0===e||null===(s=e.delivery_point)||void 0===s||null===(c=s.location)||void 0===c?void 0:c.latitude,lng:null===e||void 0===e||null===(v=e.delivery_point)||void 0===v||null===(p=v.location)||void 0===p?void 0:p.longitude}:null!==e&&void 0!==e&&null!==(f=e.my_address)&&void 0!==f&&f.location?{address:null===e||void 0===e||null===(y=e.my_address)||void 0===y||null===(m=y.location)||void 0===m?void 0:m.address,lat:null===e||void 0===e||null===(h=e.my_address)||void 0===h||null===(x=h.location)||void 0===x?void 0:x.latitude,lng:null===e||void 0===e||null===(j=e.my_address)||void 0===j||null===(g=j.location)||void 0===g?void 0:g.longitude}:null}function z(e){var n;return e?{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id,open_time:e.open_time,close_time:e.close_time}:null}var K=function(e,n){var t={payment_sys_id:n.value};j(!0),ne.Z.update(f,e).then((function(e){!function(e,n){_e.Z.create(e,n).then((function(e){q(e.data.id),p((0,b.bn)())})).finally((function(){return j(!1)}))}(e.data.id,t)})).catch((function(){return j(!1)}))};return(0,l.useEffect)((function(){V.refetch&&(P(!0),ne.Z.getById(f).then((function(e){var n,t,r,l,o,d,u,a,s=e.data;p((0,b.oM)({calculate:!0}));var c=s.details.map((function(e){var n,t,r,l,o;return(0,i.Z)((0,i.Z)({},null===e||void 0===e||null===(n=e.stock)||void 0===n?void 0:n.product),{},{stocks:null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.extras,stock:null===e||void 0===e?void 0:e.stock,stockID:null===e||void 0===e?void 0:e.stock,quantity:null===e||void 0===e?void 0:e.quantity,img:null===e||void 0===e||null===(r=e.stock)||void 0===r||null===(l=r.product)||void 0===l?void 0:l.img,price:null===e||void 0===e||null===(o=e.stock)||void 0===o?void 0:o.price,bonus:null===e||void 0===e?void 0:e.bonus,addons:null===e||void 0===e?void 0:e.addons})})),f={product_tax:null===s||void 0===s||null===(n=s.details)||void 0===n||null===(t=n.flatMap((function(e){return null===e||void 0===e?void 0:e.total_price})))||void 0===t?void 0:t.reduce((function(e,n){return e+n}),0),shop_tax:null===s||void 0===s?void 0:s.tax,order_total:null===s||void 0===s?void 0:s.total_price};(0,Z.dC)((function(){var e;p((0,b.r3)(c)),p((0,b.B4)(c)),p((0,b.rU)(f)),p((0,b.dY)(null===s||void 0===s?void 0:s.currency)),p((0,w.nc)({activeMenu:V,data:(0,i.Z)((0,i.Z)({},V.data),{},{addressData:$(s)})})),p((0,b.oM)({userUuid:null===s||void 0===s||null===(e=s.user)||void 0===e?void 0:e.uuid,shop:z(null===s||void 0===s?void 0:s.shop),delivery_type:null===s||void 0===s?void 0:s.delivery_type,delivery_fee:null===s||void 0===s?void 0:s.delivery_fee,delivery_date:JSON.stringify(null===s||void 0===s?void 0:s.delivery_date),delivery_time:null===s||void 0===s?void 0:s.delivery_time,address:$(s),currency:{id:null===s||void 0===s?void 0:s.currency.payment_system},payment_type:null===s||void 0===s?void 0:s.transaction,deliveries:{label:null===s||void 0===s?void 0:s.delivery_type},status:null===s||void 0===s?void 0:s.status}))})),v.setFieldsValue({delivery_time:L()(null===s||void 0===s?void 0:s.delivery_date,"HH:mm"),delivery_date:L()(null===s||void 0===s?void 0:s.delivery_date,"YYYY-MM-DD"),user:T(null===s||void 0===s?void 0:s.user),currency_id:null===s||void 0===s||null===(r=s.currency)||void 0===r?void 0:r.id,payment_type:{label:(null===s||void 0===s||null===(l=s.transaction)||void 0===l||null===(o=l.payment_system)||void 0===o?void 0:o.tag)||"cash",value:(null===s||void 0===s||null===(d=s.transaction)||void 0===d||null===(u=d.payment_system)||void 0===u?void 0:u.id)||1},note:null===s||void 0===s?void 0:s.note,delivery:{label:null===s||void 0===s?void 0:s.delivery_type,value:null===s||void 0===s||null===(a=s.shop)||void 0===a?void 0:a.price},transactionStatus:s.transaction.status})})).finally((function(){P(!1),p((0,w.A_)(V))})))}),[V.refetch]),(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(d.Z,{title:n("edit.order"),extra:(0,Y.jsx)(u.Z,{type:"primary",loading:x,onClick:function(){return v.submit()},disabled:!(null!==A&&void 0!==A&&A.length),children:n("save")})}),(0,Y.jsxs)(o.Z,{name:"order-form",form:v,layout:"vertical",onFinish:function(e){var n,t,i,r,l,o=function(e){var n=null===e||void 0===e?void 0:e.map((function(e){var n,t;return{quantity:e.quantity,stock_id:e.stockID?null===(n=e.stockID)||void 0===n?void 0:n.id:null===(t=e.stock)||void 0===t?void 0:t.id}})),t=null===e||void 0===e?void 0:e.flatMap((function(e){var n;return null===(n=e.addons)||void 0===n?void 0:n.map((function(n){var t,i;return{quantity:n.quantity,stock_id:n.stock_id,parent_id:e.stockID?null===(t=e.stockID)||void 0===t?void 0:t.id:null===(i=e.stock)||void 0===i?void 0:i.id}}))}));return n.concat(t)}(H),d={currency_id:e.currency_id,rate:null===(n=F.find((function(n){return n.id===e.currency_id})))||void 0===n?void 0:n.rate,delivery_fee:D.delivery_fee,coupon:E.coupon,tax:U.order_tax,payment_type:null===(t=e.payment_type)||void 0===t?void 0:t.label,note:e.note,address:{address:null===(i=V.data.addressData)||void 0===i?void 0:i.address,office:null,house:null,floor:null},location:{latitude:null===(r=V.data.addressData)||void 0===r?void 0:r.lat,longitude:null===(l=V.data.addressData)||void 0===l?void 0:l.lng},delivery_date:L()(e.delivery_date).format("YYYY-MM-DD")+" "+L()(e.delivery_time).format("HH:mm"),user_id:e.user.value,products:null===o||void 0===o?void 0:o.filter((function(e){return!!e})),status:null===D||void 0===D?void 0:D.status};K(d,e.payment_type)},className:"order-add",initialValues:{user:D.user||void 0,address:D.address||null,currency_id:null===D||void 0===D||null===(e=D.currency)||void 0===e?void 0:e.id,payment_type:D.payment_type||null},children:[(0,Y.jsxs)(a.Z,{gutter:24,hidden:I,children:[(0,Y.jsx)(s.Z,{span:16,children:(0,Y.jsx)(ge,{form:v})}),(0,Y.jsxs)(s.Z,{span:8,children:[(0,Y.jsx)(B,{form:v}),(0,Y.jsx)(W,{form:v}),(0,Y.jsx)(we,{form:v})]})]}),I&&(0,Y.jsx)("div",{className:"loader",children:(0,Y.jsx)(c.Z,{})})]}),O?(0,Y.jsx)(Ze.Z,{orderId:O,handleClose:function(){q(null);var e="orders-board";(0,Z.dC)((function(){p((0,w.ph)((0,i.Z)((0,i.Z)({},V),{},{nextUrl:e}))),p((0,be.AU)({}))})),y("/".concat(e))}}):""]})}},47168:function(e,n,t){e.exports=t(34317)},91318:function(e,n,t){function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=u(n);if(t&&t.has(e))return t.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=l?Object.getOwnPropertyDescriptor(e,o):null;d&&(d.get||d.set)?Object.defineProperty(r,o,d):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(t(47313)),l=d(t(75192)),o=d(t(93754));function d(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(u=function(e){return e?t:n})(e)}function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a.apply(this,arguments)}function s(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},l=Object.keys(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function c(e){var n=e.onPlaceSelected,t=e.apiKey,i=e.libraries,l=e.inputAutocompleteValue,d=e.options,u=e.googleMapsScriptBaseUrl,c=e.refProp,v=e.language,p=s(e,["onPlaceSelected","apiKey","libraries","inputAutocompleteValue","options","googleMapsScriptBaseUrl","refProp","language"]),f=(0,o.default)({ref:c,googleMapsScriptBaseUrl:u,onPlaceSelected:n,apiKey:t,libraries:i,inputAutocompleteValue:l,options:d,language:v}).ref;return r.default.createElement("input",a({ref:f},p))}c.propTypes={apiKey:l.default.string,libraries:l.default.arrayOf(l.default.string),ref:l.default.oneOfType([l.default.func,l.default.shape({current:l.default.any})]),googleMapsScriptBaseUrl:l.default.string,onPlaceSelected:l.default.func,inputAutocompleteValue:l.default.string,options:l.default.shape({componentRestrictions:l.default.object,bounds:l.default.object,location:l.default.object,offset:l.default.number,origin:l.default.object,radius:l.default.number,sessionToken:l.default.object,types:l.default.arrayOf(l.default.string)}),language:l.default.string};var v=(0,r.forwardRef)((function(e,n){return r.default.createElement(c,a({},e,{refProp:n}))}));n.default=v},34317:function(e,n,t){Object.defineProperty(n,"usePlacesWidget",{enumerable:!0,get:function(){return r.default}});var i=l(t(91318)),r=l(t(93754));function l(e){return e&&e.__esModule?e:{default:e}}},93754:function(e,n,t){function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=e.ref,t=e.onPlaceSelected,i=e.apiKey,d=e.libraries,u=void 0===d?"places":d,s=e.inputAutocompleteValue,c=void 0===s?"new-password":s,v=e.options,p=(v=void 0===v?{}:v).types,f=void 0===p?["(cities)"]:p,y=v.componentRestrictions,m=v.fields,h=void 0===m?["address_components","geometry.location","place_id","formatted_address"]:m,x=v.bounds,j=function(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},l=Object.keys(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}(v,["types","componentRestrictions","fields","bounds"]),g=e.googleMapsScriptBaseUrl,Z=void 0===g?o.GOOGLE_MAP_SCRIPT_BASE_URL:g,b=e.language,_=(0,r.useRef)(null),k=(0,r.useRef)(null),w=(0,r.useRef)(null),S=(0,r.useRef)(null),O=b?"&language=".concat(b):"",q="".concat(Z,"?libraries=").concat(u,"&key=").concat(i).concat(O),M=(0,r.useCallback)((function(){return(0,l.loadGoogleMapScript)(Z,q)}),[Z,q]);return(0,r.useEffect)((function(){var e=a(a({},j),{},{fields:h,types:f,bounds:x});if(y&&(e.componentRestrictions=y),!w.current&&_.current&&l.isBrowser){n&&!n.current&&(n.current=_.current);var r=function(){var n;return"undefined"===typeof google?console.error("Google has not been found. Make sure your provide apiKey prop."):null!==(n=google.maps)&&void 0!==n&&n.places?!_.current instanceof HTMLInputElement?console.error("Input ref must be HTMLInputElement."):(w.current=new google.maps.places.Autocomplete(_.current,e),void(w.current&&(k.current=w.current.addListener("place_changed",(function(){t&&w&&w.current&&t(w.current.getPlace(),_.current,w.current)}))))):console.error("Google maps places API must be loaded.")};return i?M().then((function(){return r()})):r(),function(){return k.current?k.current.remove():void 0}}}),[]),(0,r.useEffect)((function(){var e;(null===r.default||void 0===r.default||null===(e=r.default.version)||void 0===e||!e.startsWith("18"))&&l.isBrowser&&window.MutationObserver&&_.current&&_.current instanceof HTMLInputElement&&(S.current=new MutationObserver((function(){S.current.disconnect(),_.current&&(_.current.autocomplete=c)})),S.current.observe(_.current,{attributes:!0,attributeFilter:["autocomplete"]}))}),[c]),(0,r.useEffect)((function(){w.current&&w.current.setFields(h)}),[h]),(0,r.useEffect)((function(){w.current&&w.current.setBounds(x)}),[x]),(0,r.useEffect)((function(){w.current&&w.current.setComponentRestrictions(y)}),[y]),(0,r.useEffect)((function(){w.current&&w.current.setOptions(j)}),[j]),{ref:_,autocompleteRef:w}};var r=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=d(n);if(t&&t.has(e))return t.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=l?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(t(47313)),l=t(39003),o=t(56236);function d(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:n})(e)}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}}}]);