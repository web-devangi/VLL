(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5435],{55940:(e,l,t)=>{"use strict";t.d(l,{Z:()=>r});t(47313);var n=t(59491),i=t(47515),d=t(23560),o=t(24511),a=t(79492),s=t(46417);function r(e){let{size:l="",onClick:t,type:r="default",...u}=e;const{t:c}=(0,o.$)(),{isDemo:v}=(0,a.Z)();return(0,s.jsx)(n.Z,{size:l,icon:(0,s.jsx)(i.Z,{}),onClick:e=>{v?d.Am.warning(c("cannot.work.demo")):t(e)},type:r,...u})}},53233:(e,l,t)=>{"use strict";t.d(l,{Z:()=>x});var n=t(47313),i=t(56140),d=t(67251),o=t(45705),a=t(86345),s=t(78267),r=t(37388),u=t(59491),c=t(99587),v=t(24511),h=t(46417);const{Text:m}=i.Z,x=e=>{let{columns:l=[],setColumns:t,style:i,size:x="",iconOnly:p}=e;const{t:y}=(0,v.$)(),[f,j]=(0,n.useState)(!1),g=(0,h.jsx)(d.Z,{children:null===l||void 0===l?void 0:l.map(((e,n)=>(0,h.jsx)(d.Z.Item,{children:(0,h.jsxs)(o.Z,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(a.Z,{defaultChecked:!0,onClick:()=>function(e){const n=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,h.jsx)(s.Z,{overlay:g,trigger:["click"],onVisibleChange:e=>{j(e)},visible:f,children:(0,h.jsx)(r.Z,{title:y("change.columns"),children:(0,h.jsx)(u.Z,{style:{...i},size:x,icon:(0,h.jsx)(c.Z,{}),children:p?null:y("Columns")})})})}},73431:(e,l,t)=>{"use strict";t.d(l,{Z:()=>r});var n=t(47313),i=t(39180),d=t(2717),o=t(28830),a=t(60535),s=t(46417);const r=()=>{const e=(0,d.I0)(),{languages:l,defaultLang:t}=(0,d.v9)((e=>e.formLang),d.wU);(0,n.useEffect)((()=>{a.Z.getAllActive().then((l=>{let{data:t}=l;e((0,o.dc)(t)),e((0,o.mh)(t.find((e=>1===e.default)).locale))}))}),[]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.ZP.Group,{value:t,onChange:l=>{let{target:{value:t}}=l;e((0,o.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===l||void 0===l?void 0:l.map((e=>(0,s.jsx)(i.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},41481:(e,l,t)=>{"use strict";t.d(l,{Z:()=>s});var n=t(47313),i=t(66672),d=t(16031),o=t(40765),a=t(46417);function s(e){let{handleChange:l,defaultValue:t,resetSearch:s,...r}=e;const[u,c]=(0,n.useState)(t),v=(0,n.useMemo)((()=>(0,d.debounce)((e=>{l(e)}),800)),[]);return(0,n.useEffect)((()=>{c(t)}),[s]),(0,a.jsx)(i.Z,{value:u,onChange:e=>{c(e.target.value),v(e.target.value)},prefix:(0,a.jsx)(o.Z,{}),...r})}},89281:(e,l,t)=>{"use strict";t.d(l,{h:()=>r});var n=t(47313),i=t(12279),d=t.n(i),o=t(74294),a=t(72652),s=t(46417);const r=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:i,refetchOptions:r=!1,...u}=e;const[c,v]=(0,n.useState)(!1),[h,m]=(0,n.useState)([]),x=(0,n.useMemo)((()=>d()((e=>{m([]),v(!0),l(e).then((e=>{m(e),v(!1)}))}),t)),[l,t]);return(0,s.jsx)(o.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:x,onClear:()=>{x(""),i&&i()},notFoundContent:c?(0,s.jsx)(a.Z,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!r||x("")}})}},13945:(e,l,t)=>{"use strict";function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{Z:()=>n})},84017:(e,l,t)=>{"use strict";function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const n=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?"".concat(n," ").concat(l):"".concat(l," ").concat(n)}t.d(l,{Z:()=>n})},33834:(e,l,t)=>{"use strict";t.d(l,{K:()=>o});var n=t(97890),i=t(74776),d=t.n(i);const o=()=>{const e=(0,n.s0)(),l=(0,n.TH)(),t=d().parse(l.search,{ignoreQueryPrefix:!0});return{values:t,set:(l,n)=>e({search:d().stringify({...t,[l]:n})}),reset:l=>{const n={...t};n[l]&&delete n[l],e({search:d().stringify({...n})})},clear:()=>e({search:d().stringify({})}),merge:l=>e({search:d().stringify({...t,...l})})}}},55508:(e,l,t)=>{"use strict";t.d(l,{Z:()=>r});var n=t(39180),i=(t(47313),t(58821)),d=t(54972),o=t(97890),a=t(46417);const s=[{value:"seller/orders-board",title:"Board",icon:(0,a.jsx)(d.Ez2,{size:20})},{value:"seller/orders",title:"List",icon:(0,a.jsx)(i.Ps6,{size:20})}],r=e=>{let{listType:l}=e;const{type:t}=(0,o.UO)(),i=(0,o.s0)();return(0,a.jsx)(n.ZP.Group,{value:l,onChange:e=>{i("/".concat(e.target.value).concat(t?"/".concat(t):""))},className:"float-right",buttonStyle:"solid",children:null===s||void 0===s?void 0:s.map((e=>(0,a.jsx)(n.ZP.Button,{value:e.value,children:(0,a.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},50110:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>$});var n=t(47313),i=t(99096),d=t(73591),o=t(66204),a=t(45705),s=t(59491),r=t(77181),u=t(74294),c=t(78508),v=t(97890),h=t(12019),m=t(31741),x=t(47515),p=t(55768),y=t(15386),f=t(2717),j=t(90954),g=t(24511),Z=t(80314),C=t(41589),b=t(13945),_=t(41481),w=t(73270),k=t(84017),S=t(89281),I=t(58328),M=t(53233),Y=t(40197),P=t(55940),D=t(74580),z=t(23560),O=t(69658),U=t(62412),A=t(88852),F=t(27107),L=t(55508),B=t(33834),E=t(70816),N=t.n(E),T=t(46417);const{RangePicker:H}=i.Z,{TabPane:V}=d.Z;function $(){var e,l,t,i,E,$,K,q,G,R,J;const Q=(0,f.I0)(),W=(0,v.s0)(),{t:X}=(0,g.$)(),ee=(0,v.UO)(),[le,te]=(0,n.useState)(null),[ne,ie]=(0,n.useState)(null),{setIsModalVisible:de}=(0,n.useContext)(D._),[oe,ae]=(0,n.useState)(!1),{defaultCurrency:se}=(0,f.v9)((e=>e.currency),f.wU),{statusList:re}=(0,f.v9)((e=>e.orderStatus),f.wU),ue=null===ee||void 0===ee?void 0:ee.type,ce=[{name:"all",id:0,active:!0,sort:0},...re],[ve,he]=(0,n.useState)(null),[me,xe]=(0,n.useState)(null),[pe,ye]=(0,n.useState)([{title:X("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:X("client"),dataIndex:"user",key:"user",is_show:!0,render:e=>e?(0,T.jsxs)("div",{children:[(null===e||void 0===e?void 0:e.firstname)||""," ",(null===e||void 0===e?void 0:e.lastname)||""]}):(0,T.jsx)(o.Z,{color:"red",children:X("deleted.user")})},{title:X("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,T.jsxs)("div",{className:"cursor-pointer",children:["new"===e?(0,T.jsx)(o.Z,{color:"blue",children:X(e)}):"canceled"===e?(0,T.jsx)(o.Z,{color:"error",children:X(e)}):(0,T.jsx)(o.Z,{color:"cyan",children:X(e)}),"delivered"!==e&&"canceled"!==e&&1!==l.type?(0,T.jsx)(h.Z,{onClick:e=>{e.stopPropagation(),xe(null===l||void 0===l?void 0:l.id)}}):""]})},{title:X("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:e=>(0,T.jsxs)("div",{children:[(null===e||void 0===e?void 0:e.firstname)||"-"," ",(null===e||void 0===e?void 0:e.lastname)||"-"]})},{title:X("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",is_show:!0,render:e=>(0,T.jsxs)("div",{className:"text-lowercase",children:[e||0," ",X("products")]})},{title:X("amount"),dataIndex:"total_price",key:"total_price",is_show:!0,render:e=>(0,k.Z)(e,null===se||void 0===se?void 0:se.symbol)},{title:X("payment.type"),dataIndex:"transaction",key:"transaction",is_show:!0,render:e=>{var l;return X(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:X("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:e=>N()(e).format("YYYY-MM-DD HH:mm")},{title:X("delivery.date"),is_show:!0,dataIndex:"delivery_date",key:"delivery_date",render:e=>N()(e).format("YYYY-MM-DD HH:mm")},{title:X("options"),key:"options",is_show:!0,render:(e,l)=>(0,T.jsxs)(a.Z,{children:[(0,T.jsx)(s.Z,{icon:(0,T.jsx)(m.Z,{}),onClick:()=>(e=>{Q((0,j.bL)({url:"seller/order/details/".concat(e.id),id:"order_details",name:X("order.details")})),W("/seller/order/details/".concat(e.id))})(l)}),(0,T.jsx)(s.Z,{icon:(0,T.jsx)(h.Z,{}),onClick:()=>De(l),disabled:2!==(null===l||void 0===l?void 0:l.type)||"canceled"===(null===l||void 0===l?void 0:l.status)||"delivered"===(null===l||void 0===l?void 0:l.status)}),(0,T.jsx)(P.Z,{icon:(0,T.jsx)(x.Z,{}),onClick:()=>{te([l.id]),de(!0),ie(!0)}})]})}]),{activeMenu:fe}=(0,f.v9)((e=>e.menu),f.wU),je=(0,B.K)(),[ge,Ze]=(0,n.useState)(je.values.status||"all"),Ce=(null===(e=fe.data)||void 0===e?void 0:e.role)||ge,{orders:be,meta:_e,loading:we,params:ke}=(0,f.v9)((e=>e.sellerOrders),f.wU),[Se,Ie]=(0,n.useState)(null),Me=null===fe||void 0===fe?void 0:fe.data,Ye={search:null===Me||void 0===Me?void 0:Me.search,sort:null===Me||void 0===Me?void 0:Me.sort,column:null===Me||void 0===Me?void 0:Me.column,perPage:null===Me||void 0===Me?void 0:Me.perPage,page:null===Me||void 0===Me?void 0:Me.page,user_id:null===Me||void 0===Me?void 0:Me.user_id,status:"all"===Ce?void 0:Ce,shop_id:null!==(null===(l=fe.data)||void 0===l?void 0:l.shop_id)?null===(t=fe.data)||void 0===t?void 0:t.shop_id:null,delivery_type:ue||(null!==(null===(i=fe.data)||void 0===i?void 0:i.delivery_type)?null===(E=fe.data)||void 0===E?void 0:E.delivery_type:null),date_from:(null===Se||void 0===Se||null===($=Se[0])||void 0===$?void 0:$.format("YYYY-MM-DD"))||void 0,date_to:(null===Se||void 0===Se||null===(K=Se[1])||void 0===K?void 0:K.format("YYYY-MM-DD"))||void 0};(0,Z.Z)((()=>{Q((0,C.AU)(Ye))}),[null===fe||void 0===fe?void 0:fe.data,Se]),(0,n.useEffect)((()=>{null!==fe&&void 0!==fe&&fe.refetch&&(0,f.dC)((()=>{Q((0,C.AU)(Ye)),Q((0,Y.ZL)({})),Q((0,j.A_)(fe))}))}),[null===fe||void 0===fe?void 0:fe.refetch]);const Pe=(e,l)=>{Q((0,j.nc)({activeMenu:fe,data:{...Me,[l]:e}}))};const De=e=>{(0,f.dC)((()=>{Q((0,w.bn)()),Q((0,j.bL)({url:"seller/order/".concat(e.id),id:"seller_order_edit",name:X("edit.order")}))})),W("/seller/order/".concat(e.id))},ze={selectedRowKeys:le,onChange:e=>{te(e)}},Oe=()=>{he(null),xe(null)};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(a.Z,{className:"justify-content-end w-100 mb-3",children:[(0,T.jsx)(L.Z,{listType:"seller/orders"}),(0,T.jsx)(s.Z,{type:"primary",icon:(0,T.jsx)(p.Z,{}),onClick:()=>{Q((0,w.bn)()),Q((0,j.bL)({id:"pos.system",url:"seller/pos-system",name:X("add.order")})),W("/seller/pos-system",{state:{delivery_type:ue}})},style:{width:"100%"},children:X("add.order")})]}),(0,T.jsx)(r.Z,{children:(0,T.jsxs)(a.Z,{wrap:!0,className:"p-0 mb-0",children:[(0,T.jsx)(_.Z,{placeholder:X("search"),handleChange:e=>Pe(e,"search"),defaultValue:null===(q=fe.data)||void 0===q?void 0:q.search}),(0,T.jsx)(S.h,{placeholder:X("select.client"),fetchOptions:async function(e){const l={search:e,perPage:10};return I.Z.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname),value:e.id,key:e.id})))}))},onSelect:e=>Pe(e.value,"search"),onDeselect:()=>Pe(null,"search"),style:{minWidth:200}}),(0,T.jsx)(H,{value:Se,onChange:e=>{Pe(JSON.stringify(e),"data_time"),Ie(e)},disabledDate:e=>e&&e>N()().endOf("day"),style:{width:"100%"}}),!ue&&(0,T.jsx)(u.Z,{value:null===Me||void 0===Me?void 0:Me.delivery_type,placeholder:X("order.type"),onSelect:e=>Pe(e,"delivery_type"),options:[{label:X("pickup"),value:"pickup"},{label:X("delivery"),value:"delivery"}],allowClear:!0,style:{width:"100%"},onDeselect:()=>Pe(null,"delivery_type")}),(0,T.jsx)(s.Z,{icon:(0,T.jsx)(y.Z,{}),onClick:()=>{(0,f.dC)((()=>{Q((0,C.H5)()),Q((0,j.nc)({activeMenu:fe,data:null}))})),Q((0,C.AU)({status:"all",page:null===Me||void 0===Me?void 0:Me.page,perPage:10}))},children:X("clear")}),(0,T.jsx)(P.Z,{size:"",onClick:()=>{null===le||0===le.length?z.Am.warning(X("select.the.product")):(de(!0),ie(!1))},children:X("delete.selected")}),(0,T.jsx)(M.Z,{columns:pe,setColumns:ye})]})}),(0,T.jsxs)(r.Z,{children:[(0,T.jsx)(d.Z,{onChange:e=>{const l=e;Q((0,j.nc)({activeMenu:fe,data:{role:l,page:1}})),Ze(e),W("?status=".concat(l))},type:"card",activeKey:Ce,children:ce.filter((e=>!0===e.active)).map((e=>(0,T.jsx)(V,{tab:X(e.name)},e.name)))}),(0,T.jsx)(c.Z,{scroll:{x:!0},rowSelection:ze,columns:null===pe||void 0===pe?void 0:pe.filter((e=>e.is_show)),dataSource:be,loading:we,pagination:{pageSize:ke.perPage,page:(null===(G=fe.data)||void 0===G?void 0:G.page)||1,total:null===_e||void 0===_e?void 0:_e.total,defaultCurrent:null===(R=fe.data)||void 0===R?void 0:R.page,current:null===(J=fe.data)||void 0===J?void 0:J.page},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:n,current:i}=e,{field:d,order:o}=t,a=(0,b.Z)(o);Q((0,j.nc)({activeMenu:fe,data:{...Me,perPage:n,page:i,column:d,sort:a}}))}}),(0,T.jsx)(O.Z,{click:()=>{ae(!0);const e={...Object.assign({},...le.map(((e,l)=>({["ids[".concat(l,"]")]:e}))))};U.Z.delete(e).then((()=>{z.Am.success(X("successfully.deleted")),de(!1),Q((0,C.AU)(Ye)),ie(null)})).finally((()=>ae(!1)))},text:X(ne?"delete":"all.delete"),loading:oe,setText:te})]}),me&&(0,T.jsx)(F.Z,{orderId:me,handleCancel:Oe,refetchPage:()=>(0,f.dC)((()=>{Q((0,C.AU)(Ye)),Q((0,j.A_)(fe))}))}),ve&&(0,T.jsx)(A.Z,{orderDetails:ve,handleCancel:Oe})]})}},88852:(e,l,t)=>{"use strict";t.d(l,{Z:()=>y});var n=t(47313),i=t(10976),d=t(9274),o=t(59491),a=t(68197),s=t(59624),r=t(2717),u=t(62412),c=t(90954),v=t(24511),h=t(94291),m=t(89281),x=t(58328),p=t(46417);function y(e){var l;let{orderDetails:t,handleCancel:y}=e;const{t:f}=(0,v.$)(),{activeMenu:j}=(0,r.v9)((e=>e.menu),r.wU),{deliverymans:g}=(0,r.v9)((e=>e.deliveryman),r.wU),[Z]=i.Z.useForm(),C=(0,r.I0)(),[b,_]=(0,n.useState)(!1);(0,n.useEffect)((()=>{C((0,h.EH)())}),[]);return(0,p.jsx)(d.Z,{visible:!!t,title:t.title,onCancel:y,footer:[(0,p.jsx)(o.Z,{type:"primary",onClick:()=>Z.submit(),loading:b,children:f("save")}),(0,p.jsx)(o.Z,{type:"default",onClick:y,children:f("cancel")})],children:(0,p.jsx)(i.Z,{form:Z,layout:"vertical",onFinish:e=>{const l={deliveryman:e.deliveryman.value};_(!0),u.Z.updateDelivery(t.id,l).then((()=>{y(),C((0,c.xo)(j))})).finally((()=>_(!1)))},initialValues:{deliveryman:null===(l=t.deliveryman)||void 0===l?void 0:l.id},children:(0,p.jsx)(a.Z,{gutter:12,children:(0,p.jsx)(s.Z,{span:24,children:(0,p.jsx)(i.Z.Item,{label:f("deliveryman"),name:"deliveryman",rules:[{required:!0,message:f("required")}],children:(0,p.jsx)(m.h,{fetchOptions:e=>{const l={perPage:10,page:1,search:e};return x.Z.getDeliverymans(l).then((e=>e.data.map((e=>({label:e.firstname,value:e.id})))))}})})})})})})}},27107:(e,l,t)=>{"use strict";t.d(l,{Z:()=>_});var n=t(47313),i=t(35432),d=t(10976),o=t(9274),a=t(59491),s=t(68197),r=t(59624),u=t(66672),c=t(46155),v=t(74294),h=t(2717),m=t(24511),x=t(62412),p=t(51282),y=t(73431),f=t(20052),j=t(12019),g=t(70816),Z=t.n(g),C=t(46417);const{Panel:b}=i.Z;function _(e){var l;let{orderId:t,handleCancel:g,refetchPage:_}=e;const{statusList:w}=(0,h.v9)((e=>e.orderStatus),h.wU),{defaultLang:k,languages:S}=(0,h.v9)((e=>e.formLang),h.wU),[I]=d.Z.useForm(),{t:M}=(0,m.$)(),Y=(0,n.useRef)(null),[P,D]=(0,n.useState)(!1),[z,O]=(0,n.useState)(!1),[U,A]=(0,n.useState)(null!==w&&void 0!==w&&w.length?w.map((e=>({value:null===e||void 0===e?void 0:e.name,label:M(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))):[]),[F,L]=(0,n.useState)(null),[B,E]=(0,n.useState)(null),[N,T]=(0,n.useState)(null),[H,V]=(0,n.useState)(null);(0,n.useEffect)((()=>{D(!0),x.Z.getById(t).then((e=>{var l,t,n,i;L(e.data),E(null===(l=e.data)||void 0===l||null===(t=l.notes)||void 0===t?void 0:t.filter((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)}))),V(null===(n=e.data)||void 0===n?void 0:n.status),I.setFieldsValue({status:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.status})})).finally((()=>D(!1)))}),[t]),(0,n.useEffect)((()=>{var e,l;if("pause"===(null===F||void 0===F?void 0:F.status))return void A(null===w||void 0===w?void 0:w.map((e=>({value:null===e||void 0===e?void 0:e.name,label:M(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))));const t=w.findIndex((e=>e.name===(null===F||void 0===F?void 0:F.status))),n=t>=0?[w[t],t<w.length-1?"pause"===(null===(e=w[t+1])||void 0===e?void 0:e.name)?w[t+2]:w[t+1]:null]:[t<w.length-1?w[t+1]:null];var i;("on_a_way"===(null===(l=w[t])||void 0===l?void 0:l.name)&&n.push(w[t+3]),null!==w&&void 0!==w&&w.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))&&(null===n||void 0===n||n.push(null===w||void 0===w||null===(i=w.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))||void 0===i?void 0:i[0]));n.push({name:"canceled",id:8,active:!0,sort:(null===w||void 0===w?void 0:w.length)+1}),A(n.filter(Boolean).map((e=>({value:null===e||void 0===e?void 0:e.name,label:M(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))))}),[F]);const $=e=>{const l=Object.entries(e).filter((e=>{let[l,t]=e;return!!t}));if(0!==(null===l||void 0===l?void 0:l.length))return Object.fromEntries(l)};return(0,n.useEffect)((()=>{var e;I.setFieldsValue({["title[".concat(k||"en","]")]:null===N||void 0===N||null===(e=N.title)||void 0===e?void 0:e[k||"en"]})}),[k]),(0,C.jsx)(o.Z,{visible:!!t,title:[M("order.status")],onCancel:g,footer:[(0,C.jsx)(a.Z,{type:"primary",onClick:()=>I.submit(),loading:z,children:M("save")},"save-form"),(0,C.jsx)(a.Z,{type:"default",onClick:g,children:M("cancel")},"cansel-modal")],children:P?(0,C.jsx)(p.Z,{}):(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(d.Z,{form:I,layout:"vertical",onFinish:e=>{var l;let t=null;O(!0),N&&(null===e||void 0===e?void 0:e.status)===(null===F||void 0===F?void 0:F.status)&&(t={...Object.assign({},...S.map((l=>({[l.locale]:e["title[".concat(l.locale,"]")]}))))},t=$(t));const n=$({...Object.assign({},...S.map((l=>({[l.locale]:e["note[".concat(l.locale,"]")]}))))}),i=n?{title:n}:null,d=(null===F||void 0===F?void 0:F.status)===(null===e||void 0===e?void 0:e.status)?null===F||void 0===F||null===(l=F.notes)||void 0===l?void 0:l.filter((l=>(null===l||void 0===l?void 0:l.status)===(null===e||void 0===e?void 0:e.status))).flatMap((e=>{var l;return null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((e,l)=>l===(null===N||void 0===N?void 0:N.index)?{...e,title:{...null===e||void 0===e?void 0:e.title,...t}}:e))})).filter(Boolean):[],o={status:null===e||void 0===e?void 0:e.status,notes:[...d,i].filter(Boolean)};x.Z.updateStatus(F.id,o).then((()=>{g(),_()})).finally((()=>O(!1)))},name:"order-status-change-form",children:[(0,C.jsx)(s.Z,{gutter:12,style:{marginBottom:"20px"},children:(0,C.jsx)(r.Z,{span:24,children:(0,C.jsx)(y.Z,{})})}),!(null===F||void 0===F||null===(l=F.notes)||void 0===l||!l.some((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)})))&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(i.Z,{children:null===B||void 0===B?void 0:B.map((e=>{var l;return(0,C.jsx)(b,{header:M(null===e||void 0===e?void 0:e.status),children:(null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((l,t)=>{var n,i,o;return(0,C.jsxs)(s.Z,{style:{marginBottom:"15px",display:"flex",justifyContent:"space-between"},gutter:12,children:[(0,C.jsxs)(r.Z,{span:(null===e||void 0===e?void 0:e.status)===(null===F||void 0===F?void 0:F.status)&&H===(null===F||void 0===F?void 0:F.status)?22:24,children:[(0,C.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,C.jsxs)("span",{style:{marginTop:"3px"},children:[t+1,"."," "]}),(0,C.jsxs)("div",{style:{width:"100%"},children:[(0,C.jsx)("p",{style:{margin:0,fontSize:"15px",wordBreak:"break-all"},hidden:(null===N||void 0===N?void 0:N.orderId)===(null===e||void 0===e?void 0:e.id)&&(null===N||void 0===N?void 0:N.index)===t&&(null===F||void 0===F?void 0:F.status)===H,children:(null===l||void 0===l||null===(n=l.title)||void 0===n?void 0:n[k||"en"])||"--"}),(0,C.jsx)(d.Z.Item,{name:"title[".concat(k||"en","]"),hidden:(null===N||void 0===N?void 0:N.orderId)!==(null===e||void 0===e?void 0:e.id)||(null===N||void 0===N?void 0:N.index)!==t||(null===F||void 0===F?void 0:F.status)!==H,children:(0,C.jsx)(u.Z.TextArea,{maxLength:200,style:{width:"100%"},rows:Math.floor((null===l||void 0===l||null===(i=l.title)||void 0===i||null===(o=i[k||"en"])||void 0===o?void 0:o.length)/41||0)+1,ref:Y},t)})]})]}),(0,C.jsx)("p",{style:{fontSize:"12px",margin:0,float:"right"},children:Z()(null===l||void 0===l?void 0:l.created_at).format("DD-MM-YYYY HH:mm")})]}),(null===e||void 0===e?void 0:e.status)===(null===F||void 0===F?void 0:F.status)&&(null===F||void 0===F?void 0:F.status)===H&&(0,C.jsx)(r.Z,{span:2,children:(null===N||void 0===N?void 0:N.orderId)===(null===e||void 0===e?void 0:e.id)&&t===(null===N||void 0===N?void 0:N.index)?(0,C.jsx)(a.Z,{type:"primary",icon:(0,C.jsx)(f.Z,{}),size:"small",onClick:()=>I.submit(),loading:z}):(null===e||void 0===e?void 0:e.status)===(null===F||void 0===F?void 0:F.status)&&(0,C.jsx)(a.Z,{icon:(0,C.jsx)(j.Z,{}),size:"small",onClick:()=>{var n;Y.current.focus(),T({orderId:null===e||void 0===e?void 0:e.id,index:t,title:null===l||void 0===l?void 0:l.title}),I.setFieldsValue({["title[".concat(k||"en","]")]:null===l||void 0===l||null===(n=l.title)||void 0===n?void 0:n[k||"en"]})}})})]},t)})))||"--"},null===e||void 0===e?void 0:e.id)}))}),(0,C.jsx)(c.Z,{})]}),(0,C.jsxs)(s.Z,{gutter:12,children:[(0,C.jsx)(r.Z,{span:24,children:(0,C.jsx)(d.Z.Item,{label:M("status"),name:"status",rules:[{required:!0,message:M("required")}],children:(0,C.jsx)(v.Z,{options:U,onSelect:e=>V(e)})})}),(0,C.jsx)(r.Z,{span:24,children:S.map((e=>(0,C.jsx)(d.Z.Item,{name:"note[".concat(null===e||void 0===e?void 0:e.locale,"]"),label:M("note"),hidden:(null===e||void 0===e?void 0:e.locale)!==k,children:(0,C.jsx)(u.Z.TextArea,{maxLength:200})},"note_".concat(null===e||void 0===e?void 0:e.id))))})]})]})})})}},24654:()=>{}}]);