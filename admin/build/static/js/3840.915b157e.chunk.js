"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3840],{11101:function(e,n,t){var i=t(34344),l={getAll:function(e){return i.Z.get("rest/brands/paginate",{params:e})},getById:function(e,n){return i.Z.get("rest/brands/".concat(e),{params:n})}};n.Z=l},29955:function(e,n,t){var i=t(34344),l={getAll:function(e){return i.Z.get("dashboard/seller/categories/paginate",{params:e})},getById:function(e,n){return i.Z.get("dashboard/seller/categories/".concat(e),{params:n})},search:function(e){return i.Z.get("dashboard/seller/categories/search",{params:e})},paginateSelect:function(e){return i.Z.get("dashboard/seller/categories/select-paginate",{params:e})}};n.Z=l},33403:function(e,n,t){var i=t(34344),l={getAll:function(e){return i.Z.get("dashboard/seller/units/paginate",{params:e})},getById:function(e,n){return i.Z.get("dashboard/seller/units/".concat(e),{params:n})}};n.Z=l},16137:function(e,n,t){t.d(n,{Z:function(){return b}});var i=t(93433),l=t(4942),a=t(1413),r=t(29439),o=t(47313),u=t(10976),d=t(9274),s=t(59491),c=t(66672),v=t(74294),p=t(24511),f=t(73431),m=t(2717),Z=t(22307),x=t(23560),h=t(97340),g=t(75336),j=t(51282),y=t(46417);function b(e){var n=e.modal,t=e.handleCancel,b=e.onSuccess,k=u.Z.useForm(),q=(0,r.Z)(k,1)[0],_=(0,p.$)().t,I=(0,m.I0)(),w=(0,o.useState)(!1),S=(0,r.Z)(w,2),C=S[0],O=S[1],F=(0,o.useState)(!1),N=(0,r.Z)(F,2),V=N[0],M=N[1],U=(0,m.v9)((function(e){return e.formLang}),m.wU),A=U.languages,E=U.defaultLang;function L(e){M(!0),Z.Z.getGroupById(e).then((function(e){var n=e.data;q.setFieldsValue((0,a.Z)((0,a.Z)({},n),function(e){if(!e)return{};var n=e.translations,t=A.map((function(e){var t;return(0,l.Z)({},"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title)}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(t)))}(n)))})).finally((function(){return M(!1)}))}(0,o.useEffect)((function(){null!==n&&void 0!==n&&n.id&&L(n.id),I((0,h.nz)())}),[n]);return(0,y.jsx)(d.Z,{title:null!==n&&void 0!==n&&n.id?_("edit.extra.group"):_("add.extra.group"),visible:!!n,onCancel:t,footer:[(0,y.jsx)(s.Z,{type:"primary",onClick:function(){return q.submit()},loading:C,children:_("save")},"save-button-group"),(0,y.jsx)(s.Z,{type:"default",onClick:t,children:_("cancel")},"cancel-button-group")],children:V?(0,y.jsx)(j.Z,{}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"d-flex justify-content-end",children:(0,y.jsx)(f.Z,{})}),(0,y.jsxs)(u.Z,{layout:"vertical",name:"extra-group",form:q,onFinish:function(e){var i={title:(0,g.Z)(A,e),type:null===e||void 0===e?void 0:e.type};null!==n&&void 0!==n&&n.id?function(e,n){O(!0),Z.Z.updateGroup(e,n).then((function(){x.Am.success(_("successfully.updated")),I((0,h.nz)()),t()})).finally((function(){return O(!1)}))}(null===n||void 0===n?void 0:n.id,i):function(e){O(!0),Z.Z.createGroup(e).then((function(){x.Am.success(_("successfully.created")),t(),I((0,h.nz)()),b&&b()})).finally((function(){return O(!1)}))}(i)},children:[A.map((function(e){return(0,y.jsx)(u.Z.Item,{rules:[{required:e.locale===E,message:_("required")}],name:"title[".concat(e.locale,"]"),label:_("title"),hidden:e.locale!==E,children:(0,y.jsx)(c.Z,{placeholder:_("title")})},"title"+e.locale)})),(0,y.jsx)(u.Z.Item,{name:"type",label:_("type"),rules:[{required:!0,message:_("required")}],children:(0,y.jsxs)(v.Z,{style:{width:"100%"},placeholder:_("select.extra.type"),children:[(0,y.jsx)(v.Z.Option,{value:"color",children:_("color")}),(0,y.jsx)(v.Z.Option,{value:"text",children:_("text")})]})})]})]})})}},84963:function(e,n,t){t.d(n,{Z:function(){return g}});var i=t(29439),l=t(10976),a=t(66672),r=t(9274),o=t(59491),u=t(47313),d=t(8922),s=t(24511),c=t(2717),v=t(23560),p=t(20503),f=t(8550),m=t(34319),Z=t(22307),x=t(89281),h=t(46417);function g(e){var n,t,g,j,y=e.modal,b=e.handleCancel,k=e.isVisible,q=e.paramsData,_=l.Z.useForm(),I=(0,i.Z)(_,1)[0],w=(0,s.$)().t,S=(0,c.I0)(),C=(0,u.useState)(!1),O=(0,i.Z)(C,2),F=O[0],N=O[1],V=(0,u.useState)("text"),M=(0,i.Z)(V,2),U=M[0],A=M[1],E=(0,u.useState)(null),L=(0,i.Z)(E,2),P=L[0],W=L[1],B=(0,u.useState)(""),G=(0,i.Z)(B,2),T=G[0],z=G[1];(0,u.useEffect)((function(){if(null!==y&&void 0!==y&&y.id){switch(A(y.group.type),y.group.type){case"color":z(y.value);break;case"image":W((0,f.Z)(y.value))}I.setFieldsValue(y)}}),[y]);function H(e,n){switch(e){case"color":return n.hex;case"text":return n;case"image":return n.name;default:return""}}return(0,h.jsx)(r.Z,{title:null!==y&&void 0!==y&&y.id?w("edit.extra"):w("add.extra"),visible:k,onCancel:b,footer:[(0,h.jsx)(o.Z,{type:"primary",onClick:function(){return I.submit()},loading:F,children:w("save")}),(0,h.jsx)(o.Z,{type:"default",onClick:b,children:w("cancel")})],children:(0,h.jsxs)(l.Z,{name:"extra-form",layout:"vertical",form:I,onFinish:function(e){var n,t,i={extra_group_id:null!==(n=e.extra_group_id.value)&&void 0!==n?n:e.extra_group_id,value:null!==(t=H(U,e.value))&&void 0!==t?t:e.value};null!==y&&void 0!==y&&y.id?function(e,n){N(!0),Z.Z.updateValue(e,n).then((function(){v.Am.success(w("successfully.updated")),b(),S((0,m.MH)(q))})).finally((function(){N(!1),I.resetFields()}))}(y.id,i):function(e){N(!0),Z.Z.createValue(e).then((function(){v.Am.success(w("successfully.created")),b(),S((0,m.MH)(q))})).finally((function(){N(!1),I.resetFields()}))}(i)},initialValues:{extra_group_id:null!==y&&void 0!==y&&y.group?{label:null===y||void 0===y||null===(n=y.group)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title,value:null===y||void 0===y||null===(g=y.group)||void 0===g?void 0:g.id,key:null===y||void 0===y||null===(j=y.group)||void 0===j?void 0:j.id}:[]},children:[(0,h.jsx)(l.Z.Item,{name:"extra_group_id",label:w("extra.group"),rules:[{required:!0,message:"required"}],children:(0,h.jsx)(x.h,{fetchOptions:function(e){var n={perPage:10,page:1,search:e};return Z.Z.getAllGroups(n).then((function(e){return e.data.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id,key:"".concat(null===e||void 0===e?void 0:e.type,",").concat(null===e||void 0===e?void 0:e.id)}}))}))},placeholder:w("select.extra.group"),allowClear:!0,onChange:function(e){var n;A(null===e||void 0===e||null===(n=e.key)||void 0===n?void 0:n.split(",")[0]),I.setFieldsValue({value:""})}})}),(0,h.jsx)(l.Z.Item,{name:"value",label:w("value"),rules:[{required:!0,message:"required"}],children:function(e){switch(e){case"color":return(0,h.jsx)(d.xS,{onChangeComplete:function(e){return z(e.hex)},color:T,disableAlpha:!0});case"text":return(0,h.jsx)(a.Z,{placeholder:w("enter.extra.value")});case"image":return(0,h.jsx)(p.Z,{type:"extras",image:P,setImage:W,form:I,name:"value"});default:return""}}(U)})]})})}},89904:function(e,n,t){t.d(n,{Z:function(){return M}});var i=t(93433),l=t(1413),a=t(29439),r=t(47313),o=t(77181),u=t(10976),d=t(45705),s=t(59491),c=t(2717),v=t(90954),p=t(24511),f=t(97890),m=t(9274),Z=t(32697),x=t(98276),h=t(42346),g=t(41068),j=t(5170),y=t(84963),b=t(82138),k=t(34273),q=t(7142),_=t(46417),I=function(e){var n=e.extra,t=e.onClose,i=e.onSelect,l=(0,p.$)().t,o=(0,r.useState)(!1),u=(0,a.Z)(o,2),c=u[0],v=u[1],f=(0,r.useState)([]),I=(0,a.Z)(f,2),w=I[0],S=I[1],C=(0,r.useState)([]),O=(0,a.Z)(C,2),F=O[0],N=O[1],V=(0,r.useState)(!1),M=(0,a.Z)(V,2),U=M[0],A=M[1];function E(e){v(!0),j.Z.getGroupById(e).then((function(e){return S(e.data.extra_values.map((function(e){return{label:e.value,value:e.id,group_type:e.group.type}})))})).finally((function(){v(!1)}))}return(0,r.useEffect)((function(){var e;null!==n&&void 0!==n&&n.value&&!U&&(E(n.value),N((null===n||void 0===n||null===(e=n.values)||void 0===e?void 0:e.map((function(e){return e.value})))||[]))}),[null===n||void 0===n?void 0:n.value,U]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(m.Z,{visible:!!n,onCancel:t,footer:[(0,_.jsx)(s.Z,{onClick:t,children:l("cancel")}),!c&&w.length>0&&(0,_.jsx)(s.Z,{onClick:function(){var e=[];w.forEach((function(n){F.forEach((function(t){n.value===t&&e.push(n)}))})),i(null===n||void 0===n?void 0:n.value,e),t()},type:"primary",children:l("save")})],children:[(0,_.jsx)(q.ZP,{autoHide:!0,autoHeight:!0,autoHeightMin:"60vh",autoHeightMax:"60vh",children:(0,_.jsx)(Z.Z.Group,{value:F,onChange:function(e){N(e)},className:"w-100",children:0!==(null===w||void 0===w?void 0:w.length)||c?(0,_.jsx)(h.ZP,{dataSource:w,loading:c,renderItem:function(e){return(0,_.jsx)(h.ZP.Item,{children:(0,_.jsx)(Z.Z,{value:e.value,children:"color"===e.group_type?(0,_.jsxs)(d.Z,{size:"small",children:[(0,_.jsx)(g.Z,{className:"extras-color-badge",color:null===e||void 0===e?void 0:e.label}),(0,k.B)(null===e||void 0===e?void 0:e.label),(0,_.jsxs)("span",{children:["(",null===e||void 0===e?void 0:e.label,")"]})]}):(0,_.jsx)("span",{children:null===e||void 0===e?void 0:e.label})})})}}):(0,_.jsx)(x.Z,{})})}),c?null:(0,_.jsx)(s.Z,{type:"link",onClick:function(){return A(!0)},style:{paddingLeft:0},icon:(0,_.jsx)(b.Z,{}),children:l("add.new.extra")})]}),n&&(0,_.jsx)(y.Z,{isVisible:U,modal:{label:null===n||void 0===n?void 0:n.label,value:null===n||void 0===n?void 0:n.id,key:null===n||void 0===n?void 0:n.id},handleCancel:function(){return A(!1)},groupId:null===n||void 0===n?void 0:n.value,onSuccess:function(){return E(null===n||void 0===n?void 0:n.value)}})]})},w=t(3394),S=t(66672),C=t(66204),O=t(16137),F=t(71136),N=function(e){var n=e.open,t=e.onClose,i=e.selectedExtras,o=e.onSelect,u=(0,p.$)().t,d=(0,r.useState)([]),c=(0,a.Z)(d,2),v=c[0],f=c[1],Z=(0,r.useState)(!1),x=(0,a.Z)(Z,2),g=x[0],y=x[1],k=(0,r.useState)(!1),q=(0,a.Z)(k,2),I=q[0],w=q[1],N=(0,r.useState)(""),V=(0,a.Z)(N,2),M=V[0],U=V[1],A=(0,F.Z)(M,500),E=function(e){y(!0);var n={valid:1,perPage:100,search:e};j.Z.getAllGroups(n).then((function(e){var n=e.data.map((function(e){var n;return{id:e.id,label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,shop_id:e.shop_id,group:(0,l.Z)({},e)}}));f(n)})).finally((function(){return y(!1)}))};return(0,r.useEffect)((function(){n&&E(A)}),[n,A]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(m.Z,{visible:n,onCancel:function(){t(),U("")},footer:null,children:[(0,_.jsx)(S.Z,{className:"mt-3",value:M,onChange:function(e){return U(e.target.value)}}),(0,_.jsx)(h.ZP,{loading:g,dataSource:v.filter((function(e){return!(null!==i&&void 0!==i&&i.some((function(n){return n.id===e.id})))})),renderItem:function(e){return(0,_.jsx)(h.ZP.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,_.jsx)(C.Z,{children:u("admin")}),style:{cursor:"pointer"},onClick:function(){o(e)},children:e.label})},footer:g?null:(0,_.jsx)(s.Z,{type:"link",onClick:function(){return w(!0)},style:{paddingLeft:0},icon:(0,_.jsx)(b.Z,{}),children:u("add.new.extra")})})]}),(0,_.jsx)(O.Z,{modal:I,handleCancel:function(){return w(!1)},onSuccess:function(){return E()}})]})},V=t(23560),M=function(e){e.next;var n,t=e.prev,m=e.isRequest,Z=e.mode,x=(0,p.$)().t,h=(0,c.I0)(),g=(0,f.UO)(),j=g.uuid,y=g.id,b=(0,f.s0)(),k=(0,f.TH)(),q=(0,c.v9)((function(e){return e.menu}),c.wU).activeMenu,S=(0,r.useState)(!1),C=(0,a.Z)(S,2),O=C[0],F=C[1],M=(0,r.useState)(!1),U=(0,a.Z)(M,2),A=U[0],E=U[1],L=(0,r.useState)((null===(n=q.data)||void 0===n?void 0:n.extras)||[]),P=(0,a.Z)(L,2),W=P[0],B=P[1],G=(0,r.useState)(null),T=(0,a.Z)(G,2),z=T[0],H=T[1],$=(0,r.useState)(!1),R=(0,a.Z)($,2),D=R[0],K=R[1],X=(0,c.v9)((function(e){return e.globalSettings})).settings;return(0,_.jsx)(o.Z,{children:(0,_.jsxs)(u.Z,{layout:"vertical",initialValues:(0,l.Z)({},q.data),onFinish:function(){var e,n;if(W.some((function(e){var n;return 0===(null===(n=e.values)||void 0===n?void 0:n.length)||!e.values})))V.Am.error(x("please.select.at.least.1.extra.value.for.each.extra"));else{W.map((function(e){return e.value})).sort((function(e,n){return e-n}));var t=k.state;if(m)return h((0,v.nc)({activeMenu:q,data:(0,l.Z)((0,l.Z)({},q.data),{},{extras:W})})),void b("/seller/product-request/".concat(y,"?step=2"),{state:{generate:D}});if((D||k.state)&&"edit"===Z&&(null===(e=k.state)||void 0===e||!e.create)&&"0"===(null===X||void 0===X?void 0:X.product_auto_approve))return k.state?t.extras=W:t=(0,l.Z)((0,l.Z)({},q.data),{},{extras:W}),h((0,v.nc)({activeMenu:q,data:(0,l.Z)((0,l.Z)({},q.data),{},{extras:W})})),void b("/seller/product/".concat(j,"?step=2"),{state:t});F(!0),h((0,v.nc)({activeMenu:q,data:(0,l.Z)((0,l.Z)({},q.data),{},{extras:W})})),b("/seller/product/".concat(j,"?step=2"),{state:{create:null===(n=k.state)||void 0===n?void 0:n.create}})}},children:[(0,_.jsx)(N,{open:A,onClose:function(){return E(!1)},selectedExtras:W,onSelect:function(e){K(!0),B((function(n){return[].concat((0,i.Z)(n),[e])})),E(!1)}}),(0,_.jsx)(I,{extra:z,onClose:function(){return H(null)},onSelect:function(e,n){K(!0),B((function(t){return t.map((function(t){if(t.value===e){var i=n.map((function(e){var n,t,i=null===(n=q.data)||void 0===n||null===(t=n.extras)||void 0===t?void 0:t.flatMap((function(e){return e.values})).find((function(n){return n.value===e.value}));return(0,l.Z)((0,l.Z)({},e),{},{stock_id:null===i||void 0===i?void 0:i.stock_id})}));return(0,l.Z)((0,l.Z)({},t),{},{values:i})}return t}))}))}}),(0,_.jsx)(d.Z,{className:"w-100",size:"middle",direction:"vertical",children:W.map((function(e){var n;return(0,_.jsxs)(d.Z,{className:"w-100",direction:"vertical",children:[(0,_.jsxs)(d.Z,{className:"w-100",wrap:!0,children:[(0,_.jsx)(s.Z,{onClick:function(){return H(e)},ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(n=e.values)||void 0===n?void 0:n.map((function(n){return(0,_.jsxs)("div",{className:"extra-value",children:[null===n||void 0===n?void 0:n.label," ",(0,_.jsx)("button",{onClick:function(){return t=e.value,i=n.value,K(!0),void B((function(e){return e.map((function(e){return e.value===t?(0,l.Z)((0,l.Z)({},e),{},{values:(null===e||void 0===e?void 0:e.values.filter((function(e){return e.value!==i})))||[]}):e}))}));var t,i},type:"button",className:"extra-clear",children:(0,_.jsx)(w.IOM,{})})]},n.value)}))]}),(0,_.jsx)(d.Z,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,_.jsx)(s.Z,{danger:!0,onClick:function(){return n=e,K(!0),void B((function(e){return e.filter((function(e){return e.id!==n.id}))}));var n},type:"text",children:x("delete")})})]},e.id)}))}),(0,_.jsx)(s.Z,{onClick:function(){return E(!0)},className:"w-100 my-3",type:"dashed",children:x("add.extra")}),(0,_.jsxs)(d.Z,{className:"mt-3",children:[(0,_.jsx)(s.Z,{onClick:t,children:x("prev")}),(0,_.jsx)(s.Z,{type:"primary",htmlType:"submit",loading:O,children:x("next")})]})]})})}},44902:function(e,n,t){var i=t(93433),l=t(4942),a=t(1413),r=t(29439),o=t(47313),u=t(77181),d=t(83371),s=t(68197),c=t(59624),v=t(45705),p=t(59491),f=t(72652),m=t(2717),Z=t(97890),x=t(90954),h=t(95882),g=t(24511),j=t(18333),y=t(97421),b=t(81218),k=t(23560),q=t(46417);n.Z=function(e){var n,t,_,I,w,S,C,O,F,N,V,M=e.prev,U=e.isRequest,A=e.mode,E=(0,g.$)().t,L=(0,m.v9)((function(e){return e.menu}),m.wU),P=L.activeMenu,W=(0,m.v9)((function(e){return e.formLang}),m.wU),B=W.defaultLang,G=W.languages,T=(0,Z.s0)(),z=(0,Z.TH)().state,H=(0,m.I0)(),$=(0,o.useState)({}),R=(0,r.Z)($,2),D=R[0],K=R[1],X=(0,o.useState)(null),J=(0,r.Z)(X,2),Q=J[0],Y=J[1],ee=(0,Z.UO)().uuid,ne=(0,m.v9)((function(e){return e.product}),m.wU),te=ne.params,ie=(0,o.useState)(!1),le=(0,r.Z)(ie,2),ae=le[0],re=le[1],oe=(0,m.v9)((function(e){return e.globalSettings})),ue=oe.settings;var de=(0,o.useCallback)((function(e){Y(!0),j.Z.getById(e).then((function(e){var n=(0,a.Z)((0,a.Z)((0,a.Z)({},e.data),function(e){if(null===e||void 0===e||!e.translations)return{};var n=e.translations,t=G.map((function(e){var t,i,a;return a={},(0,l.Z)(a,"title[".concat(e.locale,"]"),null===(t=n.find((function(n){return n.locale===e.locale})))||void 0===t?void 0:t.title),(0,l.Z)(a,"description[".concat(e.locale,"]"),null===(i=n.find((function(n){return n.locale===e.locale})))||void 0===i?void 0:i.description),a}));return Object.assign.apply(Object,[{}].concat((0,i.Z)(t)))}(e.data)),{},{properties:e.data.properties.map((function(e,n){var t;return t={id:n},(0,l.Z)(t,"key[".concat(e.locale,"]"),e.key),(0,l.Z)(t,"value[".concat(e.locale,"]"),e.value),t})),translation:void 0,translations:void 0});K(n)})).finally((function(){return Y(!1)}))}),[ee]);(0,o.useEffect)((function(){U||de(ee)}),[U,ee]);var se=U?P.data:z;return Q?(0,q.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,q.jsx)(f.Z,{size:"large",className:"py-5"})}):(0,q.jsxs)(u.Z,{children:[z||U?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(d.Z,{title:E("product.info"),bordered:!0,children:[(0,q.jsx)(d.Z.Item,{label:"".concat(E("title")," (").concat(B,")"),span:3,children:se["title[".concat(B,"]")]}),(0,q.jsx)(d.Z.Item,{label:"".concat(E("description")," (").concat(B,")"),span:3,children:se["description[".concat(B,"]")]}),(0,q.jsx)(d.Z.Item,{label:E("shop"),span:1.5,children:null===se||void 0===se||null===(n=se.shop)||void 0===n?void 0:n.translation.title}),(0,q.jsx)(d.Z.Item,{label:E("category"),span:1.5,children:null===se||void 0===se||null===(t=se.category)||void 0===t?void 0:t.label}),(0,q.jsx)(d.Z.Item,{label:E("brand"),span:1.5,children:null===se||void 0===se||null===(_=se.brand)||void 0===_?void 0:_.label}),(0,q.jsx)(d.Z.Item,{label:E("unit"),span:1.5,children:null===se||void 0===se||null===(I=se.unit)||void 0===I?void 0:I.label}),(0,q.jsx)(d.Z.Item,{label:E("images"),span:3,children:(0,q.jsx)(s.Z,{gutter:12,children:null===se||void 0===se||null===(w=se.images)||void 0===w?void 0:w.filter((function(e){return!e.isVideo})).map((function(e,n){return(0,q.jsx)(c.Z,{children:(0,q.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+n)}))})}),(0,q.jsx)(d.Z.Item,{label:E("tax"),children:null===se||void 0===se?void 0:se.tax}),(0,q.jsx)(d.Z.Item,{label:E("min.quantity"),children:null===se||void 0===se?void 0:se.min_qty}),(0,q.jsx)(d.Z.Item,{label:E("max.quantity"),children:null===se||void 0===se?void 0:se.max_qty})]}),null===se||void 0===se?void 0:se.stocks.map((function(e,n){var t;return e?(0,q.jsxs)(d.Z,{bordered:!0,className:"mt-4",children:[(0,q.jsx)(d.Z.Item,{label:E("price"),span:2,children:e.price}),(0,q.jsx)(d.Z.Item,{label:E("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(t=e.ids)||void 0===t?void 0:t.map((function(e,n){return(0,q.jsx)(d.Z.Item,{label:null===se||void 0===se?void 0:se.extras[n].label,children:null===e||void 0===e?void 0:e.label},"extra"+n)}))]},"desc"+n):""}))]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(d.Z,{title:E("product.info"),bordered:!0,children:[(0,q.jsx)(d.Z.Item,{label:"".concat(E("title")," (").concat(B,")"),span:3,children:D["title[".concat(B,"]")]}),(0,q.jsx)(d.Z.Item,{label:"".concat(E("description")," (").concat(B,")"),span:3,children:D["description[".concat(B,"]")]}),(0,q.jsx)(d.Z.Item,{label:E("shop"),span:1.5,children:null===(S=D.shop)||void 0===S?void 0:S.translation.title}),(0,q.jsx)(d.Z.Item,{label:E("category"),span:1.5,children:null===(C=D.category)||void 0===C?void 0:C.translation.title}),(0,q.jsx)(d.Z.Item,{label:E("brand"),span:1.5,children:null===(O=D.brand)||void 0===O?void 0:O.title}),(0,q.jsx)(d.Z.Item,{label:E("unit"),span:1.5,children:null===(F=D.unit)||void 0===F?void 0:F.translation.title}),(0,q.jsx)(d.Z.Item,{label:E("images"),span:3,children:(0,q.jsx)(s.Z,{gutter:12,children:null===D||void 0===D||null===(N=D.galleries)||void 0===N?void 0:N.filter((function(e){return!e.preview})).map((function(e,n){return(0,q.jsx)(c.Z,{children:(0,q.jsx)("img",{width:80,alt:"product",src:y.bV+e.path})},"image"+n)}))})}),(0,q.jsx)(d.Z.Item,{label:E("tax"),children:D.tax}),(0,q.jsx)(d.Z.Item,{label:E("min.quantity"),children:D.min_qty}),(0,q.jsx)(d.Z.Item,{label:E("max.quantity"),children:D.max_qty})]}),null===(V=D.stocks)||void 0===V?void 0:V.map((function(e,n){return e?(0,q.jsxs)(d.Z,{bordered:!0,className:"mt-4",children:[(0,q.jsx)(d.Z.Item,{label:E("price"),span:2,children:e.price}),(0,q.jsx)(d.Z.Item,{label:E("quantity"),span:2,children:e.quantity}),e.extras.map((function(e,n){var t,i,l;return(0,q.jsx)(d.Z.Item,{label:null===e||void 0===e||null===(t=e.group)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title,children:null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.value},"extra"+n)}))]},"desc"+n):""}))]}),(0,q.jsx)("div",{className:"d-flex mt-4",children:(0,q.jsxs)(v.Z,{children:[(0,q.jsx)(p.Z,{onClick:M,children:E("prev")}),(0,q.jsx)(p.Z,{loading:ae,type:"primary",onClick:function(){var e="seller/products",n=(0,a.Z)({},te);if(U&&P.data){re(!0);var t={id:P.data.model_id,type:"product",data:P.data};b.Z.requestChangeUpdate(P.data.request_id,t).then((function(){T("/".concat(e),{state:{tab:"request"}}),k.Am.success(E("successfully.updated")),H((0,x.ph)((0,a.Z)((0,a.Z)({},P),{},{nextUrl:e}))),H((0,h.MW)(n))})).finally((function(){re(!1)}))}else if(z&&"edit"===A&&"0"===(null===ue||void 0===ue?void 0:ue.product_auto_approve)){re(!0);var i={type:"product",id:P.data.product_id,data:z};b.Z.requestChange(i).then((function(){k.Am.success(E("successfully.updated")),H((0,x.ph)((0,a.Z)((0,a.Z)({},P),{},{nextUrl:e}))),H((0,h.MW)(n)),T("/".concat(e),{state:{tab:"request"}})})).finally((function(){re(!1)}))}else H((0,x.ph)((0,a.Z)((0,a.Z)({},P),{},{nextUrl:e}))),H((0,h.MW)(n)),T("/".concat(e))},children:E("finish")})]})})]})}},12512:function(e,n,t){var i=t(1413),l=t(29439),a=t(47313),r=t(10976),o=t(45705),u=t(55291),d=t(9274),s=t(77181),c=t(68197),v=t(59624),p=t(59491),f=t(78508),m=t(47515),Z=t(2717),x=t(90954),h=t(18333),g=t(24511),j=t(97890),y=t(55940),b=t(30215),k=t(89281),q=t(46417);n.Z=function(e){var n=e.next,t=e.prev,_=r.Z.useForm(),I=(0,l.Z)(_,1)[0],w=(0,g.$)().t,S=(0,Z.I0)(),C=(0,j.UO)().uuid,O=(0,Z.v9)((function(e){return e.menu}),Z.wU).activeMenu,F=(0,a.useState)([]),N=(0,l.Z)(F,2),V=N[0],M=N[1],U=(0,a.useState)(!1),A=(0,l.Z)(U,2),E=A[0],L=A[1],P=(0,a.useState)(!1),W=(0,l.Z)(P,2),B=W[0],G=W[1],T=(0,a.useState)(null),z=(0,l.Z)(T,2),H=z[0],$=z[1],R=[{key:"2",title:w("property.group"),dataIndex:"group",render:function(e){var n;return(null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title)||"-"}},{key:"4",title:w("property.value"),dataIndex:"value",render:function(e){return(null===e||void 0===e?void 0:e.value)||"-"}},{key:"5",title:w("options"),render:function(e){return(0,q.jsx)(o.Z,{children:(0,q.jsx)(y.Z,{type:"primary",danger:!0,icon:(0,q.jsx)(m.Z,{}),onClick:function(){return K(e)}})})}}];(0,a.useEffect)((function(){if(V.length&&C){var e=V;S((0,x.nc)({activeMenu:O,data:(0,i.Z)((0,i.Z)({},O.data),{},{properties:e})}))}}),[V]);var D=function(e){h.Z.properties(C,{properties:e}).then((function(){u.ZP.success(w("product.properties.saved")),X(C)})).finally((function(){return L(!1)}))},K=function(e){d.Z.confirm({title:w("delete.product"),okText:w("yes"),okType:"danger",onOk:function(){var n,t=null===V||void 0===V||null===(n=V.filter((function(n){return n.id!==e.id})))||void 0===n?void 0:n.map((function(e){var n;return null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.id}));D(t)}})},X=function(e){G(!0),h.Z.getById(e).then((function(e){var n,t=e.data;M(null===t||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.filter((function(e){return null===e||void 0===e?void 0:e.value}))),I.resetFields()})).catch((function(e){console.log(e)})).finally((function(){G(!1)}))};(0,a.useEffect)((function(){C&&X(C)}),[]);return(0,q.jsxs)(s.Z,{children:[(0,q.jsx)(r.Z,{name:"property-form",layout:"vertical",form:I,onFinish:function(e){L(!0);var n=e.propertyValue.map((function(e){return e.value})),t=null===V||void 0===V?void 0:V.map((function(e){var n;return null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.id}));D((0,i.Z)((0,i.Z)({},n),t))},children:(0,q.jsxs)(c.Z,{gutter:24,className:"mb-3",style:{display:"flex",alignItems:"center"},children:[(0,q.jsx)(v.Z,{span:10,children:(0,q.jsx)(r.Z.Item,{name:"propertyGroup",label:w("property.group"),rules:[{required:!0,message:w("required")}],children:(0,q.jsx)(k.h,{fetchOptions:function(e){var n={search:e,perPage:10,page:1};return b.Z.getAllGroups(n).then((function(e){return e.data.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:w("select.group"),onSelect:function(e){$(e),I.setFieldsValue({propertyValue:[]})},onClear:function(){$(null),I.setFieldsValue({propertyValue:[]})}})})}),(0,q.jsx)(v.Z,{span:10,children:(0,q.jsx)(r.Z.Item,{name:"propertyValue",label:w("property.value"),rules:[{required:!0,message:w("required")}],children:(0,q.jsx)(k.h,{fetchOptions:function(e){var n={search:e,perPage:10,page:1,group_id:null===H||void 0===H?void 0:H.value};return b.Z.getAllValues(n).then((function(e){return e.data.map((function(e){return{label:null===e||void 0===e?void 0:e.value,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},placeholder:w("select.value"),refetchOptions:!0,disabled:!H,mode:"multiple"})})}),(0,q.jsx)(v.Z,{span:4,children:(0,q.jsx)(p.Z,{type:"primary",htmlType:"submit",loading:E,children:w("save")})})]})}),(0,q.jsx)(f.Z,{scroll:{x:!0},columns:R,dataSource:V,pagination:!1,rowKey:function(e){return e.id},loading:B}),(0,q.jsxs)(o.Z,{className:"mt-4",children:[(0,q.jsx)(p.Z,{onClick:t,children:w("prev")}),(0,q.jsx)(p.Z,{type:"primary",onClick:n,children:w("next")})]})]})}},63945:function(e,n,t){var i=t(4942),l=t(93433),a=t(1413),r=t(29439),o=t(47313),u=t(10976),d=t(77181),s=t(46155),c=t(68197),v=t(59624),p=t(66672),f=t(59491),m=t(16124),Z=t(45705),x=t(2717),h=t(22307),g=t(18333),j=t(89802),y=t(24511),b=t(97890),k=t(51282),q=t(33724),_=t(85104),I=t(47515),w=t(90954),S=t(37630),C=t(46417);n.Z=function(e){var n,t=e.prev,O=e.next,F=e.isRequest,N=(0,y.$)().t,V=u.Z.useForm(),M=(0,r.Z)(V,1)[0],U=(0,x.I0)(),A=(0,b.UO)().uuid,E=(0,x.v9)((function(e){return e.menu}),x.wU).activeMenu,L=((0,x.v9)((function(e){return e.myShop}),x.wU).myShop,(0,o.useState)(null)),P=(0,r.Z)(L,2),W=P[0],B=P[1],G=(0,b.TH)(),T=(0,x.v9)((function(e){return e.formLang}),x.wU).defaultLang,z=(0,x.v9)((function(e){return e.currency}),x.wU).defaultCurrency,H=(0,o.useState)(null),$=(0,r.Z)(H,2),R=$[0],D=$[1],K=(0,o.useState)([]),X=(0,r.Z)(K,2),J=X[0],Q=X[1];(0,o.useEffect)((function(){var e;if(F)if(null!==(e=G.state)&&void 0!==e&&e.generate){var n,t,r,o,u,d,s=(0,q.Z)(null===E||void 0===E||null===(n=E.data.extras)||void 0===n?void 0:n.map((function(e){return e.values||[]}))),c=s.map((function(e){var n,t;if(e.every((function(e){return"undefined"!==typeof e.stock_id}))){var r,o,u,d=null===(r=E.data)||void 0===r||null===(o=r.actualStocks)||void 0===o?void 0:o.find((function(n){return n.extras.every((function(n){return e.some((function(e){var t;return e.value===(null===n||void 0===n||null===(t=n.value)||void 0===t?void 0:t.id)}))}))}));return(0,a.Z)({galleries:(null===d||void 0===d?void 0:d.galleries)||[],price:(null===d||void 0===d?void 0:d.price)||0,quantity:(null===d||void 0===d?void 0:d.quantity)||0,stock_id:null===d||void 0===d?void 0:d.id,tax:(null===E||void 0===E?void 0:E.data.tax)||0,addons:(null===d||void 0===d||null===(u=d.addons)||void 0===u?void 0:u.map((function(e){var n,t,i;return{label:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)}})))||[]},Object.assign.apply(Object,[{}].concat((0,l.Z)(e.map((function(e,n){return(0,i.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value,group:E.data.extras[n].label})}))))))}return(0,a.Z)({price:0,quantity:0,tax:(null===(n=E.data)||void 0===n?void 0:n.tax)||0,sku:null===E||void 0===E||null===(t=E.data)||void 0===t?void 0:t.sku,addons:[]},Object.assign.apply(Object,[{}].concat((0,l.Z)(e.map((function(e,n){return(0,i.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value})}))))))})),v=[];if(0===s.length&&0!==(null===(t=E.data)||void 0===t||null===(r=t.actualStocks)||void 0===r?void 0:r.length)){var p,f,m,Z=null===(p=E.data.actualStocks)||void 0===p?void 0:p.at(0);v=[{price:(null===Z||void 0===Z?void 0:Z.price)||0,quantity:(null===Z||void 0===Z?void 0:Z.quantity)||0,sku:null===Z||void 0===Z?void 0:Z.sku,tax:(null===(f=E.data)||void 0===f?void 0:f.tax)||0,addons:Z?null===(m=Z.addons)||void 0===m?void 0:m.map((function(e){var n,t,i;return{label:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)}})):[]}]}if(0===s.length&&0===(null===E||void 0===E||null===(o=E.data)||void 0===o||null===(u=o.actualStocks)||void 0===u?void 0:u.length))v=[{price:void 0,quantity:0,sku:null===E||void 0===E?void 0:E.data.sku,tax:(null===(d=E.data)||void 0===d?void 0:d.tax)||0,addons:[]}];var x=v.concat(c);Q(E.data.actualStocks.map((function(e){return e.id}))),M.setFieldsValue({stocks:x})}else{var h,j,y=null===(h=E.data.stocks)||void 0===h?void 0:h.map((function(e){return(0,a.Z)((0,a.Z)({galleries:(null===e||void 0===e?void 0:e.galleries)||[],price:e.price,quantity:e.quantity,tax:E.data.tax,stock_id:e.stock_id,sku:e.sku},Object.assign.apply(Object,[{}].concat((0,l.Z)(e.ids.map((function(e,n){return(0,i.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value,group:e.group})})))))),{},{addons:e.addons})}));Q((null===(j=E.data)||void 0===j?void 0:j.delete_ids)||[]),M.setFieldsValue({stocks:y})}else!function(e){B(!0),g.Z.getById(e).then((function(e){var n,t,r,o,u,d=(0,q.Z)(null===E||void 0===E||null===(n=E.data.extras)||void 0===n?void 0:n.map((function(e){return e.values||[]}))),s=d.map((function(n,t){var r,o;if(n.every((function(e){return"undefined"!==typeof e.stock_id}))){var u,d,s,c=e.data.stocks.find((function(e){return e.extras.every((function(e){return n.some((function(n){var t;return n.value===(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.id)}))}))}));return(0,a.Z)({galleries:(null===c||void 0===c?void 0:c.galleries)||[],price:(null===c||void 0===c?void 0:c.price)||0,quantity:(null===c||void 0===c?void 0:c.quantity)||0,sku:null!==(u=null===(d=E.data)||void 0===d?void 0:d.sku)&&void 0!==u?u:null===c||void 0===c?void 0:c.sku,stock_id:null===c||void 0===c?void 0:c.id,tax:(null===E||void 0===E?void 0:E.data.tax)||0,addons:(null===c||void 0===c||null===(s=c.addons)||void 0===s?void 0:s.map((function(e){var n,t,i;return{label:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)}})))||[]},Object.assign.apply(Object,[{}].concat((0,l.Z)(n.map((function(e,n){return(0,i.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value})}))))))}return(0,a.Z)({price:0,quantity:0,sku:null===(r=E.data)||void 0===r?void 0:r.sku,tax:(null===(o=E.data)||void 0===o?void 0:o.tax)||0,addons:[]},Object.assign.apply(Object,[{}].concat((0,l.Z)(n.map((function(e,n){return(0,i.Z)({},"extras[".concat(n,"]"),{label:e.label,value:e.value})}))))))})),c=[];if(0===d.length&&0!==(null===(t=e.data.stocks)||void 0===t?void 0:t.length)){var v,p,f,m,Z,x=null===(v=e.data.stocks)||void 0===v?void 0:v.at(0);c=[{price:(null===x||void 0===x?void 0:x.price)||0,quantity:(null===x||void 0===x?void 0:x.quantity)||0,sku:null!==(p=null===(f=E.data)||void 0===f?void 0:f.sku)&&void 0!==p?p:null===x||void 0===x?void 0:x.sku,tax:(null===(m=E.data)||void 0===m?void 0:m.tax)||0,addons:x?null===(Z=x.addons)||void 0===Z?void 0:Z.map((function(e){var n,t,i;return{label:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)}})):[]}]}0===d.length&&0===(null===(r=e.data.stocks)||void 0===r?void 0:r.length)&&(c=[{price:void 0,quantity:0,sku:null===(o=E.data)||void 0===o?void 0:o.sku,tax:(null===(u=E.data)||void 0===u?void 0:u.tax)||0,addons:[]}]);var h=c.concat(s);Q(e.data.stocks.map((function(e){return e.id}))),M.setFieldsValue({stocks:h})})).finally((function(){B(!1)}))}(A)}),[F,null===(n=G.state)||void 0===n?void 0:n.generate]);var Y=function(e,n,t){return e.map((function(e){return Object.assign(e,(0,i.Z)({},n,t))}))},ee=function(e,n){var t=e?(0,S.Z)(6):n,i=M.getFieldsValue().stocks;M.setFieldsValue({"set.all.sku":t,stock:Y(i,"sku",t)})};return(0,C.jsx)(d.Z,{title:E.data["title[".concat(T,"]")]?"".concat(E.data["title[".concat(T,"]")]):"",children:W?(0,C.jsx)(k.Z,{}):(0,C.jsxs)(u.Z,{layout:"vertical",form:M,onFinish:function(e){var n,t,i,l=e.stocks,r=J.filter((function(e,n){var t;return!(null===(t=l[n])||void 0===t||!t.stock_id)&&!l.some((function(n){return(null===n||void 0===n?void 0:n.stock_id)===e}))}));if(i=!(null===(n=E.data)||void 0===n||null===(t=n.extras)||void 0===t||!t.length)?l.map((function(e){var n,t,i,l;return{galleries:e.galleries,price:e.price,quantity:e.quantity,sku:e.sku,ids:F?null===(n=E.data)||void 0===n?void 0:n.extras.map((function(n,t){return e["extras[".concat(t,"]")]})):null===(t=E.data)||void 0===t?void 0:t.extras.map((function(n,t){return e["extras[".concat(t,"]")].value})),addons:e.addons?F?null===(i=e.addons)||void 0===i?void 0:i.map((function(e){return e})):null===(l=e.addons)||void 0===l?void 0:l.map((function(e){return e.value})):[],stock_id:e.stock_id}})):[{price:l[0].price,quantity:l[0].quantity,addons:l[0].addons?F?l[0].addons.map((function(e){return e})):l[0].addons.map((function(e){return e.value})):[],stock_id:l[0].stock_id,sku:l[0].sku,ids:[]}],F)return U((0,w.nc)({activeMenu:E,data:(0,a.Z)((0,a.Z)({},E.data),{},{stocks:i,delete_ids:r})})),void O();D(!0),g.Z.stocks(A,{extras:i,delete_ids:r}).then((function(e){var n=e.data.stocks,t=null===n||void 0===n?void 0:n.flatMap((function(e){return e.extras})),i=t.map((function(e){return(0,a.Z)((0,a.Z)({},e.value),{},{stock_id:e.stock_id,group_type:e.group.type})})),l=null===t||void 0===t?void 0:t.find((function(e){return"color"===e.group.type})),o={};n.forEach((function(e){e.extras.forEach((function(n){var t,i,l,a,r;n.extra_group_id in o?null!==(t=o[n.extra_group_id].values)&&void 0!==t&&t.some((function(e){var t;return e.value===(null===(t=n.value)||void 0===t?void 0:t.id)}))||null===(i=o[n.extra_group_id].values)||void 0===i||i.push({value:n.value.id,label:null===(l=n.value)||void 0===l?void 0:l.value,stock_id:e.id}):o[n.extra_group_id]={group:n.group,label:null===(a=n.group.translation)||void 0===a?void 0:a.title,value:n.extra_group_id,id:n.extra_group_id,stock_id:e.id,values:[{value:n.value.id,label:null===(r=n.value)||void 0===r?void 0:r.value,stock_id:e.id}]}}))})),U((0,w.nc)({activeMenu:E,data:(0,a.Z)((0,a.Z)({},E.data),{},{newExtras:[{group:null===l||void 0===l?void 0:l.group,values:i}],delete_ids:r,stocks:n,stocksData:n,extras:Object.values(o)})})),O()})).finally((function(){return D(!1)}))},children:[(0,C.jsx)(s.Z,{}),(0,C.jsx)("h2",{children:N("set.all.values")}),(0,C.jsxs)(c.Z,{gutter:12,align:"middle",children:[(0,C.jsx)(v.Z,{span:5,style:{marginRight:"10px"},children:(0,C.jsx)(u.Z.Item,{label:N("sku"),name:"set.all.sku",children:(0,C.jsx)(p.Z,{className:"w-100",onChange:function(e){return ee(!1,e.target.value)}})})}),(0,C.jsx)(v.Z,{children:(0,C.jsx)(u.Z.Item,{label:" ",name:"sku",children:(0,C.jsx)(f.Z,{icon:(0,C.jsx)(_.Z,{}),onClick:function(){return ee(!0)}})})}),(0,C.jsx)(v.Z,{span:4,children:(0,C.jsx)(u.Z.Item,{label:N("price"),name:"set.all.price",rules:[{type:"number",min:0,message:N("must.be.positive.number")}],children:(0,C.jsx)(m.Z,{className:"w-100",onChange:function(e){var n=M.getFieldsValue().stocks;M.setFieldsValue({stocks:Y(n,"price",e)})}})})}),(0,C.jsx)(v.Z,{span:4,children:(0,C.jsx)(u.Z.Item,{label:N("quantity"),name:"set.all.quantity",rules:[{type:"number",min:0,message:N("must.be.positive.number")}],children:(0,C.jsx)(m.Z,{className:"w-100",onChange:function(e){var n=M.getFieldsValue().stocks;M.setFieldsValue({stocks:Y(n,"quantity",e)})}})})})]}),(0,C.jsx)(u.Z.List,{name:"stocks",children:function(e,n){n.add;var t=n.remove;return(0,C.jsx)("div",{children:e.map((function(n,i){var l,a,r,o;return(0,C.jsxs)(c.Z,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},hidden:!(null!==(l=E.data)&&void 0!==l&&null!==(a=l.extras)&&void 0!==a&&a.length)&&n.key,children:[null===(r=E.data)||void 0===r||null===(o=r.extras)||void 0===o?void 0:o.map((function(e,n){return(0,C.jsx)(v.Z,{children:(0,C.jsx)(u.Z.Item,{label:null===e||void 0===e?void 0:e.label,name:[i,"extras[".concat(n,"]")],rules:[{required:!0,message:N("required")}],children:(0,C.jsx)(j.q,{fetchOptions:function(){return n=e.value,h.Z.getGroupById(n).then((function(e){return e.data.extra_values.map((function(e){return{label:e.value,value:e.id}}))}));var n},className:"w-100",disabled:!0,style:{minWidth:200}})})},"extra"+e.value)})),(0,C.jsx)(v.Z,{children:(0,C.jsx)(u.Z.Item,{label:N("sku"),name:[i,"sku"],children:(0,C.jsx)(p.Z,{className:"w-100",style:{minWidth:200}})})}),(0,C.jsx)(v.Z,{children:(0,C.jsx)(u.Z.Item,{label:N("quantity"),name:[i,"quantity"],rules:[{required:!0,message:N("required")}],children:(0,C.jsx)(m.Z,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,C.jsx)(v.Z,{children:(0,C.jsx)(u.Z.Item,{label:"".concat(N("price")," (").concat(null===z||void 0===z?void 0:z.symbol,")"),name:[i,"price"],rules:[{required:!0,message:N("requried")}],children:(0,C.jsx)(m.Z,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,C.jsxs)(v.Z,{children:[(0,C.jsx)(u.Z.Item,{label:N("tax"),name:[i,"tax"],children:(0,C.jsx)(m.Z,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})}),(0,C.jsx)(u.Z.Item,{hidden:!0,label:N("id"),name:[i,"stock_id"],children:(0,C.jsx)(m.Z,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})]})," ",(0,C.jsx)(v.Z,{children:(0,C.jsx)(u.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.stocks[n.name].price!==t.stocks[n.name].price},children:function(e){var t=e.getFieldValue,i=t(["stocks",n.name,"tax"])||0,l=t(["stocks",n.name,"price"]),a=0===i?l:(l*i/100+l).toFixed(2);return(0,C.jsx)(u.Z.Item,{label:"".concat(N("total.price")," (").concat(null===z||void 0===z?void 0:z.symbol,")"),children:(0,C.jsx)(m.Z,{min:1,disabled:!0,value:a,className:"w-100",style:{minWidth:200}})})}})}),(0,C.jsx)(v.Z,{children:(null===e||void 0===e?void 0:e.length)>1?(0,C.jsx)(f.Z,{type:"primary",className:"mt-2",danger:!0,icon:(0,C.jsx)(I.Z,{}),onClick:function(){t(n.name)}}):""})]},n.key)}))})}}),(0,C.jsxs)(Z.Z,{className:"mt-4",children:[(0,C.jsx)(f.Z,{onClick:t,children:N("prev")}),(0,C.jsx)(f.Z,{type:"primary",htmlType:"submit",loading:!!R,children:N("next")})]})]})})}},32937:function(e,n,t){var i=t(4942),l=t(93433),a=t(1413),r=t(29439),o=t(47313),u=t(10976),d=t(68197),s=t(59624),c=t(77181),v=t(66672),p=t(16124),f=t(86345),m=t(59491),Z=t(89281),x=t(11101),h=t(29955),g=t(2717),j=t(18333),y=t(90954),b=t(33403),k=t(97890),q=t(24511),_=t(5764),I=t(49080),w=t(82138),S=t(20776),C=t(385),O=t(46417);n.Z=function(e){var n,t,F,N=e.next,V=e.action_type,M=void 0===V?"":V,U=e.isRequest,A=(0,q.$)().t,E=u.Z.useForm(),L=(0,r.Z)(E,1)[0],P=(0,g.I0)(),W=(0,k.UO)().uuid,B=(0,k.s0)(),G=(0,g.v9)((function(e){return e.menu}),g.wU).activeMenu,T=(0,o.useState)((null===G||void 0===G||null===(n=G.data)||void 0===n?void 0:n.initialMediaFile)||{images:[],previews:[]}),z=(0,r.Z)(T,2),H=z[0],$=z[1],R=(0,g.v9)((function(e){return e.formLang}),g.wU),D=R.defaultLang,K=R.languages,X=(0,o.useState)((null===(t=G.data)||void 0===t||null===(F=t.images)||void 0===F?void 0:F.filter((function(e){return!e.isVideo})))||[]),J=(0,r.Z)(X,2),Q=J[0],Y=J[1],ee=(0,o.useState)(!1),ne=(0,r.Z)(ee,2),te=ne[0],ie=ne[1],le=(0,g.v9)((function(e){return e.globalSettings})).settings;var ae=function(e){var n={images:[],previews:[]},t=e.filter((function(e){return e.preview})).map((function(e){return{uid:e.id,name:e.preview,url:e.preview}})),i=e.filter((function(e){return e.preview})).map((function(e){return{uid:e.id,name:e.path,url:e.path,isVideo:!0}}));return n.previews=t,n.images=i,n};(0,o.useEffect)((function(){return function(){var e=L.getFieldsValue(!0);P((0,y.nc)({activeMenu:G,data:(0,a.Z)((0,a.Z)({},G.data),e)}))}}),[]);var re=function(){P((0,y.bL)({url:"seller/category/add",id:"seller/category/add",name:A("edit.category")})),B("/seller/category/add")};return(0,O.jsxs)(u.Z,{layout:"vertical",form:L,initialValues:(0,a.Z)({active:!0,vegetarian:!0,min_qty:1,max_qty:1,tax:0,interval:1,age_limit:12,digital:!1},G.data),onFinish:function(e){var n,t,o,u,d;ie(!0);var s,c,v,p,f=(0,a.Z)((0,a.Z)((0,a.Z)({},e),{},{digital:e.digital?1:0,active:Number(e.active),brand_id:null===(n=e.brand)||void 0===n?void 0:n.value,category_id:(null===(t=e.category)||void 0===t?void 0:t.value)||e.category,shop_id:null===(o=e.shop)||void 0===o?void 0:o.value,unit_id:null===(u=e.unit)||void 0===u?void 0:u.value,images:void 0,brand:e.brand,category:e.category,shop:e.shop,unit:e.unit,tax:e.tax||0},Object.assign.apply(Object,[{}].concat((0,l.Z)([].concat((0,l.Z)(null===H||void 0===H?void 0:H.images),(0,l.Z)(Q)).map((function(e,n){return(0,i.Z)({},"images[".concat(n,"]"),e.name)})))))),Object.assign.apply(Object,[{}].concat((0,l.Z)(null===H||void 0===H||null===(d=H.previews)||void 0===d?void 0:d.map((function(e,n){return(0,i.Z)({},"previews[".concat(n,"]"),e.name)}))))));if(U)return P((0,y.nc)({activeMenu:G,data:(0,a.Z)((0,a.Z)((0,a.Z)({},G.data),e),{},{active:Number(e.active),brand_id:null===(s=e.brand)||void 0===s?void 0:s.value,category_id:(null===(c=e.category)||void 0===c?void 0:c.value)||e.category,shop_id:null===(v=e.shop)||void 0===v?void 0:v.value,unit_id:null===(p=e.unit)||void 0===p?void 0:p.value,tax:e.tax||0,title:(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,l.Z)(K.map((function(n){return(0,i.Z)({},n.locale,e["title[".concat(n.locale,"]")])})))))),description:(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,l.Z)(K.map((function(n){return(0,i.Z)({},n.locale,e["description[".concat(n.locale,"]")])}))))))},Object.assign.apply(Object,[{}].concat((0,l.Z)(Q.map((function(e,n){return(0,i.Z)({},"images[".concat(n,"]"),e.name)}))))))})),void N();var m=!1;if(Object.entries(e).forEach((function(e){var n,t,i,l,a,o,u=(0,r.Z)(e,2),d=u[0],s=u[1];((d.startsWith("title")||d.startsWith("description"))&&G.data&&G.data[d]!==s&&(m=!0),"category"===d)&&((null===(i=G.data)||void 0===i||null===(l=i.category)||void 0===l?void 0:l.value)!==(null===s||void 0===s?void 0:s.value)&&(m=!0));"brand"===d&&((null===(a=G.data)||void 0===a||null===(o=a.brand)||void 0===o?void 0:o.value)!==(null===s||void 0===s?void 0:s.value)&&(m=!0));((null===Q||void 0===Q?void 0:Q.find((function(e){return"done"===e.status})))||(null===Q||void 0===Q?void 0:Q.length)!==(null===(n=G.data)||void 0===n||null===(t=n.images)||void 0===t?void 0:t.length))&&(m=!0)})),"edit"===M){var Z=(0,a.Z)({},f);if(Z.title=(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,l.Z)(K.map((function(n){return(0,i.Z)({},n.locale,e["title[".concat(n.locale,"]")])})))))),Z.description=(0,a.Z)({},Object.assign.apply(Object,[{}].concat((0,l.Z)(K.map((function(n){return(0,i.Z)({},n.locale,e["description[".concat(n.locale,"]")])})))))),(0,y.nc)({activeMenu:G,data:Z}),m&&"0"===(null===le||void 0===le?void 0:le.product_auto_approve))return void function(e){B("/seller/product/".concat(W,"?step=1"),{state:e})}(Z);!function(e,n){var t;n.product_id=null===(t=G.data)||void 0===t?void 0:t.product_id,j.Z.update(W,n).then((function(){P((0,y.nc)({activeMenu:G,data:(0,a.Z)((0,a.Z)({},n),null===G||void 0===G?void 0:G.data)})),N()})).finally((function(){return ie(!1)}))}(0,f)}else!function(e,n){j.Z.create(n).then((function(n){var t=n.data;P((0,y.SS)({id:"product-".concat(t.uuid),url:"seller/product/".concat(t.uuid),name:A("add.product"),data:(0,a.Z)((0,a.Z)({},e),{},{initialMediaFile:ae(t.galleries)}),refetch:!1})),B("/seller/product/".concat(t.uuid,"?step=1"),{state:{create:!0}})})).finally((function(){return ie(!1)}))}(e,f)},children:[(0,O.jsxs)(d.Z,{gutter:12,children:[(0,O.jsx)(s.Z,{span:16,children:(0,O.jsxs)(d.Z,{children:[(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(c.Z,{title:A("basic.info"),children:(0,O.jsxs)(d.Z,{children:[(0,O.jsx)(s.Z,{span:24,children:K.map((function(e){return(0,O.jsx)(u.Z.Item,{label:A("name"),name:"title[".concat(e.locale,"]"),rules:[{required:e.locale===D,message:A("required")}],hidden:e.locale!==D,children:(0,O.jsx)(v.Z,{})},"name"+e.id)}))}),(0,O.jsx)(s.Z,{span:24,children:K.map((function(e){return(0,O.jsx)(u.Z.Item,{label:A("description"),name:"description[".concat(e.locale,"]"),rules:[{required:e.locale===D,message:A("required")}],hidden:e.locale!==D,children:(0,O.jsx)(I.Z,{rows:3})},"description"+e.id)}))})]})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(c.Z,{title:A("pricing"),children:(0,O.jsxs)(d.Z,{gutter:12,children:[(0,O.jsx)(s.Z,{span:8,children:(0,O.jsx)(u.Z.Item,{label:A("min.qty"),name:"min_qty",rules:[{required:!0,message:A("required")}],children:(0,O.jsx)(p.Z,{min:1,className:"w-100"})})}),(0,O.jsx)(s.Z,{span:8,children:(0,O.jsx)(u.Z.Item,{label:A("max.qty"),name:"max_qty",rules:[{required:!0,message:A("required")}],children:(0,O.jsx)(p.Z,{min:1,className:"w-100"})})}),(0,O.jsx)(s.Z,{span:8,children:(0,O.jsx)(u.Z.Item,{label:A("tax"),name:"tax",children:(0,O.jsx)(p.Z,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(c.Z,{title:A("additions"),children:(0,O.jsxs)(d.Z,{gutter:12,children:[(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:A("age.limit"),name:"age_limit",rules:[{required:!0,message:A("required")}],children:(0,O.jsx)(p.Z,{min:1,className:"w-100"})})}),(0,O.jsx)(s.Z,{span:6,children:(0,O.jsx)(u.Z.Item,{label:A("active"),name:"active",valuePropName:"checked",children:(0,O.jsx)(f.Z,{})})}),(0,O.jsx)(s.Z,{span:6,children:(0,O.jsx)(u.Z.Item,{label:A("digital"),name:"digital",valuePropName:"checked",children:(0,O.jsx)(f.Z,{})})})]})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(c.Z,{title:A("video"),children:(0,O.jsx)(C.Z,{form:L,mediaList:H,setMediaList:$})})})]})}),(0,O.jsx)(s.Z,{span:8,children:(0,O.jsxs)(d.Z,{children:[(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(c.Z,{title:A("organization"),children:(0,O.jsxs)(d.Z,{children:[(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:A("category"),name:"category",rules:[{required:!0,message:A("required")}],children:(0,O.jsx)(S.o,{fetchOptions:function(e){var n={search:e||null,type:"main"};return h.Z.paginateSelect(n).then((function(e){return e.data.map((function(e){var n,t,i;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id,type:"main",disabled:null===(t=e.children)||void 0===t?void 0:t.length,children:null===(i=e.children)||void 0===i?void 0:i.map((function(e){var n,t,i;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id,type:"sub_main",disabled:null===(t=e.children)||void 0===t?void 0:t.length,children:null===(i=e.children)||void 0===i?void 0:i.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id,type:"child"}}))}}))}}))}))},dropdownRender:function(e){return(0,O.jsxs)(O.Fragment,{children:[e,(0,O.jsx)("div",{className:"p-1",children:(0,O.jsx)(m.Z,{icon:(0,O.jsx)(w.Z,{}),className:"w-100",onClick:re,children:A("add.category")})})]})}})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:A("brand"),name:"brand",rules:[{required:!1,message:A("required")}],children:(0,O.jsx)(Z.h,{fetchOptions:function(e){var n={search:e};return x.Z.getAll(n).then((function(e){return e.data.map((function(e){return{label:e.title,value:e.id}}))}))}})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:A("unit"),name:"unit",rules:[{required:!0,message:A("required")}],children:(0,O.jsx)(Z.h,{fetchOptions:function(e){var n={perPage:10,page:1,active:1,search:e};return b.Z.getAll(n).then((function(e){return function(e){return e.map((function(e){var n;return{label:null===e||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}(e.data)}))}})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{label:A("interval"),name:"interval",rules:[{required:!0,message:A("required")},{type:"number",min:1,message:A("should.be.more.than.1")}],children:(0,O.jsx)(p.Z,{className:"w-100"})})})]})})}),(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(c.Z,{title:A("media"),children:(0,O.jsx)(d.Z,{children:(0,O.jsx)(s.Z,{span:24,children:(0,O.jsx)(u.Z.Item,{name:"images",children:(0,O.jsx)(_.Z,{type:"products",imageList:Q,setImageList:Y,form:L,multiple:!0})})})})})})]})})]}),(0,O.jsx)(m.Z,{type:"primary",htmlType:"submit",loading:te,children:A("next")})]})}},16848:function(e,n,t){t.d(n,{S:function(){return i}});var i=[{title:"product",content:"First-content"},{title:"product.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"wholesale",content:"wholesale-content"},{title:"gallery",content:"gallery-content"},{title:"product.property",content:"Fourth-content"},{title:"finish",content:"Finish-content"}]}}]);