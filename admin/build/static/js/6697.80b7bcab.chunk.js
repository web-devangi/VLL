"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6697],{4014:(e,l,i)=>{function d(e){var l,i;let d=null===e||void 0===e?void 0:e.slice(0,1),n=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,n-1);s=null===(l=s)||void 0===l?void 0:l.replace(/./g,"*");let o=null===e||void 0===e?void 0:e.slice(n-1,e.length);return null===d||void 0===d||null===(i=d.concat(s))||void 0===i?void 0:i.concat(o)}i.d(l,{Z:()=>d})},84261:(e,l,i)=>{function d(e){const l="".concat(e),i="*".repeat(l.length-2);return(null===l||void 0===l?void 0:l[0])+i+(null===l||void 0===l?void 0:l[(null===l||void 0===l?void 0:l.length)-1])}i.d(l,{Z:()=>d})},31025:(e,l,i)=>{i.d(l,{Z:()=>m});var d=i(47313),n=i(24511),s=i(51095),o=i(23560),t=i(59491),r=i(66204),a=i(31881),c=i.n(a),u=i(97421),v=i(51282),x=i(46417);const h="https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=".concat(u.$h);function m(e){let{orderId:l,showLink:i=!0,size:a=2}=e;const{t:m}=(0,n.$)(),[j,p]=(0,d.useState)(""),[Z,y]=(0,d.useState)(!1),[g,f]=(0,d.useState)(null);return(0,d.useEffect)((()=>{(async()=>{y(!0);const e={dynamicLinkInfo:{domainUriPrefix:u.AC,link:"".concat(u.o6,"/orders/").concat(l),androidInfo:{androidPackageName:u.aG},iosInfo:{iosBundleId:u.Ir}}};try{const{data:l}=await c().post(h,e);f(null),p(null===l||void 0===l?void 0:l.shortLink)}catch(g){f(g),o.Am.error(g.message)}finally{y(!1)}})()}),[l]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("h3",{children:[m("qr_code"),":"]}),(0,x.jsx)("div",{children:Z||g?g?(0,x.jsx)(r.Z,{color:"red",children:m("smth.went.wrong")}):(0,x.jsx)(v.Z,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{width:"".concat(100*a,"px"),height:"".concat(100*a,"px"),borderRadius:"10px",overflow:g?"none":"hidden"},children:(0,x.jsx)(s.Qd,{size:500,id:"qrCode",includeMargin:!0,value:j,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,x.jsx)("br",{}),i&&(0,x.jsx)(t.Z,{type:"primary",href:j,target:"_blank",rel:"noreferrer",style:{width:"".concat(100*a,"px")},children:m("link.to.order")})]})})]})}},64922:(e,l,i)=>{i.d(l,{t:()=>c});var d=i(10976),n=i(68197),s=i(59624),o=i(66672),t=i(59491),r=i(24511),a=i(46417);const c=e=>{let{onSubmit:l,initialData:i,isSubmitting:c}=e;const{t:u}=(0,r.$)();return(0,a.jsx)(d.Z,{layout:"vertical",initialValues:i,onFinish:l,children:(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(d.Z.Item,{label:u("tracking.name"),name:"track_name",rules:[{required:!0,message:u("required")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(d.Z.Item,{label:u("tracking.id"),name:"track_id",rules:[{required:!0,message:u("required")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(d.Z.Item,{label:u("tracking.url"),name:"track_url",rules:[{type:"url",message:u("should.be.url")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(s.Z,{span:7,children:(0,a.jsx)(t.Z,{type:"primary",loading:c,htmlType:"submit",children:u("submit")})})]})})}},17649:(e,l,i)=>{i.d(l,{Z:()=>d});i(97421);function d(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},84017:(e,l,i)=>{function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const d=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===i?"".concat(d," ").concat(l):"".concat(l," ").concat(d)}i.d(l,{Z:()=>d})},76697:(e,l,i)=>{i.r(l),i.d(l,{default:()=>P});var d=i(47313),n=i(45705),s=i(66204),o=i(26824),t=i(78508),r=i(77181),a=i(68197),c=i(59624),u=i(56140),v=i(14133),x=i(83999),h=i(72652),m=i(59491),j=i(45334),p=i(41068),Z=i(46155),y=i(83685),g=i(89720),f=i(12019),b=i(97890),_=i(29466),k=i(7370),N=i(45464),w=i(2717),I=i(90954),S=i(24511),Y=i(84017),C=i(22539),z=i(80355),D=i(32916),H=i(58821),q=i(5958),M=i(70816),B=i.n(M),F=i(40197),R=i(79492),L=i(4014),T=i(31025),U=i(23560),A=i(64922),$=i(84261),E=i(60861),O=i(46417);function P(){var e,l,i,M,P,G,V,Q,K,W,J,X,ee,le,ie,de,ne,se,oe,te,re,ae,ce,ue,ve,xe,he,me,je,pe,Ze,ye,ge,fe,be,_e,ke,Ne,we,Ie,Se,Ye,Ce;const{activeMenu:ze}=(0,w.v9)((e=>e.menu),w.wU),{defaultCurrency:De}=(0,w.v9)((e=>e.currency),w.wU),{defaultLang:He}=(0,w.v9)((e=>e.formLang),w.wU),qe=ze.data,{t:Me}=(0,S.$)(),{id:Be}=(0,b.UO)(),Fe=(0,w.I0)(),Re=(0,b.s0)(),Le=(0,d.useRef)(),Te=(0,d.useRef)(),{isDemo:Ue}=(0,R.Z)(),[Ae,$e]=(0,d.useState)(null),[Ee,Oe]=(0,d.useState)(!1),[Pe,Ge]=(0,d.useState)(!1),{statusList:Ve}=(0,w.v9)((e=>e.orderStatus),w.wU),[Qe,Ke]=(0,d.useState)(!1),We=[{title:Me("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===(i=l.stock)||void 0===i?void 0:i.id}},{title:Me("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,d,o,t,r;return(0,O.jsxs)(n.Z,{direction:"vertical",className:"relative",children:[null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title,null===(t=l.stock)||void 0===t||null===(r=t.extras)||void 0===r?void 0:r.map((e=>{var l,i,d;return(0,O.jsxs)(s.Z,{children:[null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Me("image"),dataIndex:"img",key:"img",render:(e,l)=>{var i,d;return(0,O.jsx)(o.Z,{src:(0,N.Z)(null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Me("price"),dataIndex:"origin_price",key:"origin_price",render:(e,l)=>{var i;return(0,Y.Z)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.price,null===De||void 0===De?void 0:De.symbol)}},{title:Me("quantity"),dataIndex:"quantity",key:"quantity",render:e=>(0,O.jsx)("span",{children:e})},{title:Me("discount"),dataIndex:"rate_discount",key:"rate_discount",render:(e,l)=>{var i;return(0,Y.Z)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.discount,null===De||void 0===De?void 0:De.symbol)}},{title:Me("tax"),dataIndex:"tax",key:"tax",render:(e,l)=>(0,Y.Z)(null===l||void 0===l?void 0:l.tax,null===De||void 0===De?void 0:De.symbol)},{title:Me("total.price"),dataIndex:"total_price",key:"total_price",render:(e,l)=>(0,Y.Z)(null===l||void 0===l?void 0:l.total_price,null===De||void 0===De?void 0:De.symbol)}],Je=[{title:Me("date"),dataIndex:"date",key:"date",render:e=>B()(e).format("YYYY-MM-DD HH:mm")},{title:Me("document"),dataIndex:"document",key:"document"},{title:Me("number"),dataIndex:"number",key:"number"},{title:Me("total.price"),dataIndex:"price",key:"price"}],Xe=[{price:(0,Y.Z)(null===qe||void 0===qe?void 0:qe.total_price,De.symbol),number:(0,O.jsxs)(_.rU,{to:"/orders/generate-invoice/".concat(null===qe||void 0===qe?void 0:qe.id),children:["#",null===qe||void 0===qe?void 0:qe.id]}),document:Me("invoice"),date:B()(null===qe||void 0===qe?void 0:qe.created_at).format("YYYY-MM-DD HH:mm")},{price:"-",number:(0,O.jsxs)(_.rU,{to:"/orders/generate-invoice/".concat(null===qe||void 0===qe?void 0:qe.id),children:["#",null===qe||void 0===qe?void 0:qe.id]}),document:Me("delivery.receipt"),date:B()(null===qe||void 0===qe?void 0:qe.created_at).format("YYYY-MM-DD HH:mm")}];function el(){Oe(!0),k.Z.getById(Be).then((e=>{let{data:l}=e;Fe((0,I.nc)({activeMenu:ze,data:l}))})).finally((()=>{Oe(!1),Fe((0,I.A_)(ze))}))}const ll=(0,d.useCallback)((e=>{Ke(!0),k.Z.updateTracking(null===qe||void 0===qe?void 0:qe.id,e).then((()=>{U.Am.success(Me("successfully.updated")),el()})).finally((()=>{Ke(!1)}))}),[null===qe||void 0===qe?void 0:qe.id]);(0,d.useEffect)((()=>{ze.refetch&&(el(),0===Ve.length&&Fe((0,F.dX)({})))}),[ze.refetch]);return(0,O.jsxs)("div",{className:"order_details",children:[(0,O.jsx)(r.Z,{className:"order-details-info",title:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(D.Qyq,{className:"mr-2 icon"}),"".concat(Me("order")," ").concat(null!==qe&&void 0!==qe&&qe.id?"#".concat(null===qe||void 0===qe?void 0:qe.id," "):"")," ",Me("from.order")," ",null===qe||void 0===qe||null===(e=qe.user)||void 0===e?void 0:e.firstname," ",(null===qe||void 0===qe||null===(l=qe.user)||void 0===l?void 0:l.lastname)||""]})}),(0,O.jsxs)(a.Z,{gutter:24,children:[(0,O.jsx)(c.Z,{span:24,children:(0,O.jsx)(r.Z,{children:(0,O.jsxs)(n.Z,{className:"justify-content-between w-100",children:[(0,O.jsxs)(n.Z,{className:"align-items-start",children:[(0,O.jsx)(g.Z,{className:"order-card-icon"}),(0,O.jsxs)("div",{className:"d-flex flex-column",children:[(0,O.jsx)(u.Z.Text,{children:Me("delivery.date")}),Ee?(0,O.jsx)(v.Z.Button,{size:16}):(0,O.jsxs)(u.Z.Text,{className:"order-card-title",children:[null===qe||void 0===qe?void 0:qe.delivery_date," ",null===qe||void 0===qe?void 0:qe.delivery_time]})]})]}),(0,O.jsxs)(n.Z,{className:"align-items-start",onClick:()=>Te.current.scrollIntoView({behavior:"smooth"}),children:[(0,O.jsx)(q.iFN,{className:"order-card-icon"}),(0,O.jsxs)("div",{className:"d-flex flex-column",children:[(0,O.jsx)(u.Z.Text,{children:Me("total.price")}),Ee?(0,O.jsx)(v.Z.Button,{size:16,loading:Ee}):(0,O.jsx)(u.Z.Text,{className:"order-card-title",children:(0,Y.Z)(null===qe||void 0===qe?void 0:qe.total_price,null===De||void 0===De?void 0:De.symbol)})]})]}),(0,O.jsxs)(n.Z,{className:"align-items-start",children:[(0,O.jsx)(q.Dij,{className:"order-card-icon"}),(0,O.jsxs)("div",{className:"d-flex flex-column",children:[(0,O.jsx)(u.Z.Text,{children:Me("messages")}),Ee?(0,O.jsx)(v.Z.Button,{size:16}):(0,O.jsx)(u.Z.Text,{className:"order-card-title",children:null!==qe&&void 0!==qe&&qe.review?1:0})]})]}),(0,O.jsxs)(n.Z,{className:"align-items-start",onClick:()=>Le.current.scrollIntoView({behavior:"smooth"}),children:[(0,O.jsx)(D.Qyq,{className:"order-card-icon"}),(0,O.jsxs)("div",{className:"d-flex flex-column",children:[(0,O.jsx)(u.Z.Text,{children:Me("products")}),Ee?(0,O.jsx)(v.Z.Button,{size:16}):(0,O.jsx)(u.Z.Text,{className:"order-card-title",children:null===qe||void 0===qe||null===(i=qe.details)||void 0===i?void 0:i.reduce(((e,l)=>e+l.quantity),0)})]})]})]})})}),"canceled"!==(null===qe||void 0===qe?void 0:qe.status)&&(0,O.jsx)(c.Z,{span:24,children:(0,O.jsx)(r.Z,{children:(0,O.jsx)(x.Z,{current:null===Ve||void 0===Ve?void 0:Ve.findIndex((e=>e.name===(null===qe||void 0===qe?void 0:qe.status))),children:null===Ve||void 0===Ve?void 0:Ve.slice(0,-1).map((e=>(0,O.jsx)(x.Z.Step,{title:Me(e.name)},e.id)))})})}),(0,O.jsxs)(c.Z,{span:16,children:[(0,O.jsx)(h.Z,{spinning:Ee,children:(0,O.jsxs)(r.Z,{style:{minHeight:"200px"},children:[(0,O.jsxs)("h3",{children:[Me("details"),":"]}),(0,O.jsxs)(a.Z,{hidden:Ee,className:"mb-3 order_detail",gutter:10,children:[(0,O.jsxs)(c.Z,{span:12,children:[(0,O.jsxs)("div",{children:[Me("created.date.&.time"),":",(0,O.jsxs)("span",{className:"ml-2",children:[(0,O.jsx)(H.yoA,{className:"mr-1"})," ",B()(null===qe||void 0===qe?void 0:qe.created_at).format("YYYY-MM-DD HH:mm")," "]})]}),(0,O.jsx)("br",{}),(0,O.jsxs)("div",{children:[Me("delivery.date.&.time"),":",(0,O.jsxs)("span",{className:"ml-2",children:[(0,O.jsx)(H.yoA,{className:"mr-1"})," ",null===qe||void 0===qe?void 0:qe.delivery_date," ",null===qe||void 0===qe?void 0:qe.delivery_time]})]}),(0,O.jsx)("br",{}),(0,O.jsxs)("div",{children:[Me("payment.status"),":",(0,O.jsxs)("span",{style:{cursor:"pointer"},className:"ml-2",onClick:()=>Ge(!0),children:[Me(null===qe||void 0===qe||null===(M=qe.transaction)||void 0===M?void 0:M.status)," ",(0,O.jsx)(f.Z,{})]})]}),(0,O.jsx)("br",{}),(0,O.jsxs)("div",{children:[Me("note"),":",(0,O.jsx)("span",{className:"ml-2",children:Me(null!==qe&&void 0!==qe&&qe.note?null===qe||void 0===qe?void 0:qe.note:"")})]})]}),(0,O.jsxs)(c.Z,{span:12,children:[(0,O.jsxs)("div",{children:[Me("status"),":",(0,O.jsx)("span",{className:"ml-2",children:"new"===(null===qe||void 0===qe?void 0:qe.status)?(0,O.jsx)(s.Z,{color:"blue",children:Me(null===qe||void 0===qe?void 0:qe.status)}):"canceled"===(null===qe||void 0===qe?void 0:qe.status)?(0,O.jsx)(s.Z,{color:"error",children:Me(null===qe||void 0===qe?void 0:qe.status)}):(0,O.jsx)(s.Z,{color:"cyan",children:Me(null===qe||void 0===qe?void 0:qe.status)})})]}),(0,O.jsx)("br",{}),(0,O.jsxs)("div",{children:[Me("delivery.type"),":",(0,O.jsx)("span",{className:"ml-2",children:null===qe||void 0===qe?void 0:qe.delivery_type})]}),(0,O.jsx)("br",{}),(0,O.jsxs)("div",{children:[Me("payment.type"),":",(0,O.jsx)("span",{className:"ml-2",children:Me(null===qe||void 0===qe||null===(P=qe.transaction)||void 0===P||null===(G=P.payment_system)||void 0===G?void 0:G.tag)})]}),(0,O.jsx)("br",{})]})]}),(0,O.jsxs)(a.Z,{hidden:Ee,className:"mb-3 order_detail",children:[(0,O.jsxs)(c.Z,{span:12,children:[(0,O.jsxs)("h3",{children:[Me("delivery.address"),":"]}),(0,O.jsx)("div",{children:null!==qe&&void 0!==qe&&qe.address?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{children:[Me("street.house.number"),":"," ",null!==(V=null===qe||void 0===qe||null===(Q=qe.address)||void 0===Q?void 0:Q.street_house_number)&&void 0!==V?V:Me("not.given")]}),(0,O.jsx)("br",{}),(0,O.jsxs)("div",{children:[Me("zipcode"),":"," ",null!==(K=null!==(W=null===qe||void 0===qe||null===(J=qe.address)||void 0===J?void 0:J.zipcode)&&void 0!==W?W:null===qe||void 0===qe||null===(X=qe.address)||void 0===X?void 0:X.zip_code)&&void 0!==K?K:Me("not.given")]})]}):null!==qe&&void 0!==qe&&qe.my_address?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{children:[Me("street.house.number"),":"," ",null!==(ee=null===qe||void 0===qe||null===(le=qe.my_address)||void 0===le?void 0:le.street_house_number)&&void 0!==ee?ee:Me("not.given")]}),(0,O.jsx)("br",{}),(0,O.jsxs)("div",{children:[Me("zipcode"),":"," ",null!==(ie=null===qe||void 0===qe||null===(de=qe.my_address)||void 0===de?void 0:de.zipcode)&&void 0!==ie?ie:Me("not.given")]})]}):null!==qe&&void 0!==qe&&qe.delivery_point?(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)("div",{children:[Me("address"),":"," ",null!==(ne=null===qe||void 0===qe||null===(se=qe.delivery_point)||void 0===se||null===(oe=se.address)||void 0===oe?void 0:oe[He])&&void 0!==ne?ne:Me("no.address")]})}):"digital"===(null===qe||void 0===qe?void 0:qe.delivery_type)?(0,O.jsx)("div",{children:Me("digital.delivery")}):(0,O.jsx)("div",{children:Me("no.address")})}),(0,O.jsxs)(m.Z,{className:"map_show mt-3",onClick:()=>$e(Be),children:[(0,O.jsx)(C.$0r,{style:{marginRight:"8px"}})," ",Me("show.locations")]})]}),(0,O.jsx)(c.Z,{span:12,children:(0,O.jsx)(T.Z,{orderId:Be})})]})]})}),(0,O.jsx)(r.Z,{title:Me("documents"),children:(0,O.jsx)(t.Z,{columns:Je,dataSource:Xe,pagination:!1,loading:Ee})})]}),(0,O.jsxs)(c.Z,{span:8,className:"order_info",children:[!(null===qe||void 0===qe||!qe.username)&&(0,O.jsxs)(r.Z,{title:Me("order.receiver"),children:[(0,O.jsxs)("div",{className:"customer-info",children:[(0,O.jsx)("span",{className:"title",children:Me("name")}),(0,O.jsxs)("span",{className:"description",children:[(0,O.jsx)(H.HHm,{}),null===qe||void 0===qe?void 0:qe.username]})]}),(0,O.jsxs)("div",{className:"customer-info",children:[(0,O.jsx)("span",{className:"title",children:Me("phone")}),(0,O.jsxs)("span",{className:"description",children:[(0,O.jsx)(H.lfG,{}),null===qe||void 0===qe?void 0:qe.phone]})]})]}),2===(null===qe||void 0===qe?void 0:qe.type)&&"delivery"===(null===qe||void 0===qe?void 0:qe.delivery_type)&&(0,O.jsx)(r.Z,{title:Me("tracking.info"),children:(0,O.jsx)(A.t,{onSubmit:ll,isSubmitting:Qe,initialData:{track_name:null===qe||void 0===qe?void 0:qe.track_name,track_id:null===qe||void 0===qe?void 0:qe.track_id,track_url:null===qe||void 0===qe?void 0:qe.track_url}})}),(0,O.jsx)(r.Z,{title:(0,O.jsxs)(n.Z,{children:[Me("customer.info"),(0,O.jsx)(f.Z,{onClick:()=>(Fe((0,I.bL)({url:"users/user/".concat(null===qe||void 0===qe?void 0:qe.user.uuid),id:"user_info",name:Me("user.info")})),void Re("/users/user/".concat(null===qe||void 0===qe?void 0:qe.user.uuid),{state:{user_id:null===qe||void 0===qe?void 0:qe.user.id}}))})]}),children:(0,O.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[Ee?(0,O.jsx)(v.Z.Avatar,{size:64,shape:"square"}):(0,O.jsx)(j.C,{shape:"square",size:64,src:null===qe||void 0===qe||null===(te=qe.user)||void 0===te?void 0:te.img}),(0,O.jsx)("h5",{className:"customer-name",children:Ee?(0,O.jsx)(v.Z.Button,{size:20,style:{width:70}}):(null===qe||void 0===qe||null===(re=qe.user)||void 0===re?void 0:re.firstname)+" "+((null===qe||void 0===qe||null===(ae=qe.user)||void 0===ae?void 0:ae.lastname)||"")}),(0,O.jsxs)("div",{className:"customer-info-detail",children:[(0,O.jsxs)("div",{className:"customer-info",children:[(0,O.jsx)("span",{className:"title",children:Me("phone")}),(0,O.jsxs)("span",{className:"description",children:[(0,O.jsx)(H.lfG,{}),Ee?(0,O.jsx)(v.Z.Button,{size:16}):null!==qe&&void 0!==qe&&null!==(ce=qe.user)&&void 0!==ce&&ce.phone?(0,$.Z)(null===qe||void 0===qe||null===(ue=qe.user)||void 0===ue?void 0:ue.phone):Me("no.phone")]})]}),(0,O.jsxs)("div",{className:"customer-info",children:[(0,O.jsx)("span",{className:"title",children:Me("email")}),(0,O.jsxs)("span",{className:"description",children:[(0,O.jsx)(C.ixJ,{}),Ee?(0,O.jsx)(v.Z.Button,{size:16}):(0,L.Z)(null===qe||void 0===qe||null===(ve=qe.user)||void 0===ve?void 0:ve.email)]})]}),(0,O.jsxs)("div",{className:"customer-info",children:[(0,O.jsx)("span",{className:"title",children:Me("registration.date")}),(0,O.jsxs)("span",{className:"description",children:[(0,O.jsx)(H.yoA,{}),Ee?(0,O.jsx)(v.Z.Button,{size:16}):B()(null===qe||void 0===qe||null===(xe=qe.user)||void 0===xe?void 0:xe.created_at).format("DD-MM-YYYY, HH:mm")]})]}),(0,O.jsxs)("div",{className:"customer-info",children:[(0,O.jsx)("span",{className:"title",children:Me("orders.count")}),(0,O.jsx)("span",{className:"description",children:Ee?(0,O.jsx)(v.Z.Button,{size:16}):(0,O.jsx)(p.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===qe||void 0===qe||null===(he=qe.user)||void 0===he?void 0:he.orders_count)||0})})]}),(0,O.jsxs)("div",{className:"customer-info",children:[(0,O.jsx)("span",{className:"title",children:Me("spent.since.registration")}),(0,O.jsx)("span",{className:"description",children:Ee?(0,O.jsx)(v.Z.Button,{size:16}):(0,O.jsx)(p.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,Y.Z)(null===qe||void 0===qe||null===(me=qe.user)||void 0===me?void 0:me.orders_sum_price,null===De||void 0===De?void 0:De.symbol)})})]})]})]})}),(null===qe||void 0===qe?void 0:qe.review)&&!Ee&&(0,O.jsx)(r.Z,{title:Me("messages"),children:(0,O.jsxs)("div",{className:"order-message",children:[(0,O.jsx)("span",{className:"message",children:null===qe||void 0===qe||null===(je=qe.review)||void 0===je?void 0:je.comment}),(0,O.jsx)(n.Z,{className:"w-100 justify-content-end",children:(0,O.jsx)("span",{className:"date",children:B()(null===qe||void 0===qe||null===(pe=qe.review)||void 0===pe?void 0:pe.created_at).format("YYYY-MM-DD HH:mm")})})]})}),(null===qe||void 0===qe?void 0:qe.shop)&&(0,O.jsx)(r.Z,{title:"".concat(Me("shop.details"),": #").concat(null===qe||void 0===qe||null===(Ze=qe.shop)||void 0===Ze?void 0:Ze.id),loading:Ee,children:(0,O.jsxs)(a.Z,{gutter:12,children:[(0,O.jsxs)(c.Z,{span:24,style:{display:"flex",columnGap:"20px",marginBottom:"20px"},children:[(0,O.jsx)("div",{style:{width:"100px",height:"100px",backgroundColor:"#f5f5f5",overflow:"hidden",borderRadius:"10px",position:"relative"},children:(0,O.jsx)(o.Z,{alt:Me("shop.logo"),style:{objectFit:"contain"},src:(null===qe||void 0===qe||null===(ye=qe.shop)||void 0===ye?void 0:ye.logo_img)||"https://via.placeholder.com/150",width:100,height:100,preview:!1})}),(0,O.jsxs)("div",{style:{width:"calc(100% - 100px - 20px)"},children:[(0,O.jsx)("h5",{style:{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(null===qe||void 0===qe||null===(ge=qe.shop)||void 0===ge||null===(fe=ge.translation)||void 0===fe?void 0:fe.title)||"--"}),(0,O.jsx)("p",{children:null!==qe&&void 0!==qe&&null!==(be=qe.shop)&&void 0!==be&&be.open?(0,O.jsx)(s.Z,{color:"green",children:Me("open")}):(0,O.jsx)(s.Z,{color:"red",children:Me("closed")})})]})]}),(0,O.jsxs)(c.Z,{span:24,children:[(null===qe||void 0===qe||null===(_e=qe.shop)||void 0===_e?void 0:_e.phone)&&(0,O.jsxs)("p",{children:[(0,O.jsxs)("strong",{children:[Me("phone"),":"]})," ",null===qe||void 0===qe||null===(ke=qe.shop)||void 0===ke?void 0:ke.phone]}),(null===qe||void 0===qe||null===(Ne=qe.shop)||void 0===Ne||null===(we=Ne.translation)||void 0===we?void 0:we.address)&&(0,O.jsxs)("p",{children:[(0,O.jsxs)("strong",{children:[Me("address"),":"]})," ",null===qe||void 0===qe||null===(Ie=qe.shop)||void 0===Ie||null===(Se=Ie.translation)||void 0===Se?void 0:Se.address]})]})]})})]}),(0,O.jsx)(c.Z,{span:24,children:(0,O.jsxs)(r.Z,{className:"w-100 order-table",title:Me("order.products"),children:[(0,O.jsx)(Z.Z,{}),(0,O.jsx)(t.Z,{ref:Le,scroll:{x:!0},columns:We,dataSource:(null===(Ye=ze.data)||void 0===Ye?void 0:Ye.details)||[],loading:Ee,rowKey:e=>e.id,pagination:!1,expandable:{expandedRowRender:e=>{if(null===e||void 0===e||!e.replace_stock)return;const l=[{title:Me("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.id}},{title:Me("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,d,o,t,r;return(0,O.jsxs)(n.Z,{direction:"vertical",className:"relative",children:[null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title,null===l||void 0===l||null===(t=l.replace_stock)||void 0===t||null===(r=t.extras)||void 0===r?void 0:r.map((e=>{var l,i,d;return(0,O.jsxs)(s.Z,{children:[null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Me("image"),dataIndex:"img",key:"img",render:(e,l)=>{var i,d;return(0,O.jsx)(o.Z,{src:(0,N.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Me("price"),dataIndex:"price",key:"price",render:(e,l)=>{var i;return(0,Y.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.price,null===De||void 0===De?void 0:De.symbol)}},{title:Me("quantity"),dataIndex:"replace_quantity",key:"replace_quantity",render:(e,l)=>(0,O.jsx)("span",{children:null===l||void 0===l?void 0:l.replace_quantity})},{title:Me("discount"),dataIndex:"discount",key:"discount",render:(e,l)=>{var i,d;return(0,Y.Z)(null!==(i=null===l||void 0===l||null===(d=l.replace_stock)||void 0===d?void 0:d.discount)&&void 0!==i?i:0,null===De||void 0===De?void 0:De.symbol)}},{title:Me("tax"),dataIndex:"tax",key:"tax",render:(e,l)=>{var i;return(0,Y.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.tax,null===De||void 0===De?void 0:De.symbol)}},{title:Me("total.price"),dataIndex:"total_price",key:"total_price",render:(e,l)=>{var i;return(0,Y.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.total_price,null===De||void 0===De?void 0:De.symbol)}}];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,O.jsx)(y.Z,{style:{padding:"10px",margin:"10px 0 50px 0",border:"2px solid #cad2de",borderRadius:"30%"},rotate:90})}),(0,O.jsx)(t.Z,{columns:l,dataSource:[e],pagination:!1})]})},expandIcon:e=>{let{expanded:l,onExpand:i,record:d}=e;return(0,O.jsx)(y.Z,{onClick:e=>i(d,e),rotate:90})},defaultExpandedRowKeys:["0"]}}),(0,O.jsxs)(n.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,O.jsxs)("div",{children:[(0,O.jsxs)("span",{children:[Me("delivery.fee"),":"]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[Me("order.tax"),":"]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[Me("product"),":"]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[Me("discount"),":"]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[Me("service.fee"),":"]}),(0,O.jsx)("br",{}),(0,O.jsxs)("span",{children:[Me("coupon.price"),":"]}),(0,O.jsx)("br",{}),(0,O.jsxs)("h3",{children:[Me("total.price"),":"]})]}),(0,O.jsxs)("div",{children:[(0,O.jsx)("span",{children:(0,Y.Z)(null!==(Ce=null===qe||void 0===qe?void 0:qe.delivery_fee)&&void 0!==Ce?Ce:0,null===De||void 0===De?void 0:De.symbol)}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:(0,Y.Z)(null===qe||void 0===qe?void 0:qe.tax,null===De||void 0===De?void 0:De.symbol)}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:(0,Y.Z)(null===qe||void 0===qe?void 0:qe.origin_price,null===De||void 0===De?void 0:De.symbol)}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:(0,Y.Z)(null===qe||void 0===qe?void 0:qe.total_discount,null===De||void 0===De?void 0:De.symbol)}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:(0,Y.Z)(null===qe||void 0===qe?void 0:qe.service_fee,null===De||void 0===De?void 0:De.symbol)}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:(0,Y.Z)(null===qe||void 0===qe?void 0:qe.coupon_price,null===De||void 0===De?void 0:De.symbol)}),(0,O.jsx)("br",{}),(0,O.jsx)("h3",{ref:Te,children:(0,Y.Z)(null===qe||void 0===qe?void 0:qe.total_price,null===De||void 0===De?void 0:De.symbol)})]})]})]})})]}),Ae&&(0,O.jsx)(z.Z,{id:Ae,handleCancel:()=>{$e(null)}}),Pe&&(0,O.jsx)(E.Z,{orderId:Be,handleCancel:()=>Ge(!1),transactionDetails:null===qe||void 0===qe?void 0:qe.transaction,fetchOrder:el})]})}},80355:(e,l,i)=>{i.d(l,{Z:()=>Y});var d=i(84697),n=i(83999),s=i(9274),o=i(59491),t=i(77181),r=i(68197),a=i(59624),c=i(66204),u=i(47313),v=i(24511),x=i(7370),h=i(51282),m=i(58821),j=i(2717),p=i(97421),Z=i(18478),y=i(17649),g=i(66461),f=i(22539),b=i(3394),_=i(57864),k=i(70816),N=i.n(k),w=i(46417);const{Step:I}=n.Z,S=()=>(0,w.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,w.jsx)("img",{src:Z,width:"50",alt:"Pin"})}),Y=e=>{var l,i,Z;let{id:k,handleCancel:Y}=e;const{t:C}=(0,v.$)(),[z,D]=(0,u.useState)(null),[H,q]=(0,u.useState)(null),[M,B]=(0,u.useState)(null),{settings:F}=(0,j.v9)((e=>e.globalSettings),j.wU),R=(0,y.Z)(F),[L,T]=(0,u.useState)(0),[U,A]=(0,u.useState)({lat:null===R||void 0===R?void 0:R.lat,lng:null===R||void 0===R?void 0:R.lng}),[$,E]=(0,u.useState)([{id:0,name:"new",icon:(0,w.jsx)(g.Z,{})},{id:1,name:"accepted",icon:(0,w.jsx)(m.IQF,{})},{id:2,name:"ready",icon:(0,w.jsx)(f.TkG,{})},{id:3,name:"on_a_way",icon:(0,w.jsx)(b.Akc,{})},{id:4,name:"delivered",icon:(0,w.jsx)(b.kme,{})}]);const{google_map_key:O}=(0,j.v9)((e=>e.globalSettings.settings),j.wU);return(0,u.useEffect)((()=>{D(!0),x.Z.getById(k).then((e=>{var l,i,d,n,s,o,t;let{data:r}=e;E("canceled"===r.status?[{id:1,name:"new",icon:(0,w.jsx)(g.Z,{})},{id:5,name:"canceled",icon:(0,w.jsx)(_.SV5,{})}]:$),T("canceled"===r.status?1:null===(l=$.find((e=>e.name===r.status)))||void 0===l?void 0:l.id);const a=null!==(i=null!==(d=null!==(n=null===r||void 0===r||null===(s=r.address)||void 0===s?void 0:s.location)&&void 0!==n?n:null===r||void 0===r||null===(o=r.my_address)||void 0===o?void 0:o.location)&&void 0!==d?d:null===r||void 0===r||null===(t=r.delivery_point)||void 0===t?void 0:t.location)&&void 0!==i?i:{latitude:null===R||void 0===R?void 0:R.lat,longitude:null===R||void 0===R?void 0:R.lng};A({lat:Number(null===a||void 0===a?void 0:a.latitude),lng:Number(null===a||void 0===a?void 0:a.longitude)}),B("canceled"===r.status?"error":"success"),q(r)})).finally((()=>{D(!1)}))}),[]),(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(s.Z,{visible:!!k,title:C("show.locations"),onCancel:()=>Y(),style:{minWidth:"80vw"},footer:[(0,w.jsx)(o.Z,{type:"default",onClick:Y,children:C("cancel")},"cancelBtn")],children:z?(0,w.jsx)(h.Z,{}):(0,w.jsxs)(t.Z,{children:[(0,w.jsx)(n.Z,{current:L,status:M,className:"mb-5",children:null===$||void 0===$?void 0:$.map(((e,l)=>(0,w.jsx)(I,{title:C(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+l)))}),(0,w.jsxs)(r.Z,{gutter:12,children:[(0,w.jsxs)(a.Z,{span:12,children:[(0,w.jsxs)("h3",{children:[C("order.id")," #",null===H||void 0===H?void 0:H.id]}),(0,w.jsxs)("p",{children:[(0,w.jsx)(m.D73,{})," ",N()(null===H||void 0===H?void 0:H.created_at).format("YYYY-MM-DD HH:mm")]}),(0,w.jsxs)("p",{children:[C("scheduled.at")," ",null===H||void 0===H?void 0:H.delivery_date]})]}),(0,w.jsxs)(a.Z,{span:12,children:[(0,w.jsxs)("p",{children:[C("status")," ","new"===(null===H||void 0===H?void 0:H.status)?(0,w.jsx)(c.Z,{color:"blue",children:C(null===H||void 0===H?void 0:H.status)}):"canceled"===(null===H||void 0===H?void 0:H.status)?(0,w.jsx)(c.Z,{color:"error",children:C(null===H||void 0===H?void 0:H.status)}):(0,w.jsx)(c.Z,{color:"cyan",children:C(null===H||void 0===H?void 0:H.status)})]}),(0,w.jsxs)("p",{children:[C("payment.method")," ",(0,w.jsx)("strong",{children:null===H||void 0===H||null===(l=H.transaction)||void 0===l||null===(i=l.payment_system)||void 0===i?void 0:i.tag})]}),(0,w.jsxs)("p",{children:[C("order.type")," ",(0,w.jsx)("strong",{children:null===H||void 0===H?void 0:H.delivery_type})]}),(0,w.jsxs)("p",{children:[C("payment.type")," ",(0,w.jsx)("strong",{children:null===H||void 0===H||null===(Z=H.transaction)||void 0===Z?void 0:Z.status})]})]}),(0,w.jsxs)(a.Z,{span:24,className:"mt-5",children:[(0,w.jsx)("h4",{children:C("map")}),(0,w.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,w.jsx)(d.ZP,{bootstrapURLKeys:{key:O?p.kr:O},defaultZoom:10,center:null!==U&&void 0!==U?U:R,options:{fullscreenControl:!1},children:(0,w.jsx)(S,{lat:null===U||void 0===U?void 0:U.lat,lng:null===U||void 0===U?void 0:U.lng})})})]})]})]})})})}},60861:(e,l,i)=>{i.d(l,{Z:()=>m});var d=i(47313),n=i(10976),s=i(9274),o=i(59491),t=i(68197),r=i(59624),a=i(74294),c=i(24511),u=i(23560),v=i(1003),x=i(46417);const h=["paid","canceled"];function m(e){let{transactionDetails:l,handleCancel:i,fetchOrder:m,orderId:j}=e;const[p]=n.Z.useForm(),{t:Z}=(0,c.$)(),[y,g]=(0,d.useState)(!1);return(0,x.jsx)(s.Z,{visible:!!l,title:Z("transaction.status"),closable:!1,footer:[(0,x.jsx)(o.Z,{type:"primary",onClick:()=>p.submit(),loading:y,children:Z("save")},"save-form"),(0,x.jsx)(o.Z,{type:"default",onClick:i,children:Z("cancel")},"cansel-modal")],children:(0,x.jsx)(n.Z,{form:p,layout:"vertical",onFinish:e=>{g(!0),v.Z.updateStatus(j,e).then((()=>{i(),m()})).catch((e=>u.Am.error(e.message))).finally((()=>g(!1)))},initialValues:{status:l.status},children:(0,x.jsx)(t.Z,{gutter:12,children:(0,x.jsx)(r.Z,{span:24,children:(0,x.jsx)(n.Z.Item,{label:Z("status"),name:"status",rules:[{validator:(e,l)=>"paid"===l||"canceled"===l?Promise.resolve():Promise.reject(new Error(Z("required")))}],children:(0,x.jsx)(a.Z,{children:h.map(((e,l)=>(0,x.jsx)(a.Z.Option,{value:e,children:Z(e)},l)))})})})})})})}},83685:(e,l,i)=>{i.d(l,{Z:()=>r});var d=i(1413),n=i(47313);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"};var o=i(17469),t=function(e,l){return n.createElement(o.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:l,icon:s}))};t.displayName="SwapOutlined";const r=n.forwardRef(t)},18478:(e,l,i)=>{e.exports=i.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);