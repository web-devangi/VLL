"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5739],{4014:(e,l,i)=>{function d(e){var l,i;let d=null===e||void 0===e?void 0:e.slice(0,1),n=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,n-1);s=null===(l=s)||void 0===l?void 0:l.replace(/./g,"*");let o=null===e||void 0===e?void 0:e.slice(n-1,e.length);return null===d||void 0===d||null===(i=d.concat(s))||void 0===i?void 0:i.concat(o)}i.d(l,{Z:()=>d})},84261:(e,l,i)=>{function d(e){const l="".concat(e),i="*".repeat(l.length-2);return(null===l||void 0===l?void 0:l[0])+i+(null===l||void 0===l?void 0:l[(null===l||void 0===l?void 0:l.length)-1])}i.d(l,{Z:()=>d})},31025:(e,l,i)=>{i.d(l,{Z:()=>m});var d=i(47313),n=i(24511),s=i(51095),o=i(23560),r=i(59491),t=i(66204),a=i(31881),c=i.n(a),v=i(97421),u=i(51282),x=i(46417);const h="https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=".concat(v.$h);function m(e){let{orderId:l,showLink:i=!0,size:a=2}=e;const{t:m}=(0,n.$)(),[p,j]=(0,d.useState)(""),[y,Z]=(0,d.useState)(!1),[g,f]=(0,d.useState)(null);return(0,d.useEffect)((()=>{(async()=>{Z(!0);const e={dynamicLinkInfo:{domainUriPrefix:v.AC,link:"".concat(v.o6,"/orders/").concat(l),androidInfo:{androidPackageName:v.aG},iosInfo:{iosBundleId:v.Ir}}};try{const{data:l}=await c().post(h,e);f(null),j(null===l||void 0===l?void 0:l.shortLink)}catch(g){f(g),o.Am.error(g.message)}finally{Z(!1)}})()}),[l]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("h3",{children:[m("qr_code"),":"]}),(0,x.jsx)("div",{children:y||g?g?(0,x.jsx)(t.Z,{color:"red",children:m("smth.went.wrong")}):(0,x.jsx)(u.Z,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{width:"".concat(100*a,"px"),height:"".concat(100*a,"px"),borderRadius:"10px",overflow:g?"none":"hidden"},children:(0,x.jsx)(s.Qd,{size:500,id:"qrCode",includeMargin:!0,value:p,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,x.jsx)("br",{}),i&&(0,x.jsx)(r.Z,{type:"primary",href:p,target:"_blank",rel:"noreferrer",style:{width:"".concat(100*a,"px")},children:m("link.to.order")})]})})]})}},64922:(e,l,i)=>{i.d(l,{t:()=>c});var d=i(10976),n=i(68197),s=i(59624),o=i(66672),r=i(59491),t=i(24511),a=i(46417);const c=e=>{let{onSubmit:l,initialData:i,isSubmitting:c}=e;const{t:v}=(0,t.$)();return(0,a.jsx)(d.Z,{layout:"vertical",initialValues:i,onFinish:l,children:(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(d.Z.Item,{label:v("tracking.name"),name:"track_name",rules:[{required:!0,message:v("required")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(d.Z.Item,{label:v("tracking.id"),name:"track_id",rules:[{required:!0,message:v("required")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(s.Z,{span:24,children:(0,a.jsx)(d.Z.Item,{label:v("tracking.url"),name:"track_url",rules:[{type:"url",message:v("should.be.url")}],children:(0,a.jsx)(o.Z,{})})}),(0,a.jsx)(s.Z,{span:7,children:(0,a.jsx)(r.Z,{type:"primary",loading:c,htmlType:"submit",children:v("submit")})})]})})}},65739:(e,l,i)=>{i.r(l),i.d(l,{default:()=>J});var d=i(47313),n=i(45705),s=i(66204),o=i(26824),r=i(78508),t=i(59491),a=i(77181),c=i(68197),v=i(59624),u=i(56140),x=i(14133),h=i(83999),m=i(72652),p=i(45334),j=i(41068),y=i(46155),Z=i(83685),g=i(12019),f=i(89720),b=i(97890),k=i(29466),_=i(7370),N=i(45464),w=i(2717),I=i(90954),C=i(7920),z=i(24077),Y=i(24511),S=i(84017),q=i(73270),D=i(22539),H=i(80355),M=i(32916),B=i(97421),F=i(58821),T=i(5958),L=i(70816),R=i.n(L),A=i(40197),U=i(79492),O=i(4014),$=i(31025),E=i(84261),G=i(60861),P=i(64922),V=i(23560),Q=i(46417);function J(){var e,l,i,L,J,K,W,X,ee,le,ie,de,ne,se,oe,re,te,ae,ce,ve,ue,xe,he,me,pe,je,ye,Ze,ge,fe,be,ke,_e,Ne,we,Ie,Ce,ze,Ye,Se,qe,De,He,Me,Be,Fe,Te,Le,Re,Ae;const{activeMenu:Ue}=(0,w.v9)((e=>e.menu),w.wU),{defaultCurrency:Oe}=(0,w.v9)((e=>e.currency),w.wU),{defaultLang:$e}=(0,w.v9)((e=>e.formLang),w.wU),Ee=Ue.data,{t:Ge}=(0,Y.$)(),{id:Pe}=(0,b.UO)(),Ve=(0,w.I0)(),Qe=(0,b.s0)(),Je=(0,d.useRef)(),Ke=(0,d.useRef)(),{isDemo:We}=(0,U.Z)(),[Xe,el]=(0,d.useState)(null),[ll,il]=(0,d.useState)(!1),[dl,nl]=(0,d.useState)(!1),[sl,ol]=(0,d.useState)(null),[rl,tl]=(0,d.useState)(null),[al,cl]=(0,d.useState)(!1),{statusList:vl}=(0,w.v9)((e=>e.orderStatus),w.wU),ul=[{title:Ge("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.id}},{title:Ge("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,d,o,r,t;return(0,Q.jsxs)(n.Z,{direction:"vertical",className:"relative",children:[null===l||void 0===l||null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title,null===l||void 0===l||null===(r=l.stock)||void 0===r||null===(t=r.extras)||void 0===t?void 0:t.map((e=>{var l,i,d;return(0,Q.jsxs)(s.Z,{children:[null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Ge("image"),dataIndex:"img",key:"img",render:(e,l)=>{var i,d;return(0,Q.jsx)(o.Z,{src:(0,N.Z)(null===l||void 0===l||null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Ge("price"),dataIndex:"origin_price",key:"origin_price",render:(e,l)=>{var i;return(0,S.Z)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.price,null===Oe||void 0===Oe?void 0:Oe.symbol)}},{title:Ge("quantity"),dataIndex:"quantity",key:"quantity",render:(e,l)=>{var i,d;return null!==l&&void 0!==l&&l.bonus?(0,Q.jsx)(s.Z,{color:"green",children:Ge("bonus")}):(0,Q.jsx)("span",{children:e*((null===l||void 0===l||null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.interval)||1)})}},{title:Ge("discount"),dataIndex:"rate_discount",key:"rate_discount",render:(e,l)=>{var i;return(0,S.Z)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.discount,null===Oe||void 0===Oe?void 0:Oe.symbol)}},{title:Ge("tax"),dataIndex:"tax",key:"tax",render:(e,l)=>(0,S.Z)(null===l||void 0===l?void 0:l.tax,null===Oe||void 0===Oe?void 0:Oe.symbol)},{title:Ge("total.price"),dataIndex:"total_price",key:"total_price",render:(e,l)=>(0,S.Z)(null===l||void 0===l?void 0:l.total_price,null===Oe||void 0===Oe?void 0:Oe.symbol)},{title:Ge("actions"),dataIndex:"actions",key:"actions",render:(e,l)=>(0,Q.jsx)(n.Z,{children:(0,Q.jsx)(t.Z,{type:"primary",icon:(0,Q.jsx)(Z.Z,{}),onClick:()=>yl(l),disabled:"new"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&"accepted"!==(null===Ee||void 0===Ee?void 0:Ee.status)||(null===l||void 0===l?void 0:l.bonus)})})},{title:Ge("note"),dataIndex:"note",key:"note",render:e=>e||"--"}],xl=[{title:Ge("date"),dataIndex:"date",key:"date",render:e=>R()(e).format("YYYY-MM-DD HH:mm")},{title:Ge("document"),dataIndex:"document",key:"document"},{title:Ge("number"),dataIndex:"number",key:"number"},{title:Ge("total.price"),dataIndex:"price",key:"price"}],hl=[{price:(0,S.Z)(null===Ee||void 0===Ee?void 0:Ee.total_price,Oe.symbol),number:(0,Q.jsxs)(k.rU,{to:"/orders/generate-invoice/".concat(null===Ee||void 0===Ee?void 0:Ee.id),children:["#",null===Ee||void 0===Ee?void 0:Ee.id]}),document:Ge("invoice"),date:R()(null===Ee||void 0===Ee?void 0:Ee.created_at).format("YYYY-MM-DD HH:mm")},{price:"-",number:(0,Q.jsxs)(k.rU,{to:"/orders/generate-invoice/".concat(null===Ee||void 0===Ee?void 0:Ee.id),children:["#",null===Ee||void 0===Ee?void 0:Ee.id]}),document:Ge("delivery.receipt"),date:R()(null===Ee||void 0===Ee?void 0:Ee.created_at).format("YYYY-MM-DD HH:mm")}],ml=()=>{ol(null),tl(null),el(null)};function pl(){il(!0),_.Z.getById(Pe).then((e=>{let{data:l}=e;Ve((0,I.nc)({activeMenu:Ue,data:l}))})).finally((()=>{il(!1),Ve((0,I.A_)(Ue))}))}const jl=(0,d.useCallback)((e=>{cl(!0),_.Z.updateTracking(null===Ee||void 0===Ee?void 0:Ee.id,e).then((()=>{V.Am.success(Ge("successfully.updated")),pl()})).finally((()=>{cl(!1)}))}),[null===Ee||void 0===Ee?void 0:Ee.id]),yl=e=>{var l,i;Ve((0,I.bL)({url:"order/details/".concat(null===Ee||void 0===Ee?void 0:Ee.id,"/replace/").concat(null===e||void 0===e||null===(l=e.stock)||void 0===l?void 0:l.id),id:"replace_product",name:Ge("replace.product")})),Qe("/order/details/".concat(null===Ee||void 0===Ee?void 0:Ee.id,"/replace/").concat(null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.id),{state:{data:Ee}})};return(0,d.useEffect)((()=>{Ue.refetch&&(pl(),0===vl.length&&Ve((0,A.dX)({})))}),[Ue.refetch]),(0,Q.jsxs)("div",{className:"order_details",children:[(0,Q.jsx)(a.Z,{className:"order-details-info",title:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(M.Qyq,{className:"mr-2 icon"}),"".concat(Ge("order")," ").concat(null!==Ee&&void 0!==Ee&&Ee.id?"#".concat(null===Ee||void 0===Ee?void 0:Ee.id," "):"")," ",Ge("from.order")," ",null===Ee||void 0===Ee||null===(e=Ee.user)||void 0===e?void 0:e.firstname," ",(null===Ee||void 0===Ee||null===(l=Ee.user)||void 0===l?void 0:l.lastname)||""]}),extra:"delivered"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&"canceled"!==(null===Ee||void 0===Ee?void 0:Ee.status)?(0,Q.jsxs)(n.Z,{children:["delivered"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&"canceled"!==(null===Ee||void 0===Ee?void 0:Ee.status)?(0,Q.jsx)(t.Z,{type:"primary",onClick:()=>ol(null===Ee||void 0===Ee?void 0:Ee.id),children:Ge("change.status")}):null,(0,Q.jsx)(t.Z,{type:"primary",icon:(0,Q.jsx)(g.Z,{}),onClick:()=>{Ve((0,q.bn)()),Ve((0,I.bL)({url:"order/".concat(Pe),id:"order_edit",name:Ge("edit.order")})),Qe("/order/".concat(Pe))},children:Ge("edit")})]}):""}),(0,Q.jsxs)(c.Z,{gutter:24,children:[(0,Q.jsx)(v.Z,{span:24,children:(0,Q.jsx)(a.Z,{children:(0,Q.jsxs)(n.Z,{className:"justify-content-between w-100",children:[(0,Q.jsxs)(n.Z,{className:"align-items-start",children:[(0,Q.jsx)(f.Z,{className:"order-card-icon"}),(0,Q.jsxs)("div",{className:"d-flex flex-column",children:[(0,Q.jsx)(u.Z.Text,{children:Ge("delivery.date")}),ll?(0,Q.jsx)(x.Z.Button,{size:16}):(0,Q.jsxs)(u.Z.Text,{className:"order-card-title",children:[null===Ee||void 0===Ee?void 0:Ee.delivery_date," ",null===Ee||void 0===Ee?void 0:Ee.delivery_time]})]})]}),(0,Q.jsxs)(n.Z,{className:"align-items-start",onClick:()=>Ke.current.scrollIntoView({behavior:"smooth"}),children:[(0,Q.jsx)(T.iFN,{className:"order-card-icon"}),(0,Q.jsxs)("div",{className:"d-flex flex-column",children:[(0,Q.jsx)(u.Z.Text,{children:Ge("total.price")}),ll?(0,Q.jsx)(x.Z.Button,{size:16,loading:ll}):(0,Q.jsx)(u.Z.Text,{className:"order-card-title",children:(0,S.Z)(null===Ee||void 0===Ee?void 0:Ee.total_price,null===Oe||void 0===Oe?void 0:Oe.symbol)})]})]}),(0,Q.jsxs)(n.Z,{className:"align-items-start",children:[(0,Q.jsx)(T.Dij,{className:"order-card-icon"}),(0,Q.jsxs)("div",{className:"d-flex flex-column",children:[(0,Q.jsx)(u.Z.Text,{children:Ge("messages")}),ll?(0,Q.jsx)(x.Z.Button,{size:16}):(0,Q.jsx)(u.Z.Text,{className:"order-card-title",children:null!==Ee&&void 0!==Ee&&Ee.review?1:0})]})]}),(0,Q.jsxs)(n.Z,{className:"align-items-start",onClick:()=>Je.current.scrollIntoView({behavior:"smooth"}),children:[(0,Q.jsx)(M.Qyq,{className:"order-card-icon"}),(0,Q.jsxs)("div",{className:"d-flex flex-column",children:[(0,Q.jsx)(u.Z.Text,{children:Ge("products")}),ll?(0,Q.jsx)(x.Z.Button,{size:16}):(0,Q.jsx)(u.Z.Text,{className:"order-card-title",children:null===Ee||void 0===Ee||null===(i=Ee.details)||void 0===i?void 0:i.reduce(((e,l)=>e+(l.quantity||0)),0)})]})]})]})})}),"canceled"!==(null===Ee||void 0===Ee?void 0:Ee.status)&&(0,Q.jsx)(v.Z,{span:24,children:(0,Q.jsx)(a.Z,{children:(0,Q.jsx)(h.Z,{current:null===vl||void 0===vl?void 0:vl.findIndex((e=>e.name===(null===Ee||void 0===Ee?void 0:Ee.status))),children:null===vl||void 0===vl||null===(L=vl.slice(0,-1))||void 0===L?void 0:L.filter((e=>null===e||void 0===e?void 0:e.active)).map((e=>(0,Q.jsx)(h.Z.Step,{title:Ge(e.name)},e.id)))})})}),(0,Q.jsxs)(v.Z,{span:16,children:[(0,Q.jsx)(m.Z,{spinning:ll,children:(0,Q.jsxs)(a.Z,{style:{minHeight:"200px"},children:[(0,Q.jsxs)("h3",{children:[Ge("details"),":"]}),(0,Q.jsxs)(c.Z,{hidden:ll,className:"mb-3 order_detail",gutter:10,children:[(0,Q.jsxs)(v.Z,{span:12,children:[(0,Q.jsxs)("div",{children:[Ge("created.date.&.time"),":",(0,Q.jsxs)("span",{className:"ml-2",children:[(0,Q.jsx)(F.yoA,{className:"mr-1"})," ",R()(null===Ee||void 0===Ee?void 0:Ee.created_at).format("YYYY-MM-DD HH:mm")," "]})]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("div",{children:[Ge("delivery.date.&.time"),":",(0,Q.jsxs)("span",{className:"ml-2",children:[(0,Q.jsx)(F.yoA,{className:"mr-1"})," ",null===Ee||void 0===Ee?void 0:Ee.delivery_date," ",null===Ee||void 0===Ee?void 0:Ee.delivery_time]})]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("div",{children:[Ge("payment.status"),":",(0,Q.jsxs)("span",{style:{cursor:"pointer"},className:"ml-2",onClick:()=>nl(!0),children:[Ge(null===Ee||void 0===Ee||null===(J=Ee.transaction)||void 0===J?void 0:J.status)," ",(0,Q.jsx)(g.Z,{})]})]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("div",{children:[Ge("note"),":",(0,Q.jsx)("span",{className:"ml-2",children:Ge(null!==Ee&&void 0!==Ee&&Ee.note?null===Ee||void 0===Ee?void 0:Ee.note:"")})]})]}),(0,Q.jsxs)(v.Z,{span:12,children:[(0,Q.jsxs)("div",{children:[Ge("status"),":",(0,Q.jsx)("span",{className:"ml-2",children:"new"===(null===Ee||void 0===Ee?void 0:Ee.status)?(0,Q.jsx)(s.Z,{color:"blue",children:Ge(null===Ee||void 0===Ee?void 0:Ee.status)}):"canceled"===(null===Ee||void 0===Ee?void 0:Ee.status)?(0,Q.jsx)(s.Z,{color:"error",children:Ge(null===Ee||void 0===Ee?void 0:Ee.status)}):(0,Q.jsx)(s.Z,{color:"cyan",children:Ge(null===Ee||void 0===Ee?void 0:Ee.status)})})]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("div",{children:[Ge("delivery.type"),":",(0,Q.jsx)("span",{className:"ml-2",children:null===Ee||void 0===Ee?void 0:Ee.delivery_type})]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("div",{children:[Ge("payment.type"),":",(0,Q.jsx)("span",{className:"ml-2",children:Ge(null===Ee||void 0===Ee||null===(K=Ee.transaction)||void 0===K||null===(W=K.payment_system)||void 0===W?void 0:W.tag)})]}),(0,Q.jsx)("br",{})]})]}),(0,Q.jsxs)(c.Z,{hidden:ll,className:"mb-3 order_detail",children:[(0,Q.jsxs)(v.Z,{span:12,children:[(0,Q.jsxs)("h3",{children:[Ge("delivery.address"),":"]}),(0,Q.jsx)("div",{children:null!==Ee&&void 0!==Ee&&Ee.address?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)("div",{children:[Ge("street.house.number"),":"," ",null!==(X=null===Ee||void 0===Ee||null===(ee=Ee.address)||void 0===ee?void 0:ee.street_house_number)&&void 0!==X?X:Ge("not.given")]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("div",{children:[Ge("zipcode"),":"," ",null!==(le=null!==(ie=null===Ee||void 0===Ee||null===(de=Ee.address)||void 0===de?void 0:de.zipcode)&&void 0!==ie?ie:null===Ee||void 0===Ee||null===(ne=Ee.address)||void 0===ne?void 0:ne.zip_code)&&void 0!==le?le:Ge("not.given")]})]}):null!==Ee&&void 0!==Ee&&Ee.my_address?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)("div",{children:[Ge("street.house.number"),":"," ",null!==(se=null===Ee||void 0===Ee||null===(oe=Ee.my_address)||void 0===oe?void 0:oe.street_house_number)&&void 0!==se?se:Ge("not.given")]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("div",{children:[Ge("zipcode"),":"," ",null!==(re=null===Ee||void 0===Ee||null===(te=Ee.my_address)||void 0===te?void 0:te.zipcode)&&void 0!==re?re:Ge("not.given")]})]}):null!==Ee&&void 0!==Ee&&Ee.delivery_point?(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsxs)("div",{children:[Ge("address"),":"," ",null!==(ae=null===Ee||void 0===Ee||null===(ce=Ee.delivery_point)||void 0===ce||null===(ve=ce.address)||void 0===ve?void 0:ve[$e])&&void 0!==ae?ae:Ge("no.address")]})}):"digital"===(null===Ee||void 0===Ee?void 0:Ee.delivery_type)?(0,Q.jsx)("div",{children:Ge("digital.delivery")}):(0,Q.jsx)("div",{children:Ge("no.address")})}),(0,Q.jsxs)(t.Z,{className:"map_show mt-3",onClick:()=>el(Pe),children:[(0,Q.jsx)(D.$0r,{style:{marginRight:"8px"}})," ",Ge("show.locations")]})]}),(0,Q.jsx)(v.Z,{span:12,children:(0,Q.jsx)($.Z,{orderId:Pe})})]})]})}),(0,Q.jsx)(a.Z,{title:Ge("documents"),children:(0,Q.jsx)(r.Z,{columns:xl,dataSource:hl,pagination:!1,loading:ll})})]}),(0,Q.jsxs)(v.Z,{span:8,className:"order_info",children:["delivery"===(null===Ee||void 0===Ee?void 0:Ee.delivery_type)&&(0,Q.jsxs)(a.Z,{title:Ge("deliveryman"),extra:"ready"===(null===Ee||void 0===Ee?void 0:Ee.status)&&"pickup"!==(null===Ee||void 0===Ee?void 0:Ee.delivery_type)&&(0,Q.jsxs)(t.Z,{onClick:()=>tl(Ee),children:[Ge("change"),(0,Q.jsx)(g.Z,{})]}),children:["new"===(null===Ee||void 0===Ee?void 0:Ee.status)||"accepted"===(null===Ee||void 0===Ee?void 0:Ee.status)?(0,Q.jsx)("p",{children:Ge("order_status_ready")}):"","new"===(null===Ee||void 0===Ee?void 0:Ee.status)||"accepted"===(null===Ee||void 0===Ee?void 0:Ee.status)||null!==Ee&&void 0!==Ee&&Ee.deliveryman?"":(0,Q.jsx)("p",{children:Ge("The supplier is not assigned or delivery type pickup")}),(null===Ee||void 0===Ee?void 0:Ee.deliveryman)&&(0,Q.jsxs)(n.Z,{children:[(0,Q.jsx)(p.C,{shape:"square",size:64,src:B.bV+(null===Ee||void 0===Ee||null===(ue=Ee.deliveryman)||void 0===ue?void 0:ue.img)}),(0,Q.jsxs)("div",{children:[(0,Q.jsxs)("h5",{children:[null===Ee||void 0===Ee||null===(xe=Ee.deliveryman)||void 0===xe?void 0:xe.firstname," ",(null===Ee||void 0===Ee||null===(he=Ee.deliveryman)||void 0===he?void 0:he.lastname)||""]}),(0,Q.jsxs)("span",{className:"delivery-info",children:[(0,Q.jsx)(F.lfG,{}),null!==Ee&&void 0!==Ee&&null!==(me=Ee.deliveryman)&&void 0!==me&&me.phone?(0,E.Z)(null===Ee||void 0===Ee||null===(pe=Ee.deliveryman)||void 0===pe?void 0:pe.phone):Ge("no.phone")]}),(0,Q.jsxs)("div",{className:"delivery-info",children:[(0,Q.jsx)("b",{children:(0,Q.jsx)(D.ixJ,{size:16})}),(0,Q.jsx)("span",{children:(0,O.Z)(null===Ee||void 0===Ee||null===(je=Ee.deliveryman)||void 0===je?void 0:je.email)})]})]})]})]}),2===(null===Ee||void 0===Ee?void 0:Ee.type)&&"delivery"===(null===Ee||void 0===Ee?void 0:Ee.delivery_type)&&(0,Q.jsx)(a.Z,{title:Ge("tracking.info"),children:(0,Q.jsx)(P.t,{onSubmit:jl,isSubmitting:al,initialData:{track_name:null===Ee||void 0===Ee?void 0:Ee.track_name,track_id:null===Ee||void 0===Ee?void 0:Ee.track_id,track_url:null===Ee||void 0===Ee?void 0:Ee.track_url}})}),!(null===Ee||void 0===Ee||!Ee.username)&&(0,Q.jsxs)(a.Z,{title:Ge("order.receiver"),children:[(0,Q.jsxs)("div",{className:"customer-info",children:[(0,Q.jsx)("span",{className:"title",children:Ge("name")}),(0,Q.jsxs)("span",{className:"description",children:[(0,Q.jsx)(F.HHm,{}),null===Ee||void 0===Ee?void 0:Ee.username]})]}),(0,Q.jsxs)("div",{className:"customer-info",children:[(0,Q.jsx)("span",{className:"title",children:Ge("phone")}),(0,Q.jsxs)("span",{className:"description",children:[(0,Q.jsx)(F.lfG,{}),null===Ee||void 0===Ee?void 0:Ee.phone]})]})]}),!(null===Ee||void 0===Ee||!Ee.user)&&(0,Q.jsx)(a.Z,{title:(0,Q.jsxs)(n.Z,{children:[Ge("customer.info"),(0,Q.jsx)(g.Z,{onClick:()=>(Ve((0,I.bL)({url:"users/user/".concat(null===Ee||void 0===Ee?void 0:Ee.user.uuid),id:"user_info",name:Ge("user.info")})),void Qe("/users/user/".concat(null===Ee||void 0===Ee?void 0:Ee.user.uuid),{state:{user_id:null===Ee||void 0===Ee?void 0:Ee.user.id}}))})]}),children:(0,Q.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[ll?(0,Q.jsx)(x.Z.Avatar,{size:64,shape:"square"}):(0,Q.jsx)(p.C,{shape:"square",size:64,src:null===Ee||void 0===Ee||null===(ye=Ee.user)||void 0===ye?void 0:ye.img}),(0,Q.jsx)("h5",{className:"customer-name",children:ll?(0,Q.jsx)(x.Z.Button,{size:20,style:{width:70}}):(null===Ee||void 0===Ee||null===(Ze=Ee.user)||void 0===Ze?void 0:Ze.firstname)+" "+((null===Ee||void 0===Ee||null===(ge=Ee.user)||void 0===ge?void 0:ge.lastname)||"")}),(0,Q.jsxs)("div",{className:"customer-info-detail",children:[(0,Q.jsxs)("div",{className:"customer-info",children:[(0,Q.jsx)("span",{className:"title",children:Ge("phone")}),(0,Q.jsxs)("span",{className:"description",children:[(0,Q.jsx)(F.lfG,{}),ll?(0,Q.jsx)(x.Z.Button,{size:16}):null!==Ee&&void 0!==Ee&&null!==(fe=Ee.user)&&void 0!==fe&&fe.phone?(0,E.Z)(null===Ee||void 0===Ee||null===(be=Ee.user)||void 0===be?void 0:be.phone):Ge("no.phone")]})]}),(0,Q.jsxs)("div",{className:"customer-info",children:[(0,Q.jsx)("span",{className:"title",children:Ge("email")}),(0,Q.jsxs)("span",{className:"description",children:[(0,Q.jsx)(D.ixJ,{}),ll?(0,Q.jsx)(x.Z.Button,{size:16}):(0,O.Z)(null===Ee||void 0===Ee||null===(ke=Ee.user)||void 0===ke?void 0:ke.email)]})]}),(0,Q.jsxs)("div",{className:"customer-info",children:[(0,Q.jsx)("span",{className:"title",children:Ge("registration.date")}),(0,Q.jsxs)("span",{className:"description",children:[(0,Q.jsx)(F.yoA,{}),ll?(0,Q.jsx)(x.Z.Button,{size:16}):R()(null===Ee||void 0===Ee||null===(_e=Ee.user)||void 0===_e?void 0:_e.created_at).format("DD-MM-YYYY, HH:mm")]})]}),(0,Q.jsxs)("div",{className:"customer-info",children:[(0,Q.jsx)("span",{className:"title",children:Ge("orders.count")}),(0,Q.jsx)("span",{className:"description",children:ll?(0,Q.jsx)(x.Z.Button,{size:16}):(0,Q.jsx)(j.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===Ee||void 0===Ee||null===(Ne=Ee.user)||void 0===Ne?void 0:Ne.orders_count)||0})})]}),(0,Q.jsxs)("div",{className:"customer-info",children:[(0,Q.jsx)("span",{className:"title",children:Ge("spent.since.registration")}),(0,Q.jsx)("span",{className:"description",children:ll?(0,Q.jsx)(x.Z.Button,{size:16}):(0,Q.jsx)(j.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,S.Z)(null===Ee||void 0===Ee||null===(we=Ee.user)||void 0===we?void 0:we.orders_sum_price,null===Oe||void 0===Oe?void 0:Oe.symbol)})})]})]})]})}),(null===Ee||void 0===Ee?void 0:Ee.review)&&!ll&&(0,Q.jsx)(a.Z,{title:Ge("messages"),children:(0,Q.jsxs)("div",{className:"order-message",children:[(0,Q.jsx)("span",{className:"message",children:null===Ee||void 0===Ee||null===(Ie=Ee.review)||void 0===Ie?void 0:Ie.comment}),(0,Q.jsx)(n.Z,{className:"w-100 justify-content-end",children:(0,Q.jsx)("span",{className:"date",children:R()(null===Ee||void 0===Ee||null===(Ce=Ee.review)||void 0===Ce?void 0:Ce.created_at).format("YYYY-MM-DD HH:mm")})})]})}),(null===Ee||void 0===Ee?void 0:Ee.shop)&&(0,Q.jsx)(a.Z,{title:"".concat(Ge("shop.details"),": #").concat(null===Ee||void 0===Ee||null===(ze=Ee.shop)||void 0===ze?void 0:ze.id),loading:ll,children:(0,Q.jsxs)(c.Z,{gutter:12,children:[(0,Q.jsxs)(v.Z,{span:24,style:{display:"flex",columnGap:"20px",marginBottom:"20px"},children:[(0,Q.jsx)("div",{style:{width:"100px",height:"100px",backgroundColor:"#f5f5f5",overflow:"hidden",borderRadius:"10px",position:"relative"},children:(0,Q.jsx)(o.Z,{alt:Ge("shop.logo"),style:{objectFit:"contain"},src:(null===Ee||void 0===Ee||null===(Ye=Ee.shop)||void 0===Ye?void 0:Ye.logo_img)||"https://via.placeholder.com/150",width:100,height:100,preview:!1})}),(0,Q.jsxs)("div",{style:{width:"calc(100% - 100px - 20px)"},children:[(0,Q.jsx)("h5",{style:{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(null===Ee||void 0===Ee||null===(Se=Ee.shop)||void 0===Se||null===(qe=Se.translation)||void 0===qe?void 0:qe.title)||"--"}),(0,Q.jsx)("p",{children:null!==Ee&&void 0!==Ee&&null!==(De=Ee.shop)&&void 0!==De&&De.open?(0,Q.jsx)(s.Z,{color:"green",children:Ge("open")}):(0,Q.jsx)(s.Z,{color:"red",children:Ge("closed")})})]})]}),(0,Q.jsxs)(v.Z,{span:24,children:[(null===Ee||void 0===Ee||null===(He=Ee.shop)||void 0===He?void 0:He.phone)&&(0,Q.jsxs)("p",{children:[(0,Q.jsxs)("strong",{children:[Ge("phone"),":"]})," ",null===Ee||void 0===Ee||null===(Me=Ee.shop)||void 0===Me?void 0:Me.phone]}),(null===Ee||void 0===Ee||null===(Be=Ee.shop)||void 0===Be||null===(Fe=Be.translation)||void 0===Fe?void 0:Fe.address)&&(0,Q.jsxs)("p",{children:[(0,Q.jsxs)("strong",{children:[Ge("address"),":"]})," ",null===Ee||void 0===Ee||null===(Te=Ee.shop)||void 0===Te||null===(Le=Te.translation)||void 0===Le?void 0:Le.address]})]})]})})]}),(0,Q.jsx)(v.Z,{span:24,children:(0,Q.jsxs)(a.Z,{className:"w-100 order-table",title:Ge("order.products"),children:[(0,Q.jsx)(y.Z,{}),(0,Q.jsx)(r.Z,{ref:Je,scroll:{x:!0},columns:ul,dataSource:(null===(Re=Ue.data)||void 0===Re?void 0:Re.details)||[],loading:ll,rowKey:e=>null===e||void 0===e?void 0:e.id,pagination:!1,expandable:{expandedRowRender:e=>{if(null===e||void 0===e||!e.replace_stock)return;const l=[{title:Ge("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.id}},{title:Ge("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,d,o,r,t;return(0,Q.jsxs)(n.Z,{direction:"vertical",className:"relative",children:[null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title,null===l||void 0===l||null===(r=l.replace_stock)||void 0===r||null===(t=r.extras)||void 0===t?void 0:t.map((e=>{var l,i,d;return(0,Q.jsxs)(s.Z,{children:[null===e||void 0===e||null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===e||void 0===e||null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Ge("image"),dataIndex:"img",key:"img",render:(e,l)=>{var i,d;return(0,Q.jsx)(o.Z,{src:(0,N.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Ge("price"),dataIndex:"price",key:"price",render:(e,l)=>{var i;return(0,S.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.price,null===Oe||void 0===Oe?void 0:Oe.symbol)}},{title:Ge("quantity"),dataIndex:"replace_quantity",key:"replace_quantity",render:(e,l)=>{var i,d;return(0,Q.jsx)("span",{children:e*((null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.interval)||1)})}},{title:Ge("discount"),dataIndex:"discount",key:"discount",render:(e,l)=>{var i,d;return(0,S.Z)(null!==(i=null===l||void 0===l||null===(d=l.replace_stock)||void 0===d?void 0:d.discount)&&void 0!==i?i:0,null===Oe||void 0===Oe?void 0:Oe.symbol)}},{title:Ge("tax"),dataIndex:"tax",key:"tax",render:(e,l)=>{var i;return(0,S.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.tax,null===Oe||void 0===Oe?void 0:Oe.symbol)}},{title:Ge("total.price"),dataIndex:"total_price",key:"total_price",render:(e,l)=>{var i;return(0,S.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.total_price,null===Oe||void 0===Oe?void 0:Oe.symbol)}}];return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Q.jsx)(Z.Z,{style:{padding:"10px",margin:"10px 0 50px 0",border:"2px solid #cad2de",borderRadius:"30%"},rotate:90})}),(0,Q.jsx)(r.Z,{columns:l,dataSource:[e],pagination:!1})]})},expandIcon:e=>{let{expanded:l,onExpand:i,record:d}=e;return(0,Q.jsx)(Z.Z,{onClick:e=>i(d,e),rotate:90})},defaultExpandedRowKeys:["0"]}}),(0,Q.jsxs)(n.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,Q.jsxs)("div",{children:[(0,Q.jsxs)("span",{children:[Ge("delivery.fee"),":"]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("span",{children:[Ge("order.tax"),":"]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("span",{children:[Ge("product"),":"]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("span",{children:[Ge("discount"),":"]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("span",{children:[Ge("service.fee"),":"]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("span",{children:[Ge("coupon.price"),":"]}),(0,Q.jsx)("br",{}),(0,Q.jsxs)("h3",{children:[Ge("total.price"),":"]})]}),(0,Q.jsxs)("div",{children:[(0,Q.jsx)("span",{children:(0,S.Z)(null!==(Ae=null===Ee||void 0===Ee?void 0:Ee.delivery_fee)&&void 0!==Ae?Ae:0,null===Oe||void 0===Oe?void 0:Oe.symbol)}),(0,Q.jsx)("br",{}),(0,Q.jsx)("span",{children:(0,S.Z)(null===Ee||void 0===Ee?void 0:Ee.tax,null===Oe||void 0===Oe?void 0:Oe.symbol)}),(0,Q.jsx)("br",{}),(0,Q.jsx)("span",{children:(0,S.Z)(null===Ee||void 0===Ee?void 0:Ee.origin_price,null===Oe||void 0===Oe?void 0:Oe.symbol)}),(0,Q.jsx)("br",{}),(0,Q.jsx)("span",{children:(0,S.Z)(null===Ee||void 0===Ee?void 0:Ee.total_discount,null===Oe||void 0===Oe?void 0:Oe.symbol)}),(0,Q.jsx)("br",{}),(0,Q.jsx)("span",{children:(0,S.Z)(null===Ee||void 0===Ee?void 0:Ee.service_fee,null===Oe||void 0===Oe?void 0:Oe.symbol)}),(0,Q.jsx)("br",{}),(0,Q.jsx)("span",{children:(0,S.Z)(null===Ee||void 0===Ee?void 0:Ee.coupon_price,null===Oe||void 0===Oe?void 0:Oe.symbol)}),(0,Q.jsx)("br",{}),(0,Q.jsx)("h3",{ref:Ke,children:(0,S.Z)(null===Ee||void 0===Ee?void 0:Ee.total_price,null===Oe||void 0===Oe?void 0:Oe.symbol)})]})]})]})})]}),sl&&(0,Q.jsx)(C.Z,{orderId:sl,handleCancel:ml,refetchPage:pl}),rl&&(0,Q.jsx)(z.Z,{orderDetails:rl,handleCancel:ml}),Xe&&(0,Q.jsx)(H.Z,{id:Xe,handleCancel:ml}),dl&&(0,Q.jsx)(G.Z,{orderId:Pe,handleCancel:()=>nl(!1),transactionDetails:null===Ee||void 0===Ee?void 0:Ee.transaction,fetchOrder:pl})]})}},60861:(e,l,i)=>{i.d(l,{Z:()=>m});var d=i(47313),n=i(10976),s=i(9274),o=i(59491),r=i(68197),t=i(59624),a=i(74294),c=i(24511),v=i(23560),u=i(1003),x=i(46417);const h=["paid","canceled"];function m(e){let{transactionDetails:l,handleCancel:i,fetchOrder:m,orderId:p}=e;const[j]=n.Z.useForm(),{t:y}=(0,c.$)(),[Z,g]=(0,d.useState)(!1);return(0,x.jsx)(s.Z,{visible:!!l,title:y("transaction.status"),closable:!1,footer:[(0,x.jsx)(o.Z,{type:"primary",onClick:()=>j.submit(),loading:Z,children:y("save")},"save-form"),(0,x.jsx)(o.Z,{type:"default",onClick:i,children:y("cancel")},"cansel-modal")],children:(0,x.jsx)(n.Z,{form:j,layout:"vertical",onFinish:e=>{g(!0),u.Z.updateStatus(p,e).then((()=>{i(),m()})).catch((e=>v.Am.error(e.message))).finally((()=>g(!1)))},initialValues:{status:l.status},children:(0,x.jsx)(r.Z,{gutter:12,children:(0,x.jsx)(t.Z,{span:24,children:(0,x.jsx)(n.Z.Item,{label:y("status"),name:"status",rules:[{validator:(e,l)=>"paid"===l||"canceled"===l?Promise.resolve():Promise.reject(new Error(y("required")))}],children:(0,x.jsx)(a.Z,{children:h.map(((e,l)=>(0,x.jsx)(a.Z.Option,{value:e,children:y(e)},l)))})})})})})})}}}]);