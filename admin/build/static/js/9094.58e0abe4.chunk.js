"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9094],{52008:function(e,n,t){t(47313);n.Z=t.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},19094:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var s=t(29439),i=t(47313),c=t(77181),a=t(68197),r=t(59624),l=t(41068),o=t(59491),u=t(72652),d=t(34344),h={getAll:function(e){return d.Z.get("dashboard/seller/subscriptions",{params:e})},attach:function(e,n){return d.Z.post("dashboard/seller/subscriptions/".concat(e,"/attach"),n)},transactionCreate:function(e,n){return d.Z.post("payments/subscription/".concat(e,"/transactions"),n)}},f=t(2717),m=t(24511),p=t(9274),v=t(42111),x=t(51282),j=t(23560),y=t(73339),g=t(52008),b=t(26672),Z=t(92709),w=t(57864),N=t(46417),k=["wallet"];function C(e){var n,t=e.modal,l=e.handleCancel,u=(0,m.$)().t,d=(0,f.I0)(),C=(0,f.v9)((function(e){return e.myShop.myShop}),f.wU).seller,S=(0,i.useState)(!1),z=(0,s.Z)(S,2),A=z[0],U=z[1],E=(0,i.useState)({}),I=(0,s.Z)(E,2),_=I[0],$=I[1],D=(0,f.v9)((function(e){return e.payment}),f.wU),F=D.payments,K=D.loading;(0,i.useEffect)((function(){d((0,v.dA)({}))}),[]);var M=function(e){switch(e){case"wallet":default:return(0,N.jsx)(w.dk2,{size:80});case"paypal":return(0,N.jsx)(b.kD0,{size:80});case"stripe":return(0,N.jsx)(Z.K6C,{size:80});case"razorpay":return(0,N.jsx)(Z.r98,{size:80});case"paystack":return(0,N.jsx)("img",{src:g.Z,alt:"img",width:"80",height:"80"})}};return(0,N.jsx)(p.Z,{visible:!!t,title:u("purchase.subscription"),onCancel:l,footer:[(0,N.jsx)(o.Z,{type:"primary",onClick:function(){var e;_.id?"wallet"===_.tag&&(null===C||void 0===C||null===(e=C.wallet)||void 0===e?void 0:e.price)<t.price?j.Am.warning(u("insufficient.balance")):(U(!0),h.attach(t.id).then((function(e){return function(e){var n={payment_sys_id:_.id};h.transactionCreate(e,n).then((function(){l(),j.Am.success(u("successfully.purchased")),d((0,y.S)({}))})).finally((function(){return U(!1)}))}(e.data.id)})).error((function(){return U(!1)}))):j.Am.warning(u("please.select.payment.type"))},loading:A,children:u("save")},"save-btn"),(0,N.jsx)(o.Z,{type:"default",onClick:l,children:u("cancel")},"cancel-btn")],children:K?(0,N.jsx)(x.Z,{}):(0,N.jsx)(a.Z,{gutter:12,children:null===F||void 0===F||null===(n=F.filter((function(e){return"cash"!==(null===e||void 0===e?void 0:e.tag)})))||void 0===n?void 0:n.map((function(e,n){return(0,N.jsx)(r.Z,{span:8,children:(0,N.jsxs)(c.Z,{className:"payment-card ".concat((null===_||void 0===_?void 0:_.tag)===e.tag?"active":""),onClick:function(){return n=e,void(k.includes(n.tag)?$(n):j.Am.warning(u("cannot.work.demo")));var n},children:[(0,N.jsx)("div",{className:"payment-icon",children:M(null===e||void 0===e?void 0:e.tag)}),(0,N.jsx)("div",{className:"font-weight-bold mt-2",children:u(null===e||void 0===e?void 0:e.tag)})]})},n)}))})})}var S=t(90954),z=[];function A(){var e=(0,m.$)().t,n=(0,f.v9)((function(e){return e.currency}),f.wU).defaultCurrency,t=(0,f.v9)((function(e){return e.myShop}),f.wU).myShop,d=(0,i.useState)(null),p=(0,s.Z)(d,2),v=p[0],x=p[1],j=(0,i.useState)(!1),y=(0,s.Z)(j,2),g=y[0],b=y[1],Z=(0,i.useState)([]),w=(0,s.Z)(Z,2),k=w[0],A=w[1],U=k.length,E=(0,f.v9)((function(e){return e.menu}),f.wU).activeMenu,I=(0,f.I0)(),_=function(){b(!0),h.getAll().then((function(e){A(e.data)})).finally((function(){b(!1),I((0,S.A_)(E))}))};return(0,i.useEffect)((function(){E.refetch&&_()}),[E.refetch]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.Z,{className:"h-100",children:g?(0,N.jsx)(r.Z,{className:"ant-col-spin d-flex justify-content-center",children:(0,N.jsx)(u.Z,{size:"large"})}):(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"text-center mb-4",children:[(0,N.jsx)("h2",{className:"font-weight-semibold",children:"Pick a base plan"}),(0,N.jsx)(a.Z,{type:"flex",justify:"center",children:(0,N.jsx)(r.Z,{sm:24,md:12,lg:8,children:(0,N.jsx)("p",{children:"Space, the final frontier. These are the voyages of the Starship Enterprise. Its five-year mission."})})})]}),(0,N.jsx)(a.Z,{children:k.map((function(s,i){var c,a;return(0,N.jsx)(r.Z,{span:6,className:U===i+1?"":"border-right",children:(0,N.jsx)(l.Z.Ribbon,{text:e("active"),color:"red",className:(null===t||void 0===t||null===(c=t.subscription)||void 0===c||null===(a=c.subscription)||void 0===a?void 0:a.id)===s.id?"":"d-none",children:(0,N.jsxs)("div",{className:"p-3",children:[(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsxs)("h1",{className:"display-4 mt-4",children:[(0,N.jsx)("span",{className:"font-size-md d-inline-block mr-1",style:{transform:"translate(0px, -17px)"},children:null===n||void 0===n?void 0:n.symbol}),(0,N.jsx)("span",{children:s.price})]}),(0,N.jsxs)("p",{className:"mb-0 text-lowercase",children:[s.month," ",e("month")]})]}),(0,N.jsx)("div",{className:"mt-4",children:(0,N.jsx)("h2",{className:"text-center font-weight-semibold",children:s.type})}),(0,N.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,N.jsx)("div",{children:null===z||void 0===z?void 0:z.map((function(e,n){return(0,N.jsxs)("p",{children:[(0,N.jsx)(l.Z,{color:"blue"}),(0,N.jsx)("span",{children:e})]},"pricing-feature-".concat(n))}))})}),(0,N.jsx)("div",{className:"mt-3 text-center",children:(0,N.jsx)(o.Z,{type:"default",onClick:function(){return x(s)},children:e("purchase")})})]})})},"price-column-".concat(i))}))})]})}),v&&(0,N.jsx)(C,{modal:v,handleCancel:function(){return x(null)},refetch:_})]})}}}]);