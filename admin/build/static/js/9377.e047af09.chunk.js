"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9377],{32380:function(e,n,t){t.d(n,{o:function(){return d}});var r=t(1413),a=t(29439),i=t(45987),l=t(47313),u=t(84762),o=t(72652),s=t(46417),c=["fetchOptions","refetch"],d=function(e){var n=e.fetchOptions,t=e.refetch,d=void 0!==t&&t,m=(0,i.Z)(e,c),v=(0,l.useState)(!1),h=(0,a.Z)(v,2),f=h[0],p=h[1],Z=(0,l.useState)([]),g=(0,a.Z)(Z,2),j=g[0],x=g[1];return(0,s.jsx)(u.Z,(0,r.Z)({treeLine:!0,treeData:f?[]:j,treeDefaultExpandAll:!0,labelInValue:!0,onFocus:function(){j.length&&!d||(p(!0),n().then((function(e){x(e),p(!1)})))},notFoundContent:f?(0,s.jsx)(o.Z,{size:"small"}):"no results"},m))}},73431:function(e,n,t){var r=t(47313),a=t(39180),i=t(2717),l=t(28830),u=t(60535),o=t(46417);n.Z=function(){var e=(0,i.I0)(),n=(0,i.v9)((function(e){return e.formLang}),i.wU),t=n.languages,s=n.defaultLang;(0,r.useEffect)((function(){u.Z.getAllActive().then((function(n){var t=n.data;e((0,l.dc)(t)),e((0,l.mh)(t.find((function(e){return 1===e.default})).locale))}))}),[]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.ZP.Group,{value:s,onChange:function(n){var t=n.target.value;e((0,l.mh)(t))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((function(e){return(0,o.jsx)(a.ZP.Button,{value:e.locale,children:e.title},e.id)}))})})}},19377:function(e,n,t){t.r(n);var r=t(15861),a=t(1413),i=t(29439),l=t(87757),u=t.n(l),o=t(47313),s=t(10976),c=t(77181),d=t(68197),m=t(59624),v=t(66672),h=t(74294),f=t(16124),p=t(86345),Z=t(59491),g=t(23560),j=t(97890),x=t(73431),y=t(52421),b=t(2717),w=t(90954),k=t(30763),q=t(24511),I=t(5764),P=t(32380),E=t(46417);n.default=function(){var e,n,t=(0,q.$)().t,l=(0,j.s0)(),L=(0,b.I0)(),S=(0,o.useState)("main"),_=(0,i.Z)(S,2),F=_[0],A=_[1],C=(0,b.v9)((function(e){return e.menu}),b.wU).activeMenu,U=(0,o.useState)(null!==(e=C.data)&&void 0!==e&&e.image?[null===(n=C.data)||void 0===n?void 0:n.image]:[]),z=(0,i.Z)(U,2),N=z[0],O=z[1],V=s.Z.useForm(),D=(0,i.Z)(V,1)[0],M=(0,o.useState)(!1),B=(0,i.Z)(M,2),G=B[0],T=B[1],$=(0,o.useState)(null),H=(0,i.Z)($,2),J=H[0],K=H[1],Q=(0,b.v9)((function(e){return e.formLang}),b.wU),R=Q.defaultLang,W=Q.languages;(0,o.useEffect)((function(){return function(){var e=D.getFieldsValue(!0);L((0,w.nc)({activeMenu:C,data:e}))}}),[]);function X(){return(X=(0,r.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={perPage:100,type:"main"},e.abrupt("return",k.Z.getAll(n).then((function(e){return e.data.map((function(e){var n,t;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id,type:"main",children:null===(t=e.children)||void 0===t?void 0:t.map((function(e){var n,t;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id,type:"sub_main",disabled:"child"===e.type,children:null===(t=e.children)||void 0===t?void 0:t.map((function(e){var n;return{label:null===(n=e.translation)||void 0===n?void 0:n.title,value:e.id,key:e.id,disabled:!0,type:"child"}}))}}))}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,E.jsx)(c.Z,{title:t("add.category"),extra:(0,E.jsx)(x.Z,{}),children:(0,E.jsxs)(s.Z,{name:"basic",layout:"vertical",onFinish:function(e){var n,r,i;T(!0);var u=(0,a.Z)((0,a.Z)({},e),{},{type:null!==(n=e.parent_id)&&void 0!==n&&n.value?F:"main",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null===(r=e.parent_id)||void 0===r?void 0:r.value,"images[0]":null===(i=N[0])||void 0===i?void 0:i.name}),o="catalog/categories";k.Z.create(u).then((function(){g.Am.success(t("successfully.created")),L((0,w.ph)((0,a.Z)((0,a.Z)({},C),{},{nextUrl:o}))),l("/".concat(o))})).catch((function(e){return K(e.response.data.params)})).finally((function(){return T(!1)}))},initialValues:(0,a.Z)({active:!0},C.data),form:D,children:[(0,E.jsxs)(d.Z,{gutter:12,children:[(0,E.jsx)(m.Z,{span:12,children:W.map((function(e,n){return(0,E.jsx)(s.Z.Item,{label:t("name"),name:"title[".concat(e.locale,"]"),help:J&&J["title.".concat(R)]?J["title.".concat(R)][0]:null,validateStatus:J?"error":"success",rules:[{required:!0,validator:function(n,r){return r||(null===e||void 0===e?void 0:e.locale)!==R?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(t("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<2?Promise.reject(new Error(t("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(t("required")))}}],hidden:e.locale!==R,children:(0,E.jsx)(v.Z,{placeholder:t("name"),maxLength:50})},e.title+n)}))}),(0,E.jsx)(m.Z,{span:12,children:W.map((function(e,n){return(0,E.jsx)(s.Z.Item,{label:t("description"),name:"description[".concat(e.locale,"]"),rules:[{required:!0,validator:function(n,r){return r||(null===e||void 0===e?void 0:e.locale)!==R?r&&""===(null===r||void 0===r?void 0:r.trim())?Promise.reject(new Error(t("no.empty.space"))):r&&(null===r||void 0===r?void 0:r.trim().length)<5?Promise.reject(new Error(t("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(t("required")))}}],hidden:e.locale!==R,children:(0,E.jsx)(y.Z,{rows:4,maxLength:150})},e.locale+n)}))}),(0,E.jsx)(m.Z,{span:12,children:(0,E.jsx)(s.Z.Item,{label:t("keywords"),name:"keywords",rules:[{required:!0,message:t("required")}],children:(0,E.jsx)(h.Z,{mode:"tags",style:{width:"100%"}})})}),(0,E.jsx)(m.Z,{span:12,children:(0,E.jsx)(s.Z.Item,{label:t("parent.category"),name:"parent_id",rules:[{required:!1,message:t("required")}],children:(0,E.jsx)(P.o,{refetch:!0,fetchOptions:function(){return X.apply(this,arguments)},onSelect:function(e,n){var t=(n||{}).type;A("main"===t?"sub_main":"sub_main"===t?"child":"main")},allowClear:!0})})}),(0,E.jsx)(m.Z,{span:12,children:(0,E.jsx)(s.Z.Item,{name:"input",label:t("input"),rules:[{required:!0,message:t("required")}],children:(0,E.jsx)(f.Z,{min:0,parser:function(e){return parseInt(e,10)},max:9999999,className:"w-100"})})}),(0,E.jsx)(m.Z,{span:4,children:(0,E.jsx)(s.Z.Item,{label:t("image"),name:"images",rules:[{required:!(null!==N&&void 0!==N&&N.length),message:t("required")}],children:(0,E.jsx)(I.Z,{type:"categories",imageList:N,setImageList:O,form:D,multiple:!1})})}),(0,E.jsx)(m.Z,{span:2,children:(0,E.jsx)(s.Z.Item,{label:t("active"),name:"active",valuePropName:"checked",children:(0,E.jsx)(p.Z,{})})})]}),(0,E.jsx)(Z.Z,{type:"primary",htmlType:"submit",loading:G,children:t("submit")})]})})}}}]);