"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6940],{79578:(e,t,l)=>{l.r(t),l.d(t,{default:()=>je});var n=l(47313),i=l(10976),o=l(256),d=l(59491),r=l(68197),a=l(59624),s=l(72652),u=l(77181),c=l(74294),v=l(66672),p=l(16031),y=l(49986),m=l(89281),f=l(2717),h=l(73270),x=l(24511),j=l(55768),g=l(90954),b=l(97890),_=l(23560),Z=l(89802),k=l(20637),w=l(9274),S=l(97388),O=l(17649),q=l(47168),M=l(97421),N=l(56814),I=l(46417);function P(e){var t,l,o;let{uuid:s,handleCancel:u}=e;const{t:c}=(0,x.$)(),[v]=i.Z.useForm(),p=(0,f.I0)(),{activeMenu:y}=(0,f.v9)((e=>e.menu),f.wU),{settings:m}=(0,f.v9)((e=>e.globalSettings),f.wU),{defaultLang:j}=(0,f.v9)((e=>e.formLang),f.wU),{google_map_key:b}=(0,f.v9)((e=>e.globalSettings.settings),f.wU),{data:_}=(0,f.v9)((e=>e.order),f.wU),{ref:Z}=(0,q.usePlacesWidget)({apiKey:b||M.kr,onPlaceSelected:e=>{const t={lat:null===e||void 0===e?void 0:e.geometry.location.lat(),lng:null===e||void 0===e?void 0:e.geometry.location.lng()};P(t)}}),[k,P]=(0,n.useState)(_.address?{lat:_.address.lat,lng:_.address.lng}:(0,O.Z)(m)),[C,D]=(0,n.useState)(null===_||void 0===_||null===(t=_.address)||void 0===t?void 0:t.address);return(0,I.jsx)(w.Z,{visible:!!s,title:c("create.address"),onCancel:u,footer:[(0,I.jsx)(d.Z,{type:"primary",onClick:()=>v.submit(),children:c("save")},"saveBtn"),(0,I.jsx)(d.Z,{type:"default",onClick:u,children:c("cancel")},"cancelBtn")],children:(0,I.jsxs)(i.Z,{layout:"vertical",name:"user-address",form:v,onFinish:e=>{const t={...e,active:1,address:null===e||void 0===e?void 0:e["address[".concat(j,"]")],lat:k.lat,lng:k.lng};p((0,h.oM)({address:t})),p((0,g.nc)({activeMenu:y,data:{...y.data,addressData:t}})),u()},initialValues:{["address[".concat(j,"]")]:null===y||void 0===y||null===(l=y.data)||void 0===l||null===(o=l.addressData)||void 0===o?void 0:o.address},children:[(0,I.jsx)(r.Z,{gutter:12,children:(0,I.jsx)(a.Z,{span:24,children:(0,I.jsx)(N.Z,{value:C,setValue:D,setLocation:P})})}),(0,I.jsx)(a.Z,{span:24,children:(0,I.jsx)(i.Z.Item,{label:c("map"),children:(0,I.jsx)(S.Z,{location:k,setLocation:P,setAddress:e=>v.setFieldsValue({["address[".concat(j,"]")]:e})})})})]})})}const C=e=>{var t,l;let{form:o}=e;const{t:s}=(0,x.$)(),w=(0,f.I0)(),S=(0,b.s0)(),{data:O}=(0,f.v9)((e=>e.order),f.wU),{currencies:q}=(0,f.v9)((e=>e.currency),f.wU),{activeMenu:M}=(0,f.v9)((e=>e.menu),f.wU),[N,C]=(0,n.useState)(null),[D,U]=(0,n.useState)([]),[E,Y]=(0,n.useState)(!1),{payment_type:A}=(0,f.v9)((e=>e.globalSettings.settings),f.wU);(0,n.useEffect)((()=>{Y(!0)}),[O.shop]);return(0,I.jsxs)(u.Z,{title:s("customer.details"),children:[(0,I.jsxs)(r.Z,{gutter:12,children:[(0,I.jsx)(a.Z,{span:16,children:(0,I.jsx)(i.Z.Item,{label:s("client"),name:"user",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(m.h,{placeholder:s("select.client"),fetchOptions:async function(e){const t={search:e,perPage:10};return y.Z.search(t).then((e=>{let{data:t}=e;return U(t),function(e){if(!e)return;return(0,p.isArray)(e)?e.map((e=>({label:"".concat(e.firstname," ").concat(e.lastname||""),value:e.id,key:e.id}))):{label:"".concat(e.firstname," ").concat(e.lastname||""),value:e.id,key:e.id}}(t)}))},onSelect:function(e){const t=D.find((t=>t.id===e.value));w((0,h.oM)({user:e,userUuid:t.uuid,userOBJ:t})),o.setFieldsValue({address:null})}})})}),(0,I.jsx)(a.Z,{span:8,children:(0,I.jsx)(i.Z.Item,{label:s("add"),className:"label-hidden",children:(0,I.jsx)(d.Z,{icon:(0,I.jsx)(j.Z,{}),onClick:()=>{w((0,g.bL)({url:"user/add",id:"user_add",name:s("add.user")})),S("/user/add")},children:s("add")})})}),(0,I.jsx)(a.Z,{span:24,children:(0,I.jsx)(i.Z.Item,{label:s("address"),name:"address",rules:[{required:!1,message:s("required")}],children:(0,I.jsx)("div",{className:"address w-100",onClick:()=>{O.userUuid?C(O.userUuid):_.Am.warning(s("please.select.client"))},children:null===(t=M.data)||void 0===t||null===(l=t.addressData)||void 0===l?void 0:l.address})})}),(0,I.jsx)(a.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:s("currency"),name:"currency_id",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(c.Z,{placeholder:s("select.currency"),onSelect:function(e){const t=q.find((t=>t.id===e));w((0,h.dY)(t))},children:q.map(((e,t)=>(0,I.jsxs)(c.Z.Option,{value:e.id,children:[e.title," (",e.symbol,")"]},t)))})})}),(0,I.jsx)(a.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:s("payment.type"),name:"payment_type",rules:[{required:!0,message:s("required")}],children:(0,I.jsx)(Z.q,{refetch:E,fetchOptions:"admin"===A?async function(){return k.Z.getAll().then((e=>{let{data:t}=e;return t.filter((e=>"cash"===e.tag||"wallet"===e.tag)).map((e=>({label:e.tag||"no name",value:e.id,key:e.id})))}))}:async function(){return k.Z.getById(O.shop.value).then((e=>{let{data:t}=e;return t.filter((e=>"cash"===e.tag||"wallet"===e.tag)).map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id})))}))},className:"w-100",placeholder:s("select.payment.type"),onSelect:e=>w((0,h.oM)({paymentType:e})),disabled:!0})})}),(0,I.jsx)(a.Z,{span:24,children:(0,I.jsx)(i.Z.Item,{label:s("note"),name:"note",children:(0,I.jsx)(v.Z,{})})})]}),N&&(0,I.jsx)(P,{uuid:N,handleCancel:()=>C(null)})]})};var D=l(99096),U=l(70816),E=l.n(U),Y=l(53149);const A=[{title:"sunday"},{title:"monday"},{title:"tuesday"},{title:"wednesday"},{title:"thursday"},{title:"friday"},{title:"saturday"}],B=()=>{var e,t,l,o,d,s;const{t:c}=(0,x.$)(),v=(0,f.I0)(),{data:p}=(0,f.v9)((e=>e.order),f.wU),{activeMenu:y}=(0,f.v9)((e=>e.menu),f.wU),m=new Date(null===p||void 0===p?void 0:p.delivery_date),j=null===(e=y.data)||void 0===e||null===(t=e.CurrentShop)||void 0===t||null===(l=t.shop_working_days)||void 0===l?void 0:l.filter((e=>!0!==e.disabled)).find((e=>{var t;return(null===e||void 0===e?void 0:e.day)===(null===(t=A[m.getDay()])||void 0===t?void 0:t.title)})),b=null===(o=y.data)||void 0===o||null===(d=o.CurrentShop)||void 0===d||null===(s=d.shop_closed_date)||void 0===s?void 0:s.map((e=>e.day));const _=(e,t)=>{const l=[];for(let n=e;n<t;n++)l.push(n);return l};return(0,n.useEffect)((()=>{var e,t,l;null!==p&&void 0!==p&&null!==(e=p.shop)&&void 0!==e&&e.value&&(l=null===p||void 0===p||null===(t=p.shop)||void 0===t?void 0:t.value,Y.Z.getById(l).then((e=>{const t=null===e||void 0===e?void 0:e.data;v((0,h.oM)({currency_shop:t})),v((0,g.nc)({activeMenu:y,data:{...null===y||void 0===y?void 0:y.data,CurrentShop:null===e||void 0===e?void 0:e.data}}))})))}),[null===p||void 0===p?void 0:p.shop]),(0,I.jsx)(u.Z,{title:c("shipping.info"),children:(0,I.jsx)(r.Z,{gutter:12,children:(0,I.jsx)(a.Z,{span:24,children:(0,I.jsxs)(r.Z,{gutter:12,children:[(0,I.jsx)(a.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{name:"delivery_date",label:c("delivery.date"),rules:[{required:!0,message:c("required")}],children:(0,I.jsx)(D.Z,{placeholder:c("delivery.date"),className:"w-100",format:"YYYY-MM-DD",disabledDate:function(e){const t=null===b||void 0===b?void 0:b.find((t=>t===E()(e).format("YYYY-MM-DD"))),l=E()().add(-1,"days")>=e;return t||l},onChange:e=>{const t=E()(e).format("YYYY-MM-DD");v((0,h.oM)({delivery_date:t}))}})})}),(0,I.jsx)(a.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:"".concat(c("delivery.time")," (").concat(c("up.to"),")"),name:"delivery_time",rules:[{required:!1,message:c("required")}],children:(0,I.jsx)(D.Z,{disabled:!(null!==p&&void 0!==p&&p.delivery_date),picker:"time",placeholder:c("start.time"),className:"w-100",format:"HH:mm:ss",showNow:!1,disabledTime:()=>({disabledHours:()=>((e,t)=>{const l=parseInt(e),n=parseInt(t),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];for(let o=l;o<=n;o++)delete i[o];return i})((null===j||void 0===j?void 0:j.from.substring(0,2))>=E()(new Date).format("HH")?null===j||void 0===j?void 0:j.from.substring(0,2):E()(new Date).format("HH"),null===j||void 0===j?void 0:j.to.substring(0,2)),disabledMinutes:()=>_(0,60),disabledSeconds:()=>_(0,60)}),onChange:e=>{const t=E()(e).format("HH:mm:ss");v((0,h.oM)({delivery_time:t}))}})})})]})})})})};var H=l(45705),F=l(11216),L=l(30763),V=l(11875),R=l(45464),W=l(82138),T=l(11829),$=l(12019),z=l(8846),K=l(7370),G=l(26824),J=l(83371),Q=l(84017),X=l(91220),ee=l(77370),te=l(28939),le=l(80314),ne=l(17101);function ie(e){var t,l,i,o,u,c,v;let{extrasModal:p,setExtrasModal:y}=e;const[m,j]=(0,n.useState)(!1),[g,b]=(0,n.useState)({}),{t:Z}=(0,x.$)(),[k,S]=(0,n.useState)(p.quantity||g.quantity||g.min_qty),[O,q]=(0,n.useState)({}),{currency:M}=(0,f.v9)((e=>e.order.data),f.wU),N=(0,f.I0)(),[P,C]=(0,n.useState)([]),[D,U]=(0,n.useState)([]),[E,Y]=(0,n.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),[A,B]=(0,n.useState)([]),[F,L]=(0,n.useState)([]),[V,T]=(0,n.useState)([]),$=()=>y(!1);const K=e=>{var t;const l=A.findIndex((t=>t.extra_group_id===e.extra_group_id));let n=A;l>-1&&(n=n.slice(0,l)),n.push(e);const i=n.map((e=>e.extra_value_id)).join(",");var o=(0,ee.y)(i,P,D);Y(o),null===(t=o.extras)||void 0===t||t.forEach((t=>{const l=A.findIndex((l=>t[0].extra_group_id!==e.extra_group_id?l.extra_group_id===t[0].extra_group_id:l.extra_group_id===e.extra_group_id));if(t[0].level>=e.level){var i=t[0].extra_group_id!==e.extra_group_id?t[0]:e;-1===l?n.push(i):n[l]=i}})),B(n)};(0,n.useEffect)((()=>{null!==E&&void 0!==E&&E.stock&&q({...E.stock,extras:A})}),[E]);function ie(e){var t;return(null===F||void 0===F?void 0:F.reduce(((e,t)=>e+t.product.stock.price*(t.product.quantity||t.product.min_qty)),0))+(null===E||void 0===E||null===(t=E.stock)||void 0===t?void 0:t[e||"price"])*k}function oe(e,t){Y((l=>({...l,stock:{...l.stock,addons:l.stock.addons.map((l=>l.addon_id===e?{...l,product:{...l.product,quantity:t}}:l))}}))),L((l=>l.map((l=>l.addon_id===e?{...l,product:{...l.product,quantity:t}}:l))))}return(0,le.Z)((()=>{var e,t;const l=null===E||void 0===E||null===(e=E.stock)||void 0===e||null===(t=e.addons)||void 0===t?void 0:t.filter((e=>V.includes(String(e.addon_id))));L(l)}),[V]),(0,n.useEffect)((()=>{j(!0),ne.Z.getById(p.uuid).then((e=>{var t;let{data:l}=e;b(l);const n=(0,ee.o)(l,null===p||void 0===p?void 0:p.addons);var i;(C(n.extras),S(p.quantity||l.quantity||l.min_qty),U(n.stock),Y((0,ee.y)("",n.extras,n.stock)),null===(t=(0,ee.y)("",n.extras,n.stock).extras)||void 0===t||t.forEach((e=>{B((t=>[...t,e[0]]))})),null!==p&&void 0!==p&&p.addons)&&T((null===p||void 0===p||null===(i=p.addons)||void 0===i?void 0:i.map((e=>{var t,l;return String((null===e||void 0===e||null===(t=e.stock)||void 0===t||null===(l=t.product)||void 0===l?void 0:l.id)||e.addon_id)})))||[])})).finally((()=>j(!1)))}),[p.uuid]),(0,I.jsx)(w.Z,{visible:!!g,title:null===g||void 0===g||null===(t=g.translation)||void 0===t?void 0:t.title,onCancel:$,footer:[m?null:(0,I.jsx)(d.Z,{type:"primary",onClick:()=>{N((0,h.oM)({calculate:!1}));const e=F.map((e=>({...e,quantity:e.product.quantity||e.product.min_qty,stock_id:e.product.stock.id}))),t={...g,stock:O,quantity:k,id:O.id,img:(0,te.Z)(O)||g.img,stockID:O,addons:e,price:O.price};t.quantity>O.quantity?_.Am.warning("".concat(Z("you.cannot.order.more.than")," ").concat(O.quantity)):(N((0,h.x$)(t)),y(null))},children:Z("add")},"add-product"),(0,I.jsx)(d.Z,{type:"default",onClick:$,children:Z("cancel")},"cancel-modal")],children:(0,I.jsxs)(s.Z,{spinning:m,children:[(0,I.jsxs)(r.Z,{gutter:24,children:[(0,I.jsx)(a.Z,{span:8,children:(0,I.jsx)(G.Z,{src:(0,R.Z)((0,te.Z)(O)||g.img),alt:g.name,height:200,style:{objectFit:"contain"}})}),(0,I.jsx)(a.Z,{span:16,children:(0,I.jsxs)(J.Z,{title:null===(l=g.translation)||void 0===l?void 0:l.title,children:[(0,I.jsxs)(J.Z.Item,{label:Z("price"),span:3,children:[(0,I.jsx)("div",{className:null!==O&&void 0!==O&&O.discount?"strike":"",children:(0,Q.Z)(ie(),M.symbol)}),null!==O&&void 0!==O&&O.discount?(0,I.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,Q.Z)(ie("total_price"),M.symbol)}):""]}),(0,I.jsx)(J.Z.Item,{label:Z("in.stock"),span:3,children:(0,X.Z)(null===O||void 0===O?void 0:O.quantity,g.unit)}),(0,I.jsx)(J.Z.Item,{label:Z("tax"),span:3,children:(0,Q.Z)(null===O||void 0===O?void 0:O.tax,M.symbol)})]})})]}),null!==E&&void 0!==E&&E.extras?null===E||void 0===E||null===(i=E.extras)||void 0===i?void 0:i.map(((e,t)=>(0,I.jsx)("div",{className:"extra-group",children:(0,I.jsx)(H.Z,{className:"extras-select",wrap:!0,children:null===e||void 0===e?void 0:e.map(((e,t)=>{var l,n,i,o;return"color"===(null===e||void 0===e||null===(l=e.group)||void 0===l?void 0:l.type)?(0,I.jsx)("span",{className:"extras-color-wrapper ".concat(A.find((t=>t.id===e.id))?"selected":""),onClick:()=>K(e),children:(0,I.jsx)("i",{className:"extras-color",style:{backgroundColor:null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i.value}})},"color"+t):"text"===(null===e||void 0===e||null===(n=e.group)||void 0===n?void 0:n.type)?(0,I.jsx)("span",{className:"extras-text rounded ".concat(A.find((t=>t.id===e.id))?"selected":""),onClick:()=>K(e),children:null===e||void 0===e||null===(o=e.value)||void 0===o?void 0:o.value},"text"+t):null}))})},"extra-group"+t))):null,(0,I.jsx)(H.Z,{direction:"vertical",size:"middle",children:null===(o=E.stock)||void 0===o||null===(u=o.addons)||void 0===u?void 0:u.filter((e=>!!e.product)).map((e=>{var t,l;const n=V.includes(String(e.addon_id));return(0,I.jsx)("div",{children:(0,I.jsxs)("label",{htmlFor:String(e.id),children:[n&&(0,I.jsxs)(H.Z,{size:0,children:[(0,I.jsx)(d.Z,{type:"text",className:"minus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,I.jsx)(z.Z,{}),disabled:1===e.product.quantity,onClick:t=>{t.stopPropagation(),oe(e.addon_id,e.product.quantity-1)}}),(0,I.jsxs)("span",{className:"ml-2",children:[(e.product.quantity||e.product.min_qty)*((null===e||void 0===e?void 0:e.interval)||1),null===(t=e.unit)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title]}),(0,I.jsx)(d.Z,{type:"text",className:"plus-button",style:{padding:0,height:"max-content"},size:"small",icon:(0,I.jsx)(W.Z,{}),onClick:t=>{t.stopPropagation(),oe(e.addon_id,e.product.quantity?e.product.quantity+1:e.product.min_qty+1)}})]}),(0,I.jsx)("span",{className:"ml-2",children:e.product.translation.title})]})},e.id)}))}),(0,I.jsx)(r.Z,{gutter:12,className:"mt-3",children:(0,I.jsx)(a.Z,{span:24,children:(0,I.jsxs)(H.Z,{children:[(0,I.jsx)(d.Z,{type:"primary",icon:(0,I.jsx)(z.Z,{}),onClick:function(){1!==k&&(k<=g.min_qty||S((e=>e-1)))}},"plus"),(k||1)*((null===g||void 0===g?void 0:g.interval)||1),null===g||void 0===g||null===(c=g.unit)||void 0===c||null===(v=c.translation)||void 0===v?void 0:v.title,(0,I.jsx)(d.Z,{type:"primary",icon:(0,I.jsx)(W.Z,{}),onClick:function(){k!==g.max_qty&&S((e=>e+1))}},"minus")]})})})]})})}l(21448);var oe=l(74776),de=l.n(oe),re=l(58821);function ae(){var e,t,l,i,o,c,v,p,y;const{t:m}=(0,x.$)(),j=(0,f.I0)(),_=(0,b.s0)(),{orderItems:Z,data:k,total:w,coupon:S,orderProducts:O}=(0,f.v9)((e=>e.order),f.wU),[q,M]=(0,n.useState)(!1),[N,P]=(0,n.useState)(null),[C,D]=(0,n.useState)(""),[U,E]=(0,n.useState)(!1),{activeMenu:Y}=(0,f.v9)((e=>e.menu),f.wU);(0,le.Z)((()=>{Z.length?function(){var e;if(null!==k&&void 0!==k&&null!==(e=k.deliveries)&&void 0!==e&&e.label){const e=function(e){var t,l,n,i,o,d,r;const a=null===e||void 0===e?void 0:e.map((e=>{var t,l;return{quantity:e.quantity,stock_id:e.stockID?null===(t=e.stockID)||void 0===t?void 0:t.id:null===(l=e.stock)||void 0===l?void 0:l.id}})),s=null===e||void 0===e?void 0:e.flatMap((e=>{var t;return null===(t=e.addons)||void 0===t?void 0:t.map((t=>{var l,n;return{quantity:t.quantity,stock_id:t.stock_id,parent_id:e.stockID?null===(l=e.stockID)||void 0===l?void 0:l.id:null===(n=e.stock)||void 0===n?void 0:n.id}}))})),u={products:a.concat(s),currency_id:null===k||void 0===k||null===(t=k.currency)||void 0===t?void 0:t.id,coupon:null===k||void 0===k||null===(l=k.coupon)||void 0===l?void 0:l.name,shop_id:null===k||void 0===k||null===(n=k.shop)||void 0===n?void 0:n.value,type:null===k||void 0===k||null===(i=k.deliveries)||void 0===i||null===(o=i.label)||void 0===o?void 0:o.toLowerCase(),address:{latitude:null===k||void 0===k||null===(d=k.address)||void 0===d?void 0:d.lat,longitude:null===k||void 0===k||null===(r=k.address)||void 0===r?void 0:r.lng}};return de().stringify(u,{addQueryPrefix:!0})}(Z);M(!0),K.Z.calculate(e).then((e=>{let{data:t}=e;const l=t,n={product_tax:null===l||void 0===l?void 0:l.total_tax,shop_tax:null===l||void 0===l?void 0:l.total_shop_tax,order_total:null===l||void 0===l?void 0:l.total_price,delivery_fee:null===l||void 0===l?void 0:l.delivery_fee,coupon:null===l||void 0===l?void 0:l.coupon_price,discount:null===l||void 0===l?void 0:l.total_discount,service_fee:null===l||void 0===l?void 0:l.service_fee};j((0,h.rU)(n))})).catch((()=>j((0,h.r3)(O)))).finally((()=>M(!1)))}}():j((0,h.pX)())}),[Z,k.currency,k.address,null===k||void 0===k?void 0:k.coupon]);const A=e=>{j((0,g.bL)({id:"product-".concat(e.uuid),url:"product/".concat(e.uuid),name:m("edit.product")})),_("/product/".concat(e.uuid))};const B=(e,t)=>{j((0,h.OQ)({quantity:e,id:t}))};return(0,I.jsxs)("div",{className:"order-items",children:[q&&(0,I.jsx)("div",{className:"loader",children:(0,I.jsx)(s.Z,{})}),(0,I.jsx)(r.Z,{gutter:24,className:"mt-4",children:(0,I.jsx)(a.Z,{span:24,children:(0,I.jsxs)(u.Z,{className:"shop-card",children:[null===Z||void 0===Z?void 0:Z.map(((e,t)=>{var l,n,i,o,r,a,s,c,v,p,y,m,f,x,g,b,_,Z;return void 0===(null===e||void 0===e?void 0:e.bonus)||!1===(null===e||void 0===e?void 0:e.bonus)?(0,I.jsx)("div",{children:(0,I.jsxs)(u.Z,{className:"position-relative",children:[(0,I.jsx)(T.Z,{className:"close-order",onClick:()=>j((0,h.Sg)(e))}),(0,I.jsxs)(H.Z,{className:"mr-3",children:[(0,I.jsx)("div",{className:"order-item-img",style:{marginRight:"20px"},children:(0,I.jsx)("img",{src:(0,R.Z)((null===e||void 0===e||null===(l=e.stock)||void 0===l||null===(n=l.product)||void 0===n?void 0:n.img)||(null===e||void 0===e?void 0:e.img)),alt:null===e||void 0===e||null===(i=e.stock)||void 0===i||null===(o=i.product)||void 0===o||null===(r=o.translation)||void 0===r?void 0:r.title})}),(0,I.jsx)(V.Z,{title:(0,I.jsxs)("div",{children:[(0,I.jsxs)(H.Z,{children:[(0,I.jsx)("div",{className:"cursor-pointer white-space-wrap",onClick:()=>A(e),children:(null===e||void 0===e||null===(a=e.stock)||void 0===a||null===(s=a.product)||void 0===s||null===(c=s.translation)||void 0===c?void 0:c.title)||(null===e||void 0===e||null===(v=e.translation)||void 0===v?void 0:v.title)}),(0,I.jsx)(d.Z,{icon:(0,I.jsx)($.Z,{}),type:"text",size:"small",onClick:()=>P(e)})]}),(0,I.jsx)("div",{className:"product-price",children:(0,Q.Z)((null===e||void 0===e?void 0:e.price)*(null===e||void 0===e?void 0:e.quantity),null===k||void 0===k||null===(p=k.currency)||void 0===p?void 0:p.symbol)})]}),description:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(H.Z,{children:[(0,I.jsx)(d.Z,{disabled:(null===e||void 0===e?void 0:e.quantity)<(null===e||void 0===e||null===(y=e.stock)||void 0===y||null===(m=y.product)||void 0===m?void 0:m.min_qty)+1||1===(null===e||void 0===e?void 0:e.quantity),onClick:()=>B(e.quantity-1,e.id),type:"primary",icon:(0,I.jsx)(z.Z,{})})," ",(0,I.jsxs)("span",{children:[(null===e||void 0===e?void 0:e.quantity)*((null===e||void 0===e?void 0:e.interval)||1),null===e||void 0===e||null===(f=e.unit)||void 0===f||null===(x=f.translation)||void 0===x?void 0:x.title]}),(0,I.jsx)(d.Z,{onClick:()=>B(e.quantity+1,e.id),type:"primary",disabled:(null===e||void 0===e?void 0:e.quantity)===(null===e||void 0===e?void 0:e.max_qty),icon:(0,I.jsx)(W.Z,{})})]}),(0,I.jsx)("div",{className:"mt-2",children:(0,I.jsx)(H.Z,{wrap:!0,children:null===e||void 0===e||null===(g=e.addons)||void 0===g?void 0:g.map((e=>{var t,l,n,i;return(0,I.jsxs)("span",{className:"extras-text rounded",children:[(null===e||void 0===e||null===(t=e.stock)||void 0===t||null===(l=t.product)||void 0===l||null===(n=l.translation)||void 0===n?void 0:n.title)||(null===e||void 0===e||null===(i=e.product.translation)||void 0===i?void 0:i.title)," ","x ",null===e||void 0===e?void 0:e.quantity]},e.id)}))})})]})})]})]})},t):(0,I.jsx)("div",{children:(0,I.jsx)("div",{children:(0,I.jsx)(u.Z,{className:"position-relative",children:(0,I.jsxs)(H.Z,{className:"mr-3 w-100 justify-content-between align-items-start",children:[(0,I.jsxs)(H.Z,{children:[(0,I.jsx)("div",{className:"order-item-img",children:(0,I.jsx)("img",{src:(0,R.Z)(null===e||void 0===e?void 0:e.img),alt:null===(b=e.translation)||void 0===b?void 0:b.title})}),(0,I.jsx)(V.Z,{title:(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{className:"cursor-pointer white-space-wrap",onClick:()=>A(e),children:null===(_=e.translation)||void 0===_?void 0:_.title}),(0,I.jsx)("div",{className:"product-price",children:(0,Q.Z)(e.price,null===(Z=k.currency)||void 0===Z?void 0:Z.symbol)})]})})]}),(0,I.jsxs)("div",{className:"bonus",children:[(0,I.jsx)(re.ojn,{})," Bonus"]})]})})})},t)})),(0,I.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:(0,I.jsxs)("div",{className:"mt-2 text-right shop-total",children:[(0,I.jsxs)(H.Z,{children:[(0,I.jsxs)("p",{className:"font-weight-bold",children:[m("product.tax"),":"]}),(0,I.jsx)("p",{children:(0,Q.Z)(w.product_tax,null===(e=k.currency)||void 0===e?void 0:e.symbol)})]}),(0,I.jsx)("div",{}),(0,I.jsxs)(H.Z,{children:[(0,I.jsxs)("p",{className:"font-weight-bold",children:[m("shop.tax"),":"]}),(0,I.jsx)("p",{children:(0,Q.Z)(w.shop_tax,null===(t=k.currency)||void 0===t?void 0:t.symbol)})]}),(0,I.jsx)("div",{}),(0,I.jsxs)(H.Z,{children:[(0,I.jsxs)("p",{className:"font-weight-bold",children:[m("delivery.fee"),":"]}),(0,I.jsx)("p",{children:(0,Q.Z)(null===(l=w.delivery_fee)||void 0===l?void 0:l.reduce(((e,t)=>e+t),0),null===(i=k.currency)||void 0===i?void 0:i.symbol)})]}),(0,I.jsx)("div",{}),(0,I.jsxs)(H.Z,{children:[(0,I.jsxs)("p",{className:"font-weight-bold",children:[m("discount"),":"]}),(0,I.jsxs)("p",{children:["-",(0,Q.Z)(w.discount,null===(o=k.currency)||void 0===o?void 0:o.symbol)]})]}),(0,I.jsx)("div",{}),(0,I.jsxs)(H.Z,{children:[(0,I.jsxs)("p",{className:"font-weight-bold",children:[m("coupon"),":"]}),(0,I.jsxs)("p",{children:["-",(0,Q.Z)(null===(c=w.coupon)||void 0===c?void 0:c.reduce(((e,t)=>e+t),0),null===(v=k.currency)||void 0===v?void 0:v.symbol)]})]}),(0,I.jsx)("div",{}),(0,I.jsxs)(H.Z,{children:[(0,I.jsxs)("p",{className:"font-weight-bold",children:[m("service.fee"),":"]}),(0,I.jsx)("p",{children:(0,Q.Z)(null===w||void 0===w?void 0:w.service_fee,null===(p=k.currency)||void 0===p?void 0:p.symbol)})]}),(0,I.jsx)("div",{}),(0,I.jsxs)(H.Z,{children:[(0,I.jsxs)("p",{className:"font-weight-bold",children:[m("total"),":"]}),(0,I.jsx)("p",{children:(0,Q.Z)(w.order_total,null===(y=k.currency)||void 0===y?void 0:y.symbol)})]})]})})]})})}),N&&(0,I.jsx)(ie,{extrasModal:N,setExtrasModal:P})]})}var se=l(41481),ue=l(95882),ce=l(49067),ve=l(51988);const pe=e=>{let{form:t}=e;const{t:l}=(0,x.$)(),[i,o]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[v,p]=(0,n.useState)(null),[y,j]=(0,n.useState)(null),{id:g}=(0,b.UO)(),Z=(0,f.I0)(),{data:k}=(0,f.v9)((e=>e.order),f.wU),{products:w,loading:S}=(0,f.v9)((e=>e.product),f.wU);(0,n.useEffect)((()=>{var e;const t={perPage:10,page:1,brand_id:null===i||void 0===i?void 0:i.value,category_id:null===d||void 0===d?void 0:d.value,search:v,shop_id:null===(e=k.shop)||void 0===e?void 0:e.value,active:1};Z((0,ue.q1)(t))}),[i,d,v,k.shop]);return(0,I.jsxs)(u.Z,{title:l("order.details"),extra:(0,I.jsxs)(H.Z,{wrap:!0,children:[(0,I.jsx)(m.h,{placeholder:l("select.shop"),fetchOptions:async function(e){const t={search:e,status:"approved"};return ce.Z.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}))},style:{minWidth:150},onChange:e=>{Z((0,h.HL)(e)),Z((0,h.mf)()),t.setFieldsValue({delivery:null,delivery_date:null,delivery_time:null})},allowClear:!1,value:null===k||void 0===k?void 0:k.shop,disabled:g}),(0,I.jsx)(m.h,{placeholder:l("select.category"),fetchOptions:async function(e){const t={search:e,type:"main"};return L.Z.search(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}))},style:{minWidth:150},onChange:e=>c(e),value:d}),(0,I.jsx)(m.h,{placeholder:l("select.brand"),fetchOptions:async function(e){return F.Z.search(e).then((e=>{let{data:t}=e;return t.map((e=>({label:e.title,value:e.id})))}))},style:{minWidth:150},onChange:e=>o(e),value:i})]}),children:[(0,I.jsx)("div",{className:"d-flex justify-content-end mb-4",children:(0,I.jsx)(se.Z,{placeholder:l("search"),handleChange:p,defaultValue:null===v||void 0===v?void 0:v.search})}),(0,I.jsxs)("div",{className:"products-row order-items",children:[w.length?w.map((e=>{var t,n,i,o;return(0,I.jsxs)(u.Z,{className:"products-col",cover:(0,I.jsx)("img",{alt:null===(t=e.product)||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title,src:(0,R.Z)(null===e||void 0===e?void 0:e.img)}),onClick:()=>(e=>{k.currency?k.address?k.deliveries?j(e):_.Am.warning(l("please.select.delivery")):_.Am.warning(l("please.select.address")):_.Am.warning(l("please.select.currency"))})(e),children:[(0,I.jsx)(V.Z,{title:null===e||void 0===e||null===(i=e.product)||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.title}),(0,I.jsx)("div",{className:"preview",children:(0,I.jsx)(W.Z,{})}),e.stocks.map(((e,t)=>{var l,n;return(0,I.jsxs)("span",{className:e.bonus?"show-bonus":"d-none",children:[(0,I.jsx)(re.ojn,{})," ",null===(l=e.bonus)||void 0===l?void 0:l.value,"+",null===(n=e.bonus)||void 0===n?void 0:n.bonus_quantity]},t)}))]},e.id)})):(0,I.jsx)(r.Z,{children:(0,I.jsx)(a.Z,{span:24,children:(0,I.jsx)(ve.Z,{id:"nosell"})})}),S&&(0,I.jsx)("div",{className:"loader",children:(0,I.jsx)(s.Z,{})})]}),y&&(0,I.jsx)(ie,{extrasModal:y,setExtrasModal:j}),(0,I.jsx)(ae,{form:t})]})};var ye=l(16233),me=l(22054),fe=l(1003);const he=[{label:"progress",value:"progress",key:1},{label:"paid",value:"paid",key:2},{label:"canceled",value:"canceled",key:3},{label:"rejected",value:"rejected",key:4},{label:"refund",value:"refund",key:5}];const xe=function(e){let{form:t}=e;const{t:l}=(0,x.$)(),{id:o}=(0,b.UO)(),[d,r]=(0,n.useState)((()=>t.getFieldValue("transactionStatus"))),[a,s]=(0,n.useState)(!1);return(0,I.jsx)(u.Z,{title:l("transaction.details"),children:(0,I.jsx)(i.Z.Item,{name:"transactionStatus",label:l("transaction.status"),rules:[{required:!0,message:l("required")}],children:(0,I.jsx)(c.Z,{loading:a,options:he,onChange:function(e){s(!0),fe.Z.updateStatus(o,{status:e}).then((e=>{r(e.data.transaction.status)})).catch((()=>{t.setFieldsValue({transactionStatus:d})})).finally((()=>s(!1)))}})})})};function je(){var e;const{t:t}=(0,x.$)(),[l]=i.Z.useForm(),u=(0,f.I0)(),{id:c}=(0,b.UO)(),v=(0,b.s0)(),[p,y]=(0,n.useState)(!1),[m,j]=(0,n.useState)(null),[_,Z]=(0,n.useState)(!1),{data:k,total:w,coupon:S,orderProducts:O,orderItems:q}=(0,f.v9)((e=>e.order),f.wU),{currencies:M}=(0,f.v9)((e=>e.currency),f.wU),{activeMenu:N}=(0,f.v9)((e=>e.menu),f.wU),{defaultLang:P}=(0,f.v9)((e=>e.formLang),f.wU);function D(e){return{label:e.firstname+" "+(e.lastname||""),value:e.id,uuid:e.uuid,key:e.id}}function U(e){var t,l,n,i,o,d,r,a,s,u,c,v,p,y,m,f,h,x,j,g;return null!==e&&void 0!==e&&e.address?{address:null===e||void 0===e||null===(t=e.address)||void 0===t?void 0:t.address,lat:(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.latitude)||(null===e||void 0===e||null===(n=e.address)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.latitude),lng:(null===e||void 0===e||null===(o=e.location)||void 0===o?void 0:o.longitude)||(null===e||void 0===e||null===(d=e.address)||void 0===d||null===(r=d.location)||void 0===r?void 0:r.longitude)}:null!==e&&void 0!==e&&e.delivery_point?{address:null===e||void 0===e||null===(a=e.delivery_point)||void 0===a||null===(s=a.address)||void 0===s?void 0:s[P],lat:null===e||void 0===e||null===(u=e.delivery_point)||void 0===u||null===(c=u.location)||void 0===c?void 0:c.latitude,lng:null===e||void 0===e||null===(v=e.delivery_point)||void 0===v||null===(p=v.location)||void 0===p?void 0:p.longitude}:null!==e&&void 0!==e&&null!==(y=e.my_address)&&void 0!==y&&y.location?{address:null===e||void 0===e||null===(m=e.my_address)||void 0===m||null===(f=m.location)||void 0===f?void 0:f.address,lat:null===e||void 0===e||null===(h=e.my_address)||void 0===h||null===(x=h.location)||void 0===x?void 0:x.latitude,lng:null===e||void 0===e||null===(j=e.my_address)||void 0===j||null===(g=j.location)||void 0===g?void 0:g.longitude}:null}function Y(e){var t;return e?{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id,key:e.id,open_time:e.open_time,close_time:e.close_time}:null}const A=(e,t)=>{const l={payment_sys_id:t.value};y(!0),K.Z.update(c,e).then((e=>{!function(e,t){fe.Z.create(e,t).then((e=>{j(e.data.id),u((0,h.bn)())})).finally((()=>y(!1)))}(e.data.id,l)})).catch((()=>y(!1)))};return(0,n.useEffect)((()=>{N.refetch&&(Z(!0),K.Z.getById(c).then((e=>{var t,n,i,o,d,r,a,s;const c=e.data;u((0,h.oM)({calculate:!0}));const v=c.details.map((e=>{var t,l,n,i,o;return{...null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.product,stocks:null===e||void 0===e||null===(l=e.stock)||void 0===l?void 0:l.extras,stock:null===e||void 0===e?void 0:e.stock,stockID:null===e||void 0===e?void 0:e.stock,quantity:null===e||void 0===e?void 0:e.quantity,img:null===e||void 0===e||null===(n=e.stock)||void 0===n||null===(i=n.product)||void 0===i?void 0:i.img,price:null===e||void 0===e||null===(o=e.stock)||void 0===o?void 0:o.price,bonus:null===e||void 0===e?void 0:e.bonus,addons:null===e||void 0===e?void 0:e.addons}})),p={product_tax:null===c||void 0===c||null===(t=c.details)||void 0===t||null===(n=t.flatMap((e=>null===e||void 0===e?void 0:e.total_price)))||void 0===n?void 0:n.reduce(((e,t)=>e+t),0),shop_tax:null===c||void 0===c?void 0:c.tax,order_total:null===c||void 0===c?void 0:c.total_price};(0,f.dC)((()=>{var e;u((0,h.r3)(v)),u((0,h.B4)(v)),u((0,h.rU)(p)),u((0,h.dY)(null===c||void 0===c?void 0:c.currency)),u((0,g.nc)({activeMenu:N,data:{...N.data,addressData:U(c)}})),u((0,h.oM)({userUuid:null===c||void 0===c||null===(e=c.user)||void 0===e?void 0:e.uuid,shop:Y(null===c||void 0===c?void 0:c.shop),delivery_type:null===c||void 0===c?void 0:c.delivery_type,delivery_fee:null===c||void 0===c?void 0:c.delivery_fee,delivery_date:JSON.stringify(null===c||void 0===c?void 0:c.delivery_date),delivery_time:null===c||void 0===c?void 0:c.delivery_time,address:U(c),currency:{id:null===c||void 0===c?void 0:c.currency.payment_system},payment_type:null===c||void 0===c?void 0:c.transaction,deliveries:{label:null===c||void 0===c?void 0:c.delivery_type},status:null===c||void 0===c?void 0:c.status}))})),l.setFieldsValue({delivery_time:E()(null===c||void 0===c?void 0:c.delivery_date,"HH:mm"),delivery_date:E()(null===c||void 0===c?void 0:c.delivery_date,"YYYY-MM-DD"),user:D(null===c||void 0===c?void 0:c.user),currency_id:null===c||void 0===c||null===(i=c.currency)||void 0===i?void 0:i.id,payment_type:{label:(null===c||void 0===c||null===(o=c.transaction)||void 0===o||null===(d=o.payment_system)||void 0===d?void 0:d.tag)||"cash",value:(null===c||void 0===c||null===(r=c.transaction)||void 0===r||null===(a=r.payment_system)||void 0===a?void 0:a.id)||1},note:null===c||void 0===c?void 0:c.note,delivery:{label:null===c||void 0===c?void 0:c.delivery_type,value:null===c||void 0===c||null===(s=c.shop)||void 0===s?void 0:s.price},transactionStatus:c.transaction.status})})).finally((()=>{Z(!1),u((0,g.A_)(N))})))}),[N.refetch]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(o.Z,{title:t("edit.order"),extra:(0,I.jsx)(d.Z,{type:"primary",loading:p,onClick:()=>l.submit(),disabled:!(null!==O&&void 0!==O&&O.length),children:t("save")})}),(0,I.jsxs)(i.Z,{name:"order-form",form:l,layout:"vertical",onFinish:e=>{var t,l,n,i,o;const d=function(e){const t=null===e||void 0===e?void 0:e.map((e=>{var t,l;return{quantity:e.quantity,stock_id:e.stockID?null===(t=e.stockID)||void 0===t?void 0:t.id:null===(l=e.stock)||void 0===l?void 0:l.id}})),l=null===e||void 0===e?void 0:e.flatMap((e=>{var t;return null===(t=e.addons)||void 0===t?void 0:t.map((t=>{var l,n;return{quantity:t.quantity,stock_id:t.stock_id,parent_id:e.stockID?null===(l=e.stockID)||void 0===l?void 0:l.id:null===(n=e.stock)||void 0===n?void 0:n.id}}))}));return t.concat(l)}(q),r={currency_id:e.currency_id,rate:null===(t=M.find((t=>t.id===e.currency_id)))||void 0===t?void 0:t.rate,delivery_fee:k.delivery_fee,coupon:S.coupon,tax:w.order_tax,payment_type:null===(l=e.payment_type)||void 0===l?void 0:l.label,note:e.note,address:{address:null===(n=N.data.addressData)||void 0===n?void 0:n.address,office:null,house:null,floor:null},location:{latitude:null===(i=N.data.addressData)||void 0===i?void 0:i.lat,longitude:null===(o=N.data.addressData)||void 0===o?void 0:o.lng},delivery_date:E()(e.delivery_date).format("YYYY-MM-DD")+" "+E()(e.delivery_time).format("HH:mm"),user_id:e.user.value,products:null===d||void 0===d?void 0:d.filter((e=>!!e)),status:null===k||void 0===k?void 0:k.status};A(r,e.payment_type)},className:"order-add",initialValues:{user:k.user||void 0,address:k.address||null,currency_id:null===k||void 0===k||null===(e=k.currency)||void 0===e?void 0:e.id,payment_type:k.payment_type||null},children:[(0,I.jsxs)(r.Z,{gutter:24,hidden:_,children:[(0,I.jsx)(a.Z,{span:16,children:(0,I.jsx)(pe,{form:l})}),(0,I.jsxs)(a.Z,{span:8,children:[(0,I.jsx)(C,{form:l}),(0,I.jsx)(B,{form:l}),(0,I.jsx)(xe,{form:l})]})]}),_&&(0,I.jsx)("div",{className:"loader",children:(0,I.jsx)(s.Z,{})})]}),m?(0,I.jsx)(ye.Z,{orderId:m,handleClose:()=>{j(null);const e="orders-board";(0,f.dC)((()=>{u((0,g.ph)({...N,nextUrl:e})),u((0,me.AU)({}))})),v("/".concat(e))}}):""]})}},47168:(e,t,l)=>{e.exports=l(34317)},91318:(e,t,l)=>{function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var l=a(t);if(l&&l.has(e))return l.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if("default"!==d&&Object.prototype.hasOwnProperty.call(e,d)){var r=o?Object.getOwnPropertyDescriptor(e,d):null;r&&(r.get||r.set)?Object.defineProperty(i,d,r):i[d]=e[d]}i.default=e,l&&l.set(e,i);return i}(l(47313)),o=r(l(75192)),d=r(l(93754));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,l=new WeakMap;return(a=function(e){return e?l:t})(e)}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},s.apply(this,arguments)}function u(e,t){if(null==e)return{};var l,n,i=function(e,t){if(null==e)return{};var l,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)l=o[n],t.indexOf(l)>=0||(i[l]=e[l]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)l=o[n],t.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(i[l]=e[l])}return i}function c(e){var t=e.onPlaceSelected,l=e.apiKey,n=e.libraries,o=e.inputAutocompleteValue,r=e.options,a=e.googleMapsScriptBaseUrl,c=e.refProp,v=e.language,p=u(e,["onPlaceSelected","apiKey","libraries","inputAutocompleteValue","options","googleMapsScriptBaseUrl","refProp","language"]),y=(0,d.default)({ref:c,googleMapsScriptBaseUrl:a,onPlaceSelected:t,apiKey:l,libraries:n,inputAutocompleteValue:o,options:r,language:v}).ref;return i.default.createElement("input",s({ref:y},p))}c.propTypes={apiKey:o.default.string,libraries:o.default.arrayOf(o.default.string),ref:o.default.oneOfType([o.default.func,o.default.shape({current:o.default.any})]),googleMapsScriptBaseUrl:o.default.string,onPlaceSelected:o.default.func,inputAutocompleteValue:o.default.string,options:o.default.shape({componentRestrictions:o.default.object,bounds:o.default.object,location:o.default.object,offset:o.default.number,origin:o.default.object,radius:o.default.number,sessionToken:o.default.object,types:o.default.arrayOf(o.default.string)}),language:o.default.string};var v=(0,i.forwardRef)((function(e,t){return i.default.createElement(c,s({},e,{refProp:t}))}));t.default=v},34317:(e,t,l)=>{Object.defineProperty(t,"usePlacesWidget",{enumerable:!0,get:function(){return i.default}});var n=o(l(91318)),i=o(l(93754));function o(e){return e&&e.__esModule?e:{default:e}}},93754:(e,t,l)=>{function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.ref,l=e.onPlaceSelected,n=e.apiKey,r=e.libraries,a=void 0===r?"places":r,u=e.inputAutocompleteValue,c=void 0===u?"new-password":u,v=e.options,p=(v=void 0===v?{}:v).types,y=void 0===p?["(cities)"]:p,m=v.componentRestrictions,f=v.fields,h=void 0===f?["address_components","geometry.location","place_id","formatted_address"]:f,x=v.bounds,j=function(e,t){if(null==e)return{};var l,n,i=function(e,t){if(null==e)return{};var l,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)l=o[n],t.indexOf(l)>=0||(i[l]=e[l]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)l=o[n],t.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(i[l]=e[l])}return i}(v,["types","componentRestrictions","fields","bounds"]),g=e.googleMapsScriptBaseUrl,b=void 0===g?d.GOOGLE_MAP_SCRIPT_BASE_URL:g,_=e.language,Z=(0,i.useRef)(null),k=(0,i.useRef)(null),w=(0,i.useRef)(null),S=(0,i.useRef)(null),O=_?"&language=".concat(_):"",q="".concat(b,"?libraries=").concat(a,"&key=").concat(n).concat(O),M=(0,i.useCallback)((function(){return(0,o.loadGoogleMapScript)(b,q)}),[b,q]);return(0,i.useEffect)((function(){var e=s(s({},j),{},{fields:h,types:y,bounds:x});if(m&&(e.componentRestrictions=m),!w.current&&Z.current&&o.isBrowser){t&&!t.current&&(t.current=Z.current);var i=function(){var t;return"undefined"===typeof google?console.error("Google has not been found. Make sure your provide apiKey prop."):null!==(t=google.maps)&&void 0!==t&&t.places?!Z.current instanceof HTMLInputElement?console.error("Input ref must be HTMLInputElement."):(w.current=new google.maps.places.Autocomplete(Z.current,e),void(w.current&&(k.current=w.current.addListener("place_changed",(function(){l&&w&&w.current&&l(w.current.getPlace(),Z.current,w.current)}))))):console.error("Google maps places API must be loaded.")};return n?M().then((function(){return i()})):i(),function(){return k.current?k.current.remove():void 0}}}),[]),(0,i.useEffect)((function(){var e;(null===i.default||void 0===i.default||null===(e=i.default.version)||void 0===e||!e.startsWith("18"))&&o.isBrowser&&window.MutationObserver&&Z.current&&Z.current instanceof HTMLInputElement&&(S.current=new MutationObserver((function(){S.current.disconnect(),Z.current&&(Z.current.autocomplete=c)})),S.current.observe(Z.current,{attributes:!0,attributeFilter:["autocomplete"]}))}),[c]),(0,i.useEffect)((function(){w.current&&w.current.setFields(h)}),[h]),(0,i.useEffect)((function(){w.current&&w.current.setBounds(x)}),[x]),(0,i.useEffect)((function(){w.current&&w.current.setComponentRestrictions(m)}),[m]),(0,i.useEffect)((function(){w.current&&w.current.setOptions(j)}),[j]),{ref:Z,autocompleteRef:w}};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var l=r(t);if(l&&l.has(e))return l.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if("default"!==d&&Object.prototype.hasOwnProperty.call(e,d)){var a=o?Object.getOwnPropertyDescriptor(e,d):null;a&&(a.get||a.set)?Object.defineProperty(i,d,a):i[d]=e[d]}i.default=e,l&&l.set(e,i);return i}(l(47313)),o=l(39003),d=l(56236);function r(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,l=new WeakMap;return(r=function(e){return e?l:t})(e)}function a(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function s(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?a(Object(l),!0).forEach((function(t){u(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):a(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function u(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}}}]);