"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9102],{25513:function(e,n,t){var s=t(93433),r=t(29439),a=t(47313),i=t(68197),o=t(66204),d=t(59624),l=t(45705),c=t(59491),u=t(10976),m=t(16124),f=t(77181),p=t(25050),h=t(86345),x=t(24511),Z=t(70816),y=t.n(Z),b=t(58821),g=t(43681),j=t(11829),k=t(65919),H=t(46417);n.Z=function(e){var n=e.onFinish,t=e.form,Z=e.lines,w=e.loadingBtn,v=e.days,S=e.setDays,_=e.setLines,D=e.weeks,N=(0,x.$)().t,C=[{from:new Date(1900,4,18),to:new Date(y()().subtract(1,"days"))}],P=(0,a.useState)(!0),Y=(0,r.Z)(P,2),F=Y[0],I=Y[1],M=v&&v.length>0?(0,H.jsxs)(i.Z,{children:[(0,H.jsx)(o.Z,{style:{fontSize:14,padding:"4px 10px",width:"100%",marginTop:"10px"},children:N("Your.existing.vacations")}),(0,H.jsxs)(d.Z,{span:24,className:"mt-2",children:[v.slice(0,F?1:v.length).map((function(e,n){return(0,H.jsxs)(l.Z,{className:"d-flex justify-content-between",style:{borderBottom:"1px solid #4D5B75"},children:[(0,H.jsx)(d.Z,{span:24,style:{fontSize:14,marginTop:"8px"},children:y()(e).format("YYYY-MM-DD")}),(0,H.jsx)(d.Z,{span:24,children:(0,H.jsx)(o.Z,{color:"red",className:"cursor-pointer mt-3 mb-2",style:{fontSize:14},onClick:function(){return n=e,S(v.filter((function(e){return e!==n})));var n},children:N("remove")})})]},n)})),(0,H.jsx)(c.Z,{className:"mt-3 w-100",onClick:function(){I(!F)},children:F?(0,H.jsx)(b.ahe,{}):(0,H.jsx)(b.dMq,{})})]})]}):(0,H.jsx)(o.Z,{style:{fontSize:14,padding:"4px 10px",width:"100%"},children:"Please pick one or more days."}),O=function(e,n){for(var t=[],s=e;s<n;s++)t.push(s);return t},B=function(){return{disabledHours:function(){return O(0,1)},disabledMinutes:function(){return O(0,0)},disabledSeconds:function(){return O(0,60)}}};return(0,H.jsx)(u.Z,{form:t,layout:"vertical",onFinish:n,children:(0,H.jsxs)(i.Z,{gutter:12,children:[(0,H.jsx)(d.Z,{span:12,children:(0,H.jsx)(u.Z.Item,{label:N("max.time"),name:"max_time",rules:[{required:!0,message:N("required")},{type:"number",min:1,max:24,message:N("must.be.between.1.and.24")}],children:(0,H.jsx)(m.Z,{className:"w-100"})})}),(0,H.jsx)(d.Z,{span:12}),(0,H.jsx)(d.Z,{span:12,children:(0,H.jsx)(f.Z,{title:N("booking.working.days"),children:(0,H.jsx)(i.Z,{gutter:8,children:(0,H.jsx)(d.Z,{span:24,children:(0,H.jsx)(u.Z.List,{name:"working_days",children:function(e){return(0,H.jsx)("div",{children:e.map((function(e,n){return(0,H.jsxs)(i.Z,{gutter:12,align:"center",children:[(0,H.jsx)(d.Z,{span:7,children:(0,H.jsx)(u.Z.Item,{name:[n,"day"],children:(0,H.jsx)("span",{children:N(D[n].title)})})}),Z[e.key]?(0,H.jsx)(d.Z,{span:13,className:"mt-2",children:(0,H.jsx)("span",{children:N("shop.closed")})}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(d.Z,{span:7,children:(0,H.jsx)(u.Z.Item,{rules:[{required:!1===Z[e.key]}],name:[n,"from"],children:(0,H.jsx)(p.Z,{disabledTime:B,picker:"time",placeholder:N("start.time")})})}),(0,H.jsx)(d.Z,{span:6,children:(0,H.jsx)(u.Z.Item,{rules:[{required:!1===Z[e.key]}],name:[n,"to"],children:(0,H.jsx)(p.Z,{disabledTime:B,picker:"time",placeholder:N("end.time")})})})]}),(0,H.jsx)(d.Z,{span:4,children:(0,H.jsx)(u.Z.Item,{name:[n,"disabled"],valuePropName:"checked",children:(0,H.jsx)(h.Z,{checkedChildren:(0,H.jsx)(g.Z,{}),unCheckedChildren:(0,H.jsx)(j.Z,{}),checked:Z[e.key],onChange:function(){return function(e){var n=(0,s.Z)(Z);n[e]=!Z[e],_(n)}(e.key)}})})})]},e.key)}))})}})})})})}),(0,H.jsx)(d.Z,{span:12,children:(0,H.jsxs)(f.Z,{title:N("booking.closed.days"),children:[(0,H.jsx)("p",{children:N("booking.closed.days.text")}),(0,H.jsx)(u.Z.Item,{rules:[{required:!1,message:N("required")}],children:(0,H.jsx)(k._W,{className:"datepicker",mode:"multiple",disabled:C,min:1,selected:v,onSelect:S,footer:M,showOutsideDays:!0})})]})}),(0,H.jsx)(d.Z,{span:24,children:(0,H.jsx)(l.Z,{children:(0,H.jsx)(c.Z,{type:"primary",htmlType:"submit",loading:w,children:N("save")})})})]})})}},21429:function(e,n,t){t.d(n,{P:function(){return a}});var s=t(70816),r=t.n(s),a=[{title:"monday",disabled:!1,from:r()("01:00:00","HH:mm:ss"),to:r()("23:00:00","HH:mm:ss")},{title:"tuesday",disabled:!1,from:r()("01:00:00","HH:mm:ss"),to:r()("23:00:00","HH:mm:ss")},{title:"wednesday",disabled:!1,from:r()("01:00:00","HH:mm:ss"),to:r()("23:00:00","HH:mm:ss")},{title:"thursday",disabled:!1,from:r()("01:00:00","HH:mm:ss"),to:r()("23:00:00","HH:mm:ss")},{title:"friday",disabled:!1,from:r()("01:00:00","HH:mm:ss"),to:r()("23:00:00","HH:mm:ss")},{title:"saturday",disabled:!1,from:r()("01:00:00","HH:mm:ss"),to:r()("23:00:00","HH:mm:ss")},{title:"sunday",disabled:!1,from:r()("01:00:00","HH:mm:ss"),to:r()("23:00:00","HH:mm:ss")}]},31872:function(e,n,t){var s=t(34344),r={getById:function(e){return s.Z.get("dashboard/seller/booking/shop-closed-dates/".concat(e))},create:function(e){return s.Z.post("dashboard/seller/booking/shop-closed-dates",e,{})},update:function(e,n){return s.Z.put("dashboard/seller/booking/shop-closed-dates/".concat(e),n,{})},delete:function(e){return s.Z.delete("dashboard/seller/booking/shop-closed-dates/delete",{params:e})}};n.Z=r},61887:function(e,n,t){var s=t(34344),r={getById:function(e){return s.Z.get("dashboard/seller/booking/shop-working-days/".concat(e))},create:function(e){return s.Z.post("dashboard/seller/booking/shop-working-day",e,{})},update:function(e,n){return s.Z.put("dashboard/seller/booking/shop-working-days/".concat(e),n,{})},delete:function(e){return s.Z.delete("dashboard/seller/booking/shop-working-days",{params:e})}};n.Z=r},34830:function(e,n,t){t.r(n);var s=t(1413),r=t(29439),a=t(47313),i=t(51282),o=t(70816),d=t.n(o),l=t(21429),c=t(25513),u=t(10976),m=t(66444),f=t(31872),p=t(2717),h=t(61887),x=t(90954),Z=t(23560),y=t(97890),b=t(24511),g=t(72936),j=t(46417);n.default=function(){var e=(0,b.$)().t,n=u.Z.useForm(),t=(0,r.Z)(n,1)[0],o=(0,a.useState)([]),k=(0,r.Z)(o,2),H=k[0],w=k[1],v=(0,a.useState)(new Array(7).fill(!1)),S=(0,r.Z)(v,2),_=S[0],D=S[1],N=(0,a.useState)(!1),C=(0,r.Z)(N,2),P=C[0],Y=C[1],F=(0,a.useState)(!1),I=(0,r.Z)(F,2),M=I[0],O=I[1],B=(0,p.v9)((function(e){return e.myShop}),p.wU).myShop,E=(0,p.v9)((function(e){return e.menu}),p.wU).activeMenu,q=(0,p.I0)(),T=(0,y.s0)();return(0,a.useEffect)((function(){t.setFieldsValue({working_days:l.P})}),[]),(0,a.useEffect)((function(){E.refetch&&(O(!0),m.Z.getAll().then((function(e){t.setFieldsValue({max_time:e.data.max_time})})).finally((function(){q((0,x.A_)(E)),O(!1)})),f.Z.getById(B.uuid).then((function(e){w(e.data.closed_dates.filter((function(e){return e.day>d()(new Date).format("YYYY-MM-DD")})).map((function(e){return new Date(e.day)})))})).finally((function(){q((0,x.A_)(E)),O(!1)})),h.Z.getById(B.uuid).then((function(e){D(0!==e.data.dates.length?e.data.dates.map((function(e){return e.disabled})):[]),0!==e.data.dates.length&&t.setFieldsValue({working_days:e.data.dates.map((function(e){return{title:e.day,from:d()(e.from,"HH:mm:ss"),to:d()(e.to,"HH:mm:ss"),disabled:Boolean(e.disabled)}}))})})).finally((function(){q((0,x.A_)(E)),O(!1)})))}),[E.refetch]),(0,j.jsx)(j.Fragment,{children:M?(0,j.jsx)(i.Z,{}):(0,j.jsx)(c.Z,{onFinish:function(n){Y(!0);var t={dates:H?H.map((function(e){return d()(e).format("YYYY-MM-DD")})):void 0},r={dates:n.working_days.map((function(e){return{day:e.title,from:d()(e.from?e.from:"00").format("HH-mm"),to:d()(e.to?e.to:"00").format("HH-mm"),disabled:e.disabled}}))},a={max_time:n.max_time},i="seller/booking/time";Promise.all([m.Z.create(a),f.Z.update(B.uuid,t),0!==n.working_days.length?h.Z.update(B.uuid,r):void 0]).then((function(){Z.Am.success(e("successfully.updated")),q((0,g.R)()),q((0,x.ph)((0,s.Z)((0,s.Z)({},E),{},{nextUrl:i}))),T("/".concat(i))}))},form:t,lines:_,loadingBtn:P,days:H,setDays:w,setLines:D,weeks:l.P})})}},25050:function(e,n,t){var s=t(87462),r=t(47313),a=t(99096),i=function(e,n){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)n.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(t[s[r]]=e[s[r]])}return t},o=a.Z.TimePicker,d=a.Z.RangePicker,l=r.forwardRef((function(e,n){return r.createElement(d,(0,s.Z)({},e,{dropdownClassName:e.popupClassName,picker:"time",mode:void 0,ref:n}))})),c=r.forwardRef((function(e,n){var t=e.addon,a=e.renderExtraFooter,d=e.popupClassName,l=i(e,["addon","renderExtraFooter","popupClassName"]),c=r.useMemo((function(){return a||(t||void 0)}),[t,a]);return r.createElement(o,(0,s.Z)({},l,{dropdownClassName:d,mode:void 0,ref:n,renderExtraFooter:c}))}));c.displayName="TimePicker",c.RangePicker=l,n.Z=c}}]);