"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2508],{4014:function(e,t,n){function d(e){var t,n,d=null===e||void 0===e?void 0:e.slice(0,1),i=null===e||void 0===e?void 0:e.lastIndexOf("@"),o=null===e||void 0===e?void 0:e.slice(1,i-1);o=null===(t=o)||void 0===t?void 0:t.replace(/./g,"*");var l=null===e||void 0===e?void 0:e.slice(i-1,e.length);return null===d||void 0===d||null===(n=d.concat(o))||void 0===n?void 0:n.concat(l)}n.d(t,{Z:function(){return d}})},84261:function(e,t,n){function d(e){var t="".concat(e),n="*".repeat(t.length-2);return(null===t||void 0===t?void 0:t[0])+n+(null===t||void 0===t?void 0:t[(null===t||void 0===t?void 0:t.length)-1])}n.d(t,{Z:function(){return d}})},13945:function(e,t,n){function d(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(t,{Z:function(){return d}})},84017:function(e,t,n){function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after",d=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===n?"".concat(d," ").concat(t):"".concat(t," ").concat(d)}n.d(t,{Z:function(){return d}})},29457:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var d=n(1413),i=n(29439),o=n(45705),l=n(66204),r=n(56140),a=n(78508),u=n(72652),c=n(256),s=n(59491),v=n(68197),p=n(59624),f=n(77181),h=n(26824),x=n(83371),m=n(41068),Z=n(70816),g=n.n(Z),y=n(47313),j=n(24511),b=n(2717),k=n(97890),_=n(84017),I=n(90954),w=n(49986),C=n(45464),S=n(22054),Y=n(13945),M=n(79492),P=n(80314),D=n(7370),z=n(46417),U=function(e){var t=e.id,n=(0,j.$)().t,d=(0,b.I0)(),r=(0,k.s0)(),u=(0,y.useState)([]),c=(0,i.Z)(u,2),s=c[0],v=c[1],p=(0,y.useState)(!1),x=(0,i.Z)(p,2),m=x[0],Z=x[1],g=(0,b.v9)((function(e){return e.currency}),b.wU).defaultCurrency,w=function(e){Z(!0),D.Z.getUserTopProducts(t,e).then((function(e){return v(e.data)})).finally((function(){return Z(!1)}))};return(0,y.useEffect)((function(){w()}),[]),(0,z.jsx)(f.Z,{title:n("top.products"),children:(0,z.jsx)(a.Z,{loading:m,dataSource:null===s||void 0===s?void 0:s.data,pagination:{total:null===s||void 0===s?void 0:s.total,current:null===s||void 0===s?void 0:s.current_page,pageSize:null===s||void 0===s?void 0:s.per_page},columns:[{title:n("product"),dataIndex:"stock",key:"stock",render:function(e){var t,i,l;return(0,z.jsxs)(o.Z,{children:[(0,z.jsx)(h.Z,{width:100,src:null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.img,placeholder:!0,style:{borderRadius:4}}),(0,z.jsx)("div",{onClick:function(){return function(e){d((0,I.bL)({id:"product-edit",url:"product/".concat(e.uuid),name:n("edit.product")})),r("/product/".concat(e.uuid))}(null===e||void 0===e?void 0:e.product)},className:"text-hover",children:null===e||void 0===e||null===(i=e.product)||void 0===i||null===(l=i.translation)||void 0===l?void 0:l.title})]})}},{title:n("count"),dataIndex:"count",key:"count"},{title:n("total.price"),dataIndex:"total_price",key:"total_price",render:function(e){return(0,_.Z)(e,null===g||void 0===g?void 0:g.symbol)}},{title:n("status"),dataIndex:"status",key:"status",render:function(e,t){var d,i;return(0,z.jsx)(l.Z,{children:null!==(d=t.stock)&&void 0!==d&&null!==(i=d.product)&&void 0!==i&&i.active?n("active"):n("inactive")})}}],onChange:function(e){return w({page:null===e||void 0===e?void 0:e.current,perPage:null===e||void 0===e?void 0:e.pageSize})}})})},E=n(74294),L=n(49319),N=function(e){var t,n,o,r=e.id,u=(0,j.$)().t,c=(0,y.useState)({}),s=(0,i.Z)(c,2),v=s[0],p=s[1],h=(0,y.useState)(!1),x=(0,i.Z)(h,2),m=x[0],Z=x[1],k=(0,b.v9)((function(e){return e.currency}),b.wU).defaultCurrency,I=function(e){Z(!0),L.Z.getAll((0,d.Z)({user_uuid:r},e)).then((function(e){p(e)})).finally((function(){Z(!1)}))};return(0,y.useEffect)((function(){I()}),[]),(0,z.jsx)(f.Z,{title:u("order.refunds"),extra:(0,z.jsx)(E.Z,{options:[{label:u("pending"),value:"pending",key:"pending"},{label:u("accepted"),value:"accepted",key:"accepted"},{label:u("canceled"),value:"canceled",key:"canceled"}],onChange:function(e){return I({status:e})},placeholder:u("status"),allowClear:!0,style:{width:130}}),children:(0,z.jsx)(a.Z,{loading:m,dataSource:null===v||void 0===v?void 0:v.data,pagination:{total:null===v||void 0===v||null===(t=v.meta)||void 0===t?void 0:t.total,current:null===v||void 0===v||null===(n=v.meta)||void 0===n?void 0:n.current_page,pageSize:null===v||void 0===v||null===(o=v.meta)||void 0===o?void 0:o.per_page},columns:[{title:u("cause"),dataIndex:"cause",key:"cause"},{title:u("answer"),dataIndex:"answer",key:"answer",render:function(e){return e||"no.answer"}},{title:u("total.price"),dataIndex:"total_price",key:"total_price",render:function(e,t){var n;return(0,_.Z)(null===(n=t.order)||void 0===n?void 0:n.total_price,null===k||void 0===k?void 0:k.symbol)}},{title:u("status"),dataIndex:"status",key:"status",render:function(e){return(0,z.jsx)(l.Z,{children:e})}},{title:u("created.date.&.time"),dataIndex:"created_at",key:"created_at",render:function(e){return g()(e).format("YYYY-MM-DD HH:mm")}}],onChange:function(e){return I({page:e.current,perPage:e.pageSize})}})})},R=n(4014),T=n(84261),$=function(){var e,t=(0,k.UO)().id,n=(0,k.s0)(),Z=(0,y.useState)({}),D=(0,i.Z)(Z,2),E=D[0],L=D[1],$=(0,b.I0)(),q=(0,y.useState)(!1),H=(0,i.Z)(q,2),A=H[0],F=H[1],K=(0,j.$)().t,O=(0,b.v9)((function(e){return e.menu}),b.wU).activeMenu,B=(0,b.v9)((function(e){return e.currency}),b.wU).defaultCurrency,G=(0,b.v9)((function(e){return e.formLang}),b.wU).defaultLang,J=(0,b.v9)((function(e){return e.orders}),b.wU),Q=J.orders,V=J.meta,W=J.loading,X=J.params,ee=(0,M.Z)(),te=ee.isDemo,ne=ee.demoDeliveryman,de=ee.demoSeller,ie=ee.demoAdmin,oe=ee.demoModerator,le=ee.demoMeneger;function re(e){F(!0),w.Z.getById(e).then((function(e){return L(e.data)})).finally((function(){return F(!1)}))}var ae=function(e){$((0,I.bL)({id:"product-edit",url:"product/".concat(e),name:K("edit.product")})),n("/product/".concat(e))};return(0,y.useEffect)((function(){re(t)}),[t]),(0,y.useEffect)((function(){var e={user_id:t,page:1,perPage:10};$((0,S.dT)(e))}),[]),(0,P.Z)((function(){var e,n,d={user_id:t,page:(null===O||void 0===O||null===(e=O.data)||void 0===e?void 0:e.page)||1,perPage:(null===O||void 0===O||null===(n=O.data)||void 0===n?void 0:n.perPage)||10};$((0,S.dT)(d))}),[O.data]),(0,y.useEffect)((function(){if(O.refetch){var e,n,d={user_id:t,page:(null===O||void 0===O||null===(e=O.data)||void 0===e?void 0:e.page)||1,perPage:(null===O||void 0===O||null===(n=O.data)||void 0===n?void 0:n.perPage)||10};re(t),$((0,S.dT)(d)),$((0,I.A_)(O))}}),[O.refetch]),A?(0,z.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100",children:(0,z.jsx)(u.Z,{})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c.Z,{title:K("user.info"),extra:(0,z.jsx)(s.Z,{type:"primary",disabled:te&&(null===E||void 0===E?void 0:E.id)==ne||te&&(null===E||void 0===E?void 0:E.id)==oe||te&&(null===E||void 0===E?void 0:E.id)==le||te&&(null===E||void 0===E?void 0:E.id)==de||te&&(null===E||void 0===E?void 0:E.id)===ie,onClick:function(){$((0,I.bL)({url:"user/".concat(t),id:"user_edit",name:K("edit.user")})),n("/user/".concat(t),{state:"user"})},children:K("edit")})}),(0,z.jsxs)(v.Z,{gutter:24,children:[(0,z.jsx)(p.Z,{span:16,children:(0,z.jsxs)(f.Z,{title:"".concat(null===E||void 0===E?void 0:E.firstname," ").concat((null===E||void 0===E?void 0:E.lastname)||""," #").concat(null===E||void 0===E?void 0:E.id),children:[(0,z.jsx)(h.Z,{src:(0,C.Z)(null===E||void 0===E?void 0:E.img),alt:null===E||void 0===E?void 0:E.firstname,width:100,height:100,style:{borderRadius:"10px",objectFit:"cover"}}),(0,z.jsxs)(x.Z,{column:2,children:[(0,z.jsx)(x.Z.Item,{label:K("registration.date"),children:g()(null===E||void 0===E?void 0:E.registered_at).format("YYYY-MM-DD HH:mm")}),(0,z.jsx)(x.Z.Item,{label:K("status"),children:(0,z.jsx)(l.Z,{color:null!==E&&void 0!==E&&E.active?"cyan":"red",children:null!==E&&void 0!==E&&E.active?K("active"):K("inactive")})}),(0,z.jsx)(x.Z.Item,{label:K("birthday"),children:g()(null===E||void 0===E?void 0:E.birthday).format("YYYY-MM-DD")}),(0,z.jsx)(x.Z.Item,{label:K("email"),children:(0,R.Z)(null===E||void 0===E?void 0:E.email)}),(0,z.jsx)(x.Z.Item,{label:K("gender"),children:null===E||void 0===E?void 0:E.gender}),(0,z.jsx)(x.Z.Item,{label:K("role"),children:null===E||void 0===E?void 0:E.role}),(0,z.jsx)(x.Z.Item,{label:K("wallet"),children:(0,_.Z)(null===E||void 0===E||null===(e=E.wallet)||void 0===e?void 0:e.price,null===B||void 0===B?void 0:B.symbol)}),(0,z.jsx)(x.Z.Item,{label:K("phone"),children:null!==E&&void 0!==E&&E.phone?(0,T.Z)(null===E||void 0===E?void 0:E.phone):K("no.phone.number")})]})]})}),(0,z.jsxs)(p.Z,{span:8,children:[(0,z.jsx)(f.Z,{title:K("successfull.orders"),children:(0,z.jsxs)(x.Z,{column:1,children:[(0,z.jsx)(x.Z.Item,{label:K("delivered.orders.count"),children:(0,z.jsx)(m.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===E||void 0===E?void 0:E.o_count)||0})}),(0,z.jsx)(x.Z.Item,{label:K("spent.since.registration"),children:(0,z.jsx)(m.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,_.Z)(null===E||void 0===E?void 0:E.o_sum,null===B||void 0===B?void 0:B.symbol)||0})})]})}),(null===E||void 0===E?void 0:E.shop)&&(0,z.jsx)(f.Z,{title:"".concat(K("shop.info")," #").concat(null===E||void 0===E?void 0:E.shop.id),children:(0,z.jsxs)(x.Z,{column:1,children:[(0,z.jsx)(x.Z.Item,{label:K("name"),children:null===E||void 0===E?void 0:E.shop.translation.title}),(0,z.jsx)(x.Z.Item,{label:K("phone"),children:null===E||void 0===E?void 0:E.shop.phone})]})})]}),(0,z.jsxs)(p.Z,{span:24,children:[(0,z.jsx)(f.Z,{title:K("orders"),children:(0,z.jsx)(a.Z,{expandable:{expandedRowRender:function(e){var t=[{title:K("product"),dataIndex:"product",render:function(e,t){var n,d,i,r;return(0,z.jsx)("div",{className:"text-hover",onClick:function(){var e,n;return ae(null===(e=t.stock)||void 0===e||null===(n=e.product)||void 0===n?void 0:n.uuid)},children:(0,z.jsxs)(o.Z,{wrap:!0,children:[null===(n=t.stock)||void 0===n||null===(d=n.product)||void 0===d||null===(i=d.translation)||void 0===i?void 0:i.title,null===(r=t.addons)||void 0===r?void 0:r.map((function(e){var t,n,d;return(0,z.jsxs)(l.Z,{children:[null===e||void 0===e||null===(t=e.stock)||void 0===t||null===(n=t.product)||void 0===n||null===(d=n.translation)||void 0===d?void 0:d.title," x ",e.quantity]},e.id)}))]})})},key:"product"},{title:K("quantity"),dataIndex:"quantity",key:"quantity"},{title:K("total.price"),dataIndex:"total_price",render:function(e){return(0,_.Z)(e,null===B||void 0===B?void 0:B.symbol)},key:"total_price"},{title:K("discount"),dataIndex:"discount",key:"discount"}];return(0,z.jsxs)(o.Z,{direction:"vertical",className:"w-100",children:[(0,z.jsx)(r.Z.Text,{children:K("ordered.products")}),(0,z.jsx)(a.Z,{scroll:{x:!0},columns:t,dataSource:e.details,pagination:!1})]})},defaultExpandedRowKeys:["0"]},dataSource:Q,columns:[{title:"ID",dataIndex:"id",key:"id",render:function(e){return(0,z.jsxs)("div",{onClick:function(){return function(e){$((0,I.bL)({url:"/order/details/".concat(e),id:"order.details",name:K("order.details")})),n("/order/details/".concat(e))}(e)},className:"text-hover",children:["#",e]})}},{title:K("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",render:function(e){return"".concat(e||0," ").concat(K(e&&e<2?"products":"product"))}},{title:K("total.price"),dataIndex:"total_price",key:"total_price",render:function(e){return(0,_.Z)(e,null===B||void 0===B?void 0:B.symbol)}},{title:K("delivery.date.&.time"),dataIndex:"delivery_date",key:"delivery_date",render:function(e,t){return"".concat(null===t||void 0===t?void 0:t.delivery_date," ").concat((null===t||void 0===t?void 0:t.delivery_time)||"")}},{title:K("status"),dataIndex:"status",key:"status",render:function(e){return(0,z.jsx)(l.Z,{children:e})}},{title:K("delivery.address"),dataIndex:"address",key:"address",render:function(e,t){var n,d,i,o,l,r;switch(null===t||void 0===t?void 0:t.delivery_type){case"delivery":r=null!==(n=null===t||void 0===t||null===(d=t.my_address)||void 0===d?void 0:d.street_house_number)&&void 0!==n?n:K("no.address");break;case"point":r=null!==(i=null===t||void 0===t||null===(o=t.delivery_point)||void 0===o||null===(l=o.address)||void 0===l?void 0:l[G])&&void 0!==i?i:K("no.address");break;case"digital":r=K("digital.delivery");break;default:r=K("no.address")}return r}}],loading:W,pagination:{pageSize:X.perPage,page:X.page,total:V.total,defaultCurrent:X.page},rowKey:function(e){return e.id},onChange:function(e,t,n){var i=e.pageSize,o=e.current,l=n.field,r=n.order,a=(0,Y.Z)(r);$((0,I.nc)({activeMenu:O,data:(0,d.Z)((0,d.Z)({},O.data),{},{perPage:i,page:o,column:l,sort:a})}))}})}),(0,z.jsx)(N,{id:t}),(0,z.jsx)(U,{id:t})]})]})]})}}}]);