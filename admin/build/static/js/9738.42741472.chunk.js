"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9738],{89281:function(e,n,t){t.d(n,{h:function(){return p}});var o=t(1413),u=t(29439),l=t(45987),i=t(47313),a=t(12279),s=t.n(a),d=t(74294),r=t(72652),c=t(46417),v=["fetchOptions","debounceTimeout","onClear","refetchOptions"],p=function(e){var n=e.fetchOptions,t=e.debounceTimeout,a=void 0===t?400:t,p=e.onClear,f=e.refetchOptions,m=void 0!==f&&f,h=(0,l.Z)(e,v),x=(0,i.useState)(!1),b=(0,u.Z)(x,2),Z=b[0],k=b[1],j=(0,i.useState)([]),_=(0,u.Z)(j,2),y=_[0],g=_[1],q=(0,i.useMemo)((function(){return s()((function(e){g([]),k(!0),n(e).then((function(e){g(e),k(!1)}))}),a)}),[n,a]);return(0,c.jsx)(d.Z,(0,o.Z)((0,o.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:q,onClear:function(){q(""),p&&p()},notFoundContent:Z?(0,c.jsx)(r.Z,{size:"small"}):"no results"},h),{},{options:y,onFocus:function(){y.length&&!m||q("")}}))}},79738:function(e,n,t){t.r(n);var o=t(1413),u=t(29439),l=t(47313),i=t(97890),a=t(23560),s=t(10976),d=t(77181),r=t(2717),c=t(90954),v=t(24511),p=t(70816),f=t.n(p),m=t(96708),h=t(73346),x=t(51282),b=t(77397),Z=t(46417);n.default=function(){var e=(0,v.$)().t,n=(0,r.v9)((function(e){return e.menu}),r.wU).activeMenu,t=(0,r.I0)(),p=s.Z.useForm(),k=(0,u.Z)(p,1)[0],j=(0,i.s0)(),_=(0,l.useState)(!1),y=(0,u.Z)(_,2),g=y[0],q=y[1],S=(0,i.UO)().id;var w=function(e){q(!0),h.Z.getById(e).then((function(e){return function(e){var u,l,i,a,s,d,r,v,p,m,h,x,b,Z,j,_,y,g,S={status:null===e||void 0===e?void 0:e.status,expired_at:f()(null===e||void 0===e?void 0:e.expired_at,"YYYY-MM-DD"),stock:{label:(null===e||void 0===e||null===(u=e.stock)||void 0===u||null===(l=u.product)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title)+"".concat((null===e||void 0===e||null===(a=e.stock)||void 0===a||null===(s=a.extras)||void 0===s?void 0:s.length)>0?": ".concat(null===e||void 0===e||null===(d=e.stock)||void 0===d||null===(r=d.extras)||void 0===r?void 0:r.map((function(e){var n;return null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.value})).join(", ")):""),value:null===e||void 0===e||null===(v=e.stock)||void 0===v?void 0:v.id,key:null===e||void 0===e||null===(p=e.stock)||void 0===p?void 0:p.id},stock_quantity:null===e||void 0===e?void 0:e.value,bonus_stock:{label:(null===e||void 0===e||null===(m=e.bonusStock)||void 0===m||null===(h=m.product)||void 0===h||null===(x=h.translation)||void 0===x?void 0:x.title)+"".concat((null===e||void 0===e||null===(b=e.bonusStock)||void 0===b||null===(Z=b.extras)||void 0===Z?void 0:Z.length)>0?": ".concat(null===e||void 0===e||null===(j=e.bonusStock)||void 0===j||null===(_=j.extras)||void 0===_?void 0:_.map((function(e){var n;return null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.value})).join(", ")):""),value:null===e||void 0===e||null===(y=e.bonusStock)||void 0===y?void 0:y.id,key:null===e||void 0===e||null===(g=e.bonusStock)||void 0===g?void 0:g.id},bonus_stock_quantity:null===e||void 0===e?void 0:e.bonus_quantity};console.log("data",S),k.setFieldsValue(S),t((0,c.nc)({activeMenu:n,data:(0,o.Z)((0,o.Z)({},S),{},{expired_at:null===e||void 0===e?void 0:e.expired_at})})),q(!1)}(e.data)})).finally((function(){return t((0,c.A_)(n))}))};(0,l.useEffect)((function(){n.refetch&&w(S)}),[n.refetch]);return(0,Z.jsx)(d.Z,{title:e("edit.bonus"),className:"h-100",children:g?(0,Z.jsx)(x.Z,{}):(0,Z.jsx)(b.Z,{form:k,handleSubmit:function(u){var l="seller/bonus/product";return h.Z.update(S,u).then((function(){a.Am.success(e("successfully.created")),(0,r.dC)((function(){t((0,c.ph)((0,o.Z)((0,o.Z)({},n),{},{nextUrl:l}))),t((0,m.k)({}))})),j("/".concat(l))}))}})})}},77397:function(e,n,t){t.d(n,{Z:function(){return j}});var o=t(1413),u=t(29439),l=t(47313),i=t(24511),a=t(2717),s=t(10976),d=t(68197),r=t(59624),c=t(16124),v=t(99096),p=t(86345),f=t(59491),m=t(89281),h=t(18333),x=t(90954),b=t(70816),Z=t.n(b),k=t(46417);function j(e){var n=e.form,t=e.handleSubmit,b=(0,i.$)().t,j=(0,a.v9)((function(e){return e.menu}),a.wU).activeMenu,_=(0,a.I0)(),y=(0,l.useState)(!1),g=(0,u.Z)(y,2),q=g[0],S=g[1],w=function(e){var n={search:e,page:1,perPage:20};return h.Z.getStock(n).then((function(e){var n=e.data;return null===n||void 0===n?void 0:n.map((function(e){var n,t,o,u;return{label:(null===e||void 0===e||null===(n=e.product)||void 0===n||null===(t=n.translation)||void 0===t?void 0:t.title)+"".concat((null===e||void 0===e||null===(o=e.extras)||void 0===o?void 0:o.length)>0?": ".concat(null===e||void 0===e||null===(u=e.extras)||void 0===u?void 0:u.map((function(e){var n;return null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.value})).join(", ")):""),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))};(0,l.useEffect)((function(){return function(){var e=n.getFieldsValue(!0),t=(0,o.Z)((0,o.Z)({},e),{},{expired_at:null===e||void 0===e?void 0:e.expired_at});_((0,x.nc)({activeMenu:j,data:t}))}}),[]);return(0,k.jsxs)(s.Z,{form:n,name:"product_bonus_form",layout:"vertical",onFinish:function(e){var n,o;S(!0);var u={stock_id:null===(n=e.stock)||void 0===n?void 0:n.value,value:e.stock_quantity,bonus_stock_id:null===(o=e.bonus_stock)||void 0===o?void 0:o.value,bonus_quantity:e.bonus_stock_quantity,expired_at:Z()(e.expired_at).format("YYYY-MM-DD"),status:e.status,type:"count"};t(u).finally((function(){return S(!1)}))},initialValues:(0,o.Z)({status:!0},j.data),children:[(0,k.jsxs)(d.Z,{gutter:12,children:[(0,k.jsx)(r.Z,{span:12,children:(0,k.jsx)(s.Z.Item,{label:b("products.stock"),name:"stock",rules:[{required:!0,message:b("required")}],children:(0,k.jsx)(m.h,{fetchOptions:w,placeholder:b("select.product.stock")})})}),(0,k.jsx)(r.Z,{span:12,children:(0,k.jsx)(s.Z.Item,{label:b("product.stock.quantity"),name:"stock_quantity",rules:[{required:!0,message:b("required")},{type:"number",min:0,message:b("must.be.greater.than.0")}],children:(0,k.jsx)(c.Z,{className:"w-100",placeholder:b("input.product.stock.quantity")})})}),(0,k.jsx)(r.Z,{span:12,children:(0,k.jsx)(s.Z.Item,{label:b("bonus.product.stock"),name:"bonus_stock",rules:[{required:!0,message:b("required")}],children:(0,k.jsx)(m.h,{fetchOptions:w,placeholder:b("select.product.stock")})})}),(0,k.jsx)(r.Z,{span:12,children:(0,k.jsx)(s.Z.Item,{label:b("bonus.product.stock.quantity"),name:"bonus_stock_quantity",rules:[{required:!0,message:b("required")},{type:"number",min:0,message:b("must.be.greater.than.0")}],children:(0,k.jsx)(c.Z,{className:"w-100",placeholder:b("input.bonus.product.stock.quantity")})})}),(0,k.jsx)(r.Z,{span:12,children:(0,k.jsx)(s.Z.Item,{label:b("expired.at"),name:"expired_at",rules:[{required:!0,message:b("required")}],children:(0,k.jsx)(v.Z,{className:"w-100",placeholder:b("select.expired.at"),disabledDate:function(e){return Z()().add(-1,"days")>=e}})})}),(0,k.jsx)(r.Z,{span:8,children:(0,k.jsx)(s.Z.Item,{label:b("active"),name:"status",valuePropName:"checked",children:(0,k.jsx)(p.Z,{})})})]}),(0,k.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,k.jsx)("div",{className:"pb-5",children:(0,k.jsx)(f.Z,{type:"primary",htmlType:"submit",loading:q,children:b("submit")})})})]})}}}]);