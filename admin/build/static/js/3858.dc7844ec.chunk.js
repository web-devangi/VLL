"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3858],{55940:function(n,e,t){t.d(e,{Z:function(){return v}});var i=t(1413),a=t(45987),r=(t(47313),t(59491)),o=t(47515),l=t(23560),s=t(24511),d=t(79492),u=t(46417),c=["size","onClick","type"];function v(n){var e=n.size,t=void 0===e?"":e,v=n.onClick,h=n.type,f=void 0===h?"default":h,Z=(0,a.Z)(n,c),p=(0,s.$)().t,x=(0,d.Z)().isDemo;return(0,u.jsx)(r.Z,(0,i.Z)({size:t,icon:(0,u.jsx)(o.Z,{}),onClick:function(n){x?l.Am.warning(p("cannot.work.demo")):v(n)},type:f},Z))}},53233:function(n,e,t){var i=t(1413),a=t(29439),r=t(47313),o=t(56140),l=t(67251),s=t(45705),d=t(86345),u=t(78267),c=t(37388),v=t(59491),h=t(99587),f=t(24511),Z=t(46417),p=o.Z.Text;e.Z=function(n){var e=n.columns,t=void 0===e?[]:e,o=n.setColumns,x=n.style,m=n.size,j=void 0===m?"":m,g=n.iconOnly,y=(0,f.$)().t,w=(0,r.useState)(!1),_=(0,a.Z)(w,2),b=_[0],C=_[1],k=(0,Z.jsx)(l.Z,{children:null===t||void 0===t?void 0:t.map((function(n,e){return(0,Z.jsx)(l.Z.Item,{children:(0,Z.jsxs)(s.Z,{className:"d-flex justify-content-between",children:[(0,Z.jsx)(p,{children:n.title}),(0,Z.jsx)(d.Z,{defaultChecked:!0,onClick:function(){return function(n){var e=null===t||void 0===t?void 0:t.map((function(e){return e.dataIndex===n.dataIndex&&(e.is_show=!(null!==e&&void 0!==e&&e.is_show)),e}));o(e)}(n)},disabled:1===e})]})},n+e)}))});return(0,Z.jsx)(u.Z,{overlay:k,trigger:["click"],onVisibleChange:function(n){C(n)},visible:b,children:(0,Z.jsx)(c.Z,{title:y("change.columns"),children:(0,Z.jsx)(v.Z,{style:(0,i.Z)({},x),size:j,icon:(0,Z.jsx)(h.Z,{}),children:g?null:y("Columns")})})})}},13945:function(n,e,t){function i(n){switch(n){case"ascend":return"asc";case"descend":return"desc"}}t.d(e,{Z:function(){return i}})},13858:function(n,e,t){t.r(e),t.d(e,{default:function(){return U}});var i=t(4942),a=t(93433),r=t(1413),o=t(29439),l=t(47313),s=t(26824),d=t(66204),u=t(78508),c=t(59491),v=t(45705),h=t(77181),f=t(12019),Z=t(47515),p=t(2717),x=t(69915),m=t(74580),j=t(24511),g=t(23560),y=t(53233),w=t(90954),_=t(80314),b=t(55940),C=t(97890),k=t(69658),I=t(10976),z=t(9274),S=t(68197),V=t(59624),A=t(74294),R=t(82747),H=t(46417),F=["new","approved","canceled"];function D(n){var e=n.data,t=n.handleCancel,i=n.paramsData,a=(0,p.v9)((function(n){return n.menu}),p.wU).activeMenu,s=I.Z.useForm(),d=(0,o.Z)(s,1)[0],u=(0,p.I0)(),v=(0,j.$)().t,h=(0,l.useState)(null),f=(0,o.Z)(h,2),Z=f[0],m=f[1],y=(0,l.useState)(!1),_=(0,o.Z)(y,2),b=_[0],C=_[1],k=(0,l.useState)(!1),D=(0,o.Z)(k,2),M=D[0],E=D[1];(0,l.useEffect)((function(){E(!0),R.Z.getById(null===e||void 0===e?void 0:e.id).then((function(n){var e=n.data,t={ads_package_id:null===e||void 0===e?void 0:e.ads_package_id,banner_id:null===e||void 0===e?void 0:e.banner_id,active:null===e||void 0===e?void 0:e.active,position_page:null===e||void 0===e?void 0:e.position_page};m(t)})).catch((function(n){return g.Am.error(n.message)})).finally((function(){return E(!1)}))}),[null===e||void 0===e?void 0:e.id]);return(0,H.jsx)(z.Z,{visible:!!e,title:e.title,onCancel:t,footer:[(0,H.jsx)(c.Z,{type:"primary",onClick:function(){return d.submit()},loading:b,children:v("save")}),(0,H.jsx)(c.Z,{type:"default",onClick:t,children:v("cancel")})],children:(0,H.jsx)(I.Z,{form:d,layout:"vertical",onFinish:function(n){C(!0);var o=(0,r.Z)({},n);console.log("shopAdData => ",Z),!M&&R.Z.update(e.id,(0,r.Z)((0,r.Z)({},Z),{},{status:null===o||void 0===o?void 0:o.status})).then((function(){t(),u((0,x.R)(i)),u((0,w.A_)(a))})).finally((function(){return C(!1)}))},initialValues:{status:e.status},children:(0,H.jsx)(S.Z,{gutter:12,children:(0,H.jsx)(V.Z,{span:24,children:(0,H.jsx)(I.Z.Item,{label:v("status"),name:"status",rules:[{required:!0,message:v("required")}],children:(0,H.jsx)(A.Z,{children:F.map((function(n){return(0,H.jsx)(A.Z.Option,{children:v(n)},n)}))})})})})})})}var M=t(13945),E=t(70816),O=t.n(E),P=t(97421),$=["paid","canceled"];function K(n){var e=n.data,t=n.handleCancel,i=n.paramsData,a=(n.orderId,I.Z.useForm()),r=(0,o.Z)(a,1)[0],s=(0,p.I0)(),d=(0,j.$)().t,u=(0,l.useState)(!1),v=(0,o.Z)(u,2),h=v[0],f=v[1];console.log("data",e);return(0,H.jsx)(z.Z,{visible:!!e,title:d("transaction.status"),closable:!1,footer:[(0,H.jsx)(c.Z,{type:"primary",onClick:function(){return r.submit()},loading:h,children:d("save")},"save-form"),(0,H.jsx)(c.Z,{type:"default",onClick:t,children:d("cancel")},"cansel-modal")],children:(0,H.jsx)(I.Z,{form:r,layout:"vertical",onFinish:function(n){f(!0),R.Z.transactionUpdate(null===e||void 0===e?void 0:e.payable_id,n).then((function(){t(),s((0,x.R)(i))})).catch((function(n){return g.Am.error(n.message)})).finally((function(){return f(!1)}))},initialValues:{status:e.status},children:(0,H.jsx)(S.Z,{gutter:12,children:(0,H.jsx)(V.Z,{span:24,children:(0,H.jsx)(I.Z.Item,{label:d("status"),name:"status",rules:[{validator:function(n,e){return"paid"===e||"canceled"===e?Promise.resolve():Promise.reject(new Error(d("required")))}}],children:(0,H.jsx)(A.Z,{children:$.map((function(n,e){return(0,H.jsx)(A.Z.Option,{value:n,children:d(n)},e)}))})})})})})})}function U(){var n=(0,j.$)().t,e=(0,p.I0)(),t=(0,C.s0)(),I=(0,p.v9)((function(n){return n.menu}),p.wU).activeMenu,z=(0,p.v9)((function(n){return n.shopAds}),p.wU),S=z.shopAdsList,V=z.loading,A=z.meta,F=(0,l.useContext)(m._).setIsModalVisible,E=(0,l.useState)(null),$=(0,o.Z)(E,2),U=$[0],Y=$[1],q=(0,l.useState)(null),B=(0,o.Z)(q,2),N=B[0],T=B[1],L=(0,l.useState)(null),G=(0,o.Z)(L,2),J=G[0],Q=G[1],W=(0,l.useState)(!1),X=(0,o.Z)(W,2),nn=X[0],en=X[1],tn=(0,l.useState)(null),an=(0,o.Z)(tn,2),rn=an[0],on=an[1],ln=(0,l.useState)([]),sn=(0,o.Z)(ln,2),dn=sn[0],un=sn[1],cn=(0,l.useState)(!1),vn=(0,o.Z)(cn,2),hn=vn[0],fn=vn[1],Zn=(0,l.useState)(null),pn=(0,o.Z)(Zn,2),xn=pn[0],mn=pn[1],jn=(0,l.useState)(null),gn=(0,o.Z)(jn,2),yn=gn[0],wn=gn[1],_n=I.data,bn={search:null===_n||void 0===_n?void 0:_n.serach,perPage:null===_n||void 0===_n?void 0:_n.perPage,page:null===_n||void 0===_n?void 0:_n.page,sort:null===_n||void 0===_n?void 0:_n.sort};(0,l.useEffect)((function(){I.refetch&&(e((0,x.R)(bn)),e((0,w.A_)(I)))}),[I.refetch]),(0,_.Z)((function(){e((0,x.R)(bn))}),[I.data]);var Cn=function(){e((0,w.bL)({id:"transactions",url:"transactions",name:n("transactions")})),t("/transactions")},kn={selectedRowKeys:U,onChange:function(n){Y(n)}},In=(0,l.useState)([{title:n("id"),dataIndex:"id",is_show:!0,sorter:function(n,e){return n.id-e.id}},{title:n("shop"),dataIndex:"title",is_show:!0,render:function(n,e){var t,i;return(0,H.jsx)("span",{children:null===e||void 0===e||null===(t=e.shop)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title})}},{title:n("expire.at"),dataIndex:"expire_at",is_show:!0,render:function(e,t){return(0,H.jsx)(H.Fragment,{children:null!==t&&void 0!==t&&t.expired_at?O()(null===t||void 0===t?void 0:t.expired_at).format("YYYY-MM-DD hh:mm"):(0,H.jsx)("span",{children:n("not.expired")})})}},{title:n("status"),is_show:!0,dataIndex:"status",key:"status",render:function(e,t){return(0,H.jsxs)("div",{children:["new"===e?(0,H.jsx)(d.Z,{color:"blue",children:n(e)}):"canceled"===e?(0,H.jsx)(d.Z,{color:"error",children:n(e)}):(0,H.jsx)(d.Z,{color:"cyan",children:n(e)}),(0,H.jsx)(f.Z,{onClick:function(){return on(t)}})]})}},{title:n("transaction"),dataIndex:"transaction",is_show:!0,render:function(e,t){var i;return(0,H.jsx)(H.Fragment,{children:e?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(c.Z,{onClick:Cn,color:"cyan",children:null===t||void 0===t||null===(i=t.transaction)||void 0===i?void 0:i.status}),"\xa0 \xa0 \xa0",(0,H.jsx)(f.Z,{onClick:function(){return wn(null===t||void 0===t?void 0:t.transaction)}})]}):(0,H.jsx)(c.Z,{color:"error",children:n("not.paid")})})}},{title:n("options"),dataIndex:"options",is_show:!0,render:function(n,e){return(0,H.jsx)(v.Z,{children:(0,H.jsx)(b.Z,{icon:(0,H.jsx)(Z.Z,{}),onClick:function(){F(!0),Y([e.id]),T(!0),Q(!1)}})})}}]),zn=(0,o.Z)(In,2),Sn=zn[0],Vn=zn[1];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(h.Z,{className:"p-0",children:(0,H.jsxs)(v.Z,{wrap:!0,size:[14,20],children:[(0,H.jsx)(b.Z,{size:"",onClick:function(){null===U||0===U.length?g.Am.warning(n("select.the.product")):(F(!0),T(!1))},children:n("delete.selected")}),(0,H.jsx)(y.Z,{columns:Sn,setColumns:Vn})]})}),(0,H.jsx)(h.Z,{children:(0,H.jsx)(u.Z,{onExpand:function(n,e){return function(n){var e=n.expanded,t=n.record;un([]),e?(fn(!0),mn(null===t||void 0===t?void 0:t.id),R.Z.getById(null===t||void 0===t?void 0:t.id).then((function(n){var e;un(null===(e=n.data)||void 0===e?void 0:e.shop_ads_products)})).finally((function(){return fn(!1)}))):mn(null)}({expanded:n,record:e})},expandable:{expandedRowRender:function(){var e=[{title:n("id"),dataIndex:"id",is_show:!0,sorter:function(n,e){return n.id-e.id}},{title:n("image"),dataIndex:"img",is_show:!0,render:function(n,e){var t;return(0,H.jsx)(s.Z,{width:100,height:100,src:P.bV+(null===(t=e.product)||void 0===t?void 0:t.img),placeholder:!0,style:{borderRadius:4,objectFit:"cover"}})}},{title:n("name"),dataIndex:"name",is_show:!0,render:function(n,e){var t,i;return null===(t=e.product)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title}},{title:n("active"),dataIndex:"active",is_show:!0,render:function(e,t){var i;return null!==(i=t.product)&&void 0!==i&&i.active?n("active"):n("inactive")}},{title:n("status"),is_show:!0,dataIndex:"status",key:"status",render:function(e,t){var i,a,r,o,l;return(0,H.jsx)("div",{children:"pending"===(null===(i=t.product)||void 0===i?void 0:i.status)?(0,H.jsx)(d.Z,{color:"blue",children:n(null===(a=t.product)||void 0===a?void 0:a.status)}):"unpublished"===(null===(r=t.product)||void 0===r?void 0:r.status)?(0,H.jsx)(d.Z,{color:"error",children:n(null===(o=t.product)||void 0===o?void 0:o.status)}):(0,H.jsx)(d.Z,{color:"cyan",children:n(null===(l=t.product)||void 0===l?void 0:l.status)})})}}];return(0,H.jsx)(u.Z,{columns:e,dataSource:dn,pagination:!1,loading:hn})},defaultExpandedRowKeys:["0"],expandedRowKeys:[xn]},scroll:{x:!0},dataSource:S,columns:null===Sn||void 0===Sn?void 0:Sn.filter((function(n){return null===n||void 0===n?void 0:n.is_show})),rowSelection:kn,rowKey:function(n){return n.id},loading:nn||V,pagination:{pageSize:A.per_page,page:A.current_page,total:A.total},onChange:function(n,t,i){var a=n.pageSize,o=n.current,l=i.field,s=i.order,d=(0,M.Z)(s);e((0,w.nc)({activeMenu:I,data:(0,r.Z)((0,r.Z)({},I.data),{},{perPage:a,page:o,column:l,sort:d})}))}})}),rn&&(0,H.jsx)(D,{data:rn,handleCancel:function(){return on(null)},paramsData:bn}),(0,H.jsx)(k.Z,{click:J?function(){en(!0),R.Z.setActive(U).then((function(){F(!1),e((0,x.R)(bn)),g.Am.success(n("successfully.updated")),Q(!1)})).finally((function(){return en(!1)}))}:function(){en(!0);var t=(0,r.Z)({},Object.assign.apply(Object,[{}].concat((0,a.Z)(U.map((function(n,e){return(0,i.Z)({},"ids[".concat(e,"]"),n)}))))));R.Z.delete(t).then((function(){F(!1),g.Am.success(n("successfully.deleted")),e((0,x.R)(bn)),T(null),Q(!1)})).finally((function(){en(!1),Y(null)}))},text:n(J?"set.active.advert":N?"delete":"all.delete"),setText:Y,setActive:Q}),yn&&(0,H.jsx)(K,{data:yn,handleCancel:function(){return wn(!1)},paramsData:bn})]})}},99587:function(n,e,t){t.d(e,{Z:function(){return s}});var i=t(1413),a=t(47313),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},o=t(17469),l=function(n,e){return a.createElement(o.Z,(0,i.Z)((0,i.Z)({},n),{},{ref:e,icon:r}))};l.displayName="TableOutlined";var s=a.forwardRef(l)}}]);