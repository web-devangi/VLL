(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7401],{33834:function(t,n,e){"use strict";e.d(n,{K:function(){return l}});var r=e(4942),i=e(1413),a=e(97890),o=e(74776),u=e.n(o),l=function(){var t=(0,a.s0)(),n=(0,a.TH)(),e=u().parse(n.search,{ignoreQueryPrefix:!0});return{values:e,set:function(n,a){return t({search:u().stringify((0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n,a)))})},reset:function(n){var r=(0,i.Z)({},e);r[n]&&delete r[n],t({search:u().stringify((0,i.Z)({},r))})},clear:function(){return t({search:u().stringify({})})},merge:function(n){return t({search:u().stringify((0,i.Z)((0,i.Z)({},e),n))})}}}},17899:function(t,n,e){"use strict";var r=e(34344),i={create:function(t){return r.Z.post("dashboard/admin/digital-files",t,{})}};n.Z=i},86140:function(t,n,e){"use strict";e.r(n);var r=e(93433),i=e(4942),a=e(1413),o=e(29439),u=e(47313),l=e(96077),c=e(83999),s=e(77181),d=e(72652),v=e(35321),f=e(78873),p=e(8597),m=e(47668),Z=e(97307),x=e(73431),h=e(97890),g=e(17101),j=e(2717),y=e(90954),S=e(24511),k=e(33834),b=e(87882),N=e(34144),w=e(46417),C=c.Z.Step;n.default=function(){var t,n,e,M,F,z=(0,S.$)().t,A=(0,h.UO)().uuid,E=(0,k.K)(),U=(0,j.v9)((function(t){return t.menu}),j.wU).activeMenu,_=(0,j.v9)((function(t){return t.formLang}),j.wU).languages,L=(0,j.I0)(),I=Number((null===(t=E.values)||void 0===t?void 0:t.step)||0),O=(0,u.useState)(U.refetch),T=(0,o.Z)(O,2),B=T[0],G=T[1],K=(0,u.useState)(l.S),P=(0,o.Z)(K,2),$=P[0],q=P[1],D=((null===U||void 0===U?void 0:U.data)||{}).extras,H=null===U||void 0===U||null===(n=U.data)||void 0===n?void 0:n.digital,Q=null===D||void 0===D?void 0:D.some((function(t){var n;return"color"===(null===t||void 0===t||null===(n=t.group)||void 0===n?void 0:n.type)})),R=(0,u.useMemo)((function(){return null===D||void 0===D?void 0:D.find((function(t){var n;return"color"===(null===t||void 0===t||null===(n=t.group)||void 0===n?void 0:n.type)}))}),[D]),J=Array.from(new Set(null===R||void 0===R||null===(e=R.values)||void 0===e?void 0:e.map((function(t){return t.value})))).map((function(t){var n;return null===R||void 0===R||null===(n=R.values)||void 0===n?void 0:n.find((function(n){return n.value===t}))})).filter((function(t){return"color"===t.group_type})),V=function(){var t=I+1;E.set("step",t)},W=function(){var t=I-1;E.set("step",t)},X=function(t){return t?{label:t.translation?t.translation.title:t.title,value:t.id}:null};function Y(t){G(!0),g.Z.getById(t).then((function(t){var n,e=(0,a.Z)((0,a.Z)((0,a.Z)({},t.data),function(t){if(null===t||void 0===t||!t.translations)return{};var n=t.translations,e=_.map((function(t){var e,r,a;return a={},(0,i.Z)(a,"title[".concat(t.locale,"]"),null===(e=n.find((function(n){return n.locale===t.locale})))||void 0===e?void 0:e.title),(0,i.Z)(a,"description[".concat(t.locale,"]"),null===(r=n.find((function(n){return n.locale===t.locale})))||void 0===r?void 0:r.description),a}));return Object.assign.apply(Object,[{}].concat((0,r.Z)(e)))}(t.data)),{},{shop:X(t.data.shop),category:X(t.data.category),brand:X(t.data.brand),unit:X(t.data.unit),images:(n=t.data.galleries,n.map((function(t){return{uid:t.id,name:t.path,url:t.path}}))),properties:t.data.properties.map((function(t,n){var e;return e={id:n},(0,i.Z)(e,"key[".concat(t.locale,"]"),t.key),(0,i.Z)(e,"value[".concat(t.locale,"]"),t.value),e})),translation:void 0,translations:void 0});L((0,y.nc)({activeMenu:U,data:e}))})).finally((function(){G(!1),L((0,y.A_)(U))}))}(0,u.useEffect)((function(){U.refetch&&Y(A)}),[U.refetch]);return(0,u.useEffect)((function(){H?q(l.S.filter((function(t){return"product.extras"!==t.title}))):!1===H&&q(l.S.filter((function(t){return"product.digital"!==t.title}))),q(Q?function(t){return t}:function(t){return t.filter((function(t){return"Gallery"!==t.title}))})}),[Q,H]),(0,w.jsxs)(s.Z,{title:z("clone.product"),extra:(0,w.jsx)(x.Z,{}),children:[(0,w.jsx)(c.Z,{current:I,onChange:function(t){L((0,y.nc)({activeMenu:U,data:(0,a.Z)((0,a.Z)({},U.data),{},{step:t})})),E.set("step",t)},children:l.S.map((function(t){return(0,w.jsx)(C,{title:z(t.title)},t.title)}))}),B?(0,w.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,w.jsx)(d.Z,{size:"large",className:"py-5"})}):(0,w.jsxs)("div",{className:"steps-content",children:["First-content"===l.S[I].content&&(0,w.jsx)(Z.Z,{next:V}),(null===(M=U.data)||void 0===M?void 0:M.digital)&&"Product-digital"===$[I].content&&(0,w.jsx)(b.Z,{next:V,prev:W}),!(null!==(F=U.data)&&void 0!==F&&F.digital)&&"Second-content"===$[I].content&&(0,w.jsx)(m.Z,{next:V,prev:W}),"Third-content"===l.S[I].content&&(0,w.jsx)(p.Z,{next:V,prev:W}),(null===J||void 0===J?void 0:J.length)>0&&"Gallery-content"===l.S[I].content&&(0,w.jsx)(N.Z,{next:V,prev:W}),"Fourth-content"===l.S[I].content&&(0,w.jsx)(v.Z,{next:V,prev:W}),"Finish-content"===l.S[I].content&&(0,w.jsx)(f.Z,{prev:W})]})]})}},87882:function(t,n,e){"use strict";e.d(n,{Z:function(){return f}});e(47313);var r=e(77181),i=e(45705),a=e(59491),o=e(24511),u=e(91107),l=e(66736),c=e(23560),s=e(17899),d=e(2717),v=e(46417);function f(t){var n=t.prev,e=t.next,f=(0,o.$)().t,p=(0,d.v9)((function(t){return t.menu}),d.wU).activeMenu;return(0,v.jsxs)(r.Z,{bordered:!1,className:"mb-0",children:[(0,v.jsxs)(u.Z,{name:"file",multiple:!1,maxCount:1,customRequest:function(t){var n,e=t.file,r=t.onSuccess,i=t.onError,a=new FormData;a.append("file",e),a.append("active",1),a.append("product_id",null===(n=p.data)||void 0===n?void 0:n.id),s.Z.create(a).then((function(){c.Am.success(f("successfully.import")),r("ok")})).catch((function(t){console.log("upload error",t),i("error"),c.Am.error(f("file.upload.error"))}))},accept:".zip",children:[(0,v.jsx)("p",{className:"ant-upload-drag-icon",children:(0,v.jsx)(l.Z,{})}),(0,v.jsx)("p",{className:"ant-upload-text",children:f("upload-drag")}),(0,v.jsx)("p",{className:"ant-upload-hint",children:f("upload-text")})]}),(0,v.jsxs)(i.Z,{className:"mt-3",children:[(0,v.jsx)(a.Z,{onClick:n,children:f("prev")}),(0,v.jsx)(a.Z,{type:"primary",onClick:e,children:f("next")})]})]})}},34144:function(t,n,e){"use strict";var r=e(1413),i=e(29439),a=e(47313),o=e(69888),u=e(23885),l=e(77181),c=e(37388),s=e(45705),d=e(68197),v=e(59624),f=e(41068),p=e(46155),m=e(59491),Z=e(34273),x=e(2717),h=e(31247),g=e(17101),j=e(46417);n.Z=function(t){var n,e=t.prev,y=t.next,S=(0,a.useState)([]),k=(0,i.Z)(S,2),b=k[0],N=k[1],w=(0,x.v9)((function(t){return t.menu}),x.wU).activeMenu,C=((null===w||void 0===w?void 0:w.data)||{}).newExtras,M=(0,a.useMemo)((function(){return null===C||void 0===C?void 0:C.find((function(t){var n;return"color"===(null===t||void 0===t||null===(n=t.group)||void 0===n?void 0:n.type)}))}),[C]),F=Array.from(new Set(null===M||void 0===M||null===(n=M.values)||void 0===n?void 0:n.map((function(t){return t.value})))).map((function(t){var n;return null===M||void 0===M||null===(n=M.values)||void 0===n?void 0:n.find((function(n){return n.value===t}))})).filter((function(t){return"color"===t.group_type})),z=function(t){return{uid:t.path,name:t.path,status:"done",url:t.path,created:!0}};return(0,a.useEffect)((function(){!function(){var t=w.data.stocks.map((function(t){var n=t.id,e=t.galleries;return{id:n,images:(null===e||void 0===e?void 0:e.map(z))||[]}}));N(t)}()}),[w.data]),(0,j.jsxs)(l.Z,{title:(0,j.jsx)(c.Z,{placement:"topLeft",title:"In the process of internal desktop applications development",children:(0,j.jsxs)(s.Z,{children:[(0,u.t)("add.media.file"),(0,j.jsx)(o.Z,{style:{fontSize:16,cursor:"pointer"}})]})}),children:[(0,j.jsx)(d.Z,{gutter:[24,24],children:null===F||void 0===F?void 0:F.map((function(t){var n=t.label,e=t.stock_id,r=t.value;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(v.Z,{span:24,children:[(0,j.jsx)(s.Z,{className:"mb-4",children:(0,j.jsx)(f.Z,{color:n||r,className:"extras-color-badge",text:"".concat(n||r," - ").concat((0,Z.B)(n||r))})}),(0,j.jsx)(h.Z,{id:e,fileList:b,setFileList:N,type:"stocks"})]}),(0,j.jsx)(p.Z,{})]})}))}),(0,j.jsxs)(s.Z,{className:"mt-4",children:[(0,j.jsx)(m.Z,{onClick:e,children:(0,u.t)("prev")}),(0,j.jsx)(m.Z,{type:"primary",htmlType:"submit",onClick:function(){if(b.length){var t=b.map((function(t){return(0,r.Z)((0,r.Z)({},t),{},{images:t.images.map((function(t){return t.name}))})}));g.Z.updateStocks({data:t}).then((function(){y()})).catch((function(t){console.log(t)}))}else y()},children:(0,u.t)("next")})]})]})}},24654:function(){}}]);