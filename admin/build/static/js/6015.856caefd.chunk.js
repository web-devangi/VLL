"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6015],{4014:(e,l,i)=>{function d(e){var l,i;let d=null===e||void 0===e?void 0:e.slice(0,1),n=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,n-1);s=null===(l=s)||void 0===l?void 0:l.replace(/./g,"*");let t=null===e||void 0===e?void 0:e.slice(n-1,e.length);return null===d||void 0===d||null===(i=d.concat(s))||void 0===i?void 0:i.concat(t)}i.d(l,{Z:()=>d})},84261:(e,l,i)=>{function d(e){const l="".concat(e),i="*".repeat(l.length-2);return(null===l||void 0===l?void 0:l[0])+i+(null===l||void 0===l?void 0:l[(null===l||void 0===l?void 0:l.length)-1])}i.d(l,{Z:()=>d})},73431:(e,l,i)=>{i.d(l,{Z:()=>r});var d=i(47313),n=i(39180),s=i(2717),t=i(28830),o=i(60535),a=i(46417);const r=()=>{const e=(0,s.I0)(),{languages:l,defaultLang:i}=(0,s.v9)((e=>e.formLang),s.wU);(0,d.useEffect)((()=>{o.Z.getAllActive().then((l=>{let{data:i}=l;e((0,t.dc)(i)),e((0,t.mh)(i.find((e=>1===e.default)).locale))}))}),[]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.ZP.Group,{value:i,onChange:l=>{let{target:{value:i}}=l;e((0,t.mh)(i))},className:"float-right",buttonStyle:"solid",children:null===l||void 0===l?void 0:l.map((e=>(0,a.jsx)(n.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},31025:(e,l,i)=>{i.d(l,{Z:()=>h});var d=i(47313),n=i(24511),s=i(51095),t=i(23560),o=i(59491),a=i(66204),r=i(31881),c=i.n(r),v=i(97421),u=i(51282),x=i(46417);const m="https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=".concat(v.$h);function h(e){let{orderId:l,showLink:i=!0,size:r=2}=e;const{t:h}=(0,n.$)(),[j,p]=(0,d.useState)(""),[y,Z]=(0,d.useState)(!1),[g,f]=(0,d.useState)(null);return(0,d.useEffect)((()=>{(async()=>{Z(!0);const e={dynamicLinkInfo:{domainUriPrefix:v.AC,link:"".concat(v.o6,"/orders/").concat(l),androidInfo:{androidPackageName:v.aG},iosInfo:{iosBundleId:v.Ir}}};try{const{data:l}=await c().post(m,e);f(null),p(null===l||void 0===l?void 0:l.shortLink)}catch(g){f(g),t.Am.error(g.message)}finally{Z(!1)}})()}),[l]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("h3",{children:[h("qr_code"),":"]}),(0,x.jsx)("div",{children:y||g?g?(0,x.jsx)(a.Z,{color:"red",children:h("smth.went.wrong")}):(0,x.jsx)(u.Z,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{width:"".concat(100*r,"px"),height:"".concat(100*r,"px"),borderRadius:"10px",overflow:g?"none":"hidden"},children:(0,x.jsx)(s.Qd,{size:500,id:"qrCode",includeMargin:!0,value:j,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,x.jsx)("br",{}),i&&(0,x.jsx)(o.Z,{type:"primary",href:j,target:"_blank",rel:"noreferrer",style:{width:"".concat(100*r,"px")},children:h("link.to.order")})]})})]})}},89281:(e,l,i)=>{i.d(l,{h:()=>r});var d=i(47313),n=i(12279),s=i.n(n),t=i(74294),o=i(72652),a=i(46417);const r=e=>{let{fetchOptions:l,debounceTimeout:i=400,onClear:n,refetchOptions:r=!1,...c}=e;const[v,u]=(0,d.useState)(!1),[x,m]=(0,d.useState)([]),h=(0,d.useMemo)((()=>s()((e=>{m([]),u(!0),l(e).then((e=>{m(e),u(!1)}))}),i)),[l,i]);return(0,a.jsx)(t.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),n&&n()},notFoundContent:v?(0,a.jsx)(o.Z,{size:"small"}):"no results",...c,options:x,onFocus:()=>{x.length&&!r||h("")}})}},64922:(e,l,i)=>{i.d(l,{t:()=>c});var d=i(10976),n=i(68197),s=i(59624),t=i(66672),o=i(59491),a=i(24511),r=i(46417);const c=e=>{let{onSubmit:l,initialData:i,isSubmitting:c}=e;const{t:v}=(0,a.$)();return(0,r.jsx)(d.Z,{layout:"vertical",initialValues:i,onFinish:l,children:(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(s.Z,{span:24,children:(0,r.jsx)(d.Z.Item,{label:v("tracking.name"),name:"track_name",rules:[{required:!0,message:v("required")}],children:(0,r.jsx)(t.Z,{})})}),(0,r.jsx)(s.Z,{span:24,children:(0,r.jsx)(d.Z.Item,{label:v("tracking.id"),name:"track_id",rules:[{required:!0,message:v("required")}],children:(0,r.jsx)(t.Z,{})})}),(0,r.jsx)(s.Z,{span:24,children:(0,r.jsx)(d.Z.Item,{label:v("tracking.url"),name:"track_url",rules:[{type:"url",message:v("should.be.url")}],children:(0,r.jsx)(t.Z,{})})}),(0,r.jsx)(s.Z,{span:7,children:(0,r.jsx)(o.Z,{type:"primary",loading:c,htmlType:"submit",children:v("submit")})})]})})}},17649:(e,l,i)=>{i.d(l,{Z:()=>d});i(97421);function d(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},84017:(e,l,i)=>{function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const d=Number(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===i?"".concat(d," ").concat(l):"".concat(l," ").concat(d)}i.d(l,{Z:()=>d})},56015:(e,l,i)=>{i.r(l),i.d(l,{default:()=>le});var d=i(47313),n=i(45705),s=i(66204),t=i(26824),o=i(78508),a=i(59491),r=i(77181),c=i(68197),v=i(59624),u=i(56140),x=i(14133),m=i(83999),h=i(72652),j=i(45334),p=i(41068),y=i(46155),Z=i(83685),g=i(12019),f=i(89720),b=i(29466),_=i(97890),k=i(62412),N=i(45464),w=i(2717),I=i(90954),S=i(27107),C=i(88852),Y=i(94291),z=i(24511),F=i(84017),D=i(40197),q=i(72944),M=i(58821),B=i(22539),H=i(97421),L=i(5958),U=i(32916),T=i(70816),A=i.n(T),E=i(79492),O=i(4014),P=i(31025),R=i(64922),V=i(23560),$=i(84261),G=i(10976),Q=i(9274),K=i(74294),J=i(93161),W=i(46417);const X=["paid","canceled"];function ee(e){let{transactionDetails:l,handleCancel:i,fetchOrder:n,orderId:s}=e;const[t]=G.Z.useForm(),{t:o}=(0,z.$)(),[r,u]=(0,d.useState)(!1);return(0,W.jsx)(Q.Z,{visible:!!l,title:o("transaction.status"),closable:!1,footer:[(0,W.jsx)(a.Z,{type:"primary",onClick:()=>t.submit(),loading:r,children:o("save")},"save-form"),(0,W.jsx)(a.Z,{type:"default",onClick:i,children:o("cancel")},"cansel-modal")],children:(0,W.jsx)(G.Z,{form:t,layout:"vertical",onFinish:e=>{u(!0),J.Z.updateStatus(s,e).then((()=>{i(),n()})).catch((e=>V.Am.error(e.message))).finally((()=>u(!1)))},initialValues:{status:l.status},children:(0,W.jsx)(c.Z,{gutter:12,children:(0,W.jsx)(v.Z,{span:24,children:(0,W.jsx)(G.Z.Item,{label:o("status"),name:"status",rules:[{validator:(e,l)=>"paid"===l||"canceled"===l?Promise.resolve():Promise.reject(new Error(o("required")))}],children:(0,W.jsx)(K.Z,{children:X.map(((e,l)=>(0,W.jsx)(K.Z.Option,{value:e,children:o(e)},l)))})})})})})})}function le(){var e,l,i,T,G,Q,K,J,X,le,ie,de,ne,se,te,oe,ae,re,ce,ve,ue,xe,me,he,je,pe,ye,Ze,ge,fe,be,_e,ke,Ne,we,Ie,Se,Ce,Ye,ze,Fe;const{activeMenu:De}=(0,w.v9)((e=>e.menu),w.wU),{defaultCurrency:qe}=(0,w.v9)((e=>e.currency),w.wU),{statusList:Me}=(0,w.v9)((e=>e.orderStatus),w.wU),Be=(0,_.s0)(),He=null===De||void 0===De||null===(e=De.data)||void 0===e?void 0:e.data,{t:Le}=(0,z.$)(),{id:Ue}=(0,_.UO)(),Te=(0,w.I0)(),Ae=(0,d.useRef)(),Ee=(0,d.useRef)(),{isDemo:Oe}=(0,E.Z)(),[Pe,Re]=(0,d.useState)(!1),[Ve,$e]=(0,d.useState)(null),[Ge,Qe]=(0,d.useState)(null),[Ke,Je]=(0,d.useState)(null),{myShop:We}=(0,w.v9)((e=>e.myShop),w.wU),{defaultLang:Xe}=(0,w.v9)((e=>e.formLang),w.wU),[el,ll]=(0,d.useState)(!1),[il,dl]=(0,d.useState)(!1),nl=[{title:Le("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===(i=l.stock)||void 0===i?void 0:i.id}},{title:Le("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,d,t,o,a;return(0,W.jsxs)(n.Z,{direction:"vertical",className:"relative",children:[null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d||null===(t=d.translation)||void 0===t?void 0:t.title,null===(o=l.stock)||void 0===o||null===(a=o.extras)||void 0===a?void 0:a.map((e=>{var l,i,d;return(0,W.jsxs)(s.Z,{children:[null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Le("image"),dataIndex:"img",key:"img",render:(e,l)=>{var i,d;return(0,W.jsx)(t.Z,{src:(0,N.Z)(null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Le("price"),dataIndex:"origin_price",key:"origin_price",render:(e,l)=>{var i;return null!==l&&void 0!==l&&l.bonus?(0,W.jsx)(s.Z,{color:"green",children:Le("bonus")}):(0,F.Z)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.price,null===qe||void 0===qe?void 0:qe.symbol)}},{title:Le("quantity"),dataIndex:"quantity",key:"quantity",render:(e,l)=>{var i,d;return(0,W.jsx)("span",{children:e*((null===l||void 0===l||null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.interval)||1)})}},{title:Le("discount"),dataIndex:"rate_discount",key:"rate_discount",render:(e,l)=>{var i;return(0,F.Z)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.discount,null===qe||void 0===qe?void 0:qe.symbol)}},{title:Le("tax"),dataIndex:"tax",key:"tax",render:(e,l)=>(0,F.Z)(null===l||void 0===l?void 0:l.tax,null===qe||void 0===qe?void 0:qe.symbol)},{title:Le("total.price"),dataIndex:"total_price",key:"total_price",render:(e,l)=>(0,F.Z)(null===l||void 0===l?void 0:l.total_price,null===qe||void 0===qe?void 0:qe.symbol)},{title:Le("actions"),dataIndex:"actions",key:"actions",render:(e,l)=>(0,W.jsx)(n.Z,{children:(0,W.jsx)(a.Z,{type:"primary",icon:(0,W.jsx)(Z.Z,{}),onClick:()=>rl(l),disabled:"new"!==(null===He||void 0===He?void 0:He.status)&&"accepted"!==(null===He||void 0===He?void 0:He.status)||(null===l||void 0===l?void 0:l.bonus)})})}],sl=[{title:Le("date"),dataIndex:"date",key:"date",render:e=>A()(e).format("YYYY-MM-DD HH:mm")},{title:Le("document"),dataIndex:"document",key:"document"},{title:Le("number"),dataIndex:"number",key:"number"},{title:Le("total.price"),dataIndex:"price",key:"price"}],tl=[{price:(0,F.Z)(null===He||void 0===He?void 0:He.total_price,qe.symbol),number:(0,W.jsxs)(b.rU,{to:"/orders/generate-invoice/".concat(null===He||void 0===He?void 0:He.id),children:["#",null===He||void 0===He?void 0:He.id]}),document:Le("invoice"),date:A()(null===He||void 0===He?void 0:He.created_at).format("YYYY-MM-DD HH:mm")},{price:"-",number:(0,W.jsxs)(b.rU,{to:"/orders/generate-invoice/".concat(null===He||void 0===He?void 0:He.id),children:["#",null===He||void 0===He?void 0:He.id]}),document:Le("delivery.receipt"),date:A()(null===He||void 0===He?void 0:He.created_at).format("YYYY-MM-DD HH:mm")}],ol=()=>{$e(null),Qe(null),Je(null)};function al(){Re(!0),k.Z.getById(Ue).then((e=>{let{data:l}=e;const i=l.currency,d=l.user,n=l.id,s=l.price,t=l.created_at,o=l.details.map((e=>{var l,i;return{...e,title:null===(l=e.shop)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title}}));Te((0,I.nc)({activeMenu:De,data:{details:o,currency:i,user:d,id:n,createdAt:t,price:s,data:l}}))})).finally((()=>{Re(!1),Te((0,I.A_)(De))}))}const rl=e=>{var l,i;Te((0,I.bL)({url:"seller/order/details/".concat(null===He||void 0===He?void 0:He.id,"/replace/").concat(null===e||void 0===e||null===(l=e.stock)||void 0===l?void 0:l.id),id:"seller_replace_product",name:Le("replace.product")})),Be("replace/".concat(null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.id),{state:{data:He}})},cl=(0,d.useCallback)((e=>{ll(!0),k.Z.updateTracking(null===He||void 0===He?void 0:He.id,e).then((()=>{V.Am.success(Le("successfully.updated")),al()})).finally((()=>{ll(!1)}))}),[null===He||void 0===He?void 0:He.id]);(0,d.useEffect)((()=>{const e={shop_id:We.id};De.refetch&&(al(),(0,w.dC)((()=>{Te((0,D.ZL)({})),Te((0,Y.EH)(e))})))}),[De.refetch]);return(0,W.jsxs)("div",{className:"order_details",children:[(0,W.jsx)(r.Z,{className:"order-details-info",title:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(U.Qyq,{className:"mr-2 icon"}),"".concat(Le("order")," ").concat(null!==He&&void 0!==He&&He.id?"#".concat(null===He||void 0===He?void 0:He.id," "):"")," ",Le("from.order")," ",null===He||void 0===He||null===(l=He.user)||void 0===l?void 0:l.firstname," ",(null===He||void 0===He||null===(i=He.user)||void 0===i?void 0:i.lastname)||""]}),extra:"delivered"!==(null===He||void 0===He?void 0:He.status)&&"canceled"!==(null===He||void 0===He?void 0:He.status)&&2===(null===He||void 0===He?void 0:He.type)?(0,W.jsxs)(n.Z,{children:["delivered"!==(null===He||void 0===He?void 0:He.status)&&"canceled"!==(null===He||void 0===He?void 0:He.status)&&1!==(null===He||void 0===He?void 0:He.type)?(0,W.jsx)(a.Z,{type:"primary",onClick:()=>$e(null===He||void 0===He?void 0:He.id),children:Le("change.status")}):null,(0,W.jsx)(a.Z,{type:"primary",icon:(0,W.jsx)(g.Z,{}),onClick:()=>{Te((0,I.bL)({url:"seller/order/".concat(Ue),id:"order_edit",name:Le("edit.order")})),Be("/seller/order/".concat(Ue))},children:Le("edit")})]}):""}),(0,W.jsxs)(c.Z,{gutter:24,children:[(0,W.jsx)(v.Z,{span:24,children:(0,W.jsx)(r.Z,{children:(0,W.jsxs)(n.Z,{className:"justify-content-between w-100",children:[(0,W.jsxs)(n.Z,{className:"align-items-start",children:[(0,W.jsx)(f.Z,{className:"order-card-icon"}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)(u.Z.Text,{children:Le("delivery.date")}),Pe?(0,W.jsx)(x.Z.Button,{size:16}):(0,W.jsxs)(u.Z.Text,{className:"order-card-title",children:[null===He||void 0===He?void 0:He.delivery_date," ",null===He||void 0===He?void 0:He.delivery_time]})]})]}),(0,W.jsxs)(n.Z,{className:"align-items-start",onClick:()=>Ae.current.scrollIntoView({behavior:"smooth"}),children:[(0,W.jsx)(L.iFN,{className:"order-card-icon"}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)(u.Z.Text,{children:Le("total.price")}),Pe?(0,W.jsx)(x.Z.Button,{size:16,loading:Pe}):(0,W.jsx)(u.Z.Text,{className:"order-card-title",children:(0,F.Z)(null===He||void 0===He?void 0:He.total_price,null===qe||void 0===qe?void 0:qe.symbol)})]})]}),(0,W.jsxs)(n.Z,{className:"align-items-start",children:[(0,W.jsx)(L.Dij,{className:"order-card-icon"}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)(u.Z.Text,{children:Le("messages")}),Pe?(0,W.jsx)(x.Z.Button,{size:16}):(0,W.jsx)(u.Z.Text,{className:"order-card-title",children:null!==He&&void 0!==He&&He.review?1:0})]})]}),(0,W.jsxs)(n.Z,{className:"align-items-start",onClick:()=>Ee.current.scrollIntoView({behavior:"smooth"}),children:[(0,W.jsx)(U.Qyq,{className:"order-card-icon"}),(0,W.jsxs)("div",{className:"d-flex flex-column",children:[(0,W.jsx)(u.Z.Text,{children:Le("products")}),Pe?(0,W.jsx)(x.Z.Button,{size:16}):(0,W.jsx)(u.Z.Text,{className:"order-card-title",children:null===He||void 0===He||null===(T=He.details)||void 0===T?void 0:T.reduce(((e,l)=>e+l.quantity),0)})]})]})]})})}),"canceled"!==(null===He||void 0===He?void 0:He.status)&&(0,W.jsx)(v.Z,{span:24,children:(0,W.jsx)(r.Z,{children:(0,W.jsx)(m.Z,{current:null===Me||void 0===Me?void 0:Me.findIndex((e=>e.name===(null===He||void 0===He?void 0:He.status))),children:null===Me||void 0===Me||null===(G=Me.slice(0,-1))||void 0===G?void 0:G.filter((e=>null===e||void 0===e?void 0:e.active)).map((e=>(0,W.jsx)(m.Z.Step,{title:Le(e.name)},e.id)))})})}),(0,W.jsxs)(v.Z,{span:16,children:[(0,W.jsx)(h.Z,{spinning:Pe,children:(0,W.jsxs)(r.Z,{style:{minHeight:"200px"},children:[(0,W.jsxs)("h3",{children:[Le("details"),":"]}),(0,W.jsxs)(c.Z,{hidden:Pe,className:"mb-3 order_detail",gutter:10,children:[(0,W.jsxs)(v.Z,{span:12,children:[(0,W.jsxs)("div",{children:[Le("created.date.&.time"),":",(0,W.jsxs)("span",{className:"ml-2",children:[(0,W.jsx)(M.yoA,{className:"mr-1"})," ",A()(null===He||void 0===He?void 0:He.created_at).format("YYYY-MM-DD HH:mm")," "]})]}),(0,W.jsx)("br",{}),"dine_in"===(null===He||void 0===He?void 0:He.delivery_type)&&(0,W.jsxs)("div",{children:[Le("table"),":",(0,W.jsx)("span",{className:"ml-2",children:null===He||void 0===He||null===(Q=He.table)||void 0===Q?void 0:Q.name})]}),"dine_in"!==(null===He||void 0===He?void 0:He.delivery_type)&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{children:[Le("delivery.date.&.time"),":",(0,W.jsxs)("span",{className:"ml-2",children:[(0,W.jsx)(M.yoA,{className:"mr-1"})," ",null===He||void 0===He?void 0:He.delivery_date," ",null===He||void 0===He?void 0:He.delivery_time]})]}),(0,W.jsx)("br",{}),(0,W.jsxs)("div",{children:[Le("payment.status"),":",(0,W.jsxs)("span",{style:{cursor:"pointer"},className:"ml-2",onClick:()=>dl(!0),children:[Le(null===He||void 0===He||null===(K=He.transaction)||void 0===K?void 0:K.status)," ",(0,W.jsx)(g.Z,{})]})]})]})]}),(0,W.jsxs)(v.Z,{span:12,children:[(0,W.jsxs)("div",{children:[Le("status"),":",(0,W.jsx)("span",{className:"ml-2",children:"new"===(null===He||void 0===He?void 0:He.status)?(0,W.jsx)(s.Z,{color:"blue",children:Le(null===He||void 0===He?void 0:He.status)}):"canceled"===(null===He||void 0===He?void 0:He.status)?(0,W.jsx)(s.Z,{color:"error",children:Le(null===He||void 0===He?void 0:He.status)}):(0,W.jsx)(s.Z,{color:"cyan",children:Le(null===He||void 0===He?void 0:He.status)})})]}),(0,W.jsx)("br",{}),(0,W.jsxs)("div",{children:[Le("delivery.type"),":",(0,W.jsx)("span",{className:"ml-2",children:null===He||void 0===He?void 0:He.delivery_type})]}),"dine_in"!==(null===He||void 0===He?void 0:He.delivery_type)&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("br",{}),(0,W.jsxs)("div",{children:[Le("payment.type"),":",(0,W.jsx)("span",{className:"ml-2",children:Le(null===He||void 0===He||null===(J=He.transaction)||void 0===J||null===(X=J.payment_system)||void 0===X?void 0:X.tag)})]})]})]})]}),(0,W.jsxs)(c.Z,{hidden:Pe,className:"mb-3 order_detail",children:[(0,W.jsxs)(v.Z,{span:12,children:[(0,W.jsxs)("h3",{children:[Le("delivery.address"),":"]}),(0,W.jsx)("div",{children:null!==He&&void 0!==He&&He.address?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{children:[Le("street.house.number"),":"," ",null!==(le=null===He||void 0===He||null===(ie=He.address)||void 0===ie?void 0:ie.street_house_number)&&void 0!==le?le:Le("not.given")]}),(0,W.jsx)("br",{}),(0,W.jsxs)("div",{children:[Le("zipcode"),":"," ",null!==(de=null!==(ne=null===He||void 0===He||null===(se=He.address)||void 0===se?void 0:se.zipcode)&&void 0!==ne?ne:null===He||void 0===He||null===(te=He.address)||void 0===te?void 0:te.zip_code)&&void 0!==de?de:Le("not.given")]})]}):null!==He&&void 0!==He&&He.my_address?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{children:[Le("street.house.number"),":"," ",null!==(oe=null===He||void 0===He||null===(ae=He.my_address)||void 0===ae?void 0:ae.street_house_number)&&void 0!==oe?oe:Le("not.given")]}),(0,W.jsx)("br",{}),(0,W.jsxs)("div",{children:[Le("zipcode"),":"," ",null!==(re=null===He||void 0===He||null===(ce=He.my_address)||void 0===ce?void 0:ce.zipcode)&&void 0!==re?re:Le("not.given")]})]}):null!==He&&void 0!==He&&He.delivery_point?(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)("div",{children:[Le("address"),":"," ",null!==(ve=null===He||void 0===He||null===(ue=He.delivery_point)||void 0===ue||null===(xe=ue.address)||void 0===xe?void 0:xe[Xe])&&void 0!==ve?ve:Le("no.address")]})}):"digital"===(null===He||void 0===He?void 0:He.delivery_type)?(0,W.jsx)("div",{children:Le("digital.delivery")}):(0,W.jsx)("div",{children:Le("no.address")})}),(0,W.jsxs)(a.Z,{className:"map_show mt-3",onClick:()=>Je(Ue),children:[(0,W.jsx)(B.$0r,{style:{marginRight:"8px"}})," ",Le("show.locations")]})]}),(0,W.jsx)(v.Z,{span:12,children:(0,W.jsx)(P.Z,{orderId:Ue})})]})]})}),"dine_in"!==(null===He||void 0===He?void 0:He.delivery_type)&&(0,W.jsx)(r.Z,{title:Le("documents"),children:(0,W.jsx)(o.Z,{columns:sl,dataSource:tl,pagination:!1,loading:Pe})})]}),(0,W.jsx)(v.Z,{span:8,className:"order_info",children:"delivery"===(null===He||void 0===He?void 0:He.delivery_type)&&(0,W.jsxs)(W.Fragment,{children:["dine_in"!==(null===He||void 0===He?void 0:He.delivery_type)&&1===(null===He||void 0===He?void 0:He.type)&&(0,W.jsxs)(r.Z,{title:Le("deliveryman"),extra:"ready"===(null===He||void 0===He?void 0:He.status)&&"pickup"!==(null===He||void 0===He?void 0:He.delivery_type)&&(0,W.jsxs)(a.Z,{onClick:()=>Qe(He),children:[Le("change"),(0,W.jsx)(g.Z,{})]}),children:["new"===(null===He||void 0===He?void 0:He.status)||"accepted"===(null===He||void 0===He?void 0:He.status)?(0,W.jsx)("p",{children:Le("order_status_ready")}):"","new"===(null===He||void 0===He?void 0:He.status)||"accepted"===(null===He||void 0===He?void 0:He.status)||null!==He&&void 0!==He&&He.deliveryman?"":(0,W.jsx)("p",{children:Le("The supplier is not assigned or delivery type pickup")}),(null===He||void 0===He?void 0:He.deliveryman)&&(0,W.jsxs)(n.Z,{children:[(0,W.jsx)(j.C,{shape:"square",size:64,src:H.bV+(null===He||void 0===He||null===(me=He.deliveryman)||void 0===me?void 0:me.img)}),(0,W.jsxs)("div",{children:[(0,W.jsx)("h5",{children:(null===He||void 0===He||null===(he=He.deliveryman)||void 0===he?void 0:he.firstname)+" "+(null===He||void 0===He||null===(je=He.deliveryman)||void 0===je?void 0:je.lastname)}),(0,W.jsxs)("span",{className:"delivery-info",children:[(0,W.jsx)(M.lfG,{}),null===He||void 0===He||null===(pe=He.deliveryman)||void 0===pe?void 0:pe.phone]}),(0,W.jsxs)("div",{className:"delivery-info",children:[(0,W.jsx)("b",{children:(0,W.jsx)(B.ixJ,{size:16})}),(0,W.jsx)("span",{children:Oe?(0,O.Z)(null===He||void 0===He||null===(ye=He.deliveryman)||void 0===ye?void 0:ye.email):null===He||void 0===He||null===(Ze=He.deliveryman)||void 0===Ze?void 0:Ze.email})]})]})]})]}),2===(null===He||void 0===He?void 0:He.type)&&"delivery"===(null===He||void 0===He?void 0:He.delivery_type)&&(0,W.jsx)(r.Z,{title:Le("tracking.info"),children:(0,W.jsx)(R.t,{onSubmit:cl,isSubmitting:el,initialData:{track_name:null===He||void 0===He?void 0:He.track_name,track_id:null===He||void 0===He?void 0:He.track_id,track_url:null===He||void 0===He?void 0:He.track_url}})}),!(null===He||void 0===He||!He.username)&&(0,W.jsxs)(r.Z,{title:Le("order.receiver"),children:[(0,W.jsxs)("div",{className:"customer-info",children:[(0,W.jsx)("span",{className:"title",children:Le("name")}),(0,W.jsxs)("span",{className:"description",children:[(0,W.jsx)(M.HHm,{}),null===He||void 0===He?void 0:He.username]})]}),(0,W.jsxs)("div",{className:"customer-info",children:[(0,W.jsx)("span",{className:"title",children:Le("phone")}),(0,W.jsxs)("span",{className:"description",children:[(0,W.jsx)(M.lfG,{}),null===He||void 0===He?void 0:He.phone]})]})]}),!(null===He||void 0===He||!He.user)&&(0,W.jsx)(r.Z,{children:(0,W.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[Pe?(0,W.jsx)(x.Z.Avatar,{size:64,shape:"square"}):(0,W.jsx)(j.C,{shape:"square",size:64,src:null===He||void 0===He||null===(ge=He.user)||void 0===ge?void 0:ge.img}),(0,W.jsx)("h5",{className:"customer-name",children:Pe?(0,W.jsx)(x.Z.Button,{size:20,style:{width:70}}):(null===He||void 0===He||null===(fe=He.user)||void 0===fe?void 0:fe.firstname)+" "+((null===He||void 0===He||null===(be=He.user)||void 0===be?void 0:be.lastname)||"")}),(0,W.jsxs)("div",{className:"customer-info-detail",children:[(0,W.jsxs)("div",{className:"customer-info",children:[(0,W.jsx)("span",{className:"title",children:Le("phone")}),(0,W.jsxs)("span",{className:"description",children:[(0,W.jsx)(M.lfG,{}),Pe?(0,W.jsx)(x.Z.Button,{size:16}):null!==He&&void 0!==He&&null!==(_e=He.user)&&void 0!==_e&&_e.phone?(0,$.Z)(null===He||void 0===He||null===(ke=He.user)||void 0===ke?void 0:ke.phone):"none"]})]}),(0,W.jsxs)("div",{className:"customer-info",children:[(0,W.jsx)("span",{className:"title",children:Le("email")}),(0,W.jsxs)("span",{className:"description",children:[(0,W.jsx)(B.ixJ,{}),Pe?(0,W.jsx)(x.Z.Button,{size:16}):(0,O.Z)(null===He||void 0===He||null===(Ne=He.user)||void 0===Ne?void 0:Ne.email)]})]}),(0,W.jsxs)("div",{className:"customer-info",children:[(0,W.jsx)("span",{className:"title",children:Le("registration.date")}),(0,W.jsxs)("span",{className:"description",children:[(0,W.jsx)(M.yoA,{}),Pe?(0,W.jsx)(x.Z.Button,{size:16}):A()(null===He||void 0===He||null===(we=He.user)||void 0===we?void 0:we.created_at).format("DD-MM-YYYY, hh:mm")]})]}),(0,W.jsxs)("div",{className:"customer-info",children:[(0,W.jsx)("span",{className:"title",children:Le("orders.count")}),(0,W.jsx)("span",{className:"description",children:Pe?(0,W.jsx)(x.Z.Button,{size:16}):(0,W.jsx)(p.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===He||void 0===He||null===(Ie=He.user)||void 0===Ie?void 0:Ie.orders_count)||0})})]}),(0,W.jsxs)("div",{className:"customer-info",children:[(0,W.jsx)("span",{className:"title",children:Le("spent.since.registration")}),(0,W.jsx)("span",{className:"description",children:Pe?(0,W.jsx)(x.Z.Button,{size:16}):(0,W.jsx)(p.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,F.Z)(null===He||void 0===He||null===(Se=He.user)||void 0===Se?void 0:Se.orders_sum_price,null===qe||void 0===qe?void 0:qe.symbol)})})]})]})]})}),(null===He||void 0===He?void 0:He.review)&&!Pe&&(0,W.jsx)(r.Z,{title:Le("messages"),children:(0,W.jsxs)("div",{className:"order-message",children:[(0,W.jsx)("span",{className:"message",children:null===He||void 0===He||null===(Ce=He.review)||void 0===Ce?void 0:Ce.comment}),(0,W.jsx)(n.Z,{className:"w-100 justify-content-end",children:(0,W.jsx)("span",{className:"date",children:A()(null===He||void 0===He||null===(Ye=He.review)||void 0===Ye?void 0:Ye.created_at).format("YYYY-MM-DD HH:mm")})})]})})]})}),(0,W.jsx)(v.Z,{span:24,children:(0,W.jsxs)(r.Z,{className:"w-100 order-table",title:Le("order.products"),children:[(0,W.jsx)(y.Z,{}),(0,W.jsx)(o.Z,{ref:Ee,scroll:{x:!0},columns:nl,dataSource:(null===(ze=De.data)||void 0===ze?void 0:ze.details)||[],loading:Pe,rowKey:e=>e.id,pagination:!1,expandable:{expandedRowRender:e=>{if(null===e||void 0===e||!e.replace_stock)return;const l=[{title:Le("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.id}},{title:Le("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,d,t,o,a;return(0,W.jsxs)(n.Z,{direction:"vertical",className:"relative",children:[null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d||null===(t=d.translation)||void 0===t?void 0:t.title,null===l||void 0===l||null===(o=l.replace_stock)||void 0===o||null===(a=o.extras)||void 0===a?void 0:a.map((e=>{var l,i,d;return(0,W.jsxs)(s.Z,{children:[null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:Le("image"),dataIndex:"img",key:"img",render:(e,l)=>{var i,d;return(0,W.jsx)(t.Z,{src:(0,N.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Le("price"),dataIndex:"price",key:"price",render:(e,l)=>{var i;return(0,F.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.price,null===qe||void 0===qe?void 0:qe.symbol)}},{title:Le("quantity"),dataIndex:"replace_quantity",key:"replace_quantity",render:(e,l)=>{var i,d;return(0,W.jsx)("span",{children:e*((null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.interval)||1)})}},{title:Le("discount"),dataIndex:"discount",key:"discount",render:(e,l)=>{var i,d;return(0,F.Z)(null!==(i=null===l||void 0===l||null===(d=l.replace_stock)||void 0===d?void 0:d.discount)&&void 0!==i?i:0,null===qe||void 0===qe?void 0:qe.symbol)}},{title:Le("tax"),dataIndex:"tax",key:"tax",render:(e,l)=>{var i;return(0,F.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.tax,null===qe||void 0===qe?void 0:qe.symbol)}},{title:Le("total.price"),dataIndex:"total_price",key:"total_price",render:(e,l)=>{var i;return(0,F.Z)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.total_price,null===qe||void 0===qe?void 0:qe.symbol)}},{title:Le("note"),dataIndex:"note",key:"note",render:e=>e||"--"}];return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,W.jsx)(Z.Z,{style:{padding:"10px",margin:"10px 0 50px 0",border:"2px solid #cad2de",borderRadius:"30%"},rotate:90})}),(0,W.jsx)(o.Z,{columns:l,dataSource:[e],pagination:!1})]})},expandIcon:e=>{let{expanded:l,onExpand:i,record:d}=e;return(0,W.jsx)(Z.Z,{onClick:e=>i(d,e),rotate:90})},defaultExpandedRowKeys:["0"]}}),(0,W.jsxs)(n.Z,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,W.jsxs)("div",{children:[(0,W.jsxs)("span",{children:[Le("delivery.fee"),":"]}),(0,W.jsx)("br",{}),(0,W.jsxs)("span",{children:[Le("order.tax"),":"]}),(0,W.jsx)("br",{}),(0,W.jsxs)("span",{children:[Le("product"),":"]}),(0,W.jsx)("br",{}),(0,W.jsxs)("span",{children:[Le("service.fee"),":"]}),(0,W.jsx)("br",{}),(0,W.jsxs)("span",{children:[Le("discount"),":"]}),(0,W.jsx)("br",{}),(0,W.jsxs)("span",{children:[Le("coupon.price"),":"]}),(0,W.jsx)("br",{}),(0,W.jsxs)("span",{children:[Le("tax"),":"]}),(0,W.jsx)("br",{}),(0,W.jsxs)("h3",{children:[Le("total.price"),":"]})]}),(0,W.jsxs)("div",{children:[(0,W.jsx)("span",{children:(0,F.Z)(null!==(Fe=null===He||void 0===He?void 0:He.delivery_fee)&&void 0!==Fe?Fe:0,null===qe||void 0===qe?void 0:qe.symbol)}),(0,W.jsx)("br",{}),(0,W.jsx)("span",{children:(0,F.Z)(null===He||void 0===He?void 0:He.total_tax,null===qe||void 0===qe?void 0:qe.symbol)}),(0,W.jsx)("br",{}),(0,W.jsx)("span",{children:(0,F.Z)(null===He||void 0===He?void 0:He.origin_price,null===qe||void 0===qe?void 0:qe.symbol)}),(0,W.jsx)("br",{}),(0,W.jsx)("span",{children:(0,F.Z)(null===He||void 0===He?void 0:He.service_fee,null===qe||void 0===qe?void 0:qe.symbol)}),(0,W.jsx)("br",{}),(0,W.jsxs)("span",{children:["-"," ",(0,F.Z)(null===He||void 0===He?void 0:He.total_discount,null===qe||void 0===qe?void 0:qe.symbol)]}),(0,W.jsx)("br",{}),(0,W.jsxs)("span",{children:["- ",(0,F.Z)(null===He||void 0===He?void 0:He.coupon_price,null===qe||void 0===qe?void 0:qe.symbol)]}),(0,W.jsx)("br",{}),(0,W.jsx)("span",{children:(0,F.Z)(null===He||void 0===He?void 0:He.tax,null===qe||void 0===qe?void 0:qe.symbol)}),(0,W.jsx)("br",{}),(0,W.jsx)("h3",{ref:Ae,children:(0,F.Z)(null===He||void 0===He?void 0:He.total_price,null===qe||void 0===qe?void 0:qe.symbol)})]})]})]})})]}),Ve&&(0,W.jsx)(S.Z,{orderId:Ve,handleCancel:ol,refetchPage:al}),Ge&&(0,W.jsx)(C.Z,{orderDetails:Ge,handleCancel:ol}),Ke&&(0,W.jsx)(q.Z,{id:Ke,handleCancel:ol}),il&&(0,W.jsx)(ee,{orderId:Ue,handleCancel:()=>dl(!1),transactionDetails:null===He||void 0===He?void 0:He.transaction,fetchOrder:al})]})}},88852:(e,l,i)=>{i.d(l,{Z:()=>p});var d=i(47313),n=i(10976),s=i(9274),t=i(59491),o=i(68197),a=i(59624),r=i(2717),c=i(62412),v=i(90954),u=i(24511),x=i(94291),m=i(89281),h=i(58328),j=i(46417);function p(e){var l;let{orderDetails:i,handleCancel:p}=e;const{t:y}=(0,u.$)(),{activeMenu:Z}=(0,r.v9)((e=>e.menu),r.wU),{deliverymans:g}=(0,r.v9)((e=>e.deliveryman),r.wU),[f]=n.Z.useForm(),b=(0,r.I0)(),[_,k]=(0,d.useState)(!1);(0,d.useEffect)((()=>{b((0,x.EH)())}),[]);return(0,j.jsx)(s.Z,{visible:!!i,title:i.title,onCancel:p,footer:[(0,j.jsx)(t.Z,{type:"primary",onClick:()=>f.submit(),loading:_,children:y("save")}),(0,j.jsx)(t.Z,{type:"default",onClick:p,children:y("cancel")})],children:(0,j.jsx)(n.Z,{form:f,layout:"vertical",onFinish:e=>{const l={deliveryman:e.deliveryman.value};k(!0),c.Z.updateDelivery(i.id,l).then((()=>{p(),b((0,v.xo)(Z))})).finally((()=>k(!1)))},initialValues:{deliveryman:null===(l=i.deliveryman)||void 0===l?void 0:l.id},children:(0,j.jsx)(o.Z,{gutter:12,children:(0,j.jsx)(a.Z,{span:24,children:(0,j.jsx)(n.Z.Item,{label:y("deliveryman"),name:"deliveryman",rules:[{required:!0,message:y("required")}],children:(0,j.jsx)(m.h,{fetchOptions:e=>{const l={perPage:10,page:1,search:e};return h.Z.getDeliverymans(l).then((e=>e.data.map((e=>({label:e.firstname,value:e.id})))))}})})})})})})}},27107:(e,l,i)=>{i.d(l,{Z:()=>k});var d=i(47313),n=i(35432),s=i(10976),t=i(9274),o=i(59491),a=i(68197),r=i(59624),c=i(66672),v=i(46155),u=i(74294),x=i(2717),m=i(24511),h=i(62412),j=i(51282),p=i(73431),y=i(20052),Z=i(12019),g=i(70816),f=i.n(g),b=i(46417);const{Panel:_}=n.Z;function k(e){var l;let{orderId:i,handleCancel:g,refetchPage:k}=e;const{statusList:N}=(0,x.v9)((e=>e.orderStatus),x.wU),{defaultLang:w,languages:I}=(0,x.v9)((e=>e.formLang),x.wU),[S]=s.Z.useForm(),{t:C}=(0,m.$)(),Y=(0,d.useRef)(null),[z,F]=(0,d.useState)(!1),[D,q]=(0,d.useState)(!1),[M,B]=(0,d.useState)(null!==N&&void 0!==N&&N.length?N.map((e=>({value:null===e||void 0===e?void 0:e.name,label:C(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))):[]),[H,L]=(0,d.useState)(null),[U,T]=(0,d.useState)(null),[A,E]=(0,d.useState)(null),[O,P]=(0,d.useState)(null);(0,d.useEffect)((()=>{F(!0),h.Z.getById(i).then((e=>{var l,i,d,n;L(e.data),T(null===(l=e.data)||void 0===l||null===(i=l.notes)||void 0===i?void 0:i.filter((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)}))),P(null===(d=e.data)||void 0===d?void 0:d.status),S.setFieldsValue({status:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.status})})).finally((()=>F(!1)))}),[i]),(0,d.useEffect)((()=>{var e,l;if("pause"===(null===H||void 0===H?void 0:H.status))return void B(null===N||void 0===N?void 0:N.map((e=>({value:null===e||void 0===e?void 0:e.name,label:C(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))));const i=N.findIndex((e=>e.name===(null===H||void 0===H?void 0:H.status))),d=i>=0?[N[i],i<N.length-1?"pause"===(null===(e=N[i+1])||void 0===e?void 0:e.name)?N[i+2]:N[i+1]:null]:[i<N.length-1?N[i+1]:null];var n;("on_a_way"===(null===(l=N[i])||void 0===l?void 0:l.name)&&d.push(N[i+3]),null!==N&&void 0!==N&&N.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))&&(null===d||void 0===d||d.push(null===N||void 0===N||null===(n=N.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))||void 0===n?void 0:n[0]));d.push({name:"canceled",id:8,active:!0,sort:(null===N||void 0===N?void 0:N.length)+1}),B(d.filter(Boolean).map((e=>({value:null===e||void 0===e?void 0:e.name,label:C(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))))}),[H]);const R=e=>{const l=Object.entries(e).filter((e=>{let[l,i]=e;return!!i}));if(0!==(null===l||void 0===l?void 0:l.length))return Object.fromEntries(l)};return(0,d.useEffect)((()=>{var e;S.setFieldsValue({["title[".concat(w||"en","]")]:null===A||void 0===A||null===(e=A.title)||void 0===e?void 0:e[w||"en"]})}),[w]),(0,b.jsx)(t.Z,{visible:!!i,title:[C("order.status")],onCancel:g,footer:[(0,b.jsx)(o.Z,{type:"primary",onClick:()=>S.submit(),loading:D,children:C("save")},"save-form"),(0,b.jsx)(o.Z,{type:"default",onClick:g,children:C("cancel")},"cansel-modal")],children:z?(0,b.jsx)(j.Z,{}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(s.Z,{form:S,layout:"vertical",onFinish:e=>{var l;let i=null;q(!0),A&&(null===e||void 0===e?void 0:e.status)===(null===H||void 0===H?void 0:H.status)&&(i={...Object.assign({},...I.map((l=>({[l.locale]:e["title[".concat(l.locale,"]")]}))))},i=R(i));const d=R({...Object.assign({},...I.map((l=>({[l.locale]:e["note[".concat(l.locale,"]")]}))))}),n=d?{title:d}:null,s=(null===H||void 0===H?void 0:H.status)===(null===e||void 0===e?void 0:e.status)?null===H||void 0===H||null===(l=H.notes)||void 0===l?void 0:l.filter((l=>(null===l||void 0===l?void 0:l.status)===(null===e||void 0===e?void 0:e.status))).flatMap((e=>{var l;return null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((e,l)=>l===(null===A||void 0===A?void 0:A.index)?{...e,title:{...null===e||void 0===e?void 0:e.title,...i}}:e))})).filter(Boolean):[],t={status:null===e||void 0===e?void 0:e.status,notes:[...s,n].filter(Boolean)};h.Z.updateStatus(H.id,t).then((()=>{g(),k()})).finally((()=>q(!1)))},name:"order-status-change-form",children:[(0,b.jsx)(a.Z,{gutter:12,style:{marginBottom:"20px"},children:(0,b.jsx)(r.Z,{span:24,children:(0,b.jsx)(p.Z,{})})}),!(null===H||void 0===H||null===(l=H.notes)||void 0===l||!l.some((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)})))&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.Z,{children:null===U||void 0===U?void 0:U.map((e=>{var l;return(0,b.jsx)(_,{header:C(null===e||void 0===e?void 0:e.status),children:(null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((l,i)=>{var d,n,t;return(0,b.jsxs)(a.Z,{style:{marginBottom:"15px",display:"flex",justifyContent:"space-between"},gutter:12,children:[(0,b.jsxs)(r.Z,{span:(null===e||void 0===e?void 0:e.status)===(null===H||void 0===H?void 0:H.status)&&O===(null===H||void 0===H?void 0:H.status)?22:24,children:[(0,b.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,b.jsxs)("span",{style:{marginTop:"3px"},children:[i+1,"."," "]}),(0,b.jsxs)("div",{style:{width:"100%"},children:[(0,b.jsx)("p",{style:{margin:0,fontSize:"15px",wordBreak:"break-all"},hidden:(null===A||void 0===A?void 0:A.orderId)===(null===e||void 0===e?void 0:e.id)&&(null===A||void 0===A?void 0:A.index)===i&&(null===H||void 0===H?void 0:H.status)===O,children:(null===l||void 0===l||null===(d=l.title)||void 0===d?void 0:d[w||"en"])||"--"}),(0,b.jsx)(s.Z.Item,{name:"title[".concat(w||"en","]"),hidden:(null===A||void 0===A?void 0:A.orderId)!==(null===e||void 0===e?void 0:e.id)||(null===A||void 0===A?void 0:A.index)!==i||(null===H||void 0===H?void 0:H.status)!==O,children:(0,b.jsx)(c.Z.TextArea,{maxLength:200,style:{width:"100%"},rows:Math.floor((null===l||void 0===l||null===(n=l.title)||void 0===n||null===(t=n[w||"en"])||void 0===t?void 0:t.length)/41||0)+1,ref:Y},i)})]})]}),(0,b.jsx)("p",{style:{fontSize:"12px",margin:0,float:"right"},children:f()(null===l||void 0===l?void 0:l.created_at).format("DD-MM-YYYY HH:mm")})]}),(null===e||void 0===e?void 0:e.status)===(null===H||void 0===H?void 0:H.status)&&(null===H||void 0===H?void 0:H.status)===O&&(0,b.jsx)(r.Z,{span:2,children:(null===A||void 0===A?void 0:A.orderId)===(null===e||void 0===e?void 0:e.id)&&i===(null===A||void 0===A?void 0:A.index)?(0,b.jsx)(o.Z,{type:"primary",icon:(0,b.jsx)(y.Z,{}),size:"small",onClick:()=>S.submit(),loading:D}):(null===e||void 0===e?void 0:e.status)===(null===H||void 0===H?void 0:H.status)&&(0,b.jsx)(o.Z,{icon:(0,b.jsx)(Z.Z,{}),size:"small",onClick:()=>{var d;Y.current.focus(),E({orderId:null===e||void 0===e?void 0:e.id,index:i,title:null===l||void 0===l?void 0:l.title}),S.setFieldsValue({["title[".concat(w||"en","]")]:null===l||void 0===l||null===(d=l.title)||void 0===d?void 0:d[w||"en"]})}})})]},i)})))||"--"},null===e||void 0===e?void 0:e.id)}))}),(0,b.jsx)(v.Z,{})]}),(0,b.jsxs)(a.Z,{gutter:12,children:[(0,b.jsx)(r.Z,{span:24,children:(0,b.jsx)(s.Z.Item,{label:C("status"),name:"status",rules:[{required:!0,message:C("required")}],children:(0,b.jsx)(u.Z,{options:M,onSelect:e=>P(e)})})}),(0,b.jsx)(r.Z,{span:24,children:I.map((e=>(0,b.jsx)(s.Z.Item,{name:"note[".concat(null===e||void 0===e?void 0:e.locale,"]"),label:C("note"),hidden:(null===e||void 0===e?void 0:e.locale)!==w,children:(0,b.jsx)(c.Z.TextArea,{maxLength:200})},"note_".concat(null===e||void 0===e?void 0:e.id))))})]})]})})})}},72944:(e,l,i)=>{i.d(l,{Z:()=>C});var d=i(84697),n=i(83999),s=i(9274),t=i(59491),o=i(77181),a=i(68197),r=i(59624),c=i(66204),v=i(47313),u=i(24511),x=i(62412),m=i(51282),h=i(58821),j=i(2717),p=i(97421),y=i(18478),Z=i(17649),g=i(66461),f=i(22539),b=i(3394),_=i(57864),k=i(70816),N=i.n(k),w=i(46417);const{Step:I}=n.Z,S=()=>(0,w.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,w.jsx)("img",{src:y,width:"50",alt:"Pin"})}),C=e=>{var l,i,y;let{id:k,handleCancel:C}=e;const{t:Y}=(0,u.$)(),[z,F]=(0,v.useState)(null),[D,q]=(0,v.useState)(null),[M,B]=(0,v.useState)(null),{settings:H}=(0,j.v9)((e=>e.globalSettings),j.wU),L=(0,Z.Z)(H),[U,T]=(0,v.useState)(0),[A,E]=(0,v.useState)({lat:null===L||void 0===L?void 0:L.lat,lng:null===L||void 0===L?void 0:L.lng}),[O,P]=(0,v.useState)([{id:0,name:"new",icon:(0,w.jsx)(g.Z,{})},{id:1,name:"accepted",icon:(0,w.jsx)(h.IQF,{})},{id:2,name:"ready",icon:(0,w.jsx)(f.TkG,{})},{id:3,name:"on_a_way",icon:(0,w.jsx)(b.Akc,{})},{id:4,name:"delivered",icon:(0,w.jsx)(b.kme,{})}]);const{google_map_key:R}=(0,j.v9)((e=>e.globalSettings.settings),j.wU);return(0,v.useEffect)((()=>{F(!0),x.Z.getById(k).then((e=>{var l,i,d,n,s,t,o;let{data:a}=e;P("canceled"===a.status?[{id:1,name:"new",icon:(0,w.jsx)(g.Z,{})},{id:5,name:"canceled",icon:(0,w.jsx)(_.SV5,{})}]:O),T("canceled"===a.status?1:null===(l=O.find((e=>e.name===a.status)))||void 0===l?void 0:l.id);const r=null!==(i=null!==(d=null!==(n=null===a||void 0===a||null===(s=a.address)||void 0===s?void 0:s.location)&&void 0!==n?n:null===a||void 0===a||null===(t=a.my_address)||void 0===t?void 0:t.location)&&void 0!==d?d:null===a||void 0===a||null===(o=a.delivery_point)||void 0===o?void 0:o.location)&&void 0!==i?i:{latitude:null===L||void 0===L?void 0:L.lat,longitude:null===L||void 0===L?void 0:L.lng};E({lat:Number(null===r||void 0===r?void 0:r.latitude),lng:Number(null===r||void 0===r?void 0:r.longitude)}),B("canceled"===a.status?"error":"success"),q(a)})).finally((()=>{F(!1)}))}),[]),(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(s.Z,{visible:!!k,title:Y("show.locations"),closable:!0,onCancel:C,style:{minWidth:"80vw"},footer:[(0,w.jsx)(t.Z,{type:"default",onClick:C,children:Y("cancel")},"cancelBtn")],children:z?(0,w.jsx)(m.Z,{}):(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(n.Z,{current:U,status:M,className:"mb-5",children:null===O||void 0===O?void 0:O.map(((e,l)=>(0,w.jsx)(I,{title:Y(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+l)))}),(0,w.jsxs)(a.Z,{gutter:12,children:[(0,w.jsxs)(r.Z,{span:12,children:[(0,w.jsxs)("h3",{children:[Y("order.id")," #",null===D||void 0===D?void 0:D.id]}),(0,w.jsxs)("p",{children:[(0,w.jsx)(h.D73,{})," ",N()(null===D||void 0===D?void 0:D.created_at).format("YYYY-MM-DD HH:mm")]}),(0,w.jsxs)("p",{children:[Y("scheduled.at")," ",null===D||void 0===D?void 0:D.delivery_date]})]}),(0,w.jsxs)(r.Z,{span:12,children:[(0,w.jsxs)("p",{children:[Y("status")," ","new"===(null===D||void 0===D?void 0:D.status)?(0,w.jsx)(c.Z,{color:"blue",children:Y(null===D||void 0===D?void 0:D.status)}):"canceled"===(null===D||void 0===D?void 0:D.status)?(0,w.jsx)(c.Z,{color:"error",children:Y(null===D||void 0===D?void 0:D.status)}):(0,w.jsx)(c.Z,{color:"cyan",children:Y(null===D||void 0===D?void 0:D.status)})]}),(0,w.jsxs)("p",{children:[Y("payment.method")," ",(0,w.jsx)("strong",{children:null===D||void 0===D||null===(l=D.transaction)||void 0===l||null===(i=l.payment_system)||void 0===i?void 0:i.tag})]}),(0,w.jsxs)("p",{children:[Y("order.type")," ",(0,w.jsx)("strong",{children:null===D||void 0===D?void 0:D.delivery_type})]}),(0,w.jsxs)("p",{children:[Y("payment.type")," ",(0,w.jsx)("strong",{children:null===D||void 0===D||null===(y=D.transaction)||void 0===y?void 0:y.status})]})]}),(0,w.jsxs)(r.Z,{span:24,className:"mt-5",children:[(0,w.jsx)("h4",{children:Y("map")}),(0,w.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,w.jsx)(d.ZP,{bootstrapURLKeys:{key:R?p.kr:R},defaultZoom:10,center:null!==A&&void 0!==A?A:L,options:{fullscreenControl:!1},children:(0,w.jsx)(S,{lat:null===A||void 0===A?void 0:A.lat,lng:null===A||void 0===A?void 0:A.lng})})})]})]})]})})})}},18478:(e,l,i)=>{e.exports=i.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);