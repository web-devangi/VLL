"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6028],{89281:function(e,t,n){n.d(t,{h:function(){return f}});var a=n(1413),r=n(29439),i=n(45987),o=n(47313),l=n(12279),s=n.n(l),u=n(74294),c=n(72652),d=n(46417),v=["fetchOptions","debounceTimeout","onClear","refetchOptions"],f=function(e){var t=e.fetchOptions,n=e.debounceTimeout,l=void 0===n?400:n,f=e.onClear,p=e.refetchOptions,h=void 0!==p&&p,Z=(0,i.Z)(e,v),m=(0,o.useState)(!1),x=(0,r.Z)(m,2),g=x[0],y=x[1],j=(0,o.useState)([]),b=(0,r.Z)(j,2),w=b[0],C=b[1],k=(0,o.useMemo)((function(){return s()((function(e){C([]),y(!0),t(e).then((function(e){C(e),y(!1)}))}),l)}),[t,l]);return(0,d.jsx)(u.Z,(0,a.Z)((0,a.Z)({showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:k,onClear:function(){k(""),f&&f()},notFoundContent:g?(0,d.jsx)(c.Z,{size:"small"}):"no results"},Z),{},{options:w,onFocus:function(){w.length&&!h||k("")}}))}},6028:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var a=n(29439),r=n(47313),i=n(73591),o=n(24511),l=n(36636),s=n(4942),u=n(93433),c=n(1413),d=n(45705),v=n(26824),f=n(66204),p=n(59491),h=n(77181),Z=n(78508),m=n(9274),x=n(45464),g=n(15861),y=n(87757),j=n.n(y),b=n(10976),w=n(89281),C=n(90954),k=n(2717),S=n(47647),I=n(97890),_=n(55768),q=n(46417);function O(e){var t=e.isModalOpen,n=e.handleCancel,i=(0,o.$)().t,l=b.Z.useForm(),d=(0,a.Z)(l,1)[0],v=(0,r.useState)(!1),f=(0,a.Z)(v,2),h=f[0],Z=f[1],x=(0,k.v9)((function(e){return e.menu}),k.wU).activeMenu,y=(0,k.I0)(),O=(0,I.s0)();function T(){return T=(0,g.Z)(j().mark((function e(t){var n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={search:0!==t.length?t:null,perPage:10,type:"main"},e.abrupt("return",S.Z.search(n).then((function(e){return e.data.map((function(e){var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))})));case 2:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}return(0,q.jsx)(m.Z,{visible:t,title:i("add.category"),onCancel:n,footer:[(0,q.jsx)(p.Z,{type:"primary",onClick:function(){return y((0,C.bL)({url:"seller/category/add",id:"seller/category/add",name:i("edit.category")})),void O("/seller/category/add")},loading:h,icon:(0,q.jsx)(_.Z,{}),children:i("add.new.category")},"add.new"),(0,q.jsx)(p.Z,{type:"primary",onClick:function(){return d.submit()},loading:h,children:i("save")},"save.from"),(0,q.jsx)(p.Z,{type:"default",onClick:n,children:i("cancel")},"cancel.form")],children:(0,q.jsx)(b.Z,{layout:"vertical",name:"user-address",form:d,onFinish:function(e){var t=(0,c.Z)((0,c.Z)({},Object.assign.apply(Object,[{}].concat((0,u.Z)(e.title.map((function(e,t){return(0,s.Z)({},"categories[".concat(t,"]"),e.value)})))))),{},{type:"main"});Z(!0),S.Z.create(t).then((function(){n(),y((0,C.xo)(x))})).catch((function(e){return console.error(e)})).finally((function(){return Z(!1)}))},children:(0,q.jsx)(b.Z.Item,{name:"title",label:i("title"),rules:[{required:!0,message:"required"}],children:(0,q.jsx)(w.h,{mode:"multiple",placeholder:"Select category",fetchOptions:function(e){return T.apply(this,arguments)},style:{minWidth:150}})})})})}var T=n(12019),M=n(54757),P=n(23560),F=n(69658),U=n(74580),z=n(53233),N=n(13945),A=n(80314),K=n(71810),W=n(4901),$=n(55940),L=n(81218),R={type:"category"};function V(e){var t,n,i,l=e.parentId,g=e.activeTab,y=void 0===g?"request":g,j=(0,o.$)().t,b=(0,r.useState)(!1),w=(0,a.Z)(b,2),S=w[0],_=w[1],V=(0,r.useContext)(U._).setIsModalVisible,E=(0,r.useState)(!1),H=(0,a.Z)(E,2),B=H[0],D=H[1],G=(0,r.useState)(!1),J=(0,a.Z)(G,2),Q=J[0],X=J[1],Y=(0,r.useState)(""),ee=(0,a.Z)(Y,2),te=ee[0],ne=ee[1],ae=(0,r.useState)(null),re=(0,a.Z)(ae,2),ie=re[0],oe=re[1],le=(0,k.I0)(),se=(0,I.s0)(),ue=(0,k.v9)((function(e){return e.menu}),k.wU).activeMenu,ce=(0,k.v9)((function(e){return e.requestModels}),k.wU),de=ce.data,ve=ce.meta,fe=ce.loading,pe=ce.params,he=ue.data,Ze=(0,I.UO)().uuid,me={search:null===he||void 0===he?void 0:he.search,sort:null===he||void 0===he?void 0:he.sort,column:null===he||void 0===he?void 0:he.column,perPage:null===he||void 0===he?void 0:he.perPage,page:null===he||void 0===he?void 0:he.page,parent_id:l,type:"category"},xe=(0,r.useState)([{title:j("name"),dataIndex:"name",key:"name",is_show:!0,render:function(e,t){var n,a,r,i,o;return(0,q.jsxs)(d.Z,{children:[null===(n=t.model)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title," ",(0,q.jsx)(W.WFu,{})," ",null===(r=t.data)||void 0===r?void 0:r.title[null===t||void 0===t||null===(i=t.model)||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.locale]]})}},{title:j("image"),dataIndex:"img",key:"img",is_show:!0,render:function(e,t){var n,a;return(0,q.jsxs)(d.Z,{children:[(0,q.jsx)(v.Z,{src:(0,x.Z)(null===t||void 0===t||null===(n=t.model)||void 0===n?void 0:n.img),alt:"img_gallery",width:100,className:"rounded",preview:!0,placeholder:!0}),(0,q.jsx)(W.WFu,{}),(0,q.jsx)(v.Z,{src:(0,x.Z)(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.images.at(0)),alt:"img_gallery",width:100,className:"rounded",preview:!0,placeholder:!0})]})}},{title:j("status"),dataIndex:"status",is_show:!0,render:function(e){return(0,q.jsx)("div",{children:"new"===e?(0,q.jsx)(f.Z,{color:"blue",children:j(e)}):"canceled"===e?(0,q.jsx)(f.Z,{color:"error",children:j(e)}):(0,q.jsx)(f.Z,{color:"cyan",children:j(e)})})}},{title:j("options"),key:"options",dataIndex:"options",is_show:!0,render:function(e,t){return(0,q.jsxs)(d.Z,{children:[(0,q.jsx)(p.Z,{icon:(0,q.jsx)(T.Z,{}),onClick:function(){return function(e){le((0,C.bL)({url:"seller/category-request/".concat(e.id),id:"request_edit",name:j("request.edit")})),se("/seller/category-request/".concat(e.id),{state:{parentId:l,parentUuid:Ze}})}(t)}}),"cancelled"===(null===t||void 0===t?void 0:t.status)&&(null===t||void 0===t?void 0:t.status_note)&&(0,q.jsx)(p.Z,{icon:(0,q.jsx)(M.Z,{}),onClick:function(){X(!0),ne(t.status_note)}}),(0,q.jsx)($.Z,{danger:!0,type:"primary",onClick:function(){oe([t.id]),V(!0)}})]})}}]),ge=(0,a.Z)(xe,2),ye=ge[0],je=ge[1];(0,r.useEffect)((function(){ue.refetch&&"request"===y&&(le((0,K._7)(me)),le((0,C.A_)(ue)))}),[ue.refetch]),(0,A.Z)((function(){"request"===y&&le((0,K._7)(me))}),[ue.data,y]);var be={selectedRowKeys:ie,onChange:function(e){oe(e)}};return(0,q.jsxs)(h.Z,{title:j("requests"),extra:(0,q.jsx)(d.Z,{wrap:!0,children:(0,q.jsx)(z.Z,{columns:ye,setColumns:je})}),children:[(0,q.jsx)(Z.Z,{scroll:{x:!0},rowSelection:be,columns:null===ye||void 0===ye?void 0:ye.filter((function(e){return e.is_show})),dataSource:de,pagination:{pageSize:pe.perPage,page:(null===(t=ue.data)||void 0===t?void 0:t.page)||1,total:ve.total,defaultCurrent:null===(n=ue.data)||void 0===n?void 0:n.page,current:null===(i=ue.data)||void 0===i?void 0:i.page},rowKey:function(e){return e.key},onChange:function(e,t,n){var a=e.pageSize,r=e.current,i=n.field,o=n.order,l=(0,N.Z)(o);le((0,C.nc)({activeMenu:ue,data:(0,c.Z)((0,c.Z)({},ue.data),{},{perPage:a,page:r,column:i,sort:l})}))},loading:fe}),S&&(0,q.jsx)(O,{handleCancel:function(){return _(!1)},isModalOpen:S}),(0,q.jsx)(F.Z,{click:function(){D(!0);var e=(0,c.Z)({},Object.assign.apply(Object,[{}].concat((0,u.Z)(ie.map((function(e,t){return(0,s.Z)({},"ids[".concat(t,"]"),e)}))))));L.Z.delete(e).then((function(){P.Am.success(j("successfully.deleted")),le((0,K._7)(R)),V(!1)})).finally((function(){return D(!1)}))},text:j("delete"),setText:oe,loading:B}),(0,q.jsxs)(m.Z,{title:"Reject message",closable:!1,visible:Q,footer:null,centered:!0,children:[(0,q.jsx)("p",{children:te}),(0,q.jsx)("div",{className:"d-flex justify-content-end",children:(0,q.jsx)(p.Z,{type:"primary",className:"mr-2",onClick:function(){return X(!1)},children:j("close")})})]})]})}function E(e){var t,n,s=e.parentId,u=e.type,c=(0,o.$)().t,d=(0,I.TH)(),v=(0,k.I0)(),f=(0,k.v9)((function(e){return e.menu}),k.wU).activeMenu,p=(0,r.useState)((null===(t=d.state)||void 0===t?void 0:t.tab)||"list"),h=(0,a.Z)(p,2),Z=h[0],m=h[1];return(0,q.jsxs)(i.Z,{defaultActiveKey:(null===(n=d.state)||void 0===n?void 0:n.tab)||"list",destroyInactiveTabPane:!0,onChange:function(e){v((0,C.xo)(f)),m(e)},children:[(0,q.jsx)(i.Z.TabPane,{tab:c("category.list"),children:(0,q.jsx)(l.Z,{parentId:s,type:u,activeTab:Z})},"list"),(0,q.jsx)(i.Z.TabPane,{tab:c("requests"),children:(0,q.jsx)(V,{parentId:s,type:u,activeTab:Z})},"request")]})}}}]);